<!DOCTYPE html>

<!-- define angular app -->
<html xmlns:ng="http://angularjs.org" id="ng-app" ng-app="ndexApp">

<head>

    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link type="text/css" rel="stylesheet" href="node_modules/qtip2/dist/jquery.qtip.css" />
    <!-- This CODE is to help with IE Explorer problems... -->
    <!--[if lte IE 7]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"></script>
    <![endif]-->

    <!--[if lte IE 8]>
    <script>
        document.createElement('ng-include');
        document.createElement('ng-pluralize');
        document.createElement('ng-view');

        // Optionally these for CSS
        document.createElement('ng:include');
        document.createElement('ng:pluralize');
        document.createElement('ng:view');
    </script>
    <![endif]-->
    <!-- End IE Explorer problem code. -->


    <!-- Load script that may redirect to maint.html -->
    <script src="checkMaintenance.js"></script>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="css/ndex-angular-site.css"/>
    <link rel="stylesheet" href="css/visualize_network.css"/>
    <link rel="styleSheet" href="lib/ui-grid/3.0.1/ui-grid.min.css"/>

    <!-- Scripts -->

    <!-- it is important to load angular *after* jQuery if you want angular to have access
         to full jQuery functionality instead of angular's internal 'lite' version -->
    <script src="node_modules/jquery/dist/jquery.js"></script>

    <!-- Latest version of cytoscape.js for visualization -->
    <script src="node_modules/cytoscape/dist/cytoscape.js"></script>
    <script src="node_modules/lodash/lodash.js"></script>
    <script src="node_modules/ev-emitter/ev-emitter.js"></script>
    <script src="node_modules/imagesloaded/imagesloaded.js"></script>
    <script src="node_modules/qtip2/dist/jquery.qtip.js"></script>
    <script src="node_modules/qtip2/dist/basic/jquery.qtip.js"></script>
    <script src="node_modules/cytoscape/dist/cytoscape.js"></script>
    <script src="node_modules/cytoscape-qtip/cytoscape-qtip.js"></script>




    <!-- Standard Angular API scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-touch.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-route.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-resource.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-sanitize.min.js"></script>

    <!-- angular file upload module -->
    <script src="lib/angular-file-upload/1.1.5/angular-file-upload.min.js"></script>

    <!-- Angular bootstrap -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.12.0/ui-bootstrap-tpls.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"/>


    <!-- ndex scripts -->
    <script src="js/init.js"></script>
    <script src="js/ndex-service-app.js"></script>
    <script src="ndex-webapp-config.js"></script>
    <script src="js/ndex-service-factory.js"></script>
    <script src="js/services/networkService.js"></script>
    <script src="js/ui-service.js"></script>
    <script src="js/app.js"></script>
    <script src="js/services/cx-network-utils.js"></script>
    <script src="js/services/cy-service.js"></script>
    <script src="js/services/provenance-service.js"></script>
    <script src="js/services/sharedProperties.js"></script>

    <!-- page controllers -->
    <script src="js/controllers/main.js"></script>
    <script src="js/controllers/sign-in-controller.js"></script>
    <script src="js/controllers/search-controller.js"></script>
    <script src="js/controllers/network-search-controller.js"></script>
    <script src="js/controllers/network-controller.js"></script>
    <script src="js/controllers/user-controller.js"></script>
    <script src="js/controllers/upload-controller.js"></script>
    <script src="js/controllers/user-search-controller.js"></script>
    <script src="js/controllers/group-controller.js"></script>
    <script src="js/controllers/group-search-controller.js"></script>
    <script src="js/controllers/edit-network-properties-controller.js"></script>
    <script src="js/controllers/manage-network-access.js"></script>
    <script src="js/controllers/manage-bulk-network-access.js"></script>
    <script src="js/controllers/manage-group-access.js"></script>
    <script src="js/controllers/api-controller.js"></script>
    <script src="js/controllers/home-controller.js"></script>
    <script src="js/controllers/network-view-controller.js"></script>

    <!-- newer third party libraries -->
    <script src="lib/vis/3.10/vis.js"></script>
    <script src="lib/ui-grid/3.0.1/ui-grid.min.js"></script>
    <script src="lib/ng-idle/angular-idle.min.js"></script>



    <!-- ngclipboard directives for copying NDEx Citation to clipborad;
         source: https://sachinchoolur.github.io/ngclipboard/ -->
    <script src="lib/ngclipboard-master/dist/clipboard.js"></script>
    <script src="lib/ngclipboard-master/dist/ngclipboard.min.js"></script>

    <!-- to-markdown is taken from https://cdnjs.cloudflare.com/ajax/libs/to-markdown/1.3.0/to-markdown.min.js
         Documented here: https://github.com/domchristie/to-markdown
         Used to convert HTML to markdown with toMarkdown() function
    -->
    <script src='lib/to-markdown/1.3.0/to-markdown.min.js'></script>


    <link rel='stylesheet' href='lib/textAngular-1.5.0/dist/textAngular.css'>
    <script src='lib/textAngular-1.5.0/dist/textAngular-rangy.min.js'></script>
    <script src='lib/textAngular-1.5.0/dist/textAngular-sanitize.min.js'></script>
    <script src='lib/textAngular-1.5.0/dist/textAngular.min.js'></script>

</head>

<!-- define angular controller -->
<body ng-controller="mainController" style="padding-bottom: 20em;height: 100%;">

<!-- template for search bar -->
<script type="text/ng-template" id="search_bar.html">
    <div class="" style="background-color:white; color:black; padding-top:15px; padding-bottom:15px; ">
        <form ng-show="!main.serverIsDown && (!config.requireAuthentication||main.loggedIn)"

              ng-submit="main.search()">
            <div class="input-group">
                <div class="input-group-btn dropdown" style="padding-right:20px;">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" style="border-radius: 5px;">
                        Search Examples <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li class="AlignLeft" style="padding-left: 10px; padding-bottom: 2px;">Search Networks,
                            Users, and Groups:
                        </li>
                        <li class="AlignLeft" style="padding-left: 5px;" ng-repeat="item in main.searchAllExamples">
                            <a ng-click="main.runSearchExample(item)">
                                {{item.description}}
                            </a>
                        </li>

                        <li class="divider"></li>

                        <li class="AlignLeft" style="padding-left: 10px; padding-bottom: 2px;">Search Networks:</li>
                        <li class="AlignLeft" style="padding-left: 5px;"
                            ng-repeat="item in main.searchNetworksExamples">
                            <a ng-click="main.runSearchExample(item)">
                                {{item.description}}
                            </a>
                        </li>

                        <li class="divider"></li>

                        <li class="AlignLeft" ng-show="config.searchDocLink">
                            <a style="color:#428bca; background-color:white;" ng-click="redirectToExternalLink(config.searchDocLink)"><u>{{config.searchDocLink.label}}</u>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="input-group-btn" style="padding-right:20px;">
                    <button type="button" ng-click="main.browse()" class="btn btn-default">Browse</button>
                </div>

                <div class="input-group-btn dropdown AlignLeft">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                            style="border-bottom-right-radius:0px; border-top-right-radius:0px; margin-right: -1px;">
                        {{main.searchType}} <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li><a class="dropdown-toggle"
                               ng-click="main.searchType = 'All'; main.searchString = ''">All NDEx</a></li>
                        <li><a class="dropdown-toggle"
                               ng-click="main.searchType = 'Networks'; main.searchString = ''">Networks</a></li>
                        <li><a class="dropdown-toggle"
                               ng-click="main.searchType = 'Users'; main.searchString = ''">Users</a></li>
                        <li><a class="dropdown-toggle"
                               ng-click="main.searchType = 'Groups'; main.searchString = ''">Groups</a></li>
                    </ul>
                </div>
                <input type="text" class="form-control" placeholder="{{main.getSearchPlaceholder()}}"
                       ng-model="main.searchString">
                <div class="input-group-btn">
                    <button type="submit" class="btn btn-default"><span
                            class="glyphicon glyphicon-search"></span></button>
                </div>
            </div>

        </form>
    </div>
</script>

<!-- Nav Bar -->
<nav class="navbar navbar-fixed-top">
    <div class="container-fluid navbar-ndex navbar-ndex-top" style="padding-right: 20px;">
        <div class="navbar-header">
            <button type="button"
                    class="navbar-toggle"
                    data-toggle="collapse"

                    data-target="#myNavbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand"
               ng-href="{{$location.path()}}"
               ng-click="collapseHamburgerMenu(); redirectToExternalLink(config.logoLink)"
               style="max-height: 40px; padding-top: 0; padding-bottom: 0;">

                <div style="
                    background-image: url('img/NDEx-horizontal-transparent.png');
                    background-repeat: no-repeat;
                    background-position: 0px 10px;
                    width: 120px;
                    height: 40px;
                    margin-left: 5px;
                    margin-right: 0px;
                    background-size: 120px 30px;">
                </div>
            </a>
        </div>

        <div class="navbar-collapse collapse" id="myNavbar">

            <ul class="nav navbar-nav navbar-left">
                <!--
                <li>
                    <a ng-href="{{$location.path()}}"
                       ng-click="collapseHamburgerMenu(); redirectToExternalLink(config.homeLink)">{{config.homeLink.label}}
                    </a>
                </li>
                -->

                <li>
                    <a ng-href="{{$location.path()}}"
                       ng-click="collapseHamburgerMenu(); redirectToExternalLink(config.aboutLink)">{{config.aboutLink.label}}
                    </a>

                </li>
                <li>
                    <a ng-href="{{$location.path()}}"
                       ng-click="collapseHamburgerMenu(); redirectToExternalLink(config.documentationLink)">
                        {{config.documentationLink.label}}
                    </a>
                </li>
                <li>
                    <a ng-href="{{$location.path()}}"
                       ng-click="collapseHamburgerMenu(); redirectToExternalLink(config.apiLink)">
                        {{config.apiLink.label}}
                    </a>
                </li>
                <li>
                    <a ng-href="{{$location.path()}}"
                       ng-click="collapseHamburgerMenu(); redirectToExternalLink(config.reportBugLink)">
                        {{config.reportBugLink.label}}
                    </a>
                </li>
                <li>
                    <a ng-href="{{$location.path()}}"
                       ng-click="collapseHamburgerMenu(); redirectToExternalLink(config.contactUsLink)">
                        {{config.contactUsLink.label}}
                    </a>
                </li>
                <li>
                    <a ng-click="collapseHamburgerMenu(); showNDExCitationInClipboardMessage()"
                       ngclipboard data-clipboard-text="{{NDEx.citation}}">
                        {{config.citeNDEx.label}}
                    </a>

                </li>

            </ul>

            <ul class="nav navbar-nav navbar-right">

                <li ng-click="collapseHamburgerMenu()"
                    ng-show="main.getCurrentNetwork() != null"
                    ng-class="{active:main.url.url().search('/network') != -1}">
                    <a ng-href="{{'#newNetwork/' + main.getCurrentNetwork()}}">New Network</a>
                </li>

                <!--
                                <li ng-click="collapseHamburgerMenu()"
                                    ng-show="main.getCurrentNetwork() != null"
                                    ng-class="{active:main.url.url().search('/network') != -1}">
                                    <a ng-href="{{'#newNetwork/' + main.getCurrentNetwork()}}">New Network</a>
                                </li>
                -->
                <li ng-show="main.getCurrentNetwork() != null">
                    <!--ng-class="{active:main.url.url().search('/network') != -1}">-->
                    <a ng-click="collapseHamburgerMenu(); main.goToCurrentNetwork()">Network</a>
                </li>

                <li ng-show="main.loggedIn">
                    <a ng-click="collapseHamburgerMenu(); main.goToCurrentUser()">MyAccount</a>
                </li>

                <li ng-show="main.loggedIn">
                    <a ng-click="collapseHamburgerMenu(); main.signout()">Sign Out</a>
                </li>

                <li ng-show="!main.loggedIn && !config.requireAuthentication && !main.serverIsDown">
                    <a ng-click="collapseHamburgerMenu(); main.startSignIn()">Sign In</a>
                </li>

            </ul>

        </div>

    </div>
    <!-- Include the search bar -->
    <div class="marginsForNGView" ng-hide="main.hideSearchBar" style="background-color: white;  ">
        <div style="max-width: 1000px; margin-left: auto; margin-right: auto;">
            <ng-include src="'search_bar.html'"></ng-include>
        </div>

    </div>
</nav>

<div id="main" class="container-fluid">
    <!-- angular templating -->
    <!-- this is where content will be injected -->
    <div ng-view class="marginsForNGView"></div>
</div>

<nav class="navbar navbar-ndex navbar-fixed-bottom footer-bar AlignCenter" ng-show="showFooter" >
    <div class='footer-content'>
        Copyright &copy; 2016 Regents of the University of California and The Cytoscape Consortium. All rights
        reserved.
        &nbsp;<a href="http://home.ndexbio.org/disclaimer-license/">Terms & Conditions</a>
    </div>
</nav>

<script>
    $(window).resize(function() {
        $('#cytoscape-canvas').height($(window).height() - 425);
        $("#divNetworkTabs").height($(window).height() - 255);

    });

    $(window).trigger('resize');
</script>

</body>

</html>
