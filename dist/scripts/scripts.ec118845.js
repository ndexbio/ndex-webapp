String.prototype.startsWith||(String.prototype.startsWith=function(a,b){return b=b||0,this.indexOf(a,b)===b}),function(){angular.module("ndexServiceApp",["ngResource","ngRoute"]).config(["$httpProvider",function(a){a.interceptors.push(["$q",function(a){return{responseError:function(b){return 503==b.status&&(b.data="The server is temporarily unable to service your request due to maintenance downtime or capacity problems. Please try again later."),a.reject(b)}}}])}])}();var ndexServiceApp=angular.module("ndexServiceApp");ndexServiceApp.factory("ndexService",["sharedProperties","ndexConfigs","ndexUtility","ndexHelper","$http","$q","$resource",function(a,b,c,d,e,f,g){var h={},i=window.ndexSettings.ndexServerUri;h.getNdexServerUri=function(){return i},h.getNetworkUploadURI=function(){return h.getNdexServerUri()+"/network"},h.sendHTTPRequest=function(a,b,c){e(a).success(function(a,c,d,e,f){b(a,c,d,e,f)}).error(function(a,b,d,e,f){c(a,b,d,e,f)})},h.getServerStatus=function(a,c,d){var e="/admin/status";a?e=e+"?format="+a:e+="?format=standard";var f=b.getGetConfigV2(e,null);this.sendHTTPRequest(f,c,d)},h.getUserByUUIDV2=function(a){var c="/user/"+a,d=b.getGetConfigV2(c,null);return e(d)};var j=g(i+"/user/:identifier:action/:subResource/:sub2Resource/:permissions:subId:status/:skipBlocks:membershipDepth/:blockSize",{identifier:"@identifier",action:"@action",subResource:"@subResource",permissions:"@permissions",status:"@status",subId:"@subId",skipBlocks:"@skipBlocks",blockSize:"@blockSize",membershipDepth:"@membershipDepth"},{getApi:{method:"GET",params:{action:"api"},isArray:!0}});h.getUserApi=function(a,b){j.getApi({},a,b)},h.createUserV2=function(a,c,d){var e=b.getPostConfigV2("/user",a);this.sendHTTPRequest(e,c,d)},h.createUserWithGoogleIdTokenV2=function(a,c,d){var e=gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse(),f="/user?idtoken="+e.id_token,g=a?{userName:a}:null,h=b.getPostConfigV2(f,g);this.sendHTTPRequest(h,c,d)},h.deleteUserV2=function(c,d){var e=a.getCurrentUserId(),f="/user/"+e,g=b.getDeleteConfigV2(f,null);this.sendHTTPRequest(g,c,d)},h.updateUserV2=function(c,d,e){var f=a.getCurrentUserId(),g="/user/"+f;c.website&&(c.website.startsWith("http")||(c.website="http://"+c.website));var h=b.getPutConfigV2(g,c);this.sendHTTPRequest(h,d,e)},h.getUserByUserNameV2=function(a,c,d){var e="/user?username="+a,f=b.getGetConfigV2(e,null);this.sendHTTPRequest(f,c,d)},h.getUserByEmail=function(a,c,d){var e="/user?email="+a,f=b.getGetConfigV2(e,null);this.sendHTTPRequest(f,c,d)},h.authenticateUserV2=function(a,c,d,e){var f={Authorization:"Basic "+btoa(a+":"+c)},g=b.getGetConfigV2("/user?valid=true&setAuthHeader=false",null);g.headers=f,this.sendHTTPRequest(g,d,e)},h.authenticateUserWithGoogleIdToken=function(a,c){var d=gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse(),e={Authorization:"Bearer "+d.id_token},f=b.getGetConfigV2("/user?valid=true&setAuthHeader=false",null);f.headers=e,this.sendHTTPRequest(f,a,c)},h.changePasswordV2=function(c,d,e){var f=a.getCurrentUserId(),g="/user/"+f+"/password",h=b.getPutConfigV2(g,c);this.sendHTTPRequest(h,d,e)},h.emailNewPasswordV2=function(a,c,d){var e="/user/"+a+"/password?forgot=true",f=b.getPutConfigV2(e,null);this.sendHTTPRequest(f,c,d)},h.getUserMembershipInGroupV2=function(a,c,d,e){var f="/user/"+a+"/membership?groupid="+c,g=b.getGetConfigV2(f,null);this.sendHTTPRequest(g,d,e)},h.getUserGroupMembershipsV2=function(a,c,d,e,f,g){var h="/user/"+a+"/membership";h=c?h+"?type="+c+"&start="+d+"&size="+e:h+"?start="+d+"&size="+e;var i=b.getGetConfigV2(h,null);this.sendHTTPRequest(i,f,g)},h.getUserPermissionForNetworkV2=function(a,c,d,e,f){var g="/user/"+a+"/permission?networkid="+c;d&&(g=g+"&directonly="+d);var h=b.getGetConfigV2(g,null);this.sendHTTPRequest(h,e,f)},h.getUserNetworkPermissionsV2=function(a,c,d,e,f,g,h){var i="/user/"+a+"/permission?permission="+c;i=i+"&start="+d+"&size="+e,f&&(i=i+"&directonly="+f);var j=b.getGetConfigV2(i,null);this.sendHTTPRequest(j,g,h)},h.getUserShowCaseNetworksV2=function(a,c,d){var e="/user/"+a+"/showcase",f=b.getGetConfigV2(e,null);this.sendHTTPRequest(f,c,d)},h.getUserAccountPageNetworksV2=function(a,c,d,e,f){var g="/user/"+a+"/networksummary";c>=0&&d>=0&&(g=g+"?offset="+c+"&limit="+d);var h=b.getGetConfigV2(g,null);this.sendHTTPRequest(h,e,f)},h.getNumberOfNetworksInUsersAccountPageV2=function(a,c,d){var e="/user/"+a+"/networkcount",f=b.getGetConfigV2(e,null);this.sendHTTPRequest(f,c,d)},h.getAllNetworkSetsOwnedByUserV2=function(a,c,d,e,f){var g="/user/"+a+"/networksets";c>=0&&d>=0&&(g=g+"?offset="+c+"&limit="+d);var h=b.getGetConfigV2(g,null);this.sendHTTPRequest(h,e,f)};var k=g(i+"/group/:identifier:action/:subResource/:permissionType:subId/:skipBlocks/:blockSize",{identifier:"@identifier",action:"@action",subResource:"@subResource",permissionType:"@permissionType",subId:"@subId",skipBlocks:"@skipBlocks",blockSize:"@blockSize"},{getApi:{method:"GET",params:{action:"api"},isArray:!0}});h.getGroupApi=function(a,b){k.getApi({},a,b)},h.createGroupV2=function(a,c,d){a.website&&(a.website.startsWith("http")||(a.website="http://"+a.website));var e=b.getPostConfigV2("/group",a);this.sendHTTPRequest(e,c,d)},h.updateGroupV2=function(a,c,d){a.website&&(a.website.startsWith("http")||(a.website="http://"+a.website));var e="/group/"+a.externalId,f=b.getPutConfigV2(e,a);this.sendHTTPRequest(f,c,d)},h.deleteGroupV2=function(a,c,d){var e="/group/"+a,f=b.getDeleteConfigV2(e,null);this.sendHTTPRequest(f,c,d)},h.getGroupV2=function(a,c,d){var e="/group/"+a,f=b.getGetConfigV2(e,null);this.sendHTTPRequest(f,c,d)},h.getObjectViaEndPointV2=function(a,c,d){var e=b.getGetConfigWithEndPointV2(a);this.sendHTTPRequest(e,c,d)},h.addOrUpdateGroupMemberV2=function(a,c,d,e,f){var g="/group/"+a+"/membership?userid="+c+"&type="+d,h=b.getPutConfigV2(g,null);this.sendHTTPRequest(h,e,f)},h.removeGroupMemberV2=function(a,c,d,e){var f="/group/"+a+"/membership?userid="+c,g=b.getDeleteConfigV2(f,null);this.sendHTTPRequest(g,d,e)},h.getMembersOfGroupV2=function(a,c,d,e,f,g){var h="/group/"+a+"/membership";h=c?h+"?type="+c+"&start="+d+"&size="+e:h+"?start="+d+"&size="+e;var i=b.getGetConfigV2(h,null);this.sendHTTPRequest(i,f,g)},h.getNetworkPermissionsOfGroupV2=function(a,c,d,e,f,g){var h="/group/"+a+"/permission?permission="+c;h=h+"&start="+d+"&size="+e;var i=b.getGetConfigV2(h,null);this.sendHTTPRequest(i,f,g)};var l=g(i+"/request/:action:identifier",{},{getApi:{method:"GET",params:{action:"api"},isArray:!0}});h.getRequestApi=function(a,b){l.getApi({},a,b)},h.createMembershipRequestV2=function(a,c,d){var e={groupid:a.destinationUUID,type:a.permission};a.message&&(e.message=a.message);var f="/user/"+a.sourceUUID+"/membershiprequest",g=b.getPostConfigV2(f,e);this.sendHTTPRequest(g,c,d)};var m=g(i+"/task/:taskId/:action/:status/",{taskId:"@taskId",status:"@statusType"},{getApi:{method:"GET",params:{action:"api"},isArray:!0}});return h.getTaskApi=function(a,b){m.getApi({},a,b)},h.getUserTasksV2=function(a,c,d,e,f){a||(a="ALL");var g="/task?status="+a+"&start="+c+"&size="+d,h=b.getGetConfigV2(g,null);this.sendHTTPRequest(h,e,f)},h.deleteTaskV2=function(a,c,d){var e="/task/"+a,f=b.getDeleteConfigV2(e,null);this.sendHTTPRequest(f,c,d)},h.deleteTaskNoHandlersV2=function(a){var c="/task/"+a,d=b.getDeleteConfigV2(c,null);return e(d)},h.updateTaskPropertiesV2=function(a,c,d,e){var f="/task/"+a+"/ownerProperties",g=b.getPutConfigV2(f,c);this.sendHTTPRequest(g,d,e)},h.updateTaskPropertiesNoHandlersV2=function(a,c){var d="/task/"+a+"/ownerProperties",f=b.getPutConfigV2(d,c);return e(f)},h.updateRequestPropertiesV2=function(a,c,d,e){var f="/request/"+a+"/properties",g=b.getPutConfigV2(f,c);this.sendHTTPRequest(g,d,e)},h.updateRequestPropertiesNoHandlersV2=function(a,c){var d="/request/"+a+"/properties",f=b.getPutConfigV2(d,c);return e(f)},h.createUserPermissionRequestV2=function(a,c,d,e){var f="/user/"+a+"/permissionrequest",g=b.getPostConfigV2(f,c);this.sendHTTPRequest(g,d,e)},h.createGroupPermissionRequestV2=function(a,c,d,e){var f="/group/"+a+"/permissionrequest",g=b.getPostConfigV2(f,c);this.sendHTTPRequest(g,d,e)},h.getUserPermissionRequestsV2=function(a,c,d,e){var f="/user/"+a+"/permissionrequest";!c||"sent"!==c.toLowerCase()&&"received"!==c.toLowerCase()||(f=f+"?type="+c);var g=b.getGetConfigV2(f,null);this.sendHTTPRequest(g,d,e)},h.getUserMembershipRequestsV2=function(a,c,d,e){var f="/user/"+a+"/membershiprequest";!c||"sent"!==c.toLowerCase()&&"received"!==c.toLowerCase()||(f=f+"?type="+c);var g=b.getGetConfigV2(f,null);this.sendHTTPRequest(g,d,e)},h.acceptOrDenyPermissionRequestV2=function(a,c,d,e,f,g){e=e?encodeURIComponent(e):"";var h="/user/"+a+"/permissionrequest/"+c+"?action="+d+"&message="+e,i=b.getPutConfigV2(h,null);this.sendHTTPRequest(i,f,g)},h.acceptOrDenyPermissionRequestNoHandlersV2=function(a,c,d,f){f=f?encodeURIComponent(f):"";var g="/user/"+a+"/permissionrequest/"+c+"?action="+d+"&message="+f,h=b.getPutConfigV2(g,null);return e(h)},h.acceptOrDenyMembershipRequestV2=function(a,c,d,e,f,g){e=e?encodeURIComponent(e):"";var h="/user/"+a+"/membershiprequest/"+c+"?action="+d+"&message="+e,i=b.getPutConfigV2(h,null);this.sendHTTPRequest(i,f,g)},h.acceptOrDenyMembershipRequestNoHandlersV2=function(a,c,d,f){f=f?encodeURIComponent(f):"";var g="/user/"+a+"/membershiprequest/"+c+"?action="+d+"&message="+f,h=b.getPutConfigV2(g,null);return e(h)},h.deletePermissionRequestV2=function(a,c,d){a&&a.requesterId&&a.externalId||d();var e=a.requesterId,f=a.externalId,g="/user/"+e+"/permissionrequest/"+f,h=b.getDeleteConfigV2(g,null);this.sendHTTPRequest(h,c,d)},h.deletePermissionRequestNoHandlersV2=function(a){var c=a.requesterId,d=a.externalId,f="/user/"+c+"/permissionrequest/"+d,g=b.getDeleteConfigV2(f,null);return e(g)},h.deleteMembershipRequestV2=function(a,c,d){a&&a.requesterId&&a.externalId||d();var e=a.requesterId,f=a.externalId,g="/user/"+e+"/membershiprequest/"+f,h=b.getDeleteConfigV2(g,null);this.sendHTTPRequest(h,c,d)},h.deleteMembershipRequestNoHandlersV2=function(a){var c=a.requesterId,d=a.externalId,f="/user/"+c+"/membershiprequest/"+d,g=b.getDeleteConfigV2(f,null);return e(g)},h.deleteNetworkV2=function(a,c,d){var e="/network/"+a,f=b.getDeleteConfigV2(e,null);this.sendHTTPRequest(f,c,d)},h.deleteNetworkNoHandlersV2=function(a){var c="/network/"+a,d=b.getDeleteConfigV2(c,null);return e(d)},h.getNetworkSummaryV2=function(a,c){var d=f.defer(),g="/network/"+a+"/summary?setAuthHeader=false";c&&(g=g+"&accesskey="+c);var h=b.getGetConfigV2(g,null);h.timeout=d.promise;var i=e(h);return i.abort=function(){d.resolve()},i.finally(function(){i.abort=angular.noop,d=i=null}),i},h.getCompleteNetworkInCXV2=function(a,c,d,e){var f="/network/"+a;c&&(f+="?download=true");var g=b.getGetConfigV2(f,null);this.sendHTTPRequest(g,d,e)},h.setNetworkSystemPropertiesV2=function(a,c,d,f,g){var h="/network/"+a+"/systemproperty",i={};i[c]=d;var j=b.getPutConfigV2(h,i);e(j).success(function(b){f(b,a,c,d)}).error(function(b){g(b,a,c,d)})},h.setNetworkSystemPropertiesNoHandlersV2=function(a,c){var d="/network/"+a+"/systemproperty",f=b.getPutConfigV2(d,c);return e(f)},h.getAllPermissionsOnNetworkV2=function(a,c,d,f,g,h,i){var j="/network/"+a+"/permission?type="+c;d&&(j=j+"&permission="+d),j=j+"&start="+f+"&size="+g;var k=b.getGetConfigV2(j,null);e(k).success(function(b){h(b,a)}).error(function(b){i(b,a)})},h.updateNetworkPermissionV2=function(a,c,d,e,f,g){var h="/network/"+a+"/permission?";"user"===c?h+="userid=":"group"===c&&(h+="groupid="),h=h+d+"&permission="+e;var i=b.getPutConfigV2(h,null);this.sendHTTPRequest(i,f,g)},h.updateNetworkPermissionNoHandlersV2=function(a,c,d,f){var g="/network/"+a+"/permission?";"user"===c?g+="userid=":"group"===c&&(g+="groupid="),g=g+d+"&permission="+f;var h=b.getPutConfigV2(g,null);return e(h)},h.updateNetworkPermissionNoHandlersV2=function(a,c,d,f){var g="/network/"+a+"/permission?";"user"===c?g+="userid=":"group"===c&&(g+="groupid="),g=g+d+"&permission="+f;var h=b.getPutConfigV2(g,null);return e(h)},h.deleteNetworkPermissionV2=function(a,c,d,e,f){var g="/network/"+a+"/permission?";"user"===c?g+="userid=":"group"===c&&(g+="groupid="),g+=d;var h=b.getDeleteConfigV2(g,null);this.sendHTTPRequest(h,e,f)},h.deleteNetworkPermissionNoHandlersV2=function(a,c,d){var f="/network/"+a+"/permission?";"user"===c?f+="userid=":"group"===c&&(f+="groupid="),f+=d;var g=b.getDeleteConfigV2(f,null);return e(g)},h.setNetworkPropertiesV2=function(a,c,d,e){var f="/network/"+a+"/properties",g=b.getPutConfigV2(f,c);this.sendHTTPRequest(g,d,e)},h.setNetworkPropertiesNoHandlersV2=function(a,c){var d="/network/"+a+"/properties",f=b.getPutConfigV2(d,c);return e(f)},h.setNetworkSampleV2=function(a,c,d,e){var f="/network/"+a+"/sample",g=b.getPutConfigV2(f,c);this.sendHTTPRequest(g,d,e)},h.setNetworkSummaryV2=function(a,c,d,e){var f="/network/"+a+"/summary",g=b.getPutConfigV2(f,c);this.sendHTTPRequest(g,d,e)},h.updateNetworkProfileV2=function(a,c,d,e){var f="/network/"+a+"/profile",g=b.getPutConfigV2(f,c);this.sendHTTPRequest(g,d,e)},h.updateNetworkProfileNoHandlersV2=function(a,c){var d="/network/"+a+"/profile",f=b.getPutConfigV2(d,c);return e(f)},h.getNetworkProvenanceV2=function(a,c,d){var e="/network/"+a+"/provenance",f=b.getGetConfigV2(e,null);this.sendHTTPRequest(f,c,d)},h.setNetworkProvenanceV2=function(a,c,d,e){var f="/network/"+a+"/provenance",g=b.getPutConfigV2(f,c);this.sendHTTPRequest(g,d,e)},h.getNetworkAspectAsCXV2=function(a,c,d,e,f){var g="/network/"+a+"/aspect/"+c;d&&(g=g+"?size="+d);var h=b.getGetConfigV2(g,null);this.sendHTTPRequest(h,e,f)},h.getAccessKeyOfNetworkV2=function(a,c,d){var e="/network/"+a+"/accesskey",f=b.getGetConfigV2(e,null);this.sendHTTPRequest(f,c,d)},h.disableOrEnableAccessKeyOnNetworkV2=function(a,c,d,e){var f="/network/"+a+"/accesskey?action="+c,g=b.getPutConfigV2(f,null);this.sendHTTPRequest(g,d,e)},h.cloneNetworkV2=function(a,c,d){var e="/network/"+a+"/copy",f=b.getPostConfigV2(e,null);this.sendHTTPRequest(f,c,d)},h.updateReferenceForAPrecertifiedNetworkV2=function(a,c,d,e){var f="/network/"+a+"/reference",g=b.getPutConfigV2(f,c);this.sendHTTPRequest(g,d,e)},h.createNetworkSetV2=function(a,c,d){var e=b.getPostConfigV2("/networkset",a);this.sendHTTPRequest(e,c,d)},h.updateNetworkSetV2=function(a,c,d,e){var f="/networkset/"+a,g=b.getPutConfigV2(f,c);this.sendHTTPRequest(g,d,e)},h.deleteNetworkSetV2=function(a,c,d){var e="/networkset/"+a,f=b.getDeleteConfigV2(e,null);this.sendHTTPRequest(f,c,d)},h.getNetworkSetV2=function(a,c,d,e){var f="/networkset/"+a;c&&(f=f+"?accesskey="+c);var g=b.getGetConfigV2(f,null);this.sendHTTPRequest(g,d,e)},h.addNetworksToNetworkSetV2=function(a,c,d,e){var f="/networkset/"+a+"/members",g=b.getPostConfigV2(f,c);this.sendHTTPRequest(g,d,e)},h.deleteNetworksFromNetworkSetV2=function(a,c,d,e){var f="/networkset/"+a+"/members",g=b.getDeleteConfigV2(f,c);this.sendHTTPRequest(g,d,e)},h.getAccessKeyOfNetworkSetV2=function(a,c,d){var e="/networkset/"+a+"/accesskey",f=b.getGetConfigV2(e,null);this.sendHTTPRequest(f,c,d)},h.disableOrEnableAccessKeyOnNetworkSetV2=function(a,c,d,e){var f="/networkset/"+a+"/accesskey?action="+c,g=b.getPutConfigV2(f,null);this.sendHTTPRequest(g,d,e)},h.updateNetworkSetSystemPropertiesV2=function(a,c,d,f,g){var h="/networkset/"+a+"/systemproperty",i={};i[c]=d;var j=b.getPutConfigV2(h,i);e(j).success(function(b){f(b,a,c,d)}).error(function(b){g(b,a,c,d)})},h.getUsersByUUIDsV2=function(a){var c=b.getPostConfigV2("/batch/user",a),d=f.defer();c.timeout=d.promise;var g=e(c);return g.abort=function(){d.resolve()},g.finally(function(){g.abort=angular.noop,d=g=null}),g},h.getGroupsByUUIDsV2=function(a){var c=a,d=b.getPostConfigV2("/batch/group",c),g=f.defer();d.timeout=g.promise;var h=e(d);return h.abort=function(){g.resolve()},h.finally(function(){h.abort=angular.noop,g=h=null}),h},h.getNetworkSummariesByUUIDsV2=function(a,c,d,e){var f="/batch/network/summary";c&&(f=f+"?accesskey="+c);var g=b.getPostConfigV2(f,a);this.sendHTTPRequest(g,d,e)},h.getNetworkPermissionsByUUIDsV2=function(a,c,d){var e=b.getPostConfigV2("/batch/network/permission",a);this.sendHTTPRequest(e,c,d)},h.exportNetworksV2=function(a,c,d,e){var f={};f.exportFormat=a,f.networkIds=c;var g=b.getPostConfigV2("/batch/network/export",f);this.sendHTTPRequest(g,d,e)},h.searchUsersV2=function(a,c,d,e,f){void 0!==a&&null!==a||(a="");var g="/search/user?start="+c+"&size="+d,h={searchString:a},i=b.getPostConfigV2(g,h);this.sendHTTPRequest(i,e,f)},h.searchGroupsV2=function(a,c,d,e,f){void 0!==a&&null!==a||(a="");var g="/search/group?start="+c+"&size="+d,h={searchString:a},i=b.getPostConfigV2(g,h);this.sendHTTPRequest(i,e,f)},h.searchNetworksV2=function(a,c,d,e,f){void 0!==a.searchString&&null!==a.searchString||(a.searchString="");var g="/search/network?start="+c+"&size="+d,h=b.getPostConfigV2(g,a);this.sendHTTPRequest(h,e,f)},h.queryNetworkV2=function(a,c,d,e,f,g,h,i,j){var k={searchString:d,searchDepth:e.searchDepth,edgeLimit:f,errorWhenLimitIsOver:h},l="/search/network/"+a;"query"===e.type?(l+="/query",k.directOnly=e.directOnly):l+="/interconnectquery",c&&(l=l+"?accesskey="+c),g&&(l=l+"?save="+g);var m=b.getPostConfigV2(l,k);this.sendHTTPRequest(m,i,j)},h.searchNetworksByGeneProteinV2=function(a,c,d,e,f){null===a.searchString&&(a.searchString="");var g="/search/network/genes?start="+c+"&size="+d,h=b.getPostConfigV2(g,a);this.sendHTTPRequest(h,e,f)},h.requestDoi=function(a,c,d,e){var f=!1;c.hasOwnProperty("isCertified")&&(f=c.isCertified);var g={type:"DOI",networkId:a,properties:c,isCertified:f},h=b.getPostConfigV2("/admin/request",g);this.sendHTTPRequest(h,d,e)},h.cancelDoi=function(a,c,d){var e={type:"Cancel_DOI",networkId:a},f=b.getPostConfigV2("/admin/request",e);this.sendHTTPRequest(f,c,d)},h}]),ndexServiceApp.factory("ndexUtility",function(){var a={};return a.networks=[],a.getAuthHeaderValue=function(){return null===window.currentSignInType?null:"basic"===window.currentSignInType?"Basic "+btoa(window.currentNdexUser.userName+":"+a.getLoggedInUserAuthToken()):"google"===window.currentSignInType?"Bearer "+gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token:null},a.clearUserCredentials=function(){localStorage.removeItem("loggedInUser"),localStorage.clear()},a.checkLocalStorage=function(){return"undefined"!=typeof Storage},a.getUserCredentials=function(){if(a.checkLocalStorage()){if(localStorage.loggedInUser){var b=JSON.parse(localStorage.getItem("loggedInUser"));return null===b?null:{userName:b.userName,externalId:b.externalId,token:b.token}}var c=window.currentNdexUser;return c?{userName:c.userName,externalId:c.externalId,token:""}:null}return null},a.setUserPassword=function(a){var b=JSON.parse(localStorage.getItem("loggedInUser"));b||(b={}),b.token=a,localStorage.setItem("loggedInUser",JSON.stringify(b))},a.setUserInfo=function(a,b,c,d,e){var f=JSON.parse(localStorage.getItem("loggedInUser"));f||(f={}),f.userName=a,f.firstName=b,f.lastName=c,f.externalId=d,f.token=e,null!==e&&localStorage.setItem("loggedInUser",JSON.stringify(f))},a.getLoggedInUserAccountName=function(){var a=JSON.parse(localStorage.getItem("loggedInUser"));return a&&a.userName?a.userName:null},a.getLoggedInUserAuthToken=function(){var a=JSON.parse(localStorage.getItem("loggedInUser"));return a&&a.token?a.token:null},a.addNetwork=function(b){a.networks.push(b),b.terms={},$.each(b.baseTerms,function(a,c){c.network=b,b.terms[a]=c}),$.each(b.functionTerms,function(a,c){c.network=b,b.terms[a]=c}),$.each(b.reifiedEdgeTerms,function(a,c){c.network=b,b.terms[a]=c}),$.each(b.nodes,function(a,c){c.network=b}),$.each(b.edges,function(a,c){c.network=b}),b.nodeCount=Object.keys(b.nodes).length,b.edgeCount=Object.keys(b.edges).length},a.setNetwork=function(b){a.networks=[],a.addNetwork(b)},a.getNetworkId=function(b){return a.networks.indexOf(b)},a.removeNetwork=function(b){a.networks.remove(a.networks.indexOf(b))},a}),ndexServiceApp.factory("cyREST",["ndexConfigs","ndexService","$http",function(a,b,c){var d={};return d.getCyRESTUrl=function(){return"http://localhost:1234"},d.getNdexServerUriHTTP=function(){var a=b.getNdexServerUri();return a&&a.startsWith("https:")&&(a=a.replace("https:","http:")),a},d.getCyRESTPostConfig=function(a,b){return{method:"POST",url:a,data:angular.toJson(b),headers:{"Content-Type":"application/json;charset=utf-8;"}}},d.getCyRESTGetConfig=function(a){return{method:"GET",url:a,headers:{"Content-Type":"application/json;charset=utf-8;"}}},d.sendHTTPRequest=function(a,b,d){c(a).success(function(a,c,d,e,f){b(a,c,d,e,f)}).error(function(a,b,c,e,f){d(a,b,c,e,f)})},d.getCytoscapeVersion=function(a,b){var c=this.getCyRESTUrl()+"/v1/version",d=this.getCyRESTGetConfig(c);this.sendHTTPRequest(d,a,b)},d.getCyNDEXVersion=function(a,b){var c=this.getCyRESTUrl()+"/cyndex2/v1",d=this.getCyRESTGetConfig(c);this.sendHTTPRequest(d,a,b)},d.exportNetworkToCytoscape=function(a,b,c){var d=this.getCyRESTUrl()+"/cyndex2/v1/networks",e=this.getCyRESTPostConfig(d,a);this.sendHTTPRequest(e,b,c)},d.postRawCXToCytoscape=function(a,b,c){var d=this.getCyRESTUrl()+"/cyndex2/v1/networks/cx",e=this.getCyRESTPostConfig(d,a);console.log(a.toString()),this.sendHTTPRequest(e,b,c)},d}]),ndexServiceApp.factory("ndexConfigs",["ndexUtility",function(a){var b={},c=window.ndexSettings.ndexServerUri,d=function(b){var c=a.getAuthHeaderValue();null!==c&&(b.headers.Authorization=c)};return b.getGetConfigV2=function(a,b){var e={method:"GET",url:c+a,headers:{"NDEx-application":window.navigator.ndexServerVersion}};return d(e),b&&(e.data=JSON.stringify(b)),e},b.getGetConfigWithEndPointV2=function(a){return{method:"GET",url:a}},b.getPostConfigV2=function(a,b){var e={method:"POST",url:c+a,data:b?angular.toJson(b):{},headers:{"NDEx-application":window.navigator.ndexServerVersion}};return d(e),e},b.getPutConfigV2=function(a,b){var e={method:"PUT",url:c+a,headers:{"NDEx-application":window.navigator.ndexServerVersion}};return d(e),b&&(e.data="string"==typeof b?b:JSON.stringify(b)),e},b.getDeleteConfigV2=function(a,b){var e={method:"DELETE",url:c+a,headers:{"NDEx-application":window.navigator.ndexServerVersion}};return d(e),b&&("string"==typeof b?e.data=b:(e.data=JSON.stringify(b),e.headers["Content-Type"]="application/json")),e},b.getEncodedUser=function(){var b=a.getUserCredentials();return b&&b.userName&&b.token?btoa(b.userName+":"+b.token):null},b}]),ndexServiceApp.factory("ndexHelper",function(){var a={};return a.updateNodeLabels=function(b){b.nodeLabelMap=[],$.each(b.nodes,function(c,d){b.nodeLabelMap[c]=a.getNodeLabel(d,b)})},a.getNodeLabel=function(b,c){if("name"in b&&b.name&&""!==b.name)return b.name;if("represents"in b&&b.represents&&c&&c.terms&&c.terms[b.represents]){var d;if("representsTermType"in b)d=b.representsTermType;else if("functionTermId"in b.represents)d="functionTerm";else{if(!("name"in b.represents))return"unknown";d="BaseTerm"}return a.getTermLabel(c.terms[b.represents],d,c)}return"unknown"},a.getTermBase=function(a,b){if(a.namespaceId){var c=b.namespaces[a.namespaceId];return c&&"LOCAL"!==c.prefix?c.prefix?{prefix:c.prefix,name:a.name}:{prefix:"",name:a.name}:{prefix:"none",name:a.name}}return a.name},a.getTermLabel=function(b,c,d){if("baseTerm"===c){if(b.namespaceId){var e=d.namespaces[b.namespaceId];return e&&"LOCAL"!==e.prefix?e.prefix?e.prefix+":"+b.name:e.uri+b.name:b.name}return b.name}if("functionTerm"===c){var f=d.terms[b.functionTermId];if(!f)return;var g=a.getTermLabel(f,"baseTerm",d);g=a.lookupFunctionAbbreviation(g);for(var h=a.getDictionaryKeysSorted(b.parameterIds),i=[],j=0;j<h.length;j++){var k,l=b.parameterIds[h[j]],m=d.terms[l];if(k="functionTermId"in m?"functionTerm":"baseTerm",m){var n=a.getTermLabel(m,k,d);i.push(n)}}return g+"("+i.join(", ")+")"}if("reifiedEdgeTerm"===c){return a.getNodeLabelForReifiedEdge(d,b,"subjectId")+" "+a.getPredicateLabelForReifiedEdge(d,b)+" "+a.getNodeLabelForReifiedEdge(d,b,"objectId")}return"Unknown Term Type: "+c},a.getPredicateLabelForReifiedEdge=function(b,c){var d="Predicate Undefined;";if(void 0===b||void 0===b.edges||void 0===c||void 0===c.edgeId||void 0===b.edges[c.edgeId]||void 0===b.edges[c.edgeId].predicateId)return d;var e=b.edges[c.edgeId].predicateId;if(void 0===b.terms||void 0===b.terms[e])return d;var f=b.terms[e];return d=a.getTermLabel(f,"baseTerm",b)},a.getNodeLabelForReifiedEdge=function(b,c,d){var e="Label: N/A";if(void 0===b||void 0===b.edges||void 0===c||void 0===c.edgeId||void 0===b.edges[c.edgeId])return"subjectId"===d?"Subject Unknown;":"objectId"===d?"Object Unknown;":e;if("subjectId"===d){if(void 0===b.edges[c.edgeId].subjectId)return"Subject Unknown;";var f=b.edges[c.edgeId].subjectId;e=a.getNodeLabel(b.nodes[f],b)}else if("objectId"===d){if(void 0===b.edges[c.edgeId].objectId)return"Object Unknown;";var g=b.edges[c.edgeId].objectId;e=a.getNodeLabel(b.nodes[g],b)}return e},a.getDictionaryKeysSorted=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort()},a.lookupFunctionAbbreviation=function(a){var b=a;switch(b.match(/^bel:/)&&(b=b.replace(/^bel:/,"")),b){case"abundance":return"a";case"biologicalProcess":return"bp";case"catalyticActivity":return"cat";case"cellSecretion":return"sec";case"cellSurfaceExpression":return"surf";case"chaperoneActivity":return"chap";case"complexAbundance":return"complex";case"compositeAbundance":return"composite";case"degradation":return"deg";case"fusion":return"fus";case"geneAbundance":return"g";case"gtpBoundActivity":return"gtp";case"kinaseActivity":return"kin";case"microRNAAbundance":return"m";case"molecularActivity":return"act";case"pathology":return"path";case"peptidaseActivity":return"pep";case"phosphateActivity":return"phos";case"proteinAbundance":return"p";case"proteinModification":return"pmod";case"reaction":return"rxn";case"ribosylationActivity":return"ribo";case"rnaAbundance":return"r";case"substitution":return"sub";case"translocation":return"tloc";case"transcriptionalActivity":return"tscript";case"transportActivity":return"tport";case"truncation":return"trunc";default:return b}},a}),ndexServiceApp.factory("cytoscapeService",["ndexService","ndexHelper","$q",function(a,b,c){var d,e={};return e.initCyGraph=function(){var a=c.defer(),b=[];return $(function(){d=cytoscape({container:$("#canvas")[0],style:cytoscape.stylesheet().selector("node").css({content:"data(name)",height:10,width:10,"text-valign":"center","background-color":"orange","font-size":8,color:"black"}).selector("edge").css({"target-arrow-shape":"triangle"}).selector(":selected").css({"background-color":"white","line-color":"black","target-arrow-color":"black","source-arrow-color":"black","text-outline-color":"black"}),layout:{name:"circle",padding:10},elements:b,ready:function(){a.resolve(this)}})}),a.promise},e.setNetwork=function(a){var c={nodes:[],edges:[]};$.each(a.nodes,function(d,e){var f=b.getNodeLabel(e,a),g={data:{id:"n"+d,name:f}};c.nodes.push(g)}),$.each(a.edges,function(a,b){var d={data:{source:"n"+b.subjectId,target:"n"+b.objectId}};c.edges.push(d)}),d=cytoscape({container:$("#canvas")[0],style:cytoscape.stylesheet().selector("node").css({content:"data(name)",height:10,width:10,"text-valign":"center","background-color":"orange","font-size":8,color:"black"}).selector("edge").css({"target-arrow-shape":"triangle"}).selector(":selected").css({"background-color":"white","line-color":"black","target-arrow-color":"black","source-arrow-color":"black","text-outline-color":"black"}),layout:{name:"circle",padding:10},elements:c,ready:function(){window.cy=this}})},e}]),ndexServiceApp.factory("provenanceVisualizerService",["ndexService","ndexHelper","$q",function(a,b,c){var d,e,f={},g=0,h=function(a,b){var c;c=null===a?"Error: Null Entity":a.uri,g+=1;var d={data:{id:"n"+g,name:c}};if(e.nodes.push(d),null!==b){var f={data:{target:b.data.id,source:d.data.id}};e.edges.push(f)}if(a&&a.creationEvent){var i=a.creationEvent.eventType;g+=1;var j={data:{id:"n"+g,name:i}},k={data:{target:d.data.id,source:j.data.id}};e.nodes.push(j),e.edges.push(k),a.creationEvent.inputs&&$.each(a.creationEvent.inputs,function(a,b){h(b,j)})}};return f.setProvenance=function(a){e={nodes:[],edges:[]},g=0,h(a),d.load(e)},f.makeProvenanceEntity=function(a){return{uri:a}},f.makeProvenanceEvent=function(a){return{eventType:a,inputs:[]}},f.createFakeProvenance=function(){var a=this.makeProvenanceEntity("www.example.com/fakeThing"),b=this.makeProvenanceEvent("Transform");a.creationEvent=b;var c=this.makeProvenanceEntity("www.example.com/fakeThing2");b.inputs.push(c);var d=this.makeProvenanceEvent("Copy");c.creationEvent=d;var e=this.makeProvenanceEntity("www.example.com/fakeThing3");return d.inputs.push(e),a},f.initCyGraph=function(){var a=c.defer(),b=[];return $(function(){d=cytoscape({container:$("#provenanceCanvas")[0],style:cytoscape.stylesheet().selector("node").css({content:"data(name)",height:10,width:10,"text-valign":"center","background-color":"lightgreen","font-size":8,color:"black"}).selector("edge").css({"target-arrow-shape":"triangle"}).selector(":selected").css({"background-color":"white","line-color":"black","target-arrow-color":"black","source-arrow-color":"black","text-outline-color":"black"}),layout:{name:"breadthfirst",directed:!1,fit:!0,roots:"#n1",padding:10},elements:b,ready:function(){a.resolve(this)}})}),a.promise},f}]),ndexServiceApp.factory("networkService",["sharedProperties","ndexConfigs","ndexUtility","ndexHelper","ndexService","$http","$q",function(a,b,c,d,e,f,g){var h=new cytoscapeCx2js.CyNetworkUtils,j={},k=window.ndexSettings.ndexServerUri,l=null,m=null,n=null,o=void 0;j.getNdexServerUri=function(){return k},j.getNetworkSummaryFromNdexV2=function(a,c){var d=g.defer(),e="/network/"+a+"/summary";c&&(e=e+"?accesskey="+c);var h=b.getGetConfigV2(e,null);h.timeout=d.promise;var i=f(h),j={};return j.success=function(a){return i.success(function(b){a(b)}),j},j.error=function(a){return i.then(null,function(b){a(b)}),j},j.abort=function(){d.resolve()},j.finally=function(){i.finally(function(){j.abort=angular.noop,d=i=j=null})},j},j.getCurrentNiceCX=function(){return l},j.setCurrentNiceCX=function(a){l=a},j.setOriginalNiceCX=function(a){m=a},j.clearNiceCX=function(){l=null,m=null},j.getQueryResultInCX=function(){return n},j.setQueryResultInCX=function(a){n=a},j.clearQueryResultInCX=function(){n=null},j.setQueryResultAsOriginalNiceCX=function(){m=h.rawCXtoNiceCX(n)},j.getOriginalNiceCX=function(){return m},j.restoreCurrentNiceCXAfterQuery=function(){l=m},j.getLocalNetworkUUID=function(){return o},j.setLocalNetworkUUID=function(a){o=a},j.getNodeName=function(a){return a._cydefaultLabel};var p=function(a){return a.replace(/\t/g," ").replace(/\|/g," ")};j.getCurrentNetworkName=function(){var a=null,b=l&&l.networkAttributes?l.networkAttributes:null;if(null==b||!b.elements||!Array.isArray(b.elements)||0==b.elements.length)return a;var c=_.find(b.elements,{n:"name"});return c&&c.v&&(a=c.v),a},j.getTSVOfCurrentNiceCX=function(){var a=l,b=a.edges,c=Object.keys(b);data=[];var d={},e=a.edgeAttributes,f={"Source Node":0,Interaction:1,"Target Node":2,"Source ID":3,"Source Alias":4},g=f["Source Alias"],h=a.nodes,k=Object.keys(h),m=a.nodeAttributes;for(var n in k){var o=k[n];if(m){var s=m[o];for(var t in s){var u=s[t]?s[t]:"",v=p(u.n),w="Source "+v;v&&"alias"==v.toLowerCase()&&(v,w in f||(delete f["Source Alias"],f[w]=g)),w in f||(f[w]=_.size(f))}}}f["Target ID"]=_.size(f),f["Target Alias"]=_.size(f);var x=f["Target Alias"];for(var n in k){var o=k[n];if(m){var s=m[o];for(var t in s){var u=s[t]?s[t]:"",v=p(u.n),y="Target "+v;v&&"alias"==v.toLowerCase()&&(y in f||(delete f["Target Alias"],f[y]=x)),y in f||(f[y]=_.size(f))}}}f.Citation=_.size(f);var z=f.Citation;for(i=0;i<c.length;i++){var A=c[i];if(e)for(var n in e[A]){var B=p(n);B&&"citation"==B.toLowerCase()&&(B in f||(delete f.Citation,f[B]=z)),B in f||(f[B]=_.size(f))}}f["cx edge id"]=_.size(f),f["cx source node id"]=_.size(f),f["cx target node id"]=_.size(f);var C=Object.keys(f);C.sort(function(a,b){return f[a]-f[b]});var D=C.join("\t")+"\n",E=D,d={},F={n:0,r:0,id:0,_cydefaultLabel:0},G={id:0,s:0,t:0,i:0}
;for(i=0;i<c.length;i++){for(n in f)d[n]="";var A=c[i],H=j.getEdgeInfo(A);d["cx edge id"]=H&&H.id?H.id:"",d["cx source node id"]=H&&(H.s||0==H.s)?H.s:"",d.Interaction=H&&H.i?H.i:"",d["cx target node id"]=H&&(H.t||0==H.t)?H.t:"";var I=j.getNodeInfo(H.s),J=j.getNodeInfo(H.t);d["Source Node"]=q(I),d["Source ID"]=I&&I.r?I.r:"",d["Target Node"]=q(J),d["Target ID"]=J&&J.r?J.r:"";for(var K in I){var L=p(K);L in F||(d["Source "+L]=r(I[K]))}for(K in J){var M=p(K);M in F||(d["Target "+M]=r(J[K]))}for(var N in H){var O=p(N);O in G||(d[O]=r(H[N]))}var P="";for(n in C){P=P+d[C[n]]+"\t"}P=P.slice(0,-1)+"\n",E+=P}return E};var q=function(a){var b="No Name";return a&&(a.n?b=a.n:a.id&&(b=a.id)),b},r=function(a){var b="";if(void 0===a||""===a||null==a)return b;if("string"==typeof a)return a;if("object"==typeof a&&a.v)if(Array.isArray(a.v)){for(var c=0;c<a.v.length;c++)a.v[c]=p(a.v[c]);b=a.v.join("|")}else"string"==typeof a.v&&(b=a.v);return b};j.getNodeInfo=function(a){if(!l)return null;var b=l.nodes[a],c={id:a,_cydefaultLabel:h.getDefaultNodeLabel(l,b),n:b.n,r:b.r},d=1;if(l.nodeAttributes&&l.nodeAttributes[a]){var e=l.nodeAttributes[a];_.forEach(e,function(a,b){if("selected"!=b)if(c[b]){for(;c[b+"_"+d];)d++;c[b+"_"+d]=a,d++}else c[b]=a})}return c},j.getNodeAttributes=function(a){return l?l.nodeAttributes[a]:null},j.getEdgeAttributes=function(a){return l?l.edgeAttributes[a]:null},j.getNodeAttr=function(a,b){return l&&l.nodeAttributes[a]?l.nodeAttributes[a][b]:null},j.getEdgeAttr=function(a,b){return l&&l.edgeAttributes[a]?l.edgeAttributes[a][b]:null},j.getEdgeInfo=function(a){if(!l)return null;var b,c=l.edges[a],d={id:a,s:c.s,t:c.t,i:c.i};if(l.edgeAttributes&&l.edgeAttributes[a]){var e=l.edgeAttributes[a];_.forEach(e,function(a,c){if("selected"!=c)if(d[c]){for(;d[c+"_"+b];)b++;d[c+"_"+b]=a,b++}else d[c]=a})}if(l.edgeCitations&&l.edgeCitations[a]){var f=[];_.forEach(l.edgeCitations[a],function(a){f.push(l.citations[a])}),f.length>0&&(d.citations=f)}return d},j.getNiceCXNetworkFromURL=function(a,b,c){f.get(a).then(function(a){var c=a.data;l=h.rawCXtoNiceCX(c),m=l,b(l)},c)},j.getCompleteNetworkInCXV2=function(a,c){var d=g.defer(),e="/network/"+a;c&&(e=e+"?accesskey="+c);var i=b.getGetConfigV2(e,null);i.timeout=d.promise;var j=f(i),k={};return k.success=function(a){return j.success(function(b){l=h.rawCXtoNiceCX(b),m=l,a(l)}),k},k.error=function(a){return j.then(null,function(b){a(b)}),k},k.abort=function(){d.resolve()},k.finally=function(){j.finally(function(){k.abort=angular.noop,d=j=k=null})},k},j.getNetworkSampleV2=function(a,c){var d="/network/"+a+"/sample";c&&(d=d+"?accesskey="+c);var e=b.getGetConfigV2(d,null),i=g.defer();e.timeout=i.promise;var j=f(e),k={};return k.success=function(a){return j.success(function(b){l=h.rawCXtoNiceCX(b),m=l,a(l)}),k},k.error=function(a){return j.then(null,function(b){a(b)}),k},k.abort=function(){i.resolve()},k.finally=function(){j.finally(function(){k.abort=angular.noop,i=j=k=null})},k};return j.updateNetworkContextFromNdexV2=function(a,b,c,d){var e=[{numberVerification:[{longNumber:0xffffffffffff}]},{metaData:[{elementCount:1,name:"@context",properties:[]}]},{"@context":a},{status:[{error:"",success:!0}]}];j.updateContext(e,b,function(a){c(a)},d)},j.updateContext=function(a,b,d,e){var f=k+"/network/"+b+"/aspects",g=new XMLHttpRequest,h=new FormData,i=JSON.stringify(a),j=new Blob([i],{type:"application/octet-stream"});h.append("CXNetworkStream",j),g.addEventListener("load",function(a){g.readyState===g.DONE&&(200!==g.status&&201!==g.status&&204!==g.status||d(g.responseText))}),g.addEventListener("error",function(a){e(g.responseText)}),g.open("PUT",f);var l=c.getAuthHeaderValue();null!=l&&g.setRequestHeader("Authorization",l);g.send(h)},j.createCXNetwork=function(a,b,d){var e=k+"/network",f=new XMLHttpRequest,g=new FormData,h=JSON.stringify(a),i=new Blob([h],{type:"application/octet-stream"});g.append("CXNetworkStream",i),f.addEventListener("load",function(a){if(f.readyState===f.DONE&&(200===f.status||201===f.status)){f.responseText;b(f.responseText)}}),f.addEventListener("error",function(a){d(f.responseText)}),f.open("POST",e);var j=c.getAuthHeaderValue();null!=j&&f.setRequestHeader("Authorization",j);f.send(g)},j.getNetworkProperty=function(a,b,c){if(void 0!==a&&c)for(var d=a.properties,e=0;e<d.length;e++)if(d[e].predicateString.toLowerCase()===c.toLowerCase()&&b==d[e].subNetworkId)return"boolean"===d[e].dataType&&"string"==typeof d[e].value?JSON.parse(d[e].value):d[e].value},j.getPropertiesExcluding=function(a,b,c){for(var d=[],e=new Set,f=0;f<c.length;f++)e.add(c[f].toLowerCase());var g=a.properties;return _.forEach(g,function(a){if(b==a.subNetworkId&&!e.has(a.predicateString.toLowerCase())&&!a.predicateString.startsWith("__")){if(a.value.startsWith("http://")||a.value.startsWith("https://")){var c=a.value;a.value='<a target="_blank" href="'+c+'">External Link</a>'}else a.value.startsWith("www.")&&(c=a.value,a.value='<a target="_blank" href="http://'+c+'">External Link</a>');d.push(a)}}),d},j.setNetworkProperty=function(a,b,c,d){for(var e={predicateString:b,value:c,dataType:"undefined "!=typeof d?d:"string"},f=a.properties,g=0;g<f.length;g++){if(f[g].predicateString.toLowerCase()===b.toLowerCase())return void(f[g]=e);f.push(e)}},j}]),function(){var a=angular.module("uiServiceApp",[]);a.factory("ndexNavigation",["sharedProperties","$location","$modal","$rootScope",function(a,b,c,d){var e={};return e.setAndDisplayCurrentNetwork=function(c){a.setCurrentNetworkId(c),b.path("/networkQuery/"+c)},e.setAndDisplayCurrentGroup=function(c){a.setCurrentGroupId(c),b.path("/group/"+c)},e.setAndDisplayCurrentUser=function(c){a.setCurrentUserId(c),b.path("/user/"+c)},e.openConfirmationModal=function(a,b,d,e,f,g,h){var i=function(c,i,j){c.title=a,c.message=b,c.cancelLabel=e||"Cancel",c.confirmLabel=d||"Delete",c.progress=j.progress,c.progress2=j.progress2,c.errors=j.errors,c.confirmButtonDisabled=j.confirmButtonDisabled,c.cancelButtonDisabled=j.cancelButtonDisabled,c.confirm=function(){f?(i.dismiss(),g()):g(i)},c.cancel=function(){f?(i.dismiss(),h()):h(i)},j.$watch("progress",function(a,b){c.progress=a}),j.$watch("progress2",function(a,b){c.progress2=a}),j.$watch("errors",function(a,b){c.errors=a}),j.$watch("confirmButtonDisabled",function(a,b){c.confirmButtonDisabled=a}),j.$watch("cancelButtonDisabled",function(a,b){c.cancelButtonDisabled=a})};i.$inject=["$scope","$modalInstance","$rootScope"],c.open({templateUrl:"views/confirmationModal.html",controller:i})},e.genericInfoModal=function(a,b){c.open({templateUrl:"views/generic-info-modal.html",backdrop:"static",controller:["$scope","$modalInstance",function(c,d){c.title=a,c.message=b,c.close=function(){d.dismiss()}}]})},e.openManageBulkRequestsModal=function(a,b,d,e,f,g,h){var i=function(c,i,j,k){c.title=a,c.message=b,c.responseMessage=null,c.acceptLabel=d||"Accept",c.declineLabel=e||"Decline",c.cancelLabel=f||"Cancel",c.progress=j.progress,c.progress2=j.progress2,c.errors=j.errors,c.accept=function(){var a=k.replaceNewLinesAndSpaces(c.responseMessage);g(i,!0,a)},c.decline=function(){acceptRequests=!1,b=k.replaceNewLinesAndSpaces(c.responseMessage),g(i,acceptRequests,b)},c.cancel=function(){h(i)},j.$watch("progress",function(a,b){c.progress=a}),j.$watch("progress2",function(a,b){c.progress2=a}),j.$watch("errors",function(a,b){c.errors=a})};i.$inject=["$scope","$modalInstance","$rootScope","uiMisc"],c.open({templateUrl:"views/receivedBulkRequests.html",controller:i,backdrop:"static"})},e.networkInfoModal=function(a){c.open({templateUrl:"views/networkInfoModal.html",controller:["$scope","$modalInstance","ndexNavigation",function(b,c,d){b.network=a,b.close=function(){c.dismiss()}}]})},e.networkSetInfoModal=function(a){c.open({templateUrl:"views/networkSetInfoModal.html",controller:["$scope","$modalInstance",function(b,c){b.set=a,b.showOriginalTitle=function(){b.copyNetworkSetURLTitle="Copy network set share URL to clipboard"},b.showCopiedTitle=function(){b.copyNetworkSetURLTitle="Copied"},b.close=function(){c.dismiss()}}]})},e}]),a.directive("triggerCreateGroupModal",function(){return{scope:{},restrict:"AE",template:'<button class="btn btn-primary customButtonWidth" ng-click="openMe()">Create Group</button>',controller:["$scope","$modal","$location","ndexService",function(a,b,c,d){a.openMe=function(){modalInstance=b.open({templateUrl:"views/directives/createGroupModal.html",scope:a,controller:["$scope","$modal","$location","ndexService","uiMisc",function(a,b,c,d,e){a.group={},a.cancel=function(){modalInstance.close(),modalInstance=null,delete a.errors,a.group={}},a.$watch("group.groupName",function(){delete a.errors}),a.submit=function(){var b=a.group.groupName.replace(/\s+/g,"");a.group.userName=b,d.createGroupV2(a.group,function(a){if(a){var b=a.split("/").pop();modalInstance.close(),c.path("/group/"+b)}},function(b){a.errors=e.formatErrorMessage("Unable to create group",b)})}}]})}}]}}),a.directive("triggerCreateNetworkSetModal",function(){return{scope:{myAccountController:"=",signalNewSetCreation:"="},restrict:"AE",template:'<button class="btn btn-primary customButtonWidth" ng-click="openMe()">Create Network Set</button>',controller:["$scope","$attrs","$modal","$location","ndexService","$rootScope","$route",function(a,b,c,d,e,f,g){var h;a.openMe=function(){a.networkSet={},a.networkSet.properties={},a.networkSet.properties.reference="",a.title="Create New Network Set",h=c.open({templateUrl:"views/directives/createNetworkSetModal.html",scope:a})},a.cancel=function(){h.dismiss(),delete a.errors,a.networkSet={},a.isProcessing=!1},a.$watch("networkSet.networkSetName",function(){delete a.errors}),a.isProcessing=!1,a.submit=function(){a.isProcessing||(a.isProcessing=!0,a.networkSet.name=a.networkSet.networkSetName,e.createNetworkSetV2(a.networkSet,function(b){b&&(h.close(),a.myAccountController.getAllNetworkSetsOwnedByUser(function(b){a.signalNewSetCreation&&f.$emit("NEW_NETWORK_SET_CREATED"),1===a.myAccountController.networkSets.length&&a.myAccountController.networkSearchResults&&0===a.myAccountController.networkSearchResults.length?g.reload():a.myAccountController.getNoOfNetworksAndSets&&a.myAccountController.getNoOfNetworksAndSets(function(){a.myAccountController.loadNetworks&&a.myAccountController.loadNetworks()},function(){console.log("unable to get No of Networks and Sets for this account")}),a.isProcessing=!1},function(){a.isProcessing=!1}))},function(b){b.message?a.errors=b.message:b.description?a.errors=b.description:a.errors="Unable to modify set "+a.networkSetController.displayedSet.name,a.isProcessing=!1}))}}]}}),a.directive("triggerEditNetworkSetModal",function(){return{scope:{networkSetController:"="},restrict:"AE",template:'<button class="btn btn-primary customButtonWidth" ng-click="openMe()">Edit Network Set</button>',controller:["$scope","$attrs","$modal","$location","ndexService",function(a,b,c,d,e){var f,g=a.networkSetController.identifier;a.openMe=function(){a.networkSet={},a.networkSet.name=a.networkSetController.displayedSet.name,a.networkSet.description=a.networkSetController.displayedSet.description,a.networkSet.properties={reference:""},a.title="Edit Network Set "+a.networkSet.name,a.networkSetController.displayedSet.properties&&a.networkSetController.displayedSet.properties.reference&&(a.networkSet.properties.reference=a.networkSetController.displayedSet.properties.reference),f=c.open({templateUrl:"views/directives/editNetworkSetModal.html",scope:a})},a.cancel=function(){f.dismiss(),delete a.errors,a.networkSet={},a.isProcessing=!1},a.isProcessing=!1,a.$watch("networkSet.name",function(){delete a.errors}),a.submit=function(){a.isProcessing||(a.isProcessing=!0,e.updateNetworkSetV2(g,a.networkSet,function(b,c,d,f,h){a.networkSetController.displayedSet.name=a.networkSet.name,a.networkSetController.displayedSet.description=a.networkSet.description,a.networkSetController.displayedSet.properties={reference:a.networkSet.properties.reference};e.getNetworkSetV2(g,null,function(b){b.networks;a.networkSetController.displayedSet.modificationTime=b.modificationTime},function(a){}),a.cancel()},function(b){b.message?a.errors=b.message:b.description?a.errors=b.description:a.errors="Unable to modify set "+a.networkSetController.displayedSet.name,a.isProcessing=!1}))}}]}}),a.directive("ndexAccountImage",function(){return{scope:{ndexSrc:"=",ndexClass:"="},restrict:"E",templateUrl:"views/directives/accountImage.html"}}),a.directive("ndexNavigation",function(){return{scope:{ndexUrl:"=",ndexClass:"="},restrict:"E",templateUrl:"views/directives/ndexNavigation.html",transclude:!0,controller:["$scope","$location",function(a,b){a.location=b}]}}),a.directive("editUserModal",function(){return{scope:{ndexData:"="},restrict:"AE",template:'<button class="dropdown-btn" ng-click="openMe()">Edit Personal Info</span>',controller:["$scope","$modal","$location","ndexService","$route",function(a,b,c,d,e){a.openMe=function(){modalInstance=b.open({templateUrl:"views/directives/editUserModal.html",scope:a,controller:["$scope","$modalInstance","$location","ndexService","$rootScope","uiMisc",function(a,b,c,d,e,f){a.user={};for(var g in a.ndexData)a.user[g]=a.ndexData[g];a.cancel=function(){modalInstance.close(),modalInstance=null},a.maxInputLength=200,a.checkLengthOfWebsite=function(){a.user.website.length>=a.maxInputLength?a.websiteTooLongWarning="The maximum length of Website field is "+a.maxInputLength+" characters":delete a.websiteTooLongWarning},a.checkLengthOfImageHost=function(){a.user.image.length>=a.maxInputLength?a.imageURLTooLongWarning="The maximum length of Image Host field is "+a.maxInputLength+" characters":delete a.imageURLTooLongWarning},a.submit=function(){d.updateUserV2(a.user,function(b){a.ndexData.firstName=a.user.firstName,a.ndexData.lastName=a.user.lastName,a.ndexData.emailAddress=a.user.emailAddress,a.ndexData.website=a.user.website,a.ndexData.image=a.user.image,a.ndexData.description=a.user.description,window&&window.currentNdexUser&&(window.currentNdexUser.firstName=a.user.firstName,window.currentNdexUser.lastName=a.user.lastName,window.currentNdexUser.emailAddress=a.user.emailAddress,window.currentNdexUser.website=a.user.website,window.currentNdexUser.image=a.user.image,window.currentNdexUser.description=a.user.description),a.user={},modalInstance.close(),e.$emit("SHOW_UPDATED_USER_NAME")},function(b){a.errors=f.formatErrorMessage("Unable to modify Personal Info",b)})}}]})}}]}}),a.directive("editGroupModal",function(){return{scope:{ndexData:"="},restrict:"E",template:'<button class="btn btn-primary customButtonWidth" ng-click="openMe()">Edit Group Profile</button>',controller:["$scope","$attrs","$modal","$location","ndexService","$route",function(a,b,c,d,e,f){var g;a.errors=null,a.openMe=function(){g=c.open({templateUrl:"views/directives/editGroupModal.html",scope:a})},a.cancel=function(){for(var b in a.ndexData)a.group[b]=a.ndexData[b];g.close(),delete a.errors,g=null},a.submit=function(){a.isProcessing||(a.isProcessing=!0,e.updateGroupV2(a.group,function(b){var c=a.group.externalId;a.group={},g.close(),d.path("/group/"+c),f.reload(),a.isProcessing=!1},function(b){a.errors=b.message,a.isProcessing=!1}))},a.$watch("ndexData",function(b){a.group={};for(var c in b)a.group[c]=b[c]})}]}}),a.directive("showNetworkSetsModal",function(){return{scope:{controllerName:"@controllerName",myAccountController:"=",myClass:"@",myStyle:"@"},restrict:"AE",template:"<button class='{{myClass}}' ng-click='openMe()'>Add To My Sets</button>",controller:["$scope","$attrs","$modal","$location","ndexService","$route","$rootScope",function(a,b,c,d,e,f,g){var h;a.errors=null,a.loadTheseSets=[],a.networkSets=[],a.openMe=function(){i(),h=c.open({templateUrl:"views/directives/showNetworkSetsModal.html",scope:a})};var i=function(){var b=a.controllerName;a.networkSets=[],"myAccountController"==b?a.myAccountController.getAllNetworkSetsOwnedByUser(function(b){a.networkSets=a.myAccountController.networkSets,j()},function(b,c){a.networkSets=a.myAccountController.networkSets,j()}):(a.networkSets=a.myAccountController.networkSets,j())},j=function(){a.loadTheseSets=[],_.forEach(a.networkSets,function(b){var c={id:b.externalId,name:b.name,description:b.description,selected:!1};a.loadTheseSets.push(c)})};a.closeModal=function(){delete a.errors,delete a.progress,h.close(),h=null,a.isProcessing=!1},a.noSetsSelected=function(){return 0==k()};var k=function(){var b=0;return _.forEach(a.loadTheseSets,function(a){a.selected&&(b+=1)}),b};a.submit=function(){if(!a.isProcessing){a.isProcessing=!0;var b=a.myAccountController.getIDsOfSelectedNetworks(),c=k(),d=0;0==a.noOfSelectedSets&&a.closeModal(),_.forEach(a.loadTheseSets,function(f){f.selected&&(a.progress="<br>Adding networks to network set "+f.name,e.addNetworksToNetworkSetV2(f.id,b,function(b){d+=1,c==d&&(a.myAccountController.getAllNetworkSetsOwnedByUser(function(b){a.isProcessing=!1},function(b,c){a.isProcessing=!1}),i(),a.closeModal())},function(b){d+=1,c==d&&a.myAccountController.getAllNetworkSetsOwnedByUser(function(b){a.isProcessing=!1},function(b,c){a.isProcessing=!1}),delete a.progress,a.errors=b.message}))})}},g.$on("NEW_NETWORK_SET_CREATED",function(){var b=_.orderBy(a.myAccountController.networkSets,["modificationTime","name"],["desc","asc"])[0];if(b){var c={id:b.externalId,name:b.name,description:b.description,selected:!0};a.loadTheseSets.unshift(c)}})}]}}),a.directive("removeFromMyNetworks",function(){return{scope:{controllerName:"=",myClass:"@"},restrict:"AE",template:"<button class='{{myClass}}' style='white-space:nowrap;' ng-click='openMe()'>Remove from My Networks</button>",controller:["$scope",function(a){a.openMe=function(){a.controllerName.removeFromMyNetworks()}}]}}),a.directive("setNetworkSampleViaUuid",function(){return{scope:{controllerName:"=",myClass:"@"},restrict:"AE",template:"<button class='{{myClass}}' style='white-space:nowrap;' ng-click='openMe()'>Set Network Sample</button>",controller:["$scope",function(a){a.openMe=function(){a.controllerName.setNetworkSampleViaUUID()}}]}}),a.directive("inviteMembersModal",function(){return{scope:{ndexData:"="},restrict:"E",templateUrl:"views/directives/invite-members.html",transclude:!0,controller:["$scope","$attrs","$modal","$location","ndexService","$route",function(a,b,c,d,e,f){var g;a.errors=null,a.query={},a.openMe=function(){g=c.open({templateUrl:"invite-members-modal.html",scope:a})},a.close=function(){a.externalId=a.ndexData,f.reload(),g.close(),g=null},a.addUser=function(b){var c={resourceUUID:a.externalId,permissions:"MEMBER",memberUUID:b};e.updateGroupMember(c,function(){},function(){})},a.$watch("query",function(b){null!=b.searchString&&(b.searchString.length>0?e.searchUsersV2(b.searchString,0,5,function(b){for(var c=0,d=b.length;c<d;c++)!function(){var d=c;e.getMembership(a.externalId,b[d].externalId,function(c){c.resourceName?b[d].showMe=!1:b[d].showMe=!0,a.userSearchResults=b},function(a){})}()},function(a){}):a.userSearchResults=[])},!0),a.$watch("ndexData",function(b){a.externalId=b})}]}}),a.directive("showTaskFailureInfo",function(){return{scope:{ndexData:"="},restrict:"E",transclude:!0,templateUrl:"views/directives/informationModal.html",controller:["$scope","$modal",function(a,b){var c,d=a.ndexData;a.errors=null,a.message=d.message,a.title=d.description+" "+d.status,a.openMe=function(){c=b.open({templateUrl:"information-modal.html",scope:a,backdrop:"static"})},a.cancel=function(){c.close()}}]}}),a.directive("sentRequest",function(){return{scope:{requestId:"=",myAccountController:"="},restrict:"E",transclude:!0,templateUrl:"views/directives/sentRequest.html",controller:["$scope","$modal","$route","ndexService",function(a,b,c,d){var e;a.errors=null,a.openMe=function(){a.request=_.find(a.myAccountController.sentRequests,{externalId:a.requestId}),e=b.open({templateUrl:"sent-request-modal.html",scope:a,backdrop:"static"})},a.close=function(){delete a.request.error,delete a.request,e.close()},a.delete=function(){var b={requesterId:a.request.requesterId,externalId:a.request.externalId},c=a.request.requestType.toLowerCase();"usernetworkaccess"==c||"groupnetworkaccess"==c?d.deletePermissionRequestV2(b,function(b){_.remove(a.myAccountController.sentRequests,{externalId:a.request.externalId}),_.remove(a.myAccountController.tasksAndRequestsGridOptions.data,{taskId:a.request.externalId}),e.close()},function(b){b&&b.message&&(a.request.error=b.message)}):"joingroup"==c&&d.deleteMembershipRequestV2(b,function(b){_.remove(a.myAccountController.sentRequests,{externalId:a.request.externalId}),_.remove(a.myAccountController.tasksAndRequestsGridOptions.data,{taskId:a.request.externalId}),e.close()},function(b){b&&b.message&&(a.request.error=b.message)})}}]}}),a.directive("receivedRequest",function(){return{scope:{requestId:"=",myAccountController:"="},restrict:"E",transclude:!0,templateUrl:"views/directives/receivedRequest.html",controller:["$scope","$modal","$route","ndexService","uiMisc",function(a,b,c,d,e){var f;a.errors=null,a.openMe=function(){a.request=_.find(a.myAccountController.pendingRequests,{externalId:a.requestId}),f=b.open({templateUrl:"received-request-modal.html",scope:a,backdrop:"static"})},a.close=function(){f.close(),delete a.request.error},a.accept=function(){var b=a.request.requestType.toLowerCase(),c=a.request.destinationUUID,g=a.request.sourceUUID,h=a.request.permission,i=a.myAccountController.identifier,j=a.request.externalId,k=e.replaceNewLinesAndSpaces(a.request.responseMessage);"usernetworkaccess"==b||"groupnetworkaccess"==b?(b="usernetworkaccess"==b?"user":"group",d.updateNetworkPermissionV2(c,b,g,h,function(b){d.acceptOrDenyPermissionRequestV2(i,j,"accept",k,function(b){_.find(a.myAccountController.tasksAndRequestsGridOptions.data,{taskId:a.requestId}).newReceived&&a.myAccountController.numberOfNewTasksAndRequests>0&&a.myAccountController.numberOfNewTasksAndRequests--,_.remove(a.myAccountController.pendingRequests,{externalId:a.request.externalId}),_.remove(a.myAccountController.tasksAndRequestsGridOptions.data,{taskId:a.request.externalId}),f.close()},function(a){console.log("unable to accept network permission request")})},function(b){b&&b.message&&(a.request.error=b.message)})):"joingroup"==b&&d.acceptOrDenyMembershipRequestV2(i,j,"accept",k,function(b){_.find(a.myAccountController.tasksAndRequestsGridOptions.data,{taskId:a.requestId}).newReceived&&a.myAccountController.numberOfNewTasksAndRequests>0&&a.myAccountController.numberOfNewTasksAndRequests--,_.remove(a.myAccountController.pendingRequests,{externalId:a.request.externalId}),_.remove(a.myAccountController.tasksAndRequestsGridOptions.data,{taskId:a.request.externalId}),f.close()},function(b){b&&b.message&&(a.request.error=b.message)})},a.decline=function(){var b=a.request.requestType.toLowerCase(),c=a.myAccountController.identifier,g=a.request.externalId,h=e.replaceNewLinesAndSpaces(a.request.responseMessage);"usernetworkaccess"==b||"groupnetworkaccess"==b?d.acceptOrDenyPermissionRequestV2(c,g,"deny",h,function(b){_.find(a.myAccountController.tasksAndRequestsGridOptions.data,{taskId:a.requestId}).newReceived&&a.myAccountController.numberOfNewTasksAndRequests>0&&a.myAccountController.numberOfNewTasksAndRequests--,_.remove(a.myAccountController.pendingRequests,{externalId:a.request.externalId}),_.remove(a.myAccountController.tasksAndRequestsGridOptions.data,{taskId:a.request.externalId}),f.close()},function(b){b&&b.message&&(a.request.error=b.message)}):"joingroup"==b&&d.acceptOrDenyMembershipRequestV2(c,g,"deny",h,function(b){_.find(a.myAccountController.tasksAndRequestsGridOptions.data,{taskId:a.requestId}).newReceived&&a.myAccountController.numberOfNewTasksAndRequests>0&&a.myAccountController.numberOfNewTasksAndRequests--,_.remove(a.myAccountController.pendingRequests,{externalId:a.request.externalId}),_.remove(a.myAccountController.tasksAndRequestsGridOptions.data,{taskId:a.request.externalId}),f.close()},function(b){b&&b.message&&(a.request.error=b.message)})}}]}}),a.directive("createRequestGroup",function(){return{scope:{ndexData:"="},restrict:"E",template:'<button class="btn btn-primary customButtonWidth" ng-click="openMe()">Ask to Join!</button>',controller:["$scope","$modal","$route","ndexService","ndexUtility","sharedProperties","uiMisc",function(a,b,c,d,e,f,g){a.openMe=function(){b.open({templateUrl:"views/directives/createRequestGroup.html",scope:a,backdrop:"static",controller:["$scope","$modalInstance","$route","ndexService","ndexUtility","sharedProperties",function(a,b,c,d,e,f){a.request={},a.request.groupName=a.$parent.ndexData.groupName,a.request.permissionLabel="Is member",a.close=function(){a.request={};for(var c in a.ndexData)a.request.destinationName=a.ndexData.userName,a.request.destinationUUID=a.ndexData.externalId,a.request.permissionLabel="Is member";b.close()},a.submitRequest=function(){"Is member"==a.request.permissionLabel?a.request.permission="MEMBER":a.request.permission="GROUPADMIN",a.request.sourceName=f.getCurrentUserAccountName(),a.request.sourceUUID=f.getCurrentUserId();var b=g.replaceNewLinesAndSpaces(a.request.message);a.request.message=b,d.createMembershipRequestV2(a.request,function(b){a.close()},function(b){void 0!==b.data&&void 0!==b.data.message?a.request.error=b.data.message:a.request.error="Server returned HTTP error response code "+b.status})},a.$watch("ndexData",function(b){a.request={},a.request.destinationName=a.ndexData.userName,a.request.destinationUUID=a.ndexData.externalId,a.request.permissionLabel="Is member"})}]})}}]}}),a.directive("createRequestNetwork",function(){return{scope:{ndexData:"=",privileges:"=",myClass:"@"},restrict:"E",template:'<button class="{{myClass}}" ng-click="openMe()">Upgrade Permission</button>',controller:["$scope","$modal","$route","ndexService","ndexUtility","sharedProperties","uiMisc",function(a,b,c,d,e,f,g){var h;a.errors=null,a.request={},a.modal={},a.accounts=[],a.selected={},a.selected.account=void 0,a.openMe=function(){i(),h=b.open({templateUrl:"views/directives/createRequestNetwork.html",scope:a,backdrop:"static"})},a.close=function(){h.close(),a.request={}},a.submitRequest=function(){"Can edit"==a.modal.permissionLabel&&(a.request.permission="WRITE"),"Is admin"==a.modal.permissionLabel&&(a.request.permission="ADMIN"),"Can read"==a.modal.permissionLabel&&(a.request.permission="READ"),h.close();var b=g.replaceNewLinesAndSpaces(a.request.message),c=a.selected.account.accountType;if("user"==c){var e={networkid:a.request.destinationUUID,permission:a.request.permission,message:b},f=a.selected.account.externalId;d.createUserPermissionRequestV2(f,e,function(b){a.close()},function(b){console.log("unable to send network permission request for the authenticated user"),a.close()})}else if("group"==c){var i={networkid:a.request.destinationUUID,permission:a.request.permission,message:b},j=a.selected.account.externalId;d.createGroupPermissionRequestV2(j,i,function(b){a.close()},function(b){console.log("unable to send network permission request for the group"),a.close()})}},a.$watch("ndexData",function(b){a.request.destinationName=a.ndexData&&a.ndexData.name?a.ndexData.name:null,a.request.destinationUUID=a.ndexData&&a.ndexData.externalId?a.ndexData.externalId:null});var i=function(){a.accounts=[],a.request.destinationName=a.ndexData.name,a.request.destinationUUID=a.ndexData.externalId,a.request.sourceName=f.getLoggedInUserFirstAndLastNames(),a.request.sourceUUID=f.getCurrentUserId(),a.request.accountType=void 0,a.modal.permissionLabel="None"==a.privileges?"Can read":"Can edit",a.selected.account=void 0,d.getUserGroupMembershipsV2(f.getCurrentUserId(),"GROUPADMIN",0,1e6,function(b){var c=Object.keys(b);d.getGroupsByUUIDsV2(c).success(function(b){for(var c=0;c<b.length;c++){var d=b[c];d.accountType="group",a.accounts.push(d)}var e={accountType:"user",userName:f.getLoggedInUserFirstAndLastNames(),externalId:f.getCurrentUserId()};a.accounts.push(e),a.selected.account=e}).error(function(a){console.log("unable to get groups by UUIDs")})},function(a,b){console.log("unable to get user group memberships")})}}]}}),a.directive("bulkCreateRequestNetwork",function(){return{scope:{ndexData:"=",privileges:"@privileges",myClass:"@"},restrict:"E",template:'<button class="{{myClass}}" ng-click="openMe()">Upgrade Permission</button>',controller:["$scope","$modal","$route","ndexService","ndexUtility","ndexNavigation","sharedProperties","uiMisc",function(a,b,c,d,e,f,g,h){var i;a.errors=null,a.request={},a.modal={},a.accounts=[],a.selected={},a.selected.account=void 0,a.selectedNetworks=[],a.loggedInUserPermissions=void 0,a.openMe=function(){a.selectedNetworks=a.ndexData.getUUIDsOfNetworksForSendingPermissionRequests(),a.getLoggedInUserPermissions(),j(function(){if("Write"==a.privileges||"Admin"==a.privileges){f.genericInfoModal("You Already Have Maximum Permission Level","You already have the highest permission level available.")}else i=b.open({templateUrl:"views/directives/createRequestNetwork.html",scope:a,backdrop:"static"})},function(a){var b=a;f.genericInfoModal("Unable To Upgrade Permission",b)})};var j=function(b,c){a.accounts=[],a.request.destinationName="selected networks",a.request.destinationUUID=a.ndexData.externalId,a.request.sourceName=g.getLoggedInUserFirstAndLastNames(),a.request.sourceUUID=g.getCurrentUserId(),a.request.accountType=void 0,a.loggedInUserPermissions.NONE>0?a.privileges="None":a.loggedInUserPermissions.READ>0?a.privileges="Read":a.loggedInUserPermissions.WRITE>0?a.privileges="Write":a.loggedInUserPermissions.ADMIN>0&&(a.privileges="Admin"),a.modal.permissionLabel="None"==a.privileges?"Can read":"Can edit",a.selected.account=void 0,d.getUserGroupMembershipsV2(g.getCurrentUserId(),"GROUPADMIN",0,1e6,function(e){var f=Object.keys(e);d.getGroupsByUUIDsV2(f).success(function(c){for(var d=0;d<c.length;d++){var e=c[d];e.accountType="group",a.accounts.push(e)}var f={accountType:"user",userName:g.getLoggedInUserFirstAndLastNames(),externalId:g.getCurrentUserId()};a.accounts.push(f),a.selected.account=f,b()}).error(function(a){console.log("unable to get groups by UUIDs"),c("unable to get groups by UUIDs")})},function(a,b){console.log("unable to get user group memberships"),c("unable to get groups by UUIDs")})};a.getLoggedInUserPermissions=function(){var b={NONE:0,READ:0,WRITE:0,ADMIN:0};a.selectedNetworks.forEach(function(a){var c=a.loggedInUserPermission;b[c]=b[c]+1}),a.loggedInUserPermissions=b},a.close=function(){i.close(),a.request={}},a.submitRequest=function(){"Can edit"==a.modal.permissionLabel&&(a.request.permission="WRITE"),"Can read"==a.modal.permissionLabel&&(a.request.permission="READ");for(var b=a.selected.account.accountType,c=a.selectedNetworks,e=(a.loggedInUserPermissions.ADMIN,a.loggedInUserPermissions.EDIT,a.loggedInUserPermissions.READ,a.loggedInUserPermissions.NONE,h.replaceNewLinesAndSpaces(a.request.message)),f=0;f<c.length;f++){var g=c[f].networkUUID,i=c[f].loggedInUserPermission;if(!("READ"==a.request.permission&&["READ","WRITE"].indexOf(i)>-1||"WRITE"==a.request.permission&&"WRITE"==i))if("user"==b){var j={networkid:g,permission:a.request.permission,message:e},k=a.selected.account.externalId;a.loggedInUserPermissions,a.privileges,a.request.permission;a.request.progress="Sending "+a.request.permission+" permission request for network "+c[f].name,d.createUserPermissionRequestV2(k,j,function(a){},function(a){console.log("unable to send network permission request for the authenticated user")})}else if("group"==b){var l={networkid:g,permission:a.request.permission,message:e},m=a.selected.account.externalId;a.request.progress="Sending "+a.request.permission+" permission request for network "+c[f].name,d.createGroupPermissionRequestV2(m,l,function(a){},function(a){console.log("unable to send network permission request for the group")})}}a.close()},a.$watch("ndexData",function(b){a.request.destinationName=a.ndexData&&a.ndexData.name?a.ndexData.name:null,a.request.destinationUUID=a.ndexData&&a.ndexData.externalId?a.ndexData.externalId:null})}]}}),
a.directive("referenceForCertification",function(){return{scope:{networkController:"=",myClass:"@"},restrict:"AE",template:'<button class="{{myClass}}" ng-click="openMe()" tooltip="This network is PRE-CERTIFIED; click to add full reference info and get it CERTIFIED.">Add Reference</button>',controller:["$scope","$modal","$location","ndexService","$route",function(a,b,c,d,e){a.openMe=function(){modalInstance=b.open({templateUrl:"views/directives/editReferenceForCertificationModal.html",scope:a,controller:["$scope","$modalInstance","$location","ndexService","$rootScope","uiMisc",function(a,b,c,d,e,f){a.reference={},a.cancel=function(){modalInstance.close(),modalInstance=null},a.submit=function(){var b=a.reference.authors+"<br><strong>"+a.reference.title+"</strong><br><i>"+a.reference.issue+"</i>, ("+a.reference.year+')<br><a href="http://doi.org/'+a.reference.doi+'"  target="_blank">'+a.reference.doi+"</a>",c={reference:b};d.updateReferenceForAPrecertifiedNetworkV2(a.networkController.currentNetworkId,c,function(c){a.networkController.currentNetwork.reference=b,a.networkController.currentNetwork.isCertified=!0,a.networkController.currentNetwork.visibility="PUBLIC",a.cancel()},function(b){a.errors=f.formatErrorMessage("Unable to add Reference ",b)})},a.$watch("reference.authors",function(){delete a.errors}),a.$watch("reference.title",function(){delete a.errors}),a.$watch("reference.issue",function(){delete a.errors}),a.$watch("reference.year",function(){delete a.errors}),a.$watch("reference.doi",function(){delete a.errors})}]})}}]}}),a.directive("requestDoi",function(){return{scope:{networkController:"="},restrict:"E",template:'<button class="dropdown-btn" ng-click="editDOI()">Request DOI</button>',controller:["$scope","$location",function(a,b){a.editDOI=function(){b.url("/properties/network/"+a.networkController.currentNetwork.externalId+"/"+a.networkController.subNetworkId+"?doi=true")}}]}}),a.directive("exportNetwork",function(){return{scope:{ndexData:"="},restrict:"E",template:'<button class="dropdown-btn" ng-click="openMe()">Export</button>',controller:["$scope","$modal","$route","ndexService","ndexUtility",function(a,b,c,d,e){var f;a.errors=null,a.modal={},a.title="Export Network",a.exportButtonLabel="Export Network",a.openMe=function(){a.exporters=_.filter(a.$root.ImporterExporters,"exporter"),a.networkExporterName=a.exporters&&a.exporters[0]&&a.exporters[0].name?a.exporters[0].name:"No Exporters Available",a.selectedExporter=a.exporters&&a.exporters[0]?a.exporters[0]:"No Exporters Available",a.description=a.exporters&&a.exporters[0]&&a.exporters[0].description?a.exporters[0].description:"No description available for this export format.",f=b.open({templateUrl:"views/directives/exportNetwork.html",scope:a,backdrop:"static"})},a.exporterSelected=function(b){a.networkExporterName=b.name,a.description=b.description?b.description:"No description available for this export format.",a.selectedExporter=b},a.close=function(){a.isProcessing=!1,f.close()},a.exportNetwork=function(){if(!a.isProcessing){a.isProcessing=!0;var b=a.networkExporterName,c=[];c.push(a.externalId),d.exportNetworksV2(b,c,function(b){a.isProcessing=!1,f.close()},function(b){a.isProcessing=!1,f.close()})}},a.$watch("ndexData",function(b){a.externalId=a.ndexData&&a.ndexData.externalId?a.ndexData.externalId:null,a.name=a.ndexData&&a.ndexData.name?a.ndexData.name:null})}]}}),a.directive("bulkExportNetwork",function(){return{scope:{ndexData:"=",myClass:"@"},restrict:"E",template:'<button class="{{myClass}}" ng-click="openMe()">{{ndexData.exportNetworksLabel}}</button>',controller:["$scope","$modal","$route","ndexService","ndexUtility",function(a,b,c,d,e){var f;a.errors=null,a.modal={},a.openMe=function(){var c=a.ndexData.getNoOfSelectedNetworksOnCurrentPage();a.title=c>1?"Export Selected Networks":"Export Selected Network",a.exportButtonLabel=c>1?"Export Networks":"Export Network",a.exporters=_.filter(a.$root.ImporterExporters,"exporter"),a.networkExporterName=a.exporters&&a.exporters[0]&&a.exporters[0].name?a.exporters[0].name:"No Exporters Available",a.selectedExporter=a.exporters&&a.exporters[0]?a.exporters[0]:"No Exporters Available",a.description=a.exporters&&a.exporters[0]&&a.exporters[0].description?a.exporters[0].description:"No description available for this export format.",f=b.open({templateUrl:"views/directives/bulkExportNetwork.html",scope:a,backdrop:"static"})},a.exporterSelected=function(b){a.networkExporterName=b.name,a.description=b.description?b.description:"No description available for this export format.",a.selectedExporter=b},a.close=function(){a.isProcessing=!1,f.close()},a.exportNetworks=function(){if(!a.isProcessing){a.isProcessing=!0;var b=a.ndexData,c=b.getIDsOfSelectedNetworks(),e=a.networkExporterName;d.exportNetworksV2(e,c,function(c){a.isProcessing=!1,b.checkAndRefreshMyTaskAndNotification&&b.checkAndRefreshMyTaskAndNotification(),f.close()},function(c){a.isProcessing=!1,b.getTasks&&b.getTasks(),f.close()})}}}]}}),a.directive("showNetworkReference",function(){return{scope:{reference:"=",title:"@directiveTitle"},restrict:"E",transclude:!0,templateUrl:"views/directives/showNetworkReferenceModal.html",controller:["$scope","$modal","uiMisc",function(a,b,c){var d;a.errors=null,a.openMe=function(){a.network={},a.network.reference=a.reference,a.network.title=a.title,d=b.open({templateUrl:"show-network-reference-modal.html",scope:a,backdrop:"static"})},a.close=function(){d.close(),delete a.request.error}}]}}),a.directive("bulkChangeNetworkProperty",function(){return{scope:{ndexData:"=",title:"@directiveTitle",action:"@directiveAction",text:"@directiveDescription",label:"@directiveLabel"},restrict:"E",template:'<button class="dropdown-btn" ng-click="openMe()"><span style="white-space: nowrap; margin-right:20px">{{label}}</span></button>',transclude:!0,controller:["$scope","$modal","ndexService","uiMisc","ndexNavigation",function(a,b,c,d,e){var f;a.errors=null,a.network={};var g=0,h=null,i=null,j=!1,k=a.ndexData;a.openMe=function(){delete a.progress1,delete a.progress2,delete a.errors,a.confirmButtonDisabled=!1,g=0,a.network={},a.network.description="",a.network.version="",a.network.reference="";d.findWhatSelectedNetworksCanBeModified(k,"edit",function(c){var d=c.selected,g=c.readOnly,h=c.read;if(i=c.networks,_.size(c.writeNetworks)>0&&(i=i.concat(c.writeNetworks)),g>0||h>0){var j=1==d?"Cannot Modify Selected Network":"Cannot Modify Selected Networks";if(1==d){var k="The selected network cannot be modified: ";k+=1==g&&1==h?" you do not have write permission and it is read-only.":1==g?" it is read-only.":1==h?" you do not have write permission.":"."}else k="The selected "+d+" networks cannot be modified: ",0==g?k+=h==d?" you do not have write permission.":1==h?" you do not have write permission for "+h+" network.":" you do not have write permission for "+h+" networks.":0==h?k+=g==d?" they are read-only.":1==g?g+" network is read-only.":g+" networks are read-only.":(k+=1==h?" you do not have write permission for 1 network":" you do not have write permission for "+h+" networks",k+=1==g?" and 1 network is read-only.":" and "+g+" networks are read-only.");return void e.genericInfoModal(j,k)}a.network.submitButtonLabel=a.label,f=b.open({templateUrl:"views/directives/bulkEditNetworkPropertyModal.html",scope:a})},function(a){a&&displayErrorMessage(a)})},a.cancel=function(){j=!0,a.isProcessing=!1,0==g?(f.close(),f=null,a.network={}):(k.getNoOfSelectedNetworksOnCurrentPage()>0&&k.checkAndRefreshMyNetworksTableAndDiskInfo(),setTimeout(function(){f.close()},1e3))};var l=function(a,b){return a.reduce(function(a,c){return a.then(function(){return b(c)})},Promise.resolve())},m=function(a,b,c,d){for(var e={predicateString:a,value:b,dataType:"string",subNetworkId:d},f=0;f<c.length;f++){var g=c[f];if(g.predicateString&&g.predicateString.toLowerCase()==a.toLowerCase()&&(g.subNetworkId&&g.subNetworkId==d||(!g.subNetworkId||null==g.subNetworkId)&&(!d||null==d))){c.splice(f,1);break}}c.push(e)},n=function(a,b,e){var f=a.name,g=d.getSubNetworkId(a),h=a.externalId;if("description"==b||"version"==b){var i={};return i.name=f,i.description="description"==b?e:a.description,i.version="version"==b?e:a.version,null!=g?c.updateNetworkProfileNoHandlersV2(h,i).then(function(d){var f=a&&a.properties?a.properties:[];return m(b,e,f,g),c.setNetworkPropertiesNoHandlersV2(h,f)}).catch(function(a){return c.setNetworkPropertiesNoHandlersV2(h,j)}):c.updateNetworkProfileNoHandlersV2(h,i)}if("reference"==b){var j=a&&a.properties?a.properties:[];return m(b,e,j,g),c.setNetworkPropertiesNoHandlersV2(h,j)}};a.submit=function(){if(!a.isProcessing){a.isProcessing=!0,h=a.action;var b;g=0,b="description"==h?a.network.description:"reference"==h?a.network.reference:a.network.version,a.progress1=null,a.progress2=null,a.errors=null,a.confirmButtonDisabled=!0;j=!1;var c=!1,d=i.length;a.progress1="Changed: "+g+" of "+d+" selected networks",l(i,function(e){if(!j&&!c&&a.isProcessing)return n(e,h,b).then(function(b){a.confirmButtonDisabled=!0,g++,a.progress1="Changed: "+g+" of "+d+" selected networks",a.progress2="Changed: "+e.name,g!=d&&a.isProcessing||(k.getNoOfSelectedNetworksOnCurrentPage()>0&&k.checkAndRefreshMyNetworksTableAndDiskInfo(),setTimeout(function(){delete a.progress1,delete a.progress2,delete a.errors,delete a.confirmButtonDisabled,a.isProcessing=!1,f.dismiss()},1e3))})}).catch(function(b){a.errors=b.data&&b.data.message?"Unable to change: "+b.data.message:"Unable to change.",c=!0,a.confirmButtonDisabled=!0})}}}]}}),a.directive("bulkChangeNetworkSystemProperty",function(){return{scope:{ndexData:"=",title:"@directiveTitle",action:"@directiveAction",text:"@directiveDescription",label:"@directiveLabel"},restrict:"E",template:'<button class="dropdown-btn" ng-click="openMe()">{{label}}</button>',controller:["$scope","$modal","ndexService","ndexNavigation","uiMisc",function(a,b,c,d,e){function f(a,b){var d={readOnly:b};return c.setNetworkSystemPropertiesNoHandlersV2(a.externalId,d)}function g(b,d,e){var f={};return b.visibility!=d&&(f.visibility=d),b.indexLevel!=a.network.indexLevel&&(f.index_level=a.network.indexLevel),b.isShowcase!=e&&(f.showcase=e),c.setNetworkSystemPropertiesNoHandlersV2(b.externalId,f)}var h;a.errors=null,a.network={visibilityIndex:""};var i=!1;a.$watch("network.visibilityIndex",function(){"PUBLIC"===a.network.visibilityIndex?(a.network.visibility="PUBLIC",a.network.indexed=!0):"PUBLIC_NOT_INDEXED"===a.network.visibilityIndex?(a.network.visibility="PUBLIC",a.network.indexed=!1):"PRIVATE"===a.network.visibilityIndex?(a.network.visibility="PRIVATE",a.network.indexed=!0):"PRIVATE_NOT_INDEXED"===a.network.visibilityIndex&&(a.network.visibility="PRIVATE",a.network.indexed=!1)});var j=null,k=a.ndexData,l=0,m=null;a.openMe=function(){delete a.progress1,delete a.progress2,delete a.errors,delete a.confirmButtonDisabled,l=0,a.isProcessing=!1,a.network={},j=a.action;e.findWhatSelectedNetworksCanBeModified(k,"admin",function(c){if(m=c,m.nonAdmin>0){var e=null,f=null;return 1==m.selected?f="You do not have ADMIN privilege for the selected network. ":m.selected==m.nonAdmin?f="You do not have ADMIN privilege for the selected networks. ":(f="You do not have ADMIN privilege for "+m.nonAdmin,f+=" of "+m.selected+" selected networks. "),"visibility"==j?(e="Cannot Modify Visibility",f+="<br><br>You need to have the ADMIN privilege in order to modify Visibility of networks.  Please make sure you have ADMIN access to all selected networks, and try again."):"readOnly"==j&&(e="Cannot Modify Read-Only Property",f+="<br><br>You need to have the ADMIN privilege in order to set or unset the READ-ONLY flag.  Please make sure you have ADMIN access to all selected networks, and try again."),void d.genericInfoModal(e,f)}if("visibility"==j&&m.readOnly>0)return 1==m.selected?f="The selected network is read-only. ":m.selected==m.readOnly?f="The selected networks are read-only.  ":(f=m.readOnly+" of selected "+m.selected,1==m.readOnly?f+=" networks is read-only.":f+=" networks are read-only."),e="Cannot Modify Visibility",f+="<br><br>You cannot change Visibility of Read Only networks.  Please make sure that none of selected networks are Read Only, and try again.",void d.genericInfoModal(e,f);a.network.submitButtonLabel=a.label,a.network.showcase=!0,a.network.fullIndex=!1,h=b.open({templateUrl:"views/directives/bulkEditNetworkPropertyModal.html",scope:a})},function(a){title="Unable To Get Info About Selected Networks",message="Unable To Get Info About Selected Networks. ",d.genericInfoModal(title,message)})};var n=function(a,b){return a.reduce(function(a,c){return a.then(function(){return b(c)})},Promise.resolve())};a.cancel=function(){i=!0,a.isProcessing=!1,0==l?(h.close(),h=null):(k.getNoOfSelectedNetworksOnCurrentPage()>0&&k.checkAndRefreshMyNetworksTableAndDiskInfo(),setTimeout(function(){h.close()},1e3))},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var o=function(b,c,d){l=0;i=!1;var e=!1,g=_.size(b);if(0==g)return a.progress2=1==c?"Nothing to do: the selected network is ":"Nothing to do: all of selected "+c+" networks are ",a.progress2+=d?"read-only.":"read-write.",void setTimeout(function(){a.isProcessing=!1,h.dismiss()},1e3);n(b,function(b){if(!i&&!e&&a.isProcessing)return f(b,d).then(function(d){a.confirmButtonDisabled=!0,l++,a.progress1="Changed: "+l+" of "+c+" selected networks",a.progress2="Changed: "+b.name,l!=g&&a.isProcessing||(k.checkAndRefreshMyNetworksTableAndDiskInfo(),setTimeout(function(){h.dismiss()},1e3))})}).catch(function(b){a.errors=b.data&&b.data.message?"Unable to change: "+b.data.message:"Unable to change.",e=!0})},p=function(b,c,d,e){l=0,a.progress1=null,a.progress2=null,a.errors=null,a.confirmButtonDisabled=!0;i=!1;var f=!1,j=_.size(b);if(0==j)return a.progress2="Nothing to do.",void setTimeout(function(){h.dismiss()},1e3);n(b,function(b){if(!i&&!f)return g(b,d,e).then(function(d){a.confirmButtonDisabled=!0,l++,a.progress1="Changed: "+l+" of "+c+" selected networks",a.progress2="Changed: "+b.name,l!=j&&a.isProcessing||(k.checkAndRefreshMyNetworksTableAndDiskInfo(),setTimeout(function(){h.dismiss()},1e3))})}).catch(function(b){k.checkAndRefreshMyNetworksTableAndDiskInfo();a.errors=b.data&&b.data.message?"Unable to change: "+b.data.message:"Unable to change.",f=!0})};a.submit=function(){if(!a.isProcessing){if(a.isProcessing=!0,"visibility"==(j=a.action)){"PUBLIC_NOT_INDEXED"==a.network.visibilityIndex||"PRIVATE_NOT_INDEXED"==a.network.visibilityIndex?a.network.indexLevel="NONE":"PUBLIC"!=a.network.visibilityIndex&&"PRIVATE"!=a.network.visibilityIndex||(a.network.indexLevel=a.network.fullIndex?"ALL":"META");var b=a.network.visibility,c="PRIVATE"!=b&&a.network.showcase,d=_.map(m.networks,function(d){return d.visibility!=b||d.indexLevel!=a.network.indexLevel||d.isShowcase!=c?d:null})}else if("readOnly"==j)var e=a.network.readOnly.toUpperCase(),f="SET"==e,d=_.map(m.networks,function(a){return a.isReadOnly!=f?a:null});d=_.without(d,null),"visibility"==j?p(d,m.selected,b,c):"readOnly"==j&&o(d,m.selected,f)}}}]}}),a.directive("bulkNetworkAccessModal",function(){return{scope:{ndexData:"="},restrict:"AE",template:'<button class="btn btn-sm btn-success" ng-click="openMe()" ng-disabled="isProcessing || ndexData.selectedAccountsForUpdatingAccessPermissions.length==0">Next</button>',controller:["$scope","$attrs","$modal","$location","ndexService",function(a,b,c,d,e){var f;a.text=b.bulkNetworkAccessModal,a.accessType={},a.cancelHit=!1;var g=0;a.isProcessing=!1;var h=a.ndexData;a.openMe=function(){a.cancelHit=!1,a.accessType.permission="",a.isProcessing=!1,h=a.ndexData,delete a.errors,delete a.progress,a.summary="",a.IDsOfNetworksToUpdate=[],g=0,f=c.open({templateUrl:"views/directives/bulkNetworkAccessModal.html",scope:a})},a.cancel=function(){0==g?(f.dismiss(),delete a.errors,delete a.progress,delete a.summary,a.IDsOfNetworksToUpdate=[]):(a.cancelHit=!0,setTimeout(function(){a.close(),a.isProcessing=!1,d.path("/user/"+h.currentUserId)},1e3))},a.close=function(){f.dismiss(),delete a.errors,delete a.progress,a.IDsOfNetworksToUpdate=[],a.isProcessing=!1};var i=function(a,b){return a.reduce(function(a,c){return a.then(function(){return b(c)})},Promise.resolve())};a.updateMembershipsOnServer=function(b){var c=!1,e=_.size(b);i(b,function(b){if(!a.cancelHit&&!c)return j(b).then(function(c){g++,a.progress="Granted "+b.permissions+" access to "+b.memberAccountName+" for network "+b.resourceName,g==e&&setTimeout(function(){a.close(),d.path("/user/"+h.currentUserId)},1e3)})}).catch(function(b){c=!0;a.errors=b.data&&b.data.message?"Unable to share: "+b.data.message:"."})};var j=function(a){return e.updateNetworkPermissionNoHandlersV2(a.resourceUUID,a.accountType,a.memberUUID,a.permissions)};a.submit=function(){if(!a.isProcessing){a.isProcessing=!0;for(var b="EDIT"===a.accessType.permission.toUpperCase()?"WRITE":a.accessType.permission.toUpperCase(),c=Object.keys(h.selectedNetworksForUpdatingAccessPermissions),e=[],f=0;f<c.length;f++)for(var g=c[f],i=h.selectedNetworksForUpdatingAccessPermissions[g],j=h.selectedIDsAndNetworks[g],k=0;k<h.selectedAccountsForUpdatingAccessPermissions.length;k++){var l=h.selectedAccountsForUpdatingAccessPermissions[k],m=h.checkIfNetworkAccessNeedsUpdating(i,l,b);if(m){var n={memberAccountName:l.memberAccountName,memberUUID:l.memberUUID,resourceName:j,resourceUUID:g,permissions:b,accountType:l.accountType.toLowerCase()};"GROUP"===l.accountType.toUpperCase()&&"ADMIN"===b.toUpperCase()&&(n.permissions="WRITE"),e.push(n),-1==a.IDsOfNetworksToUpdate.indexOf(n.resourceUUID)&&a.IDsOfNetworksToUpdate.push(n.resourceUUID)}}0==e.length?(a.progress="No need to update.",setTimeout(function(){a.close(),a.isProcessing=!1,d.path("/user/"+h.currentUserId)},1e3)):a.updateMembershipsOnServer(e)}}}]}}),a.directive("changePasswordModal",function(){return{scope:{},restrict:"AE",template:'<button class="dropdown-btn" ng-click="openMe()">Change Password</span>',controller:["$scope","$modal","$route","ndexService","ndexUtility","ndexNavigation",function(a,b,c,d,e,f){var g;a.errors=null,a.change={},a.openMe=function(){a.change={},g=b.open({templateUrl:"views/directives/changePasswordModal.html",scope:a})},a.cancel=function(){a.change={},g.close(),g=null},a.$watch("change.newPassword",function(){delete a.errors}),a.$watch("change.newPasswordConfirm",function(){delete a.errors}),a.submit=function(){if(!a.isProcessing){if(a.isProcessing=!0,a.change.newPassword!=a.change.newPasswordConfirm)return a.errors="Passwords do not match",void(a.isProcessing=!1);d.changePasswordV2(a.change.newPassword,function(b){var c=e.getUserCredentials();c.userName,c.externalId;e.setUserPassword(a.change.newPassword),g.close(),g=null,a.isProcessing=!1;f.genericInfoModal("Password Change Success","Password has been successfully changed.")},function(b){a.errors=b.data,a.isProcessing=!1})}}}]}}),a.directive("deleteNetwork",function(){return{scope:{ndexData:"=",myClass:"@",myStyle:"@"},restrict:"AE",template:'<button class="{{myClass}}" ng-click="openMe()">Delete</button>',controller:["$scope","$modal","$location",function(a,b,c){a.openMe=function(){modalInstance=b.open({templateUrl:"views/directives/confirmationModal.html",scope:a,controller:["$scope","$modalInstance","$route","ndexService","ndexUtility","sharedProperties",function(a,b,d,e,f,g){a.title="Delete this Network",a.message="This network will be permanently deleted from NDEx. Are you sure you want to proceed?",a.cancel=function(){b.dismiss(),a.isProcessing=!0},a.confirm=function(){a.isProcessing||(a.isProcessing=!0,a.progress="Delete in progress....",e.deleteNetworkV2(a.externalId,function(d){g.setCurrentNetworkId(null),b.close(),c.path("/user/"+g.getCurrentUserId()),a.isProcessing=!1},function(b){delete a.progress,a.errors=b.data.message,a.isProcessing=!1}))}}]})},a.$watch("ndexData",function(b){a.externalId=b})}]}}),a.directive("archiveBelNamespaces",function(){return{scope:{ndexData:"="},restrict:"E",transclude:!0,controller:["$scope","$modal","$location",function(a,b,c){a.openMe=function(){modalInstance=b.open({templateUrl:"views/directives/confirmationModal.html",scope:a,controller:["$scope","$modalInstance","$route","ndexService","ndexUtility","sharedProperties",function(a,b,c,d,e,f){a.title="Archive Name Spaces",a.message="This network's namespaces will be archived on NDEx. Are you sure you want to proceed?",a.cancel=function(){b.dismiss(),a.isProcessing=!0},a.confirm=function(){a.isProcessing||(a.isProcessing=!0,a.progress="Archivinig in progress....",d.archiveBelNamespaces(a.externalId,function(c){b.close(),a.isProcessing=!1},function(b){a.errors=b.data,a.isProcessing=!1}))}}]})},a.$watch("ndexData",function(b){a.externalId=b})}]}}),a.directive("downloadBelNamespace",function(){return{scope:{ndexNetworkUuid:"=",ndexNetworkName:"="},restrict:"E",templateUrl:"views/directives/downloadBelNamespace.html",transclude:!0,controller:["$scope","$modal","$location","$http",function(a,b,c,d){a.openMe=function(){modalInstance=b.open({templateUrl:"download-bel-namespace-modal.html",scope:a,backdrop:"static",controller:["$scope","$modalInstance","$route","ndexService","ndexUtility","sharedProperties",function(a,c,e,f,g,h){a.title="Download BEL Namespace",a.close=function(){c.dismiss(),a.isProcessing=!1},a.nameSpaces=[],a.namespace={},delete a.namespace.namespaceFileContents,delete a.namespace.modalInstance,a.namespace.selectedNameSpace="undefined",a.errors=null,f.getNetworkNamespaces(a.ndexNetworkUuid,function(b){a.nameSpaces=b,b.length>0&&(a.namespace.selectedNameSpace=b[0])},function(a){}),a.$watch("namespace.selectedNameSpace",function(){a.errors=null}),a.viewNameSpace=function(){var c=a.ndexNetworkUuid,e=a.namespace.selectedNameSpace.prefix,g=f.getNdexServerUri()+"/network/"+c+"/namespaceFile/"+e;d.get(g).success(function(c,d,f,g){a.namespace.namespaceFileContents=c,a.namespace.prefixForTitle=e,a.namespace.modalInstance=b.open({templateUrl:"bel-namespace-show-contents.html",scope:a,backdrop:"static"}),a.namespace.close=function(){a.namespace.modalInstance.dismiss()},a.namespace.saveToFile=function(){a.namespace.modalInstance.dismiss();var b=new Blob([a.namespace.namespaceFileContents],{type:"text/plain"}),c=a.namespace.selectedNameSpace.prefix+".txt",d=document.createElement("a");d.download=c,d.innerHTML="Download File",null!=window.webkitURL?d.href=window.webkitURL.createObjectURL(b):(d.href=window.URL.createObjectURL(b),document.body.appendChild(d)),confirm("Save BEL Namespace file for prefix "+e+" in "+c+"?")&&d.click()}}).error(function(b,c,d,e){a.errors=b.message})}}]})}}]}}),a.directive("leaveGroup",function(){return{scope:{ndexData:"="},restrict:"E",template:'<button class="btn btn-primary customButtonWidth" ng-click="openMe()">Leave Group</button>',controller:["$scope","$modal","$route","ndexService",function(a,b,c,d){a.openMe=function(){modalInstance=b.open({templateUrl:"views/directives/confirmationModal.html",scope:a,controller:["$scope","$modalInstance","$location","ndexService","ndexUtility","sharedProperties",function(a,b,c,d,e,f){a.title="Leave "+a.group.groupName;var g=a.ndexData,h=g.isAdmin;a.message="You are about to leave this group and will lose access to all networks shared with the group. Would you like to proceed?",h&&1==g.adminsCount&&(a.message="You are the admin of this group and cannot leave it unless you designate another admin.",a.isProcessing=!0),a.cancel=function(){a.isProcessing=!1,b.dismiss()},a.confirm=function(){a.isProcessing||(a.isProcessing=!0,d.removeGroupMemberV2(a.group.externalId,f.getCurrentUserId(),function(d){b.close(),c.path("/user/"+f.getCurrentUserId()),a.isProcessing=!1},function(b){b&&b.message&&(a.errors=b.message)}))}}]})},a.$watch("ndexData.displayedGroup",function(b){a.group=b})}]}}),a.directive("deleteGroup",function(){return{scope:{groupIdToDel:"="},restrict:"E",template:'<button class="btn btn-primary customButtonWidth" ng-click="openMe()">Delete Group</button>',controller:["$scope","$modal","$location","ndexService",function(a,b,c,d){a.openMe=function(){modalInstance=b.open({templateUrl:"views/directives/confirmationModal.html",scope:a,controller:["$scope","$modalInstance","$route","ndexService","ndexUtility","uiMisc",function(a,b,d,e,f,g){a.title="Delete this Group",a.message="This group will be permanently deleted from NDEx. Are you sure you want to delete?",a.cancel=function(){b.dismiss()},a.confirm=function(){a.isProcessing||(a.isProcessing=!0,e.deleteGroupV2(a.groupIdToDel,function(d){b.close(),c.path("/myAccount"),a.isProcessing=!1},function(b){a.errors=g.formatErrorMessage("Unable to delete group",b)}))}}]})},a.$watch("ndexData",function(b){a.externalId=b})}]}}),a.directive("deleteUser",function(){return{scope:{},restrict:"AE",template:'<button class="dropdown-btn" ng-click="openMe()">Delete Account</span>',controller:["$scope","$modal","$location","ndexService",function(a,b,c,d){a.openMe=function(){modalInstance=b.open({templateUrl:"views/directives/confirmationModal.html",scope:a,controller:["$scope","$modalInstance","$location","$route","ndexService","ndexUtility","uiMisc",function(a,b,c,d,e,f,g){a.title="Delete Your Account",a.message="Your account will be permanently deleted from NDEx. Are you sure you want to delete?",a.cancel=function(){b.dismiss()},a.confirm=function(){a.isProcessing||(a.isProcessing=!0,e.deleteUserV2(function(e){b.close(),a.$emit("LOGGED_OUT"),c.path("/"),d.reload(),a.isProcessing=!1},function(b){a.errors=g.formatErrorMessage("Unable to delete account",b)}))}}]})}}]}}),a.directive("typeaheadFocus",function(){return{require:"ngModel",link:function(a,b,c,d){b.bind("click",function(){var a=d.$viewValue;" "==d.$viewValue&&d.$setViewValue(null),d.$setViewValue(" "),d.$setViewValue(a||" ")}),a.emptyOrMatch=function(a,b){return" "==b||a.indexOf(b)>-1}}}}),a.directive("confirmAdminRemoval",function(){return{scope:{checkAdminRemoval:"&",successCall:"&"},restrict:"E",templateUrl:"views/directives/warningModal.html",transclude:!0,controller:["$scope","$modal","$location","ndexService",function(a,b,c,d){a.openMe=function(){a.canProceed=!0;var c=a.checkAdminRemoval();c.adminIssue?"ABORT"!=c.issueSeverity?modalInstance=b.open({templateUrl:"warning-modal.html",scope:a,controller:["$scope","$modalInstance","$location","$route","ndexService","ndexUtility",function(a,b,d,e,f,g){a.title=c.title,a.message=c.message,a.cancel=function(){b.dismiss()},a.confirm=function(){a.isProcessing||(a.isProcessing=!1,a.successCall(),b.dismiss())}}]}):(a.canProceed=!1,a.isProcessing=!1,modalInstance=b.open({templateUrl:"views/directives/confirmationModal.html",scope:a,controller:["$scope","$modalInstance","$location","$route","ndexService","ndexUtility",function(a,b,d,e,f,g){a.title=c.title,a.message=c.message,a.cancel=function(){b.dismiss()},a.confirm=function(){}}]})):a.successCall()}}]}}),a.directive("networkProperty",function(){return{scope:{propertyModel:"=",valuePairSplice:"&",editorChanged:"&",valueChanged:"&",netIndex:"=",isEdit:"=",isAdmin:"="},restrict:"E",templateUrl:"views/directives/networkProperty.html",transclude:!0,controller:["$scope","$modal","$location","ndexService",function(a,b,c,d){a.vpsplice=function(){a.valuePairSplice({passIndex:a.netIndex,passOne:1})},a.editorChangedCall=function(b){a.editorChanged({passIndex:a.netIndex,predicateString:b,property:a.propertyModel,del:"del"})},a.updateScore=function(){a.valueChanged()}}]}}),a.filter("permissionToLabel",function(){return function(a){switch(a){case"ADMIN":return"Is Admin";case"WRITE":return"Can Edit";case"READ":return"Can Read";case"GROUPADMIN":return"Is Admin";case"MEMBER":return"Is Member"}}}),a.filter("requestStatusToLabel",function(){return function(a){switch(a){case"PENDING":return"pending";case"DECLINED":return"declined";case"ACCEPTED":return"accepted"}}}),a.filter("taskStatusToLabel",function(){return function(a){switch(a){case"COMPLETED":return"completed";case"QUEUED":return"queued";case"STAGED":return"staged";case"PROCESSING":return"processing";case"COMPLETED_WITH_WARNINGS":return"completed with warnings";case"COMPLETED_WITH_ERRORS":return"completed with errors";case"FAILED":return"failed";case"QUEUED_FOR_DELETION":return"queued for deletion";case"ALL":return"all"}}})}();var ndexApp=angular.module("ndexApp",["ngRoute","ngResource","ngTouch","ngSanitize","ndexServiceApp","ui.bootstrap","angularFileUpload","uiServiceApp","ui.grid","ui.grid.resizeColumns","ui.grid.selection","ui.grid.expandable","ui.grid.pinning","ui.grid.pagination","ngclipboard","textAngular","ngtweet","slick","angular-google-analytics"]);ndexApp.filter("encodeURIComponent",function(){return window.encodeURIComponent}),ndexApp.run(["$route","$rootScope","$location",function(a,b,c){var d=c.path;c.path=function(e,f){if(!1===f)var g=a.current,h=b.$on("$locationChangeSuccess",function(){a.current=g,h()});return d.apply(c,[e])}}]);var safeURLs=window.ndexSettings.landingPageConfigServer+"**";ndexApp.config(["$sceDelegateProvider",function(a){a.resourceUrlWhitelist(["self",safeURLs])}]),ndexApp.service("authInterceptor",["$q",function(a){return{request:function(b){return b||a.when(b)},requestError:function(b){return a.reject(b)},response:function(b){return b||a.when(b)},responseError:function(b){return a.reject(b)}}}]).config(["$httpProvider",function(a){a.interceptors.push("authInterceptor")}]);var checkIfUserHasAccessToTheClickedNetwork=function(a,b,c,d,e,f,g,h,i,j){var k=i.getCurrentUserId(),l=c.current.params.identifier,m=c.current.params&&c.current.params.accesskey?c.current.params.accesskey:null,n=a.defer();return k?e.getNetworkSummaryV2(l,m).success(function(){n.resolve()}).error(function(a){if(a.errorCode&&"NDEx_Unauthorized_Operation_Exception"===a.errorCode){n.reject();j.dismissAll(),f.genericInfoModal("You Do Not Have Access to this Network","You do not have permission to access this network.  Please contact the network owner and ask her/him to share this network with you."),b.path("/myAccount")}else if(a.errorCode&&"NDEx_Object_Not_Found_Exception"===a.errorCode){n.reject();var c="Network was not found on the NDEx server. ";a.message&&(c=a.message),j.dismissAll(),f.genericInfoModal("Network Not Found",c),b.path("/myAccount")}}):e.getNetworkSummaryV2(l,m).success(function(){n.resolve()}).error(function(a){if(a.errorCode&&"NDEx_Unauthorized_Operation_Exception"===a.errorCode){n.reject();g.showLogInModal("This network is not public. <br /> If you log in, you may have access to it. <br />",function(){h.reloadRoute=!0,h.$emit("LOGGED_IN")},function(){n.resolve()})}else if(a.errorCode&&"NDEx_Object_Not_Found_Exception"===a.errorCode){n.reject();var c="Network was not found on the NDEx server. ";a.message&&(c=a.message),j.dismissAll(),f.genericInfoModal("Network Not Found",c),b.path("/")}}),n.promise};checkIfUserHasAccessToTheClickedNetwork.$inject=["$q","$location","$route","ndexUtility","ndexService","ndexNavigation","logInService","$rootScope","sharedProperties","$modalStack"];var checkIfUserExists=function(a,b,c,d,e,f,g,h){var i=f.getCurrentUserId(),j=c.current.params.identifier,k=a.defer();return i===j&&null!==i&&null!==j?(b.path("/myAccount"),k.resolve()):(d.getUserByUUIDV2(j).success(function(a){return h.user=a,k.resolve()}).error(function(a){if(a.errorCode&&"NDEx_Object_Not_Found_Exception"===a.errorCode){k.reject();var c="User was not found on the NDEx server. ";a.message&&(c=a.message),g.dismissAll(),e.genericInfoModal("User Not Found",c),i?b.path("/myAccount"):b.path("/")}}),k.promise)};checkIfUserExists.$inject=["$q","$location","$route","ndexService","ndexNavigation","sharedProperties","$modalStack","$rootScope"],ndexApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/home.html",controller:"homeController"}).when("/signIn",{templateUrl:"views/home.html",controller:"signInController"}).when("/search",{templateUrl:"views/search.html",controller:"searchController"}).when("/user/:identifier",{templateUrl:"views/user.html",controller:"userController",
resolve:{factory:checkIfUserExists}}).when("/myAccount/:pageNo?",{templateUrl:"views/myAccount.html",controller:"myAccountController"}).when("/group/:identifier",{templateUrl:"views/group.html",controller:"groupController"}).when("/networkSet/:identifier",{templateUrl:"views/networkSet.html",controller:"networkSetController"}).when("/viewer",{templateUrl:"views/network.html",controller:"networkController"}).when("/network/:identifier",{templateUrl:"views/network.html",controller:"networkController",resolve:{factory:checkIfUserHasAccessToTheClickedNetwork}}).when("/newNetwork/:identifier",{templateUrl:"views/network.html",controller:"networkController",resolve:{factory:checkIfUserHasAccessToTheClickedNetwork}}).when("/upload",{templateUrl:"views/upload.html",controller:"uploadController"}).when("/properties/network/:identifier/:subNetworkId",{templateUrl:"views/editNetworkPropertiesFixedForm.html",controller:"editNetworkPropertiesFixedFormController"}).when("/access/network/:identifier",{templateUrl:"views/manageNetworkAccess.html",controller:"manageNetworkAccessController"}).when("/access/bulk/network",{templateUrl:"views/manageBulkNetworkAccess.html",controller:"manageBulkNetworkAccessController"}).when("/networkset/:identifier",{templateUrl:"views/networkSet.html",controller:"networkSetController"}).when("/access/group/:identifier",{templateUrl:"views/manageGroupAccess.html",controller:"manageGroupAccessController"})}]),ndexApp.config(["AnalyticsProvider",function(a){a.setAccount(ndexSettings.googleAnalyticsTrackingCode)}]).run(["Analytics",function(a){}]),ndexApp.directive("ngEnter",["$document",function(a){return{scope:{ngEnter:"&"},link:function(b){var c=function(d){13===d.which&&(b.ngEnter(),b.$apply(),d.preventDefault(),a.unbind("keydown keypress",c))};a.bind("keydown keypress",c)}}}]),ndexApp.service("sharedProperties",function(){return{getCurrentNetworkId:function(){return this.currentNetworkId},setCurrentNetworkId:function(a){this.currentNetworkId=a},getCurrentUserId:function(){return this.currentUserId},setCurrentUserId:function(a){this.currentUserId=a},getCurrentUserAccountName:function(){return this.userName},setCurrentUser:function(a,b){this.currentUserId=a,this.userName=b},setCurrentQueryTerms:function(a){this.currentQueryTerms=a},getCurrentQueryTerms:function(){return this.currentQueryTerms},setCurrentQueryDepth:function(a){this.currentQueryDepth=a},getCurrentQueryDepth:function(){return this.currentQueryDepth},setSelectedNetworkIDs:function(a){this.selectedNetworkIDs=a},getSelectedNetworkIDs:function(){return this.selectedNetworkIDs},getLoggedInUserFirstAndLastNames:function(){return null!=window.currentNdexUser?window.currentNdexUser.firstName+" "+window.currentNdexUser.lastName:""}}}),angular.module("ndexServiceApp").service("uiMisc",["ndexNavigation","ndexService","ndexUtility","sharedProperties","$routeParams",function(a,b,c,d,e){var f=this;f.showNetworkWarningsOrErrors=function(b,c){for(var d,e=0;e<c.length;e++){var f=c[e];if(b.externalId==f.externalId){d=f;break}}var g=b.Status.toLowerCase(),h="";if("failed"==g)h=d.errorMessage;else for(var i=0;i<d.warnings.length;i++)h=h+d.warnings[i]+"<br>";var j="failed"===g?"Failed Error Message":"Warnings";a.genericInfoModal(j,h)},f.getNetworkReferenceObj=function(a,b){var c=null;if(!b||!b.properties)return c;for(var d=0;d<b.properties.length;d++){var e=b.properties[d];if(e.predicateString&&"reference"==e.predicateString.toLowerCase()&&e.subNetworkId==a){c=e.value?e.value:null,c&&!/\S/.test(c)&&(c=null);break}}return c},f.getSetReferenceObj=function(a){var b="";if(!a||!a.properties||!a.properties.reference)return b;b=a.properties.reference;var c;try{c=jQuery(b).text()}catch(a){c=b}var d;try{d=jQuery(b).find("a").attr("href")}catch(a){d=""}var e=(b.toLowerCase().match(/a href=/g)||[]).length;return{referenceText:c||"",referenceHTML:b||"",url:d||"",urlCount:e}},f.getSubNetworkInfo=function(a){var b=this.getNoOfSubNetworks(a);return{id:1==b&&a.subnetworkIds[0]?a.subnetworkIds[0]:null,numberOfSubNetworks:b}},f.getSubNetworkId=function(a){return 1==this.getNoOfSubNetworks(a)&&a.subnetworkIds[0]?a.subnetworkIds[0]:null},f.getNoOfSubNetworks=function(a){var b=[];return a&&a.properties&&_.forEach(a.properties,function(a){"subNetworkId"in a?-1==b.indexOf(a.subNetworkId)&&b.push(a.subNetworkId):-1==b.indexOf(null)&&b.push(null)}),1!=b.length||b[0]?b.length:0},f.getNetworkFormat=function(a,b){var c="";if(!b||!b.properties)return c;for(var d=0;d<b.properties.length;d++)if("ndex:sourceFormat"==b.properties[d].predicateString&&a==b.properties[d].subNetworkId){c=b.properties[d].value,"unknown"==c.toLowerCase()&&(c="");break}return c},f.getNetworkFormatForMultipleSubNetworks=function(a){if(!a||!a.properties)return"";var b=[];return _.forEach(a.properties,function(a){a.predicateString&&"ndex:sourceFormat"==a.predicateString&&-1==b.indexOf(a.value)&&b.push(a.value)}),1==b.length?b[0]:""},f.getDisease=function(a){var b="";if(!a||!a.properties)return b;for(var c=0;c<a.properties.length;c++){var d=a.properties[c];if(d.predicateString&&"disease"==d.predicateString.toLowerCase()){b=d.value?d.value:"";break}}return b},f.getTissue=function(a){var b="";if(!a||!a.properties)return b;for(var c=0;c<a.properties.length;c++){var d=a.properties[c];if(d.predicateString&&"tissue"==d.predicateString.toLowerCase()){b=d.value?d.value:"";break}}return b},f.getCurrentServerURL=function(){var a=document.createElement("a");return a.href=b.getNdexServerUri(),a.protocol+"//"+a.hostname+"/#/"},f.downloadCXNetwork=function(a){var d=e.accesskey,f=document.createElement("a"),g=b.getNdexServerUri()+"/network/"+a+"?download=true";if(d&&(g=g+"&accesskey="+d),"google"==window.currentSignInType)g=g+"&id_token="+gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token;else if("basic"==window.currentSignInType){var h=c.getUserCredentials();g=g+"&auth_token="+btoa(h.userName+":"+h.token)}f.setAttribute("href",g),f.setAttribute("type","hidden"),document.body.appendChild(f),f.click(),f.remove()},f.showSetInfo=function(c){(c.description?c.description.trim():"")||(c.description=null);var e=c.properties&&c.properties.reference?c.properties.reference:null;e&&(c.reference=e),c.networkCount=c.networks?c.networks.length:0;var g=d.getCurrentUserId();if(g&&g==c.ownerId){var h=c.showcased;delete c.showcased,c.showcased=h?"Yes":"No",b.getAccessKeyOfNetworkSetV2(c.externalId,function(a){a?a.accessKey?(c.shareLinkStatus="Enabled",c.networkSetShareableURL=f.buildShareableNetworkSetURL(a.accessKey,c.externalId)):c.shareLinkStatus="Unknown":c.shareLinkStatus="Disabled"},function(a){console.log("unable to get access key for network set "+c.externalId)})}else delete c.showcased;a.networkSetInfoModal(c)},f.showNetworkInfo=function(b){var c=f.getSubNetworkId(b),d=f.getNetworkReferenceObj(c,b);b.reference=d,(b.description?b.description.trim():"")||(b.description=null),a.networkInfoModal(b)},f.buildNetworkURL=function(a,b){var c=f.getCurrentServerURL()+"network/"+b;return a&&(c=c+"?accesskey="+a),c},f.buildShareableNetworkSetURL=function(a,b){return f.getCurrentServerURL()+"networkset/"+b+"?accesskey="+a},f.showAvailableDiskSpace=function(a){var b={},c=1073741824,d=1099511627776,e=0,f=0,g=0,h=0;return b.diskQuota=a.diskQuota,b.diskQuotaUnlimited=b.diskQuota<=0,b.diskUsed=a.diskUsed,b.diskPercentageUsed=0,b.diskUsed<c?(e=a.diskUsed/1048576,f=+e.toFixed(1),0==f&&a.diskUsed>0&&(f=.1),b.diskUsedString=f+" MB of "):b.diskUsed>=c&&b.diskUsed<d?(e=a.diskUsed/c,f=+(10*e/10).toFixed(2),b.diskUsedString=f+" GB of "):(e=a.diskUsed/d,f=+(10*e/10).toFixed(3),b.diskUsedString=f+" TB of "),b.diskQuotaUnlimited?(b.diskUsedString+=" Unlimited",b):(b.diskQuota<c?(g=b.diskQuota/1048576,h=+(10*g/10).toFixed(1),b.diskUsedString+=h+" MB used"):b.diskQuota>=c&&b.diskQuota<d?(g=b.diskQuota/c,h=+(10*g/10).toFixed(1),b.diskUsedString+=h+" GB used"):b.diskQuota>=d&&(g=b.diskQuota/d,h=+(10*g/10).toFixed(1),b.diskUsedString+=h+" TB used"),b.diskPercentageUsed=+_.round(parseFloat(a.diskUsed/a.diskQuota*100),1).toFixed(1),0==b.diskPercentageUsed&&(b.diskPercentageUsed=b.diskUsed>0?.1:0),b.diskPercentageUsedStyle={width:b.diskPercentageUsed+"%",color:"black"},b.diskPercentageUsed<=25?b.diskPercentageUsedClass="progress-bar progress-bar-success":b.diskPercentageUsed>25&&b.diskPercentageUsed<=50?b.diskPercentageUsedClass="progress-bar progress-bar-info":b.diskPercentageUsed>50&&b.diskPercentageUsed<=75?b.diskPercentageUsedClass="progress-bar progress-bar-warning":b.diskPercentageUsedClass="progress-bar progress-bar-danger",b)},f.replaceNewLinesAndSpaces=function(a){if(a){return a.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;")}return a},f.findWhatSelectedNetworksCanBeModified=function(a,b,c,d){var e=0,f=0,g=0,h=a.getSummariesOfSelectedNetworks(),i=h.length,j={selected:i,readOnly:0,nonAdmin:0,admin:0,write:0,read:0,networks:[],writeNetworks:[],readNetworks:[]},k=_.map(h,function(b){return b.isReadOnly&&e++,b.ownerUUID!=a.identifier?f++:g++,b.ownerUUID==a.identifier?{externalId:b.externalId,name:b.name,visibility:b.visibility,isShowcase:b.isShowcase,indexLevel:b.indexLevel,isReadOnly:b.isReadOnly}:null});if(j.readOnly=e,j.nonAdmin=f,j.admin=g,j.networks=_.without(k,null),"admin"==b)return void c(j);if(f>0){var l=_.map(h,function(b){return b.ownerUUID!=a.identifier?b.externalId:null});l=_.without(l,null);var m=_.map(h,function(b){return b.externalId in a.networksWithWriteAccess?{externalId:b.externalId,name:b.name,visibility:b.visibility,isShowcase:b.isShowcase,indexLevel:b.indexLevel,isReadOnly:b.isReadOnly}:null});j.writeNetworks=_.without(m,null),j.write=j.writeNetworks.length;var n=_.map(h,function(b){return b.externalId in a.networksWithReadAccess?{externalId:b.externalId,name:b.name,visibility:b.visibility,isShowcase:b.isShowcase,indexLevel:b.indexLevel,isReadOnly:b.isReadOnly}:null});j.readNetworks=_.without(n,null),j.read=j.readNetworks.length}c(j)},f.formatErrorMessage=function(a,b){var c=a;return b&&b.data&&b.data.message?c=c+": "+b.data.message:b&&b.message?c=c+": "+b.message:c+=".",c},f.isDOIPending=function(a){return a&&"undefined"!=a.doi&&null!=a.doi&&"pending"==a.doi.toLowerCase()},f.isDOIAssigned=function(a){return a&&"undefined"!=a.doi&&null!=a.doi&&"pending"!=a.doi.toLowerCase()},f.isNetworkCertified=function(a){return a&&"undefined"!=a.isCertified&&a.isCertified},f.addNetworkProperty=function(a,b,c,d,e){for(var f={predicateString:a,value:b,dataType:c,subNetworkId:e},g=0;g<d.length;g++){var h=d[g];if(h.predicateString&&h.predicateString.toLowerCase()==a.toLowerCase()&&(h.subNetworkId&&h.subNetworkId==e||(!h.subNetworkId||null==h.subNetworkId)&&(!e||null==e))){d.splice(g,1);break}}d.push(f)}}]),ndexServiceApp.factory("logInService",["sharedProperties","ndexUtility","ndexService","$modal",function(a,b,c,d){var e={};return e.showLogInModal=function(e,f,g){d.open({templateUrl:"views/logInModal.html",controller:["$scope","$modalInstance",function(d,h){d.message=e,d.credentials={user:"",password:"",errorMessage:""},d.cancel=function(){h.dismiss()},d.signIn=function(){var e=d.credentials.user,i=d.credentials.password;c.authenticateUserV2(e,i,function(c){h.dismiss(),a.setCurrentUser(c.externalId,c.userName),b.setUserInfo(c.userName,c.firstName,c.lastName,c.externalId,i),window.currentNdexUser=c,window.currentSignInType="basic",f()},function(a,b){a&&a.message?d.credentials.errorMessage=a.message:d.credentials.errorMessage="Unexpected error during sign-in with status "+a.status,g()})},d.signInWithGoogle=function(){gapi.auth2.getAuthInstance().signIn({prompt:"consent select_account"}).then(i,j)};var i=function(b){c.authenticateUserWithGoogleIdToken(function(b){a.setCurrentUser(b.externalId,b.userName),window.currentNdexUser=b,window.currentSignInType="google",f()},function(a,b){a&&a.message?d.credentials.errorMessage=a.message:d.credentials.errorMessage="Unexpected error during sign-in with status "+a.status,g()})},j=function(a){"popup_closed_by_user"!=a.error&&(d.signIn.message="Failed to authenticate with google: "+a.error)}}]})},e}]),ndexServiceApp.factory("ndexSpinner",[function(){var a={},b={spinner:null};return a.startSpinner=function(a){if(!b.spinner){var c={lines:11,length:19,width:13,radius:26,scale:.5,corners:1,color:"#ff0000",opacity:.25,rotate:11,direction:1,speed:.6,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"51%",shadow:!0,hwaccel:!1,position:"absolute"},d=document.getElementById(a);d&&(b.spinner=new Spinner(c).spin(d))}},a.stopSpinner=function(){b.spinner&&(b.spinner.stop(),b.spinner=null)},a}]),angular.module("ndexServiceApp").service("userSessionTablesSettings",["$rootScope",function(a){var b=this;b.clearState=function(){delete a.myAccountPageStates},b.getPageSortingColumnName=function(b){return a.myAccountPageStates.pages[b].sorting.name},b.getPageSortingDirection=function(b){return a.myAccountPageStates.pages[b].sorting.direction},b.getPageSorting=function(b){return a.hasOwnProperty("myAccountPageStates")&&a.myAccountPageStates.hasOwnProperty("pages")&&a.myAccountPageStates.pages.hasOwnProperty(b)&&a.myAccountPageStates.pages[b].hasOwnProperty("sorting")?a.myAccountPageStates.pages[b].sorting:{}},b.setPageSorting=function(b,c,d){a.myAccountPageStates.pages[b]||(a.myAccountPageStates.pages[b]={}),a.myAccountPageStates.pages[b].sorting||(a.myAccountPageStates.pages[b].sorting={}),a.myAccountPageStates.pages[b].sorting.name=c,a.myAccountPageStates.pages[b].sorting.direction=d.direction,a.myAccountPageStates.pages[b].sorting.priority=d.priority,a.myAccountPageStates.pages[b].sorting.sorted=!0},b.setPageSortingToUnsorted=function(b){a.myAccountPageStates.pages[b]&&a.myAccountPageStates.pages[b].sorting&&(a.myAccountPageStates.pages[b].sorting.name=null,a.myAccountPageStates.pages[b].sorting.direction=null,a.myAccountPageStates.pages[b].sorting.prirority=null,a.myAccountPageStates.pages[b].sorting.sorted=!1)},b.setFilterForPage=function(b,c,d){a.myAccountPageStates.pages[b]||(a.myAccountPageStates.pages[b]={}),a.myAccountPageStates.pages[b].filters||(a.myAccountPageStates.pages[b].filters={}),a.myAccountPageStates.pages[b].filters[c]=d},b.removeFilterFromPage=function(b,c){a.myAccountPageStates.pages[b]&&a.myAccountPageStates.pages[b].filters&&a.myAccountPageStates.pages[b].filters.hasOwnProperty(c)&&delete a.myAccountPageStates.pages[b].filters[c]},b.getPageFilters=function(b){return a.myAccountPageStates.pages&&a.myAccountPageStates.pages[b]&&a.myAccountPageStates.pages[b].filters?a.myAccountPageStates.pages[b].filters:{}},b.getTablePaginationSize=function(){return a.myAccountPageStates.table.networksPerPage},b.initMyAccountPageStates=function(){a.myAccountPageStates||(a.myAccountPageStates={},a.myAccountPageStates.pages={},a.myAccountPageStates.table={},a.myAccountPageStates.table.selectedNetworks=new Set([]),a.myAccountPageStates.table.networksPerPage=50),console.log()},b.addUUIDToSelectedNetworks=function(b){a.myAccountPageStates.table.selectedNetworks.add(b)},b.deleteUUIDFromSelectedNetworks=function(b){a.myAccountPageStates.table.selectedNetworks.delete(b)},b.isUUIDInSelectedNetworks=function(b){return a.myAccountPageStates.table.selectedNetworks.has(b)},b.noNetworksSelected=function(){return 0===a.myAccountPageStates.table.selectedNetworks.size},b.clearPreviousFiltersAndSetNewOnes=function(a,c){var d=b.getPageFilters(c),e=a;e&&e.hasOwnProperty("columns")&&_.forEach(e.columns,function(a){!a||a.hasOwnProperty("visible")&&!0!==a.visible||(a.hasOwnProperty("filters")&&Array.isArray(a.filters)&&delete a.filters[0].term,a.name in d&&(a.filters[0].term=d[a.name]))})},b.clearPreviousSortingAndSetNewOne=function(a,c){var d=b.getPageSorting(c),e=a,f=d.name;e&&e.hasOwnProperty("columns")&&_.forEach(e.columns,function(a){!a||a.hasOwnProperty("visible")&&!0!==a.visible||(a.hasOwnProperty("sort")&&a.sort.hasOwnProperty("direction")&&(delete a.sort.direction,delete a.sort.priority),a.name===f&&(a.sort.direction=d.direction,a.sort.priority=d.priority))})}}]),ndexApp.controller("mainController",["ndexService","ndexUtility","sharedProperties","userSessionTablesSettings","$scope","$location","$modal","$route","$http","$interval","uiMisc","$rootScope","$uibModal","ndexSpinner","$modalStack",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a){e.featuredContentDropDown=[],e.noWrapSlides=!1;var b=e.slides=[],c=0;if(a.hasOwnProperty("items")&&Array.isArray(a.items)&&a.items.length>0){e.carouselInterval=window.ndexSettings.featuredContentScrollIntervalInMs;var d=new Set(["user","group","networkset","network","webpage","publication"]),f=window.ndexSettings.ndexServerUri.replace("v2","#");f&&!f.endsWith("/")&&(f+="/"),_.forEach(a.items,function(a){var g=a.hasOwnProperty("type")?a.type.toLowerCase():null;if(d.has(g)){var h=a.hasOwnProperty("imageURL")?a.imageURL:null,i=a.title+"<br>"+a.text,j=null,k=!1;switch(a.hasOwnProperty("includeInDropDownMenu")&&(k="true"===a.includeInDropDownMenu.toLowerCase()),g){case"user":j=f+"user/"+a.UUID;break;case"group":j=f+"group/"+a.UUID;break;case"networkset":j=f+"networkset/"+a.UUID,null===h&&(h="images/default_networkSet.62a529ef.png");break;case"network":j=f+"network/"+a.UUID;break;case"webpage":j=a.URL;break;case"publication":j=a.DOI;break;default:return}if(b.push({image:h,text:i,link:j,id:c++}),k){var l=a.hasOwnProperty("dropdownDisplayName")?z(a.dropdownDisplayName):null;null===l&&(l=a.hasOwnProperty("title")?z(a.title):"drop down item "+(c-1)),e.featuredContentDropDown.push({description:l,href:j})}}}),e.featuredContentDefined=b.length>0,e.featuredContentDropDownEnabled=e.featuredContentDropDown.length>0}}e.$on("IdleStart",function(){"basic"===window.currentSignInType&&e.main.signout()}),$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip()}),e.logosLoaded=!1,e.footerHtml=window.ndexSettings.landingPageConfigServer+"/footer.html",e.slickConfig={enabled:!0,autoplay:!0,draggable:!1,autoplaySpeed:1e3,method:{},initialSlide:0,event:{beforeChange:function(a,b,c,d){},afterChange:function(a,b,c,d){}}},e.showFooter=!0,e.main={},e.main.ndexServerVersion=null,e.main.url=f,e.main.loggedIn=!1,e.main.showSignIn=!0;var q=function(){var a=c.getLoggedInUserFirstAndLastNames();e.main.userFirstAndLastNames=a?"Hi, "+a:"MyAccount"},r=function(){e.main.loggedIn=!0,e.main.showSignIn=!1,e.main.userName=c.getCurrentUserAccountName(),q(),l.reloadRoute&&(delete l.reloadRoute,h.reload())};e.featuredContentDefined=!1,e.featuredContentDropDownEnabled=!1,l.$on("LOGGED_IN",r);var s=function(){if(l.signOut=!0,"undefined"!=typeof Storage&&sessionStorage.clear(),d.clearState(),e.main.loggedIn=!1,delete e.main.userName,"basic"===window.currentSignInType)b.clearUserCredentials(),delete i.defaults.headers.common.Authorization;else{var a=gapi.auth2.getAuthInstance();a&&a.signOut()}window.currentNdexUser=null,window.currentSignInType=null,c.currentNetworkId=null,c.currentUserId=null,e.main.showSignIn=!0,f.path("/")};e.$on("LOGGED_OUT",s),l.$on("SHOW_UPDATED_USER_NAME",q),e.main.searchString="",e.strLength=0,e.maxSearchInputLength=250,e.notAllowedInSearchExpansion=[" NOT "," OR "," AND ",":"],e.notAllowedInSearchExpansionStart=["NOT ","OR ","AND "],e.notAllowedInSearchExpansionEnd=[" NOT"," OR"," AND"],e.notAllowedInSearchExpansionEqual=["NOT","OR","AND",":"],e.arrayOfValsForSearchExpansion=["ALL","NETWORKS"];var t="Perform Search Term Expansion (Genes and Proteins only)";e.popupTitleInSearchModal='This option expands the search term(s) to include all known aliases for a "human" gene(s)/protein(s). For example, searching for AKT1 will retrieve all networks where the term AKT1 is mentioned either  in the network name, description or in any of the node names. When the Search Term Expansion option is enabled, search results will also include networks  where a node\'s name is "PKB-ALPHA", "P31749", "HGNC:391", etc. ',e.main.searchTermExpansionSelected=!1,e.searchTermExpansionEnabled=!1,e.checkLengthOfSearchString=function(){e.main.searchString.length>=e.maxSearchInputLength?e.stringTooLongWarning="The maximum length for this field is "+e.maxSearchInputLength+" characters":e.stringTooLongWarning&&delete e.stringTooLongWarning},e.main.goToNetworkView=function(a){c.currentNetworkId&&f.path(a+c.currentNetworkId)},e.main.goToCurrentUser=function(){c.currentUserId&&f.path("/myAccount")},function(a){void 0===a.requireAuthentication&&(a.requireAuthentication=!1),void 0===a.welcome&&(a.welcome="NDEx Web App deployed at My Company"),void 0===a.networkQueryEdgeLimit&&(a.networkQueryEdgeLimit=5e4),void 0===a.idleTime&&(a.idleTime=3600),void 0===a.uploadSizeLimit&&(a.uploadSizeLimit="none"),void 0===a.messages&&(a.messages={}),void 0===a.messages.serverDown&&(a.messages.serverDown='<img src="images/maintenance.e1a3d435.png">'),void 0===a.signIn&&(a.signIn={}),void 0===a.signIn.header&&(a.signIn.header="Sign in to your NDEx account"),void 0===a.signIn.footer&&(a.signIn.footer="Need an account?"),void 0===a.signIn.showForgotPassword&&(a.signIn.showForgotPassword=!0),void 0===a.signIn.showSignup&&(a.signIn.showSignup=!0),void 0===a.ndexServerUri&&(a.messages.serverDown="Error in ndex-webapp-config.js:<br>The parameter ndexServerUri is required.<br>Please edit the configuration file to provide this URI."),(void 0===a.refreshIntervalInSeconds||"number"!=typeof a.refreshIntervalInSeconds||a.refreshIntervalInSeconds<0)&&(a.refreshIntervalInSeconds=0),void 0===a.searchDocLink&&(a.searchDocLink={}),void 0===a.searchDocLink.label&&(a.searchDocLink.label="Documentation on Searching in NDEx"),void 0===a.searchDocLink.href&&(a.searchDocLink.href="http://home.ndexbio.org/finding-and-querying-networks/"),void 0===a.searchDocLink.warning&&(a.searchDocLink.warning="Warning! You are about to leave your organization's domain. Follow this link?"),void 0===a.searchDocLink.showWarning&&(a.searchDocLink.showWarning=!1),(void 0===a.openInCytoscapeEdgeThresholdWarning||"number"!=typeof a.openInCytoscapeEdgeThresholdWarning||a.openInCytoscapeEdgeThresholdWarning<0)&&(a.openInCytoscapeEdgeThresholdWarning=0)}(window.ndexSettings),e.linkToReleaseDocs=window.ndexSettings.linkToReleaseDocs,window.ndexSettings.citeNDEx={},window.ndexSettings.citeNDEx.label="Cite NDEx",e.config=window.ndexSettings,e.main.serverIsDown=null,window.navigator.ndexServerVersion="ndex-webapp/",a.getServerStatus("full",function(a){a&&a.properties&&(a.properties.ImporterExporters&&a.properties.ImporterExporters.length>0&&(e.$parent.ImporterExporters=JSON.parse(JSON.stringify(a.properties.ImporterExporters))),a.properties.ServerVersion&&(e.main.ndexServerVersion=a.properties.ServerVersion,window.navigator.ndexServerVersion+=a.properties.ServerVersion,document.getElementById("ndexServerVersionId").style.color="#149FEC")),e.main.serverIsDown=!1,document.getElementById("topNavBarId").style.display="",document.getElementById("ndexLogoId").style.display="",document.getElementById("topMenuId").style.display="",document.getElementById("searchMyAccountNameLoginId").style.display="",document.getElementById("footerId").style.display="",document.getElementById("slidingRightMenuId").style.display="",document.getElementById("slidingRightMenuSearchMyAccountNameLoginId").style.display=""},function(){e.main.serverIsDown=!0,window.navigator.ndexServerVersion+="unknown",document.getElementById("topNavBarId").style.display="",document.getElementById("ndexLogoId").style.display="",document.getElementById("topMenuId").style.display="",document.getElementById("searchMyAccountNameLoginId").style.display="",document.getElementById("footerId").style.display="",document.getElementById("slidingRightMenuId").style.display="",document.getElementById("slidingRightMenuSearchMyAccountNameLoginId").style.display="",document.getElementById("ndexLogoId").style.background="transparent"}),e.main.showSignInSignUpOptions=function(){m.open({templateUrl:"views/signInSignUpModal.html",controller:["$scope","$uibModalInstance",function(d,e){d.header=window.ndexSettings.signIn.header,d.showForgotPassword=window.ndexSettings.signIn.showForgotPassword,d.cancelLabel="Cancel",d.confirmLabel="Sign In",d.needAnAccount=window.ndexSettings.signIn.footer+"&nbsp;",d.showSignUp=window.ndexSettings.signIn.showSignup,d.googleSSO=window.googleSSO,d.signIn={userName:"",password:""},d.signIn.newUser={},d.cancelButtonDisabled=!1,d.confirmButtonDisabled=!0,delete d.errors,d.setToolTips=function(){$('[data-toggle="tooltip"]').tooltip()},d.close=function(){e.dismiss()},d.cancel=function(){e.dismiss()},d.$watch("signIn.userName",function(){delete d.errors}),d.$watch("signIn.password",function(){delete d.errors});var g=function(a){c.setCurrentUser(a.externalId,a.userName),b.setUserInfo(a.userName,a.firstName,a.lastName,a.externalId,d.signIn.password),window.currentNdexUser=a,window.currentSignInType="basic",l.$emit("LOGGED_IN"),f.path("/myAccount"),d.signIn.userName=null,d.signIn.password=null,e.dismiss()};d.submitSignIn=function(){b.clearUserCredentials();var c=d.signIn.userName,e=d.signIn.password;a.authenticateUserV2(c,e,g,function(a){a&&a.message?d.errors=a.message:d.errors="Unexpected error during sign-in with status "+a.status})},d.openBasicAuthSignUp=function(){var d=e;m.open({templateUrl:"signUp.html",backdrop:"static",controller:["$scope","$uibModalInstance",function(e,g){e.signIn={userName:"",password:""},e.signIn.newUser={},e.cancel=function(){d.dismiss(),g.dismiss()},e.back=function(){g.dismiss()},e.$watch("signIn.newUser.firstName",function(){e.signIn.signUpErrors=null}),e.$watch("signIn.newUser.lastName",function(){e.signIn.signUpErrors=null}),e.$watch("signIn.newUser.emailAddress",function(){e.signIn.signUpErrors=null}),e.$watch("signIn.newUser.userName",function(){e.signIn.signUpErrors=null}),e.$watch("signIn.newUser.password",function(){e.signIn.signUpErrors=null}),e.$watch("signIn.newUser.passwordConfirm",function(){e.signIn.signUpErrors=null}),e.basicAuthSignUp=function(){if(e.signIn.newUser.password!==e.signIn.newUser.passwordConfirm)return void(e.signIn.signUpErrors="Passwords do not match");var d=function(a){c.setCurrentUser(a.externalId,a.userName),b.setUserInfo(a.userName,a.firstName,a.lastName,a.externalId,e.signIn.password),window.currentNdexUser=a,window.currentSignInType="basic",l.$emit("LOGGED_IN"),f.path("/myAccount"),e.signIn.userName=null,e.signIn.password=null,e.cancel()};a.createUserV2(e.signIn.newUser,function(a){if(a){var b=a.split("/").pop(),c={};c.userName=e.signIn.newUser.userName,c.firstName=e.signIn.newUser.firstName,c.lastName=e.signIn.newUser.lastName,c.externalId=b,e.signIn.password=e.signIn.newUser.password,d(c)}else e.cancel(),m.open({templateUrl:"signUpSuccess.html",backdrop:"static",controller:["$scope","$uibModalInstance",function(a,b){a.cancel=function(){b.dismiss()}}]})},function(a){e.signIn.signUpErrors=a.message})}}]})},d.forgot={},d.forgotPassword=function(){e.dismiss(),m.open({templateUrl:"forgotPassword.html",controller:["$scope","$uibModalInstance","$log","forgot",function(b,c,d,e){b.forgot=e,b.resetPassword=function(){b.isProcessing=!0;n.startSpinner("spinnerResetPasswordId");!function(c,d,f){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(c).toLowerCase())?a.getUserByEmail(c,d,function(g){"NDEx_Object_Not_Found_Exception"===g.errorCode?a.getUserByUserNameV2(c,d,function(a){"NDEx_Object_Not_Found_Exception"===a.errorCode?(n.stopSpinner(),e.errorMsg="Can't find user with "+b.forgot.accountName+" as user name or email.",b.isProcessing=!1):f(a)}):f(g)}):a.getUserByUserNameV2(c,d,f)}(b.forgot.accountName,function(c){var d=c&&c.externalId?c.externalId:null;d?a.emailNewPasswordV2(d,function(){n.stopSpinner(),e.done=!0,e.errorMsg=null,e.successMsg="A new password has been sent to the email of record.",b.isProcessing=!1},function(a){n.stopSpinner(),e.errorMsg=a.message,b.isProcessing=!1}):(n.stopSpinner(),e.errorMsg="Unable to get User Id for user "+b.forgot.accountName+" and request password reset.",b.isProcessing=!1)},function(a){n.stopSpinner(),e.errorMsg=a.message,b.isProcessing=!1})},b.cancel=function(){c.dismiss()},b.back=function(){l.$emit("SHOW_SIGN_IN_SIGN_UP_MODAL"),c.dismiss()},b.$watch("forgot.accountName",function(){delete b.forgot.successMsg,delete b.forgot.errorMsg})}],resolve:{forgot:function(){return d.forgot}}}),e.result.finally(function(){d.forgot={}})};var h=function(b){n.startSpinner("spinnerSignInWithGoogleId"),a.authenticateUserWithGoogleIdToken(function(a){n.stopSpinner(),c.setCurrentUser(a.externalId,a.userName),window.currentNdexUser=a,window.currentSignInType="google",l.$emit("LOGGED_IN"),f.path("/myAccount"),d.signIn.userName=null,d.signIn.password=null,e.dismiss()},function(g){n.stopSpinner(),g&&("NDEx_Object_Not_Found_Exception"===g.errorCode?(e.close(),m.open({templateUrl:"createNewAccountViaGoogle.html",controller:["$scope","$uibModalInstance",function(d,e){d.title="Create New Account",d.message='No account was found in NDEx for the selected email address, so we are creating one for you.<br><br>  Please review and accept our <a target="_blank" href="http://home.ndexbio.org/disclaimer-license">Terms and Conditions</a> and then click the blue Sign Up button to complete your registration.',delete d.errors,d.cancel=function(){e.dismiss()},d.back=function(){e.dismiss(),l.$emit("SHOW_SIGN_IN_SIGN_UP_MODAL")},d.counter=0,d.maxCounterValue=99999,d.limitOfUserNameLength=95,d.userName=null,d.createUserWithGoogleIdTokenAndUsername=function(b){a.createUserWithGoogleIdTokenV2(b,function(){a.authenticateUserWithGoogleIdToken(function(a){d.cancel(),d.isProcessing=!1,c.setCurrentUser(a.externalId,a.userName),window.currentNdexUser=a,window.currentSignInType="google",l.$emit("LOGGED_IN"),f.path("/myAccount"),n.stopSpinner()},function(a){d.isProcessing=!1,n.stopSpinner(),d.errors=a.message})},function(a){d.isProcessing=!1,n.stopSpinner(),d.errors=a.message})},d.buildUniqueUserNameAndSignup=function(b){a.getUserByUserNameV2(b,function(){d.counter++,d.counter,d.maxCounterValue;var a=d.userName+d.counter;d.buildUniqueUserNameAndSignup(a)},function(a){a&&a.errorCode&&"NDEx_Object_Not_Found_Exception"===a.errorCode&&d.createUserWithGoogleIdTokenAndUsername(b)})},d.signUpWithGoogle=function(){d.isProcessing=!0,delete d.errors;n.startSpinner("spinnerCreateNewAccountViaGoogleId");var a=b.getBasicProfile().getEmail(),c=a.replace(/@.*$/,"");c.length>d.limitOfUserNameLength&&(c=c.substring(0,d.limitOfUserNameLength)),d.userName=c,d.buildUniqueUserNameAndSignup(c)}}]})):g.message?d.errors=g.message:d.errors="Unexpected error during sign-in with status "+g.status)})},i=function(a){"popup_closed_by_user"!==a.error&&(d.errors="Failed to authenticate with google: "+a.error)};d.signIn.SignInWithGoogle=function(){b.clearUserCredentials(),delete d.errors,d.signIn.userName=null,d.signIn.password=null,gapi.auth2.getAuthInstance().signIn({prompt:"consent select_account"}).then(h,i)}}]})},e.main.isSupportedBrowserUsed=function(){return e.main.showSignIn=!0,-1!==navigator.userAgent.indexOf("Chrome")||(-1!==navigator.userAgent.indexOf("Firefox")||(-1!==navigator.userAgent.indexOf("Safari")||(e.main.showSignIn=!1,!1)))},e.main.signout=function(){s()},e.main.handleStorageEvent=function(a){"loggedInUser"===a.key&&(null!==a.newValue&&"null"!==a.newValue||e.main.signout())},window.addEventListener?window.addEventListener("storage",e.main.handleStorageEvent,!1):window.attachEvent("onstorage",e.main.handleStorageEvent);var u=localStorage.getItem("last-heartbeat");u&&"basic"===window.currentSignInType&&Date.now()-u>1e3*e.config.idleTime&&e.main.signout();var v=function(){localStorage.setItem("last-heartbeat",Date.now())};"basic"===window.currentSignInType&&j(v,10*e.config.idleTime),window.onbeforeunload=function(){v()},e.$on("$destroy",function(){delete window.onbeforeunload}),e.main.getCurrentNetworkId=function(){return c.getCurrentNetworkId()},e.main.getCurrentUserId=function(){return c.getCurrentUserId()},e.main.searchType="All";const w={All:"Search for networks, users, and groups",
Networks:"Search for networks",Users:"Search for users",Groups:"Search for groups"};e.main.getSearchPlaceholder=function(){return w[e.main.searchType]},e.main.searchString="",e.main.search=function(){delete e.stringTooLongWarning;var a=encodeURIComponent(e.main.searchString);"/search"!==f.path()&&f.path("/search");var b=f.absUrl();f.search({searchType:e.main.searchType,searchString:a,searchTermExpansion:e.main.searchTermExpansionSelected&&e.searchTermExpansionEnabled}),b===f.absUrl()&&h.reload()},e.main.searchNetworksExamples=[{description:'Mentioning any term in a list: "TP53 MDM2 RB1 CDK4"',searchString:"TP53 MDM2 RB1 CDK4",searchType:"Networks"},{description:'With "AND" for co-occurrence : "TP53 AND BARD1"',searchString:"TP53 AND BARD1",searchType:"Networks"},{description:'By wildcard and property: "name:mel*"',searchString:"name:mel*",searchType:"Networks"},{description:'By numeric property range: "nodeCount:[11 TO 79]"',searchString:"nodeCount:[11 TO 79]",searchType:"Networks"},{description:'By UUID: "uuid:c53894ce-8e47-11e5-b435-06603eb7f303"',searchString:"uuid:c53894ce-8e47-11e5-b435-06603eb7f303",searchType:"Networks"},{description:'Created between 1.1.16 and 4.27.16 : "creationTime:[2016-01-01T00:00:01Z TO 2016-04-27T23:59:59Z]"',searchString:"creationTime:[2016-01-01T00:00:01Z TO 2016-04-27T23:59:59Z]",searchType:"Networks"}],e.main.runSearchExample=function(a){e.main.searchString=a.searchString,e.main.searchType=a.searchType,e.main.search()},e.main.browse=function(){e.main.searchString="",e.main.searchType="All",e.main.search()},e.NDEx={},e.NDEx.citation="Dexter Pratt, Jing Chen, David Welker, Ricardo Rivas, Rudolf Pillich, Vladimir Rynkov, Keiichiro Ono, Carol Miello, Lyndon Hicks, Sandor Szalma, Aleksandar Stojmirovic, Radu Dobrin, Michael Braxenthaler, Jan Kuentzer, Barry Demchak, Trey Ideker. NDEx, the Network Data Exchange. Cell Systems, Volume 1, Issue 4, 302-305 (2015). DOI:/10.1016/j.cels.2015.10.001",e.redirectToExternalLink=function(a){if(a.showWarning){if(!window.confirm(a.warning+"\n"+a.href))return}window.open(a.href,"new_tab").focus()},e.goToLandingPage=function(){f.path("/")},e.collapseHamburgerMenu=function(){$(".navbar-collapse.in").collapse("hide")},e.collapseHamburgerMenuAfterMs=function(a){setTimeout(function(){e.collapseHamburgerMenu()},a)},e.showSearchBar=function(){g.open({templateUrl:"views/search-modal.html",scope:e,windowClass:"popup_search_bar_modal",controller:["$scope","$modalInstance",function(a,b){a.title="Search",a.cancel=function(){b.dismiss()},a.closeModal=function(){b.close()}}]})},e.checkSearchTypeAndTermExpansion=function(){var a=!1;return e.searchTermExpansionEnabled=!1,"USERS"===e.main.searchType.toUpperCase()?(e.main.searchTitle="Search Term Expansion is not available when performing a User search",!0):"GROUPS"===e.main.searchType.toUpperCase()?(e.main.searchTitle="Search Term Expansion is not available when performing a Group search",!0):e.main.searchTermExpansionSelected?(_.forEach(e.notAllowedInSearchExpansionEqual,function(b){if(e.main.searchString.trim()===b)return a=!0,!1}),a?(e.main.searchTitle="Search Term Expansion is not compatible with Lucene syntax (Boolean operators)",!0):(_.forEach(e.notAllowedInSearchExpansionStart,function(b){if(e.main.searchString.startsWith(b))return a=!0,!1}),a?(e.main.searchTitle="Search Term Expansion is not compatible with Lucene syntax (Boolean operators)",!0):(_.forEach(e.notAllowedInSearchExpansion,function(b){if(e.main.searchString.indexOf(b)>-1)return a=!0,!1}),a?(e.main.searchTitle="Search Term Expansion is not compatible with Lucene syntax (Boolean operators)",!0):(_.forEach(e.notAllowedInSearchExpansionEnd,function(b){if(e.main.searchString.endsWith(b))return a=!0,!1}),a?(e.main.searchTitle="Search Term Expansion is not compatible with Lucene syntax (Boolean operators)",!0):(e.main.searchTitle=t,e.searchTermExpansionEnabled=!0,!1))))):(e.main.searchTitle=t,e.searchTermExpansionEnabled=!0,!1)},window.currentSignInType&&function(a){c.setCurrentUser(a.externalId,a.userName),l.$emit("LOGGED_IN"),e.signIn&&(e.signIn.userName=null,e.signIn.password=null)}(window.currentNdexUser);var x=function(){e.collapseHamburgerMenu(),e.main.showSignInSignUpOptions()};l.$on("SHOW_SIGN_IN_SIGN_UP_MODAL",x);var y=function(a){if(a.hasOwnProperty("topMenu")&&Array.isArray(a.topMenu)&&a.topMenu.length>0){var b=e.topMenu=[];_.forEach(a.topMenu,function(a){var c=a.label,d=a.href,e=!1;"undefined"!==a.showWarning&&(e="true"===a.showWarning.toLowerCase());var f=e?a.warning:null;b.push({label:c,href:d,showWarning:e,warning:f})})}};!function(){var b=window.ndexSettings.landingPageConfigServer+"/topmenu.json";a.getObjectViaEndPointV2(b,function(a){y(a)},function(a){alert("unable to get Top Menu configuration file "+b)})}();var z=function(a){return $("<html>"+a+"</html>").text()};!function(){var b=window.ndexSettings.landingPageConfigServer+"/featured.json";a.getObjectViaEndPointV2(b,function(a){p(a)},function(a){alert("unable to get Featured Content configuration file "+b)})}();var A=function(a){if(a.hasOwnProperty("mainContent")&&Array.isArray(a.mainContent)&&a.mainContent.length>0){for(var b=e.mainContent=[];a.mainContent.length>4;)a.mainContent.pop();var c=a.mainContent.length,d="col-12 col-xs-12 col-sm-12 col-md-12 wrapLongLine";2===c?d="col-6 col-xs-6 col-sm-6 col-md-6 wrapLongLine":3===c?d="col-4 col-xs-4 col-sm-4 col-md-4 wrapLongLine":4===c&&(d="col-3 col-xs-3 col-sm-3 col-md-3 wrapLongLine"),e.mainContentClass=d,_.forEach(a.mainContent,function(a){var c=a.title,d=window.ndexSettings.landingPageConfigServer+"/"+a.content,e=a.href?a.href:null;b.push({title:c,content:d,href:e})})}};!function(){var b=window.ndexSettings.landingPageConfigServer+"/main.json";a.getObjectViaEndPointV2(b,function(a){A(a)},function(a){alert("unable to get Main Content configuration file "+b)})}(),e.logos=[];var B=function(a){if(a.hasOwnProperty("logos")&&Array.isArray(a.logos)&&a.logos.length>0){var b=e.logos=[];_.forEach(a.logos,function(a){var c=window.ndexSettings.landingPageConfigServer+"/"+a.image,d=a.title,e=a.href;b.push({image:c,title:d,href:e})}),b.length>0&&(e.logosLoaded=!0)}};e.logosDefined=function(){return e.logos.length>0};!function(){var b=window.ndexSettings.landingPageConfigServer+"/logos.json";a.getObjectViaEndPointV2(b,function(a){B(a)},function(a){alert("unable to get Logos Content configuration file "+b)})}(),e.collapsedMenuOpened=!1;var C=function(){var a=document.getElementById("slidingRightMenuDivId");e.collapsedMenuOpened=!1,a.style.width="0"},D=function(){var a=document.getElementById("slidingRightMenuDivId");e.collapsedMenuOpened=!0,a.style.width="250px"};e.switchNav=function(a){return a.stopPropagation(),e.collapsedMenuOpened?C():D()},window.addEventListener("resize",function(){$(window).width()>=1151&&C()}),e.$on("$locationChangeStart",function(){C(),o.dismissAll("close")}),e.isSearchIconVisible=function(){return"/"!==f.path()}}]),ndexApp.controller("signInController",["$location","$rootScope",function(a,b){!!window.currentNdexUser||(a.path("/"),b.$emit("SHOW_SIGN_IN_SIGN_UP_MODAL"))}]),ndexApp.controller("searchController",["ndexService","sharedProperties","$scope","$rootScope","ndexSpinner","$location","$modal","ndexNavigation","uiMisc",function(a,b,c,d,e,f,g,h,i){c.searcher={};var j=c.searcher;j.isLoggedInUser=!!window.currentNdexUser,j.networkErrors=[],j.userErrors=[],j.groupErrors=[],j.pageSize=1e6,j.networkSearchResults=[],j.networkSearchInProgress=!1,j.networkNoResults=!1,j.numberOfNetworksFound=0,j.networkSearchIncludeNetworksByGroupPermissions=!0,j.networkSkipPages=0,j.groupSearchResults=[],j.groupSearchInProgress=!1,j.groupSearchNoResults=!1,j.userSearchResults=[],j.userSearchInProgress=!1,j.userSearchNoResults=!1,j.searchString=decodeURIComponent(f.search().searchString),j.searchType=decodeURIComponent(f.search().searchType),j.searchTermExpansionSelected="true"===decodeURIComponent(f.search().searchTermExpansion),j.searchString="undefined"===j.searchString.toLowerCase()?"":j.searchString,j.searchType="undefined"===j.searchType.toLowerCase()?"All":j.searchType,c.main.searchString=j.searchString,c.main.searchType=j.searchType,j.networkTableRowsSelected=0,j.networkSets=[],j.loggedInUserId=b.getCurrentUserId(),j.showNetworkTable=!1;c.searchViewClass=j.loggedInUserId?"col-12 col-xs-12 col-sm-12 col-md-12 col-lg-10":"col-12 col-xs-12 col-sm-12 col-md-12 col-lg-12",c.$on("$destroy",function(){e.stopSpinner()}),c.showNetworkInfo=function(a){if(a||a.externalId){var b=a.externalId,c=_.find(j.networkSearchResults,{externalId:b}),d=JSON.parse(JSON.stringify(c));a.Status&&"collection"===a.Status.toLowerCase()&&(d.collection=!0,d.subnetworks=a.subnetworks),i.showNetworkInfo(d)}};var k=function(a){return a?$("<html>"+a+"</html>").text():""};c.activeTab={},c.activateTab=function(a){c.activeTab={},c.activeTab[a]=!0},c.networkTabHeading=function(){return j.networkSearchInProgress?"Networks":j.networkSearchNoResults?"Networks (0)":"Networks ("+j.numberOfNetworksFound+")"},c.networkSearchGridOptions={enableSorting:!0,enableFiltering:!0,showGridFooter:!0,enableRowHeaderSelection:j.isLoggedInUser,enableRowSelection:!1,columnVirtualizationThreshold:20,enableColumnMenus:!1,onRegisterApi:function(a){c.networkGridApi=a,a.selection.on.rowSelectionChanged(c,function(){var b=a.selection.getSelectedRows();j.networkTableRowsSelected=b.length}),a.selection.on.rowSelectionChangedBatch(c,function(){var b=a.selection.getSelectedRows();j.networkTableRowsSelected=b.length}),a.core.on.rowsRendered(c,function(){setTimeout(function(){c.networkGridApi.core.handleWindowResize()},250)})}};const l=[{field:"  ",enableFiltering:!1,maxWidth:42,cellTemplate:"views/gridTemplates/networkStatus.html",visible:!0},{field:"Network Name",enableFiltering:!0,cellTemplate:"views/gridTemplates/networkName.html"},{field:" ",enableFiltering:!1,width:40,cellTemplate:"views/gridTemplates/downloadNetwork.html"},{field:"Ref.",enableFiltering:!1,maxWidth:45,cellTemplate:"views/gridTemplates/reference.html"},{field:"Disease",enableFiltering:!0,width:82,cellTemplate:"views/gridTemplates/disease.html"},{field:"Tissue",enableFiltering:!0,width:75,cellTemplate:"views/gridTemplates/tissue.html"},{field:"Nodes",enableFiltering:!1,maxWidth:75,sortingAlgorithm:function(a,b){return a===b?0:a<b?-1:1}},{field:"Edges",enableFiltering:!1,maxWidth:75,sortingAlgorithm:function(a,b){return a===b?0:a<b?-1:1}},{field:"Visibility",enableFiltering:!0,width:90,cellTemplate:"views/gridTemplates/visibility.html"},{field:"Owner",enableFiltering:!0,width:80,cellTemplate:"views/gridTemplates/ownedBy.html"},{field:"Last Modified",enableFiltering:!1,maxWidth:120,cellFilter:"date:'short'"},{field:"description",enableFiltering:!1,visible:!1},{field:"externalId",enableFiltering:!1,visible:!1},{field:"ownerUUID",enableFiltering:!1,visible:!1},{field:"name",enableFiltering:!1,visible:!1},{field:"errorMessage",enableFiltering:!1,visible:!1},{field:"subnetworks",enableFiltering:!1,visible:!1},{field:"indexLevel",enableFiltering:!1,visible:!1}];var m=function(){c.networkSearchGridOptions.data=[];for(var a=0;a<j.networkSearchResults.length;a++){var b=j.networkSearchResults[a],d=i.getSubNetworkInfo(b),e=d.numberOfSubNetworks,f=d.id,g="success";b.errorMessage?g="failed":b.isValid?b.isCertified&&(g="certified"):g="processing","success"===g&&b.warnings&&b.warnings.length>0&&(g="warning");var h=b.name?b.name:"No name; UUID : "+b.externalId;"failed"===g?h="Invalid Network. UUID: "+b.externalId:e>=1&&(g="collection");var l=k(b.description),m=b.externalId,n=parseInt(b.nodeCount),o=parseInt(b.edgeCount),p=b.owner,q=b.indexLevel,r=b.visibility,s=new Date(b.modificationTime),t="Download "+h,u=i.getNetworkReferenceObj(f,b),v=i.getDisease(b),w=i.getTissue(b),x=b.errorMessage,y={Status:g,"Network Name":h," ":t,Reference:u,Disease:v,Tissue:w,Nodes:n,Edges:o,Visibility:r,Owner:p,"Last Modified":s,description:l,externalId:m,ownerUUID:b.ownerUUID,name:h,errorMessage:x,subnetworks:e,indexLevel:q};c.networkSearchGridOptions.data.push(y)}j.showNetworkTable=_.size(c.networkSearchGridOptions.data)>0},n=function(){c.networkGridApi.grid.options.columnDefs=l;var a=$("#foundNetworksTableId");a.height($(window).height()-170),c.networkGridApi.grid.gridHeight=a.height(),m()};j.setAndDisplayCurrentNetwork=function(a){f.path("/network/"+a)},j.submitNetworkSearch=function(){j.numberOfNetworksFound=0,j.networkSearchInProgress=!0,j.networkSearchNoResults=!1,j.networkErrors=[];var b={accountName:j.userName,searchString:j.searchString,includeGroups:!0};a.searchNetworksV2(b,j.networkSkipPages,j.pageSize,function(a){j.numberOfNetworksFound=a.numFound,j.networkSearchResultStart=a.start;var b=a.networks;j.networkSearchInProgress=!1,b.length>0?(j.networkSearchResults=b,n(),j.isLoggedInUser&&j.getAllNetworkSetsOwnedByUser(function(){},function(){})):(j.networkSearchNoResults=!0,j.networkSearchInProgress=!1),e.stopSpinner()},function(a){if(e.stopSpinner(),a){j.networkSearchResults=[];var b="No networks found: "+a.message;j.networkErrors.push(b),j.networkSearchInProgress=!1,j.networkSearchNoResults=!0}})},j.submitGeneProteinSearch=function(){j.numberOfNetworksFound=0,j.networkSearchInProgress=!0,j.networkSearchNoResults=!1;var b={searchString:j.searchString};a.searchNetworksByGeneProteinV2(b,j.networkSkipPages,j.pageSize,function(a){j.numberOfNetworksFound=a.numFound,j.networkSearchResultStart=a.start,j.networkSearchInProgress=!1;var b=a.networks;b.length>0?(j.networkSearchResults=b,n(),j.isLoggedInUser&&j.getAllNetworkSetsOwnedByUser(function(){},function(){})):(j.networkSearchNoResults=!0,j.networkSearchInProgress=!1),e.stopSpinner()},function(a){if(e.stopSpinner(),a){j.networkSearchResults=[];var b="No networks found: "+a.message;j.networkErrors.push(b),j.networkSearchInProgress=!1,j.networkSearchNoResults=!0}})},j.getIDsOfSelectedNetworks=function(){var a=[],b=c.networkGridApi.selection.getSelectedRows();return _.forEach(b,function(b){"set"!==b.Status.toLowerCase()&&a.push(b.externalId)}),a},j.getAllNetworkSetsOwnedByUser=function(c,d){var e=b.getCurrentUserId();a.getAllNetworkSetsOwnedByUserV2(e,-1,-1,function(a){j.networkSets=_.orderBy(a,["modificationTime"],["desc"]),c(j.networkSets[0])},function(a,b){j.networkSets=[],console.log("unable to get network sets"),d(a,b)})},c.userTabHeading=function(){if(j.userSearchResults){var a=j.userSearchResults.length,b="";return a>=j.pageSize&&(b="+"),"Users ("+a+b+")"}return j.userSearchNoResults?"Users (0)":"Users"},c.userSearchGridOptions={enableSorting:!0,enableFiltering:!0,showGridFooter:!0,enableSelectAll:!1,enableRowSelection:!1,multiSelect:!1,enableRowHeaderSelection:!1,enableColumnMenus:!1,onRegisterApi:function(a){c.userGridApi=a}};const o=[{field:"User Name",cellTemplate:"views/gridTemplates/userName.html"},{field:"First Name"},{field:"Last Name"},{field:"Description"}];var p=function(){c.userSearchGridOptions.data=[];for(var a=0;a<j.userSearchResults.length;a++){var b=j.userSearchResults[a],d=b.userName,e=k(b.description),f=b.externalId,g=b.firstName,h=b.lastName,i={"User Name":d,Description:e,externalId:f,"First Name":g,"Last Name":h};c.userSearchGridOptions.data.push(i)}c.userGridApi.core.handleWindowResize()},q=function(){c.userGridApi.grid.options.columnDefs=o;var a=$("#foundUsersTableId");a.height($(window).height()-170),c.userGridApi.grid.gridHeight=a.height(),p()};j.submitUserSearch=function(){var b=j.searchString;j.userSearchResults=null,j.userSearchInProgress=!0,j.userSearchNoResults=!1,j.userErrors=[],a.searchUsersV2(b,0,j.pageSize,function(a){a.numFound>0?(j.userSearchResults=a.resultList,q()):j.userSearchNoResults=!0,j.userSearchInProgress=!1,"all"!==j.searchType.toLowerCase()&&e.stopSpinner()},function(a){if("all"!==j.searchType.toLowerCase()&&e.stopSpinner(),a.errorMessage&&"NDEx_Bad_Request_Exception"!==a.errorMessage){var b="No networks found: "+a.message;j.userErrors.push(b)}j.userSearchInProgress=!1})},c.groupTabHeading=function(){if(j.groupSearchResults){var a=j.groupSearchResults.length,b="";return a>=j.pageSize&&(b="+"),"Groups ("+a+b+")"}return j.groupSearchNoResults?"Groups (0)":"Groups"},c.groupSearchGridOptions={enableSorting:!0,enableFiltering:!0,showGridFooter:!0,enableSelectAll:!1,enableRowSelection:!1,multiSelect:!1,enableRowHeaderSelection:!1,enableColumnMenus:!1,onRegisterApi:function(a){c.groupGridApi=a}};const r=[{field:"Group Name",cellTemplate:"views/gridTemplates/groupName.html"},{field:"Description"}];var s=function(){c.groupSearchGridOptions.data=[];for(var a=0;a<j.groupSearchResults.length;a++){var b=j.groupSearchResults[a],d=b.groupName,e=k(b.description),f=b.externalId,g={"Group Name":d,Description:e,externalId:f};c.groupSearchGridOptions.data.push(g)}},t=function(){c.groupGridApi.grid.options.columnDefs=r;var a=$("#foundGroupsTableId");a.height($(window).height()-170),c.groupGridApi.grid.gridHeight=a.height(),s()};j.submitGroupSearch=function(){j.groupSearchResults=null,j.groupSearchInProgress=!0,j.groupSearchNoResults=!1,j.groupErrors=[],a.searchGroupsV2(j.searchString,0,j.pageSize,function(a){a.numFound>0?(j.groupSearchResults=a.resultList,t()):j.groupSearchNoResults=!0,j.groupSearchInProgress=!1,"all"!==j.searchType.toLowerCase()&&e.stopSpinner()},function(a){if("all"!==j.searchType.toLowerCase()&&e.stopSpinner(),a.errorMessage&&"NDEx_Bad_Request_Exception"!==a.errorMessage){var b="No groups found: "+a.message;j.groupErrors.push(b)}j.groupSearchInProgress=!1,j.groupSearchNoResults=!0})},c.showWarningsOrErrors=function(a){if(a||a.externalId)if(a.subnetworks&&a.subnetworks>=1){h.genericInfoModal("Warning","This network is part of a Cytoscape collection and cannot be operated on or edited in NDEx.")}else i.showNetworkWarningsOrErrors(a,j.networkSearchResults)},c.getNetworkURL=function(a){return"#/network/"+a},c.downloadNetwork=function(a){i.downloadCXNetwork(a.externalId)},j.groupSearchNoResults=!0,j.userSearchNoResults=!0,j.networkSearchNoResults=!0,e.startSpinner("spinnerSearchPageId"),"All"===j.searchType?(j.searchTermExpansionSelected?j.submitGeneProteinSearch():j.submitNetworkSearch(),j.submitGroupSearch(),j.submitUserSearch(),c.activateTab("Networks")):"Networks"===j.searchType?(j.searchTermExpansionSelected?j.submitGeneProteinSearch():j.submitNetworkSearch(),j.submitNetworkSearch(),c.activateTab("Networks")):"Users"===j.searchType?(j.submitUserSearch(),c.activateTab("Users")):"Groups"===j.searchType&&(j.submitGroupSearch(),c.activateTab("Groups")),$(window).resize(function(){var a=$("#foundNetworksTableId");a.height($(window).height()-170),c.networkGridApi.grid.gridHeight=a.height(),c.networkGridApi.core.refresh();var b=$("#foundUsersTableId");b.height($(window).height()-170),c.userGridApi.grid.gridHeight=b.height(),c.userGridApi.core.refresh();var d=$("#foundGroupsTableId");d.height($(window).height()-170),c.groupGridApi.grid.gridHeight=d.height(),c.groupGridApi.core.refresh()})}]),ndexApp.controller("networkController",["networkService","ndexService","ndexConfigs","ndexUtility","ndexHelper","ndexNavigation","sharedProperties","$scope","$rootScope","$routeParams","$modal","$modalStack","$route","$location","uiGridConstants","uiMisc","ndexSpinner","cyREST","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(){$("#cytoscape-canvas").is(":visible")?L(D,!1):setTimeout(t,50)}var u,v,w=new cytoscapeCx2js.CyNetworkUtils,x=new cytoscapeCx2js.CxToJs(w),y=j.identifier,z=j.accesskey;g.setCurrentNetworkId(y),h.networkController={};var A=h.networkController;A.isLoggedInUser=!!window.currentNdexUser,A.networkOwner={},A.privilegeLevel="None",A.currentNetworkId=y,A.accesskey=z,A.errors=[],A.queryErrors=[],A.selectionContainer={},A.baseURL=n.absUrl(),A.isSample=!1,A.sampleSize=0,A.isSamplePrevious=!1,A.sampleSizePrevious=0,A.successfullyQueried=!1,A.baseURL=A.baseURL.replace(/(.*\/).*$/,"$1"),A.context={},A.contextIsFromAspect=!0,A.isAdmin=!1,A.networkShareURL=null,A.visibility="",A.networkURL=p.buildNetworkURL(null,y),h.query=null,A.searchString="",h.showSetSampleButton=!1,h.showSetSampleButtonEnabled=!1,h.noOfEdgesToShowSetSampleButton=100,A.queryEdgeLimitToShowGraph=1e3,A.queryEdgeLimitToShowTableOnly=3e3,A.warningShown=!1;var B=null,C="To use this feature, you need Cytoscape 3.6.0 or higher running on  your machine (default port: 1234) and the CyNDEx-2 app installed";h.openInCytoscapeTitle="Checking status ...",h.isCytoscapeRunning=!1,$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip({html:!0})}),h.setToolTips=function(){$('[data-toggle="tooltip"]').tooltip()},h.enableSetSampleViaUUID=!1,h.enableRemoveFromMyAccount=!1,h.showOriginalCopyNetworkShareURLTitle=function(){h.copyNetworkShareURLTitle="Copy network share URL to clipboard"},h.showCopiedNetworkShareURLTitle=function(){h.copyNetworkShareURLTitle="Copied"},h.showOriginalCopyDOITitle=function(){h.copyNetworkDOITitle="Copy network DOI to clipboard"},h.showCopiedDOITitle=function(){h.copyNetworkDOITitle="Copied"},h.hideNetworkOwner=function(){var a=void 0!==A.currentNetwork&&void 0!==A.currentNetwork.visibility&&"PRIVATE"===A.currentNetwork.visibility,b=void 0!==z;return a&&b},h.onlyNetworkOwnersCanUnsetReadOnlyTitle="Only network owners can set/unset Read Only flag",h.isEdgesAndNodesTabDisabled=function(){return A.tabs[1].disabled?"disabled":"enabled"},h.activeTab="Edges",h.activateTab=function(a){h.activeTab=a,"Edges"===a?($("#edgeGridId").height($(window).height()-195),h.edgeGridApi.core.refresh()):"Nodes"===a&&($("#nodeGridId").height($(window).height()-195),h.nodeGridApi.core.refresh())},A.tabs=new Array(2),A.tabs[0]={heading:"Network Info",active:!0},A.tabs[1]={heading:"Nodes/Edges",active:!1,disabled:!0},h.setToolTipOnNodesAndEdgesTab=function(){h.nodesAndEdgesTabTitle=A.tabs[1].disabled?"Select nodes or edges in the graph to enable this tab":""},h.handleNodesAndEdgesTabClick=function(){A.tabs[1].disabled&&(A.tabs[0].active=!0,A.tabs[1].active=!1)},A.queryWarnings=[],A.queryErrors=[],A.subNetworkId=null,A.noOfSubNetworks=0,A.networkSets=[],A.isNetworkOwner=!1,A.otherProperties=[],h.requestDOITitle="",h.exportTitle="",h.upgradePermissionTitle="",h.shareTitle="Share this network internally or externally",h.deleteTitle="",h.setNetworkSampleViaUUIDTitle="",h.removeFromMyAccountTitle="",h.disabledQueryTooltip="The Advanced Query feature is being improved and will be back soon!",h.disableQuery=!1,h.drawCXNetworkOnCanvasWhenViewSwitched=!1;h.showAdvancedQuery=!0,h.showDeleteDOILink=!1;var D,E=function(){A.bgColor="rgba(0,0,0,0)"};A.hasMultipleSubNetworks=function(){return A.noOfSubNetworks>=1},h.isDOIPending=function(){return p.isDOIPending(A.currentNetwork)},h.isDOIAssigned=function(){return p.isDOIAssigned(A.currentNetwork)},h.isNetworkCertified=function(){return p.isNetworkCertified(A.currentNetwork)};var F=function(a){k.open({animation:!0,templateUrl:"citations.html",controller:"CitationModalCtrl",resolve:{citations:function(){return a}}})},G=function(a){var b="";return a&&(b=a.startsWith("http")?a:"http://www.ncbi.nlm.nih.gov/pubmed/"+a.split(":")[1]),b},H=function(a){for(var b=D&&D.citations?D.citations:"",c=[],d=0;d<a.length;d++){var e=b[a[d]],f={};e["@id"]&&(f.id=e["@id"]),e["dc:contributor"]&&(f.contributor=e["dc:contributor"]),e["dc:description"]&&(f.description=e["dc:description"]),e["dc:identifier"]&&(f.identifier=e["dc:identifier"]),e["dc:title"]&&(f.title=e["dc:title"]),e["dc:type"]&&(f.type=e["dc:type"]),e.attributes.length>0&&(f.attributes=JSON.stringify(e.attributes)),f.link=G(f.identifier),c.push(f)}return c};h.showEdgeCitations=function(a){if(D&&D.edgeCitations&&D.edgeCitations[a]){var b=D.edgeCitations[a],c=H(b);F(c)}},h.showNodeCitations=function(a){if(D&&D.nodeCitations&&D.nodeCitations[a]){var b=D.nodeCitations[a],c=H(b);F(c)}};var I=function(a){if(!a)return null;var b=a instanceof Object&&a["dc:identifier"]?a["dc:identifier"]:a;a=b;var c=b.toLowerCase();if(!(!c.startsWith("http://")&&!c.startsWith("https://")||c.startsWith("http://biopax")||c.startsWith("http://www.biopax")||c.startsWith("http://purl")||c.startsWith("http://www.purl")))return b='<a target="_blank" href="'+a+'">External Link</a>';if(c.startsWith("www."))return b='<a target="_blank" href="http://'+a+'">External Link</a>';var d=a.split(":");if(2!==d.length&&3!==d.length)return b;var e,f=d[0],g=3===d.length?d[1]+":"+d[2]:d[1];if(f in A.context)return e=A.context[f],g.startsWith("CHEMBL")&&(g=g.replace(":","")),b=c.startsWith("go:")?'<a target="_blank" href="'+e+b+'">'+b+"</a>":'<a target="_blank" href="'+e+g+'">'+a+"</a>";if(c.startsWith("ncbi")){/^\d+$/.test(g)&&(b='<a target="_blank" href="http://identifiers.org/ncbigene/'+g+'">'+a+"</a>")}else if(c.startsWith("uniprot")){var h=/^([A-N,R-Z][0-9]([A-Z][A-Z, 0-9][A-Z, 0-9][0-9]){1,2})|([O-Q][0-9][A-Z, 0-9][A-Z, 0-9][A-Z, 0-9][0-9])(\.\d+)?$/.test(g);h&&(b='<a target="_blank" href="http://identifiers.org/uniprot/'+g+'">'+a+"</a>")}else if(c.startsWith("tair")){var i=/^AT[1-5]G\d{5}$/.test(g);i&&(b='<a target="_blank" href="http://identifiers.org/tair.locus/'+g+'">'+a+"</a>")}else if(c.startsWith("hgnc:")){var j=/^\d{1,5}$/.test(g);j&&(b='<a target="_blank" href="http://identifiers.org/hgnc/'+g+'">'+a+"</a>")}else if(c.startsWith("hgnc.symbol:")){var k=/^[A-Za-z-0-9_]+(\@)?$/.test(g);k&&(b='<a target="_blank" href="http://identifiers.org/hgnc.symbol/'+g+'">'+a+"</a>")}else if(c.startsWith("chebi")){var l=/^CHEBI:\d+$/.test(g);l?b='<a target="_blank" href="http://identifiers.org/chebi/'+g+'">'+a+"</a>":isNaN(g)||(b='<a target="_blank" href="http://identifiers.org/chebi/CHEBI:'+g+'">'+a+"</a>")}else if(c.startsWith("chembl"))isNaN(g)||(b='<a target="_blank" href="http://identifiers.org/chembl.compound/CHEMBL'+g+'">'+a+"</a>");else if(c.startsWith("kegg.compound:")){var m=/^[cC]\d+$/.test(g);m&&(b='<a target="_blank" href="http://identifiers.org/kegg.compound/'+g.toUpperCase()+'">'+a+"</a>")}else if(c.startsWith("pubchem.compound:")||c.startsWith("cid:")){var n=/^\d+$/.test(g);n&&(b='<a target="_blank" href="http://identifiers.org/pubchem.compound/'+g+'">'+a+"</a>")}else if(c.startsWith("sid:")){var o=/^\d+$/.test(g);o&&(b='<a target="_blank" href="http://identifiers.org/pubchem.substance/'+g+'">'+a+"</a>")}else if(c.startsWith("pmid:")){var p=/^\d+$/.test(g);p&&(b='<a target="_blank" href="http://identifiers.org/pubmed/'+g+'">'+a+"</a>")}else if(b.startsWith("BTO:")){var q=/^BTO:\d{7}$/.test(b);q&&(b='<a target="_blank" href="http://identifiers.org/bto/'+b+'">'+b+"</a>")}else if(c.startsWith("signor:"))b='<a target="_blank" href="http://signor.uniroma2.it/relation_result.php?id='+g+'">'+a+"</a>";else if(c.startsWith("go:")){var r=/^GO:\d{7}$/.test(b);r&&(b='<a target="_blank" href="http://identifiers.org/go/'+b+'">'+b+"</a>")}else if(c.startsWith("gdc:")){var s=/^TCGA-[A-Z]+$/.test(g);s||(s=/^TARGET-[A-Z]+$/.test(g)),s&&(b='<a target="_blank" href="http://gdc-portal.nci.nih.gov/projects/'+g+'">'+a+"</a>")}return b};h.linkify=function(a){var b="";if(void 0===a||""===a||null===a)return b;if("object"==typeof a)_.forEach(a,function(a){var c=I(a);b=b?b+", "+c:c}),b='<span title="'+a+'">'+b+"</span>";else if("string"==typeof a)if(a.startsWith("http"))b='&nbsp;<a target="_blank" href="'+a+'">External Link</a>';else{var c=I(a);b='<span title="'+a+'">'+c+"</span>"}return b},h.getNumEdgeCitations=function(a){var b=0;return D&&D.edgeCitations&&D.edgeCitations[a]&&(b=D.edgeCitations[a].length),b},h.getNumEdgeNdexCitations=function(a){var b=0;return a&&(_.isArray(a)?b=a.length:_.isString(a)&&(b=1)),b},h.getNumNodeCitations=function(a){var b=0;return D&&D.nodeCitations&&D.nodeCitations[a]&&(b=D.nodeCitations[a].length),b},h.getNumNodeAttributes=function(a){var b=0;return a&&a.v&&(b=a.v.length),b},h.getNumEdgeAttributes=function(a){var b=1;return a&&Array.isArray(a)&&(b=a.length),b};var J=function(a){return{n:a.replace(/(\[(.*)\])?\(.*\)$/,"$2"),id:a.replace(/(\[.*\])?\((.*)\)$/,"$2")}};h.getInternalNetworkUUID=function(a){var b=J(a);return b&&b.id?b.id:null},h.getURLForMapNode=function(a){if(!a)return null;var b=null,c=J(a);return c&&c.id&&(b=A.baseURL+c.id),b},h.showNodeAttributes=function(a){if(a&&a.n&&a.v&&a.v.length>0){var b=a.n;A.showMoreAttributes(b,a)}},h.edgeGridOptions={enableSorting:!0,enableFiltering:!0,showGridFooter:!0,onRegisterApi:function(a){h.edgeGridApi=a,a.core.on.rowsRendered(h,function(){setTimeout(h.edgeGridApi.core.handleWindowResize,250)})}},h.nodeGridOptions={enableSorting:!0,enableFiltering:!0,showGridFooter:!0,onRegisterApi:function(a){h.nodeGridApi=a,a.core.on.rowsRendered(h,function(){setTimeout(h.nodeGridApi.core.handleWindowResize,250)})}},A.queryTypes=[{name:"1-step neighborhood",searchDepth:1,directOnly:!1,type:"query"},{name:"1-step adjacent",searchDepth:1,directOnly:!0,type:"query"},{name:"Direct",searchDepth:1,type:"interconnect"},{name:"Interconnect",searchDepth:2,type:"interconnect"},{name:"2-step neighborhood",searchDepth:2,directOnly:!1,type:"query"},{name:"2-step adjacent",searchDepth:2,directOnly:!0,type:"query"}],h.selectedQuery=A.queryTypes[0],h.queryTypesTooltipText="Click here for info on available query types.",h.showQueriesExplanation=function(){k.open({templateUrl:"views/queriesExplanationModal.html",controller:["$scope","$modalInstance","ndexNavigation",function(a,b,c){a.generalDescription="This section explains briefly all the available types of query using the  simple example network pictured to the right. In the examples below, the orange node(s) indicate the query terms while blue nodes and edges identify the retrieved subnetwork.",a.neigborhoodQueryDescription='Returns all the nodes connected to the query term(s) and all edges between these nodes. For example, querying the network for "B" (orange node), will return the subnetwork highlighted in blue.',a.adjacentQueryDescription='Returns all nodes connected to the query term(s) and only the edges between these nodes and the  query term(s). In this case querying the network for "B" will return a smaller subnetwork.',a.directQueryDescription='Returns all edges between the query terms. This type of query requires at least 2 terms (or use of wildcards). Querying for "A" and "B" returns only the connection between them.',a.interconnectQueryDescription='Returns all edges connecting the query terms and including up to one intermediate node. Also for this type of query at least 2 terms (or use of wildcards) are required. In this case, querying for "A" and "B" returns the subnetwork highlighted in blue.',a.stepsQueryDescription='indicate the depth of the traversal query and only apply to Neighborhood and Adjacent queries.<br><br>For more info, please review the manual on <a href="http://www.home.ndexbio.org/finding-and-querying-networks/" target="_blank">Finding and Querying Networks in NDEx.</a>',a.queryTypesDescription="col-6 col-xs-6 col-sm-6 col-md-6",a.queryTypesImages="col-6 col-xs-6 col-sm-6 col-md-6",a.stepsClass="col-12 col-xs-12 col-sm-12 col-md-12",a.close=function(){b.dismiss()}}]})},h.currentView="Graphic",h.buttonLabel="Table",h.switchViewButtonEnabled=!0,h.beforeQueryView=null,h.showNetworkSample=function(){return A.isSample&&A.sampleSize>0},h.getURLsForNdexExternalLink=function(a){if(!a)return null;var b="",c="";return _.forEach(a,function(a){var d=J(a);d.id&&(c='<a target="_blank" href="'+d.id+'">'+(d.n?d.n:"external link")+"</a>",c=c.replace(/<br\s*\/?>/gi,""),c=c.replace(/&nbsp;&nbsp;&nbsp;/gi,"&nbsp;"),c+="&nbsp;&nbsp;&nbsp;",b+=c)}),b},h.getURLsForNdexInternalLink=function(a){if(!a)return null;var b=null,c=J(a);return c.id&&(b=A.baseURL+c.id,b='<a target="_blank" href="'+b+'">'+(c.n?c.n:c.id)+"</a>",b=b.replace(/<br\s*\/?>/gi,""),b=b.replace(/&nbsp;&nbsp;&nbsp;/gi,"&nbsp;"),b+="&nbsp;&nbsp;&nbsp;"),b};var K=function(b,c,d,e,f,g){$(function(){var i=document.getElementById(f);try{u=cytoscape({container:i,style:e,layout:d,elements:c,ready:function(){window.cy=this,q.stopSpinner()}})}catch(a){var j=[{selector:"node",style:{"background-color":"#f6eecb","background-opacity":.8,width:"40px",height:"40px",label:"data(name)",
"font-family":"Roboto, sans-serif"}},{selector:"edge",style:{"line-color":"#75736c",width:"2px","font-family":"Roboto, sans-serif","text-opacity":.8}},{selector:"node:selected",style:{color:"#fb1605","background-color":"yellow"}},{selector:"edge:selected",style:{label:"data(interaction)",color:"#fb1605","line-color":"yellow",width:6}}];u=cytoscape({container:i,style:j,layout:d,elements:c,ready:function(){window.cy=this,q.stopSpinner()}}),console.log(a)}var k=x.cyBackgroundColorFromNiceCX(b);if(k){var l=u.cyCanvas({zIndex:-2}),m=l.getCanvas(),n=l.getCanvas().getContext("2d");n.fillStyle=k,n.fillRect(0,0,m.width,m.height)}new cyannotationCx2js.CxToCyCanvas(x).drawAnnotationsFromNiceCX(u,b),u.on("select unselect",function(){clearTimeout(u.nodesSelectionTimeout),u.nodesSelectionTimeout=setTimeout(function(){var b=[],c=[];_.forEach(u.$("node:selected"),function(c){var d=Number(c.id());b.push(a.getNodeInfo(d))}),_.forEach(u.$("edge:selected"),function(b){var d=b.id(),e=Number(d.substring(1));c.push(a.getEdgeInfo(e))}),h.$apply(function(){A.selectionContainer={nodes:b,edges:c},0===b.length&&0===c.length?(A.tabs[1].active&&(A.tabs[0].active=!0),A.tabs[1].disabled=!0,A.tabs[1].active=!1):A.tabs[1].active||(A.tabs[1].active=!0,A.tabs[1].disabled=!1),1===b.length&&(b[0].$$expanded=!0),1===c.length&&(c[0].$$expanded=!0)})},300)});var o=g["ndex:internalLink"],p=g["ndex:description"],r=g["ndex:externalLink"];if(o||p||r){var s=[];[o,p,r].forEach(function(a){a&&s.push("["+a+"]")});var t=s.join(",");u.nodes(t).forEach(function(a){var b=[];if(p){var c=a.data(p);c&&b.push(c)}if(o){var d=a.data(o);"string"==typeof d&&(d=[d]),_.forEach(d,function(a){var c=h.getURLsForNdexInternalLink(a);c&&b.push(c)})}if(r){var e=a.data(r);"string"==typeof e&&(e=[e]);var f=h.getURLsForNdexExternalLink(e);f&&b.push(f)}}),u.edges(t).forEach(function(a){var b=[];if(p){var c=a.data(p);c&&b.push(c)}if(o){var d=a.data(o);"string"==typeof d&&(d=[d]),_.forEach(d,function(a){var c=J(a);if(c.id){var d=A.baseURL+c.id;b.push('<a target="_blank" href="'+d+'">'+(c.n?c.n:c.id)+"</a>")}})}if(r){var e=a.data(r);"string"==typeof e&&(e=[e]),_.forEach(e,function(a){var c=J(a);c.id&&b.push('<a target="_blank" href="'+c.id+'">'+(c.n?c.n:"external link")+"</a>")})}a.qtip({content:b.join("<br />\n"),position:{my:"top center",at:"bottom center"},style:{classes:"qtip-bootstrap",tip:{width:16,height:8}}})})}})},L=function(a,b){h.getContextAspectFromNiceCX();var c,d={},e=x.cyElementsFromNiceCX(a,d);c=b?x.getDefaultStyle():x.cyStyleFromNiceCX(a,d),E();var f=_.find(c,{selector:"edge"});f&&f.css&&!f.css["curve-style"]&&(f.css["curve-style"]="bezier");var g=a.cartesianLayout?"preset":Object.keys(a.edges).length<=1e3?"cose":"circle";K(a,e,{name:g,animate:!1,numIter:50,coolingFactor:.9},c,"cytoscape-canvas",d)},M=function(b){var c=b.nodes,d=Object.keys(c);h.nodeGridOptions.data=[];var e=b.nodeAttributes;for(var f in d){var g=d[f],i=a.getNodeInfo(g),j=a.getNodeName(i),k={Name:j};if(e){var l=e[g];for(var m in l)if(l.hasOwnProperty(m)){var n=l[m],o=n.n;if(o&&o.startsWith("__"))continue;k[m]=!o||"alias"!==o&&"relatedTo"!==o?n.v?n.v:"":n}}h.nodeGridOptions.data.push(k)}},N=function(a,b){var c=10*a.length;return c=c<100?100:c,b&&(c+=40),c>250?250:c},O=function(a,b,c){var d=a.nodes,e=a.nodeCitations,f=0;if(d){var g="Name";for(var i in d)d.hasOwnProperty(i)&&(d[i].n&&(g=d[i].n.length>g.length?d[i].n:g),f+=1);var j=f<=500;b&&(j=!0);var k=[{field:"Name",displayName:"Name",cellTooltip:!0,enableFiltering:j,minWidth:N(g)}];if(e){var l={field:"Citations",displayName:"citation",cellToolTip:!1,enableFiltering:!1,enableSorting:!1,cellTemplate:'<div class="text-center"><h6><a ng-click="grid.appScope.showNodeCitations(COL_FIELD)" ng-show="grid.appScope.getNumNodeCitations(COL_FIELD) > 0">{{grid.appScope.getNumNodeCitations(COL_FIELD)}}</h6></div>'};k.push(l)}var m=a.nodeAttributes,n={};if(m)for(var o=Object.keys(m),p=0;p<o.length;p++){var q=o[p],r=_.keys(m[q]),s=h.removeHiddenAttributes(r),t=[];s.indexOf("ndex:internalLink")>-1&&(t.push("ndex:internalLink"),_.pull(s,"ndex:internalLink")),s.indexOf("ndex:externalLink")>-1&&_.pull(s,"ndex:externalLink"),t.length>0&&(s=s.concat(t));for(var u=0;u<s.length;u++){var v,w=s[u];if("alias"===w||"relatedTo"===w)v={field:w,displayName:w,cellTooltip:!0,minWidth:N(w,!1),enableFiltering:j,cellTemplate:'<div class="text-center"><h6><a ng-click="grid.appScope.showNodeAttributes(COL_FIELD)" ng-show="grid.appScope.getNumNodeAttributes(COL_FIELD) > 0">{{grid.appScope.getNumNodeAttributes(COL_FIELD)}}</a></h6></div>'};else if("ndex:internalLink"===w){v={field:w,displayName:"View Network",cellTooltip:!0,minWidth:N("cfab341c-362d-11e5-8ac5-06603eb7f303",!1),enableFiltering:j,cellTemplate:'<a class="ui-grid-cell-contents hideLongLine" ng-bind-html="grid.appScope.getInternalNetworkUUID(COL_FIELD)" ng-href="{{grid.appScope.getURLForMapNode(COL_FIELD)}}" target="_blank"></a>'}}else v={field:w,displayName:w,cellTooltip:!0,minWidth:N(w,!1),enableFiltering:j,sortingAlgorithm:function(a,b){if(isNaN(a)||isNaN(b))return a===b?0:a<b?-1:1;var c=parseFloat(a),d=parseFloat(b);return c===d?0:c<d?-1:1},cellTemplate:'<div class="ui-grid-cell-contents hideLongLine" ng-bind-html="grid.appScope.linkify(COL_FIELD)"></div>'};n[w]=v}}for(var x in n){var y=n[x];k.push(y)}if(h.nodeGridApi.grid.options.columnDefs=k,c){var z=$("#cytoscape-canvas").width();z>0&&(h.nodeGridApi.grid.gridWidth=z)}var A=$(window).height()-195;$("#nodeGridId").height(A),h.nodeGridApi.grid.gridHeight=A,M(a)}},P=function(b){var c=b.edges,d=b.edgeCitations,e=Object.keys(c);h.edgeGridOptions.data=[];for(var f=b.edgeAttributes,g=0;g<e.length;g++){var i=e[g],j=a.getEdgeInfo(i),k=a.getNodeInfo(j.s),l=a.getNodeName(k),m=j.i,n=a.getNodeInfo(j.t),o=a.getNodeName(n),p={"Source Node":l,Interaction:m,"Target Node":o};if(d&&(p.citation=d[i]?i:""),f){var q=["Source Node","Interaction","Target Node"];for(var r in f[i])if(f[i].hasOwnProperty(r)){if(r.startsWith("__"))continue;if("pmid"===r.toLowerCase())continue;var s=f[i][r].v;_.includes(q,r)&&(r+=" 2"),p[r]=s||""}}h.edgeGridOptions.data.push(p)}},Q=function(a,b,c){var d=a.edges,e=a.edgeCitations,f="",g="",i="";if(d){for(var j=Object.keys(d),k=0;k<j.length;k++){var l=j[k],m=d[l].i?d[l].i:"",n=a.nodes[d[l].s].n?a.nodes[d[l].s].n:"",o=a.nodes[d[l].t].n?a.nodes[d[l].t].n:"";f=f.length<n.length?n:f,g=g.length<m.length?m:g,i=i.length<o.length?o:i}var p=j.length<=500;b&&(p=!0);var q=["Source Node","Interaction","Target Node"],r=[{field:q[0],displayName:q[0],cellTooltip:!0,enableFiltering:p,minWidth:N(f,!1)},{field:q[1],displayName:q[1],cellTooltip:!0,enableFiltering:p,minWidth:N(g,!1)},{field:q[2],displayName:q[2],cellTooltip:!0,enableFiltering:p,minWidth:N(i,!1)}];if(e){var s={field:"citation",displayName:"citation",cellToolTip:!1,minWidth:N("citation"),enableFiltering:!0,enableSorting:!0,cellTemplate:'<div class="text-center"><h6><a ng-click="grid.appScope.showEdgeCitations(COL_FIELD)" ng-show="grid.appScope.getNumEdgeCitations(COL_FIELD) > 0">{{grid.appScope.getNumEdgeCitations(COL_FIELD)}}</h6></div>'};r.push(s)}var t=a.edgeAttributes,u={};if(t){var v=_.keys(t);for(k=0;k<v.length;k++)for(var w,x=v[k],y=_.keys(t[x]),z=h.removeHiddenAttributes(y),A=0;A<z.length;A++){var B=z[A];if(!B||"pmid"!==B.toLowerCase()){var C=B.toLowerCase().indexOf("citation")>-1;C?w={field:B,displayName:B,cellToolTip:!1,minWidth:N(B),enableFiltering:!0,enableSorting:!0,cellTemplate:'<div class="text-center"><h6><a ng-click="grid.appScope.showMoreEdgeAttributes(\'Citations\', COL_FIELD)" ng-show="grid.appScope.getNumEdgeNdexCitations(COL_FIELD) > 0">{{grid.appScope.getNumEdgeNdexCitations(COL_FIELD)}}</a></h6></div>'}:"ndex:externallink"===B.toLowerCase()?w={field:B,displayName:B,cellTooltip:!0,minWidth:N(B,!1),enableFiltering:p,cellTemplate:'<div class="ui-grid-cell-contents hideLongLine" ng-bind-html="grid.appScope.getURLsForNdexExternalLink(COL_FIELD)"></div>'}:_.includes(q,B)?(w={field:B+" 2",displayName:B+" (2)",cellTooltip:!0,minWidth:N(B,!1),enableFiltering:p},B+=" 2"):w={field:B,displayName:B,cellTooltip:!0,minWidth:N(B,!1),enableFiltering:p,cellTemplate:"views/gridTemplates/showCellContentsInNetworkTable.html",sortingAlgorithm:function(a,b){if(isNaN(a)||isNaN(b))return a===b?0:a<b?-1:1;var c=parseFloat(a),d=parseFloat(b);return c===d?0:c<d?-1:1}},u[B]=w}}}for(var D in u){var E=u[D];r.push(E)}if(h.edgeGridApi.grid.options.columnDefs=r,c){var F=$("#cytoscape-canvas").width();F>0&&(h.edgeGridApi.grid.gridWidth=F)}var G=$(window).height()-195;$("#edgeGridId").height(G),h.edgeGridApi.grid.gridHeight=G,P(a)}};h.switchView=function(){if(h.switchViewButtonEnabled)if("Graphic"===h.currentView){h.currentView="Table",h.buttonLabel="Graph";D=a.getCurrentNiceCX(),Q(D,!0,!0),O(D,!0,!0)}else if("Table"===h.currentView)if("neighborhood"===h.query&&!A.warningShown&&A.currentNetwork.edgeCount&&A.currentNetwork.edgeCount>A.queryEdgeLimitToShowGraph&&A.currentNetwork.edgeCount<=A.queryEdgeLimitToShowTableOnly){var b="Your query result is "+A.currentNetwork.edgeCount+" edges and graphic rendering may be slow.  <br> <br><strong>Would you like to switch to Graphic View?";f.openConfirmationModal("Performance Notice",b,"Switch to Graph","Cancel",!0,function(){A.warningShown=!0,h.currentView="Graphic",h.buttonLabel="Table",h.drawCXNetworkOnCanvasWhenViewSwitched&&(h.drawCXNetworkOnCanvasWhenViewSwitched=!1,D=a.getCurrentNiceCX(),t())},function(){})}else h.currentView="Graphic",h.buttonLabel="Table",h.drawCXNetworkOnCanvasWhenViewSwitched&&(h.drawCXNetworkOnCanvasWhenViewSwitched=!1,D=a.getCurrentNiceCX(),t())},h.saveAsTSV=function(){var b=document.createElement("a"),c=a.getTSVOfCurrentNiceCX(),d=a.getCurrentNetworkName(),e=d||A.currentNetwork.name;e+=".txt",b.setAttribute("href","data:application/octet-stream;charset=utf-8,"+encodeURIComponent(c)),b.setAttribute("download",e),document.body.appendChild(b),b.click(),document.body.removeChild(b)};var R=function(){if(h.openInCytoscapeTitle="Opening "+A.currentNetwork.name+" in Cytoscape...",A.successfullyQueried||void 0===y){var b=w.niceCXToRawCX(a.getCurrentNiceCX());return void r.postRawCXToCytoscape(b,function(){console.log("opened.")},function(){console.log("failed.")})}var c=r.getNdexServerUriHTTP(),e={serverUrl:c,uuid:y};if(z)e.accessKey=z;else if(A.networkShareURL){var f=A.networkShareURL.split("accesskey=");2===f.length&&(e.accessKey=f[1])}if("google"===window.currentSignInType)e.idToken=gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token;else if("basic"===window.currentSignInType){var g=d.getUserCredentials();e.username=g.userName,e.password=g.token}r.exportNetworkToCytoscape(e,function(){h.openInCytoscapeTitle="Opened",h.isCytoscapeRunning=!0,s(function(){h.openInCytoscapeTitle="Open this network in Cytoscape"},2e3)},function(){console.log("unable to open network in Cytoscape error"),h.openInCytoscapeTitle="Unable to open this network in Cytoscape",h.cytoscapeIsRunning=!1})};h.networkToCytoscape=function(){if(h.isCytoscapeRunning){var a=A.currentNetwork.edgeCount,b=window.ndexSettings.openInCytoscapeEdgeThresholdWarning;if(0===b||a<b)R();else{f.openConfirmationModal("Performance Notice","This is a large network and opening it in Cytoscape might take a long time or  even cause a system crash if your computer's hardware resources are not sufficient to complete the task. <br><br> <strong>Would you like to proceed anyway?</strong>","Yes","Cancel",!0,function(){R()},function(){})}}},h.$on("$destroy",function(){B&&clearInterval(B),a.clearNiceCX(),a.clearQueryResultInCX()}),h.downloadNetwork=function(){p.downloadCXNetwork(y)},h.getNodeName=function(b){return a.getNodeName(b)},h.removeHiddenAttributes=function(a){var b=[];return _.forEach(a,function(a){a&&!a.startsWith("__")&&b.push(a)}),b},h.getNodeAttributesNames=function(a){var b=_.keys(a),c=h.removeHiddenAttributes(b),d=["id"],e=["n","r","alias","relatedTo","citations"];_(e).forEach(function(b){a[b]&&d.push(b)});for(var f=e.concat(["_cydefaultLabel","id","$$hashKey","$$expanded","pmid"]),g=0;g<f.length;g++){var i=c.indexOf(f[g]);i>-1&&c.splice(i,1)}var j=[];return c.indexOf("ndex:internalLink")>-1&&(j.push("ndex:internalLink"),_.pull(c,"ndex:internalLink")),c.indexOf("ndex:externalLink")>-1&&(j.push("ndex:externalLink"),_.pull(c,"ndex:externalLink")),d=d.concat(c),j.length>0&&(d=d.concat(j)),d},h.getEdgeAttributesNames=function(a){for(var b=_.keys(a),c=h.removeHiddenAttributes(b),d=["s","t","i","id","$$hashKey","$$expanded","pmid"],e=0;e<d.length;e++){var f=c.indexOf(d[e]);f>-1&&c.splice(f,1)}return c},h.getAttributeValue=function(a,b){if(!b&&0!==b)return null;if(!a)return null;var c="";if(b instanceof Object)if(b.v&&Array.isArray(b.v)&&b.v.length>0&&"ndex:externallink"!==a.toLowerCase())if(b.v.length>5)for(var d=0;d<5;d++)c=0===d?"<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "+I(b.v[d])+"<br>":c+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "+I(b.v[d])+"<br>";else for(var e=0;e<b.v.length;e++)c=0===e?"<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "+I(b.v[e])+"<br>":c+" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "+I(b.v[e])+"<br> ";else{if("ndex:internallink"===a.toLowerCase())return h.getURLsForNdexInternalLink(b.v);if("ndex:externallink"===a.toLowerCase())return h.getURLsForNdexExternalLink(b.v);if(Array.isArray(b)&&b.length>0){if(b.length>5)for(var f=0;f<5;f++)c=0===f?"<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "+I(b[f])+"<br>":c+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "+I(b[f])+"<br>";else for(var g=0;g<b.length;g++)c=0===g?"<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "+I(b[g])+"<br>":c+" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "+I(b[g])+"<br> ";return c}c=b.v?b.v:"";var i=typeof c;c&&"string"===i&&(c=I(c))}else c="string"==typeof b?I(b):0===b?"0":b;return c},h.howManyAttributes=function(a){var b=0;return a?(a instanceof Object&&a.v&&Array.isArray(a.v)?b=a.v.length:a instanceof Object&&Array.isArray(a)?b=a.length:_.isString(a)&&(b=1),b):b},A.genericInfoModal=function(a,b){k.open({templateUrl:"views/generic-info-modal.html",scope:h,controller:["$scope","$modalInstance",function(c,d){c.title=a,c.message=b,c.close=function(){d.dismiss()}}]})},A.showMoreAttributes=function(a,b){var c=a+":",d="";if(b instanceof Object)if(b.v&&Array.isArray(b.v))for(var e=0;e<b.v.length;e++)d=d+I(b.v[e])+"<br>";else if(b&&Array.isArray(b))for(var f=0;f<b.length;f++)d=d+I(b[f])+"<br>";A.genericInfoModal(c,d)},h.showMoreEdgeAttributes=function(a,b){var c;if("object"==typeof a&&Array.isArray(b)){var d=b.length;a&&a.entity&&_.forOwn(a.entity,function(a,e){if(c=e+":",Array.isArray(a)&&a.length===d){for(var f=0;f<d;f++)a[f]!==b[f]&&(c=null);if(null!==c)return!1}})}else c=a+":";var e="";if(b instanceof Object)if(b.v&&Array.isArray(b.v))for(var f=0;f<b.v.length;f++)e=e+I(b.v[f])+"<br>";else _.isArray(b)&&_.forEach(b,function(a){_.isString(a)&&(e=e?e+"<br>"+h.linkify(a):h.linkify(a))});A.genericInfoModal(c,e)},A.contextModal=function(c,d,e){k.open({templateUrl:"views/context-modal.html",windowClass:"app-modal-window-800",scope:h,controller:["$scope","$modalInstance",function(f,g){f.context=[],_.forEach(A.context,function(a,b){a&&b&&f.context.push({namespace:b,url:a})}),f.contextIsEmpty=0===f.context.length,f.title=c,f.message=d,f.isEdit=e,f.errors="",f.removeContext=function(a){f.context.splice(a,1)},f.addContext=function(){f.context.push({namespace:"",url:""}),f.contextIsEmpty=!1},f.close=function(){g.dismiss()},f.save=function(){var c={};_.forEach(f.context,function(a){a.namespace&&a.url&&(c[a.namespace]=a.url)}),A.context=c,A.contextIsFromAspect?a.updateNetworkContextFromNdexV2([A.context],y,function(a){g.dismiss()},function(a){f.errors=a}):(a.setNetworkProperty(v,"@context",JSON.stringify(A.context)),b.setNetworkPropertiesV2(A.currentNetworkId,v.properties,function(a){g.dismiss()},function(a){f.errors=a}))}}]})},A.showContextModal=function(a){A.contextModal("title","message",a)},h.getEdgeLabel=function(b){if(!b)return"unknown";var c="source unknown",d="target unknown",e="->";if(b.s||0===b.s){var f=a.getNodeInfo(b.s);c=a.getNodeName(f)}if(b.t||0===b.t){var g=a.getNodeInfo(b.t);d=a.getNodeName(g)}return b.i&&(e=b.i),c+" "+e+" "+d},h.getCitation=function(a){var b="pmid : unable to get citation info",c="string"==typeof a;if(a&&(a["dc:identifier"]||c)){var d=c?a.split(":"):a["dc:identifier"].split(":");if(2===d.length){var e=d[0].toString().toLowerCase();"pubmed"!==e&&"pmid"!==e||(isNaN(d[1])?"string"==typeof d[1]&&(d[1].startsWith("http://")||d[1].startsWith("https://"))&&(b='<a target="_blank" href="'+d[1]+'">'+d[1]+"</a>"):b='<a target="_blank" href="http://www.ncbi.nlm.nih.gov/pubmed/'+d[1]+'"><strong>pmid: </strong>'+d[1]+"</a>")}}return b},h.getContextAspectFromNiceCX=function(){A.context={};var b=V(void 0,"@context");if(b)return A.context=JSON.parse(b),void(A.contextIsFromAspect=!1);var c=a.getCurrentNiceCX()["@context"];c&&(c.elements?A.context=c.elements[0]:A.context=c[0])};var S=function(a){if(0!==a.status){var b;a.data&&a.data.message&&(b=a.data.message),a.status&&(b=b+"  Error Code: "+a.status+"."),a.statusText&&(b=b+"  Error Message: "+a.statusText),A.errors.push("Unable to get network: "+b)}else A.errors.push("Unable to get network; Server returned no error information.")},T=function(b,c){var d=A.currentNetwork.hasLayout;d&&A.currentNetwork.edgeCount<=12e3?(A.isSample=!1,a.getCompleteNetworkInCXV2(b,z).success(function(a){c(a,!1)}).error(function(a){S(a)})):d&&A.currentNetwork.edgeCount>12e3||A.currentNetwork.hasSample?(A.isSample=!0,a.getNetworkSampleV2(b,z).success(function(a){A.sampleSize=a.edges?_.size(a.edges):0,c(a,!1)}).error(function(a){S(a)})):(A.isSample=!1,a.getCompleteNetworkInCXV2(b,z).success(function(a){c(a,!1)}).error(function(a){S(a)}))};A.checkQueryNetworkAndDisplay=function(a){if(!("neighborhood"!==a||A.searchString&&A.searchString.trim()))return A.searchString="",void $("#inputQueryStrId").val("");h.query=a,A.previousNetwork=A.currentNetwork,h.beforeQueryView=h.currentView,A.queryNetworkAndDisplay()},A.cleanUpAfterQuerying=function(){a.restoreCurrentNiceCXAfterQuery(),A.successfullyQueried=!1,A.queryWarnings=[],q.stopSpinner()},A.rerunQueryAndSaveResult=function(a,c,d,e,f,g){b.queryNetworkV2(a,c,d,h.selectedQuery,e,f,g,function(){},function(a){a&&a.errorCode&&"NDEx_Bad_Request_Exception"===a.errorCode&&a.message&&A.queryErrors.push(a.message)})},A.presentQueryResult=function(b,c,d){if(0===b&&d.success)return a.restoreCurrentNiceCXAfterQuery(),A.successfullyQueried=!1,A.queryWarnings=[],A.queryWarnings.push("No nodes matching your query terms were found in this network."),void q.stopSpinner();A.successfullyQueried=!0;var e=a.getCurrentNiceCX(),f=a.getCurrentNetworkName();A.currentNetwork={name:f,nodeCount:b,edgeCount:c,queryString:A.searchString,depth:h.selectedQuery.searchDepth},w.setNetworkProperty(e,"name",f),A.tabs[0].active||(A.tabs[0].active=!0),A.selectionContainer={},A.isSamplePrevious=A.isSample,A.sampleSizePrevious=A.sampleSize,A.isSample=!1,A.sampleSize=0;var g=!1,i=!1;h.showSetSampleButton=A.isAdmin,h.showSetSampleButton&&(c>1e3?(h.showSetSampleButtonEnabled=!1,h.setSampleButtonToolTip="Cannot set sample for query results with more than 1000 edges"):A.previousNetwork.edgeCount<h.noOfEdgesToShowSetSampleButton?(h.showSetSampleButtonEnabled=!1,h.setSampleButtonToolTip="Cannot set sample for networks with less than "+h.noOfEdgesToShowSetSampleButton+" edges"):A.previousNetwork.edgeCount<=12e3&&A.previousNetwork.hasLayout?(h.showSetSampleButtonEnabled=!1,h.setSampleButtonToolTip="This feature is not yet implemented"):(h.showSetSampleButtonEnabled=!0,h.setSampleButtonToolTip="Set this query as network sample ")),c<=A.queryEdgeLimitToShowGraph?(L(e,!1),"Table"===h.currentView?(g=!0,i=!1,O(e,g,i),Q(e,g,i),h.drawCXNetworkOnCanvasWhenViewSwitched=!0):(h.drawCXNetworkOnCanvasWhenViewSwitched=!1,h.switchToGraphViewButtonTitle="Switch to Graphic View")):c>A.queryEdgeLimitToShowGraph&&c<=A.queryEdgeLimitToShowTableOnly?(h.currentView="Table",h.buttonLabel="Graph",h.switchViewButtonEnabled=!0,g=!0,i=!0,h.drawCXNetworkOnCanvasWhenViewSwitched=!1,h.switchToGraphViewButtonTitle="Switch to Graphic View",L(e,!1),O(e,g,i),Q(e,g,i)):c>A.queryEdgeLimitToShowTableOnly&&(h.currentView="Table",h.buttonLabel="Graph",h.switchViewButtonEnabled=!1,h.switchToGraphViewButtonTitle="This network is too large to display in the browser. Please import it in Cytoscape for visualization purposes.",g=!0,i=!0,h.drawCXNetworkOnCanvasWhenViewSwitched=!1,O(e,g,i),Q(e,g,i))},A.queryNetworkAndDisplay=function(){A.queryWarnings=[],A.queryErrors=[],q.startSpinner("spinnerId");var c=window.ndexSettings.networkQueryEdgeLimit;b.queryNetworkV2(A.currentNetworkId,z,A.searchString,h.selectedQuery,c,!1,!0,function(b){a.setQueryResultInCX(b);var d=w.rawCXtoNiceCX(b);a.setCurrentNiceCX(d);var e=d.nodes?Object.keys(d.nodes).length:0,g=d.edges?Object.keys(d.edges).length:0,h=d.status&&d.status.status&&d.status.status[0]?d.status.status[0]:null;if(h.success||"edgelimitexceeded"!==h.error.toLowerCase())A.presentQueryResult(e,g,h);else{var i="Query Result Exceeds Limit";if(!A.isLoggedInUser){var j="Your query returned more than "+c+" edges and cannot be executed in the browser. <br><br> <strong>Please log in so that the result can be saved to your NDEx account.</strong>";return q.stopSpinner(),void f.openConfirmationModal(i,j,"Log in","Close",!0,function(){A.cleanUpAfterQuerying(),n.path("/signIn")},function(){A.cleanUpAfterQuerying()})}var k="Your query returned more than "+c+" edges and cannot be executed in the browser. <br><br> <strong>Would you like to save the result directly to your account?</strong>";f.openConfirmationModal(i,k,"Save Result","Cancel",!0,function(){c=-1,A.rerunQueryAndSaveResult(A.currentNetworkId,z,A.searchString,c,!0,!1),A.cleanUpAfterQuerying()},function(){A.cleanUpAfterQuerying()})}q.stopSpinner()},function(a){if(q.stopSpinner(),0!==a.status)if(a.message)A.queryWarnings=[],a.stack?A.queryWarnings.push(a.message+" "+a.stack):A.queryWarnings.push(a.message);else if(a.data.message&&a.data.message.toLowerCase().indexOf("edgelimitexceeded")>0){var b="Query returned more than max edges ("+c+"). Please refine your query.";A.queryWarnings=[],A.queryWarnings.push(b)}else A.queryErrors=[],A.queryErrors.push(a.data.message)})},A.backToOriginalNetwork=function(b){A.selectionContainer={},h.switchViewButtonEnabled=!0,A.warningShown=!1,A.tabs[0].active=!0,A.tabs[0].disabled=!1,A.tabs[0].hidden=!1,h.query=null,A.successfullyQueried=!1,h.disableQuery=!1,A.currentNetwork=A.previousNetwork,a.restoreCurrentNiceCXAfterQuery(),D=a.getOriginalNiceCX(),a.clearQueryResultInCX(),"Table"===h.currentView&&(h.drawCXNetworkOnCanvasWhenViewSwitched=!0),q.startSpinner("spinnerId"),L(D,!1),A.isSample=A.isSamplePrevious,A.sampleSize=A.sampleSizePrevious;Q(D,!0,!0),O(D,!0,!0),h.currentView!==h.beforeQueryView&&h.switchView(),q.stopSpinner()},A.getIDsOfSelectedNetworks=function(){var a=[];return a.push(A.currentNetworkId),a},A.saveQueryResult=function(){k.open({templateUrl:"views/directives/confirmationModal.html",scope:h,controller:["$scope","$modalInstance",function(a,b){a.title="Save query result?",a.message='The query result for "'+v.name+'" will be saved to your account?',a.cancel=function(){a.errors=null,b.dismiss()},a.confirm=function(){if(!a.isProcessing){a.isProcessing=!0,a.progress="Save in progress.... ";A.rerunQueryAndSaveResult(A.currentNetworkId,z,A.searchString,-1,!0,!1),b.close(),a.isProcessing=!1}}}]})},A.getStatusOfShareableURL=function(a){b.getAccessKeyOfNetworkV2(y,function(b){b&&b.accessKey?A.networkShareURL=p.buildNetworkURL(b.accessKey,y):A.networkShareURL=null,a()},function(){console.log("unable to get access key for network "+y),h.openInCytoscapeTitle="unable to get access key for network "+y})};var U=function(a){A.isLoggedInUser&&a===window.currentNdexUser.externalId?(A.networkOwner.firstName=window.currentNdexUser.firstName,A.networkOwner.lastName=window.currentNdexUser.lastName,A.networkOwner.ownerUUID=a,h.showDeleteDOILink=h.isDOIPending()):b.getUserByUUIDV2(a).success(function(b){A.networkOwner.firstName=b.firstName,A.networkOwner.lastName=b.lastName,A.networkOwner.ownerUUID=a}).error(function(){console.log("unable to get the network owner info")})};const V=function(b,c){return a.getNetworkProperty(v,b,c)};var W=function(){h.requestDOITitle="This network is a Cytoscape collection. Cannot request DOI",h.exportTitle="This network is a Cytoscape collection and cannot be exported",h.upgradePermissionTitle="This network is a Cytoscape collection and cannot be edited in NDEx",h.editPropertiesButtonTitle="This network is a Cytoscape collection and cannot be edited in NDEx",A.isNetworkOwner||(h.shareTitle="Unable to share this network: you do not own it",h.deleteTitle="Unable to delete this network: you do not own it")},X=function(){A.isNetworkOwner?p.isNetworkCertified(A.currentNetwork)?p.isDOIAssigned(A.currentNetwork)?h.requestDOITitle="Unable to request DOI for this network: it is certified and a DOI has been assigned":p.isDOIPending(A.currentNetwork)&&(h.requestDOITitle="Unable to request DOI for this network: a request has been submitted and the DOI is pending assignment"):p.isDOIPending(A.currentNetwork)?h.requestDOITitle="Unable to request DOI for this network: a request has been submitted and the DOI is pending assignment":p.isDOIAssigned(A.currentNetwork)?h.requestDOITitle="Unable to request DOI for this network: a DOI has already been assigned":A.readOnlyChecked&&(h.requestDOITitle="Unable to request DOI for this network: please uncheck the Read Only box and try again"):h.requestDOITitle="Unable to request DOI for this network: you do not own it "},Y=function(){A.isNetworkOwner||(h.shareTitle="Unable to Share this network: you do not own it ")};A.setNetworkSampleViaUUID=function(){if(h.enableSetSampleViaUUID){var c=h;k.open({templateUrl:"views/setNetworkSampleViaUUIDModal.html",backdrop:"static",controller:["$scope","$modalInstance",function(d,e){d.title="Set Network Sample",d.networkUUID="",d.cancel=function(){e.dismiss(),delete d.networkUUID,delete d.errors},d.$watch("networkUUID",function(){delete d.errors}),d.submit=function(){if(d.networkUUID===A.currentNetworkId)return void(d.errors="The sample and target are the same network.  Please select a different sample.");a.getNetworkSummaryFromNdexV2(d.networkUUID,null).success(function(f){var g=f.edgeCount;if(g>1e3)return void(d.errors="The network with UUID "+d.networkUUID+" has "+g+" edges. Cannot set as sample networks with more than 1000 edges.");b.getCompleteNetworkInCXV2(d.networkUUID,null,function(f){b.setNetworkSampleV2(A.currentNetworkId,f,function(){var b=w.rawCXtoNiceCX(f);if(A.isSample=!0,A.sampleSize=b.edges?_.size(b.edges):0,a.setCurrentNiceCX(b),a.setOriginalNiceCX(b),L(b,!1),"Table"===c.currentView){O(b,!0,!1),Q(b,!0,!1),c.drawCXNetworkOnCanvasWhenViewSwitched=!0}else c.drawCXNetworkOnCanvasWhenViewSwitched=!1;e.dismiss()},function(a){a&&a.hasOwnProperty("data")&&a.data.hasOwnProperty("message")?d.errors="Unable to set network "+d.networkUUID+" as sample: "+a.data.message:d.errors="Unable to set network "+d.networkUUID+" as sample."})},function(a){a&&a.hasOwnProperty("data")&&a.data.hasOwnProperty("message")?d.errors="Unable to set network "+d.networkUUID+" as sample: "+a.data.message:d.errors="Unable to set network "+d.networkUUID+" as sample."})}).error(function(a){a&&a.hasOwnProperty("data")&&a.data.hasOwnProperty("message")?d.errors="Unable to set network "+d.networkUUID+" as sample: "+a.data.message:d.errors="Unable to set network "+d.networkUUID+" as sample."})}}]})}},A.removeFromMyNetworks=function(){if(h.enableRemoveFromMyAccount){var a="Remove Shared Network",c="Another NDEx user has shared this network with you and removing it from your account might prevent you from accessing it in the future.<br><br>Are you sure you want to remove this shared network?";f.openConfirmationModal(a,c,"Remove","Cancel",!0,function(){var d=g.getCurrentUserId(),e=A.currentNetworkId;b.deleteNetworkPermissionV2(e,"user",d,function(){g.setCurrentNetworkId(null),n.path("/myAccount")},function(b){a="Unable to Delete Network Access",c="Unable to remove access to network for user <strong>",c=c+g.getLoggedInUserFirstAndLastNames()+"</strong>.<br><br>",c+=b.message,f.genericInfoModal(a,c)})},function(){})}};var Z=function(){h.enableSetSampleViaUUID=!0,A.isLoggedInUser?A.isNetworkOwner?A.currentNetwork.edgeCount<h.noOfEdgesToShowSetSampleButton?(h.setNetworkSampleViaUUIDTitle="Cannot set sample for networks with less than "+h.noOfEdgesToShowSetSampleButton+" edges",h.enableSetSampleViaUUID=!1):A.currentNetwork.edgeCount<=12e3&&A.currentNetwork.hasLayout&&(h.setNetworkSampleViaUUIDTitle="This feature is not yet implememted",h.enableSetSampleViaUUID=!1):(h.setNetworkSampleViaUUIDTitle="Cannot set sample for networks you do not own",h.enableSetSampleViaUUID=!1):(h.setNetworkSampleViaUUIDTitle="You need to be logged in to set network sample",h.enableSetSampleViaUUID=!1)},aa=function(){h.enableRemoveFromMyAccount=!0,A.isLoggedInUser?A.isNetworkOwner?(h.removeFromMyAccountTitle="You can only remove networks that other NDEx users have shared with you",h.enableRemoveFromMyAccount=!1):"None"===A.privilegeLevel&&(h.removeFromMyAccountTitle="You can only remove networks that other NDEx users have shared with you",h.enableRemoveFromMyAccount=!1):(h.removeFromMyAccountTitle="You need to be logged in to remove from My Networks table networks shared with you",h.enableRemoveFromMyAccount=!1)},ba=function(){A.isNetworkOwner?p.isNetworkCertified(A.currentNetwork)?h.deleteTitle="This network is certified and cannot be deleted":p.isDOIPending(A.currentNetwork)?h.deleteTitle="This network has a DOI pending and cannot be deleted ":p.isDOIAssigned(A.currentNetwork)?h.deleteTitle="This network has been assigned a DOI and cannot be deleted ":A.readOnlyChecked&&(h.deleteTitle="Unable to Delete this network: it is read-only "):h.deleteTitle="Unable to Delete this network: you do not own it "},ca=function(){r.getCytoscapeVersion(function(a){if(a&&a.cytoscapeVersion){var b=a.cytoscapeVersion;b=b.replace(/\./g,"");parseInt(b)<360?(h.openInCytoscapeTitle="You need Cytoscape version 3.6.0 or later to use this feature.\n",h.openInCytoscapeTitle+="Your version of Cytoscape is "+a.cytoscapeVersion+".",h.isCytoscapeRunning=!1):r.getCyNDEXVersion(function(a){if(a&&a.data&&a.data.appVersion){var b=a.data.appVersion;b=b.replace(/\./g,"");parseInt(b)<223?(h.openInCytoscapeTitle="You need CyNDEx-2 version 2.2.3 or later to use this feature.\n",h.openInCytoscapeTitle+="Your version of CyNDEx-2 is "+a.data.appVersion+".",h.isCytoscapeRunning=!1):(h.openInCytoscapeTitle="Open this network in Cytoscape",h.isCytoscapeRunning=!0)}else h.openInCytoscapeTitle="You need CyNDEx-2 version 2.2.3 or later to use this feature.\nYour version of CyNDEx-2 is too old.",h.isCytoscapeRunning=!1},function(){h.openInCytoscapeTitle=C,h.isCytoscapeRunning=!1})}else h.openInCytoscapeTitle=C,h.isCytoscapeRunning=!1},function(){h.openInCytoscapeTitle=C,h.isCytoscapeRunning=!1})};h.getCytoscapeButtonClass=function(){return h.isCytoscapeRunning?"cyButton":"cyButtonDisabled"};var da=function(){A.hasMultipleSubNetworks()?h.editPropertiesButtonTitle="This network is a Cytoscape collection and cannot be edited in NDEx":A.isNetworkOwner?p.isNetworkCertified(A.currentNetwork)?h.editPropertiesButtonTitle="This network is certified and cannot be modified further":p.isDOIPending(A.currentNetwork)?h.editPropertiesButtonTitle="Unable to edit this network: DOI is pending":p.isDOIAssigned(A.currentNetwork)?(h.editPropertiesButtonTitle="This network has been assigned a DOI and cannot be modified further. ",h.editPropertiesButtonTitle+="If you need to update this network please clone it."):A.readOnlyChecked?h.editPropertiesButtonTitle="Unable to edit this network: it is read-only":h.editPropertiesButtonTitle="Modify network properties":h.editPropertiesButtonTitle="Unable to edit this network: you do not have privilege to modify it"},ea=function(){
A.hasMultipleSubNetworks()?h.upgradePermissionTitle="This network is a Cytoscape collection and cannot be edited in NDEx":p.isNetworkCertified(A.currentNetwork)?h.upgradePermissionTitle="Unable to Upgrade Permission for this network: it is certified ":p.isDOIPending(A.currentNetwork)?h.upgradePermissionTitle="Unable to Upgrade Permission for this network: DOI is pending ":p.isDOIAssigned(A.currentNetwork)?h.upgradePermissionTitle="Unable to Upgrade Permission for this network: it has DOI assigned to it ":A.isNetworkOwner?h.upgradePermissionTitle="Unable to Upgrade Permission for this network: you already own it ":"edit"===A.privilegeLevel.toLowerCase()&&(h.upgradePermissionTitle="Unable to Upgrade Permission for this network: you already have Edit privilege ")},fa=function(a){if(A.isLoggedInUser){var c=g.getCurrentUserId(),d=A.currentNetworkId;b.getUserPermissionForNetworkV2(c,d,!1,function(b){if(b){var c=b[d];"ADMIN"===c&&(A.isAdmin=!0,A.privilegeLevel="Admin"),"WRITE"===c&&(A.canEdit=!0,A.privilegeLevel="Edit"),"READ"===c&&(A.canRead=!0,A.privilegeLevel="Read"),h.showSetSampleButton=A.isAdmin,Z(),aa(),da(),ea()}a()},function(a){S(a)})}else a()};h.isRequestingDOIEnabled=function(){return A.isNetworkOwner&&!A.hasMultipleSubNetworks()&&!h.isNetworkCertified()&&!h.isDOIAssigned()&&!h.isDOIPending()},h.isUpgradingPermissionsEnabled=function(){return!(A.isAdmin||A.canEdit||A.hasMultipleSubNetworks()||h.isNetworkCertified()||h.isDOIAssigned()||h.isDOIPending())},h.isDeleteNetworkEnabled=function(){return A.isAdmin&&!A.readOnlyChecked};if(h.readOnlyChanged=function(){b.setNetworkSystemPropertiesV2(A.currentNetworkId,"readOnly",A.readOnlyChecked,function(){X(),ba(),da()},function(){console.log("unable to make network Read-Only")})},A.isStringEmpty=function(a){return void 0===a||null===a||0===a.trim().length},A.getAllNetworkSetsOwnedByUser=function(a,c){if(!A.isLoggedInUser)return void(A.networkSets=[]);var d=g.getCurrentUserId();b.getAllNetworkSetsOwnedByUserV2(d,-1,-1,function(b){A.networkSets=_.orderBy(b,["modificationTime"],["desc"]),a(A.networkSets[0])},function(a,b){A.networkSets=[],console.log("unable to get network sets"),c(a,b)})},A.cloneNetwork=function(){var a="Clone This Network",c="The network <strong>"+A.currentNetwork.name+"</strong> ",d=c+"will be cloned to your account. <br><br> Are you sure you want to proceed?";f.openConfirmationModal(a,d,"Confirm","Cancel",!1,function(e){i.errors=null,i.confirmButtonDisabled=!0,i.cancelButtonDisabled=!0,i.progress="Cloning network in progress ...";q.startSpinner("confirmationSpinnerId"),b.cloneNetworkV2(A.currentNetworkId,function(){q.stopSpinner(),e.dismiss(),delete i.errors,delete i.confirmButtonDisabled,delete i.cancelButtonDisabled,delete i.progress},function(b){q.stopSpinner(),a="Unable to Clone Network",d=c+" wasn't cloned to your account.",b.message&&(d=d+"<br>"+b.message),i.errors=d,delete i.progress,delete i.cancelButtonDisabled})},function(a){a.dismiss(),delete i.errors,delete i.confirmButtonDisabled,delete i.cancelButtonDisabled,delete i.progress})},A.setSampleFromQuery=function(){if(h.showSetSampleButtonEnabled){var c="Set Sample For This Network",d="Set this query as sample for this network?";f.openConfirmationModal(c,d,"Set Sample","Cancel",!1,function(e){i.errors=null,i.confirmButtonDisabled=!0,i.cancelButtonDisabled=!0,i.progress="Setting sample network in progress ...";q.startSpinner("confirmationSpinnerId");var f=a.getQueryResultInCX();b.setNetworkSampleV2(A.currentNetworkId,f,function(){a.setQueryResultAsOriginalNiceCX(),A.previousNetwork.hasSample=!0,A.isSamplePrevious=!0,A.sampleSizePrevious=A.currentNetwork.edgeCount,h.showSetSampleButton=!1,q.stopSpinner(),e.dismiss(),delete i.errors,delete i.confirmButtonDisabled,delete i.cancelButtonDisabled,delete i.progress},function(a){q.stopSpinner(),c="Unable to Set Sample",d="The query result wasn't set as sample for this network.",a.message&&(d=d+"<br>"+a.message),i.errors=d,delete i.progress,delete i.cancelButtonDisabled})},function(a){a.dismiss(),delete i.errors,delete i.confirmButtonDisabled,delete i.cancelButtonDisabled,delete i.progress})}},A.deletePendingDOIRequest=function(){var a="Delete DOI Request",c="This will delete your DOI request, please verify that your network's visibility is correct. <br> If you still want a DOI for your network, please submit a new request. <br><br>Would you like to delete this request?";f.openConfirmationModal(a,c,"Confirm","Cancel",!1,function(d){i.errors=null,i.confirmButtonDisabled=!0,i.cancelButtonDisabled=!0,i.progress="Deleting DOI request in progress ...";q.startSpinner("confirmationSpinnerId"),b.cancelDoi(A.currentNetworkId,function(){delete A.currentNetwork.doi,delete A.currentNetwork.isCertified,A.currentNetwork.isReadOnly=!1,A.readOnlyChecked=A.currentNetwork.isReadOnly,da(),q.stopSpinner(),d.dismiss(),delete i.errors,delete i.confirmButtonDisabled,delete i.cancelButtonDisabled,delete i.progress},function(b){q.stopSpinner(),a="Unable to delete DOI",c="DOI was not deleted for network "+networkName+".",b.message&&(c=c+"<br><br>"+b.message),i.errors=c,delete i.progress,delete i.cancelButtonDisabled})},function(a){a.dismiss(),delete i.errors,delete i.confirmButtonDisabled,delete i.cancelButtonDisabled,delete i.progress})},$(window).resize(function(){var a=$("#cytoscape-canvas");if(a.height($(window).height()-160),$("#divNetworkTabs").height($(window).height()-160),"Graphic"===h.currentView)$("#queryWarningsOrErrorsId").width(a.width());else if("Edges"===h.activeTab){var b=$("#edgeGridId");$("#queryWarningsOrErrorsId").width(b.width()),b.height($(window).height()-195),h.edgeGridApi.grid.gridHeight=b.height(),h.edgeGridApi.core.refresh()}else{var c=$("#nodeGridId");$("#queryWarningsOrErrorsId").width(c.width()),c.height($(window).height()-195),h.nodeGridApi.grid.gridHeight=c.height(),h.nodeGridApi.core.refresh()}}),$(window).trigger("resize"),q.startSpinner("spinnerId"),void 0!==j.identifier)!function(){a.getNetworkSummaryFromNdexV2(y,z).success(function(b){A.currentNetwork=b,v=b;var c=b.ownerUUID;U(c),b&&b.visibility&&(A.visibility=b.visibility.toLowerCase()),b.name||(A.currentNetwork.name="Untitled"),A.subNetworkId=p.getSubNetworkId(b),A.noOfSubNetworks=p.getNoOfSubNetworks(b),A.noOfSubNetworks>=1&&(h.disabledQueryTooltip="This network is part of a Cytoscape collection and cannot be operated on or edited in NDEx"),null!==A.subNetworkId&&(A.currentNetwork.description=V(A.subNetworkId,"description"),A.currentNetwork.version=V(A.subNetworkId,"version")),A.isLoggedInUser&&b.ownerUUID===g.getCurrentUserId()&&(A.isNetworkOwner=!0),"public"===A.visibility||A.accesskey?("private"===A.visibility&&A.accesskey&&(A.networkShareURL=p.buildNetworkURL(A.accesskey,y)),ca(),B||(B=setInterval(ca,5e3))):A.isNetworkOwner?A.getStatusOfShareableURL(function(){ca(),B||(B=setInterval(ca,5e3))}):(ca(),B||(B=setInterval(ca,5e3))),fa(function(){("public"===A.visibility||A.isAdmin||A.canEdit||A.canRead||z)&&(E(),T(y,L))}),A.readOnlyChecked=A.currentNetwork.isReadOnly;const d=V(A.subNetworkId,"ndex:sourceFormat");if(A.currentNetwork.sourceFormat=void 0===d?"Unknown":d,A.currentNetwork.reference=V(A.subNetworkId,"Reference"),A.currentNetwork.rightsHolder=V(A.subNetworkId,"rightsHolder"),A.currentNetwork.rights=V(A.subNetworkId,"rights"),void 0!==A.currentNetwork.rights&&A.currentNetwork.rights.indexOf("|")>-1){var e=A.currentNetwork.rights,f=e.split("|");f.length>1&&(A.currentNetwork.rights="<a href='"+f[0]+"'>"+f[1]+"</a>")}A.otherProperties=_.sortBy(a.getPropertiesExcluding(v,A.subNetworkId,["rights","rightsHolder","Reference","ndex:sourceFormat","name","description","version","@context"]),"predicateString"),A.getAllNetworkSetsOwnedByUser(function(){},function(){}),A.hasMultipleSubNetworks()?W():(X(),Y()),da(),ba()}).error(function(a){S(a)})}();else if(void 0!==j.url){var ga=j.url;delete j.url,function(b){a.getNiceCXNetworkFromURL(b,function(b){A.currentNetwork=w.getPartialSummaryFromNiceCX(b),v=A.currentNetwork,A.visibility=void 0,A.isAdmin=!1,A.subNetworkId=void 0,A.noOfSubNetworks=void 0,h.disabledQueryTooltip="This network is not in NDEx yet. Saving it to NDEx will enable more operations on it.",E(),L(b,!1),A.readOnlyChecked=A.currentNetwork.isReadOnly;const c=a.getNetworkProperty(A.subNetworkId,"ndex:sourceFormat");A.currentNetwork.sourceFormat=void 0===c?"Unknown":c,A.currentNetwork.reference=a.getNetworkProperty(A.subNetworkId,"Reference"),A.currentNetwork.rightsHolder=a.getNetworkProperty(A.subNetworkId,"rightsHolder"),A.currentNetwork.rights=a.getNetworkProperty(A.subNetworkId,"rights"),A.otherProperties=_.sortBy(a.getPropertiesExcluding(v,A.subNetworkId,["rights","rightsHolder","Reference","ndex:sourceFormat","name","description","version"]),"predicateString"),h.disableQuery=!0,A.hasMultipleSubNetworks()?W():(X(),Y()),da(),ba()},function(a){S(a)})}(ga)}else console.log("Unexpected route.")}]),ndexApp.controller("CitationModalCtrl",["$scope","$modalInstance","citations",function(a,b,c){a.citations=c,a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}}]),ndexApp.controller("userController",["ndexService","ndexUtility","sharedProperties","$scope","$location","$routeParams","$route","$modal","uiMisc","uiGridConstants","ndexNavigation","$rootScope",function(a,b,c,d,e,f,g,h,i,j,k,l){var m=f.identifier;d.userController={};var n=d.userController;n.isLoggedInUser=!!window.currentNdexUser,n.identifier=m,n.loggedInIdentifier=c.getCurrentUserId(),n.displayedUser={},n.groupSearchAdmin=!1,n.groupSearchMember=!1,n.groupSearchResults=[],n.networkQuery={},n.networkSearchResults=[],n.skip=0,n.skipSize=1e4,n.networkTableRowsSelected=0,n.pendingRequests=[],n.sentRequests=[],n.tasks=[],n.userPageNetworksUUIDs=[],n.loggedInUsersNetworkPermissionsMap={},d.enableUpgradePermissionButton=!1,n.networkSetsOwnerOfPage=[],n.networkSets=[];d.$on("$destroy",function(){delete l.user});var o=function(){for(var a=d.networkGridApi.selection.getSelectedRows(),b=0;b<a.length;b++){if(a[b].ownerUUID===n.loggedInIdentifier)return void(d.enableUpgradePermissionButton=!1)}d.enableUpgradePermissionButton=!0};d.networkGridOptions={enableSorting:!0,enableFiltering:!0,showGridFooter:!0,columnVirtualizationThreshold:20,enableColumnMenus:!1,enableRowHeaderSelection:n.isLoggedInUser,enableRowSelection:!1,onRegisterApi:function(a){d.networkGridApi=a,a.core.on.rowsRendered(d,function(){d.networkGridApi.core.handleWindowResize()}),a.selection.on.rowSelectionChanged(d,function(b){if("Set"===b.entity.Status&&b.isSelected){b.isSelected=!1;var c=d.networkGridApi.grid.selection.selectedCount;if(c>0){d.networkGridApi.grid.selection.selectedCount=c-1;k.genericInfoModal("Cannot Select a Set","Cannot select a Set in this release. This feature will be added in future.")}}else{var e=a.selection.getSelectedRows();n.networkTableRowsSelected=e.length,o()}}),a.selection.on.rowSelectionChangedBatch(d,function(b){_.forEach(b,function(a){if("Set"===a.entity.Status&&a.isSelected){a.isSelected=!1;var b=d.networkGridApi.grid.selection.selectedCount;b>0&&(d.networkGridApi.grid.selection.selectedCount=b-1)}});var c=a.selection.getSelectedRows();n.networkTableRowsSelected=c.length,o()})}};var p=function(){d.networkGridOptions.data=[],_.forEach(n.networkSetsOwnerOfPage,function(a){n.addNetworkSetToTable(a)});for(var a=0;a<n.networkSearchResults.length;a++){var b=n.networkSearchResults[a],c=i.getSubNetworkInfo(b),e=c.numberOfSubNetworks,f=c.id,g="success";b.errorMessage?g="failed":b.isValid?b.isCertified&&(g="certified"):g="processing","success"===g&&b.warnings&&b.warnings.length>0&&(g="warning");var h=b.name?b.name:"No name; UUID : "+b.externalId;"failed"===g?h="Invalid Network. UUID: "+b.externalId:e>=1&&(g="collection");var j=d.stripHTML(b.description),k=b.externalId,l=parseInt(b.nodeCount),m=parseInt(b.edgeCount),o=b.owner,p=b.indexLevel,q=b.visibility,r=new Date(b.modificationTime),s=i.getNetworkFormat(f,b),t="Download "+h,u=i.getNetworkReferenceObj(f,b),v=i.getDisease(b),w=i.getTissue(b),x=b.errorMessage,y={Status:g,"Network Name":h," ":t,Format:s,Reference:u,Disease:v,Tissue:w,Nodes:l,Edges:m,Visibility:q,Owner:o,"Last Modified":r,description:j,externalId:k,ownerUUID:b.ownerUUID,name:h,errorMessage:x,subnetworks:e,indexLevel:p};d.networkGridOptions.data.push(y)}},q=function(){d.networkGridApi.grid.options.columnDefs=[{field:"  ",enableFiltering:!1,maxWidth:42,cellTemplate:"views/gridTemplates/networkStatus.html",visible:!0},{field:"Network Name",enableFiltering:!0,cellTemplate:"views/gridTemplates/networkName.html"},{field:" ",enableFiltering:!1,width:40,cellTemplate:"views/gridTemplates/downloadNetwork.html"},{field:"Format",enableFiltering:!0,maxWidth:63,visible:!1,sort:{direction:j.DESC,priority:0},sortingAlgorithm:function(a,b){return a===b?0:"Set"===a?1:"Set"===b?-1:a<b?-1:1}},{field:"Ref.",enableFiltering:!1,maxWidth:45,cellTemplate:"views/gridTemplates/reference.html"},{field:"Disease",enableFiltering:!0,width:82,cellTemplate:"views/gridTemplates/disease.html"},{field:"Tissue",enableFiltering:!0,width:75,cellTemplate:"views/gridTemplates/tissue.html"},{field:"Nodes",enableFiltering:!1,maxWidth:75,sortingAlgorithm:function(a,b){return a===b?0:a<b?-1:1}},{field:"Edges",enableFiltering:!1,maxWidth:75,sortingAlgorithm:function(a,b){return a===b?0:a<b?-1:1}},{field:"Visibility",enableFiltering:!0,width:90,cellTemplate:"views/gridTemplates/visibility.html"},{field:"Owner",enableFiltering:!0,width:80,cellTemplate:"views/gridTemplates/ownedBy.html"},{field:"Last Modified",enableFiltering:!1,maxWidth:120,cellFilter:"date:'short'",sort:{direction:"desc",priority:5}},{field:"description",enableFiltering:!1,visible:!1},{field:"externalId",enableFiltering:!1,visible:!1},{field:"ownerUUID",enableFiltering:!1,visible:!1},{field:"name",enableFiltering:!1,visible:!1},{field:"indexLevel",enableFiltering:!1,visible:!1}];var a=$("#userNetworksGridId");a.height($(window).height()-170),d.networkGridApi.grid.gridHeight=a.height(),p()};d.showNetworkTable=function(){return n.networkSearchResults.length>0||n.networkSetsOwnerOfPage.length>0},d.showSetInfo=function(a){var b=_.find(n.networkSetsOwnerOfPage,{externalId:a}),c=JSON.parse(JSON.stringify(b));i.showSetInfo(c)},d.showNetworkInfo=function(a){if(a||a.externalId){var b=a.externalId,c=_.find(n.networkSearchResults,{externalId:b}),d=JSON.parse(JSON.stringify(c));a.Status&&"collection"===a.Status.toLowerCase()&&(d.collection=!0,d.subnetworks=a.subnetworks),i.showNetworkInfo(d)}},d.stripHTML=function(a){if(!a)return"";var b=toMarkdown(a);return $("<html>"+b+"</html>").text()},n.getUUIDsOfNetworksForSendingPermissionRequests=function(){var a=[],b=d.networkGridApi.selection.getSelectedRows();return 0===b.length?a:(_.forEach(b,function(b){if("set"!==b.Status.toLowerCase()){var c=b.externalId,d=c in n.loggedInUsersNetworkPermissionsMap?n.loggedInUsersNetworkPermissionsMap[c]:"NONE";a.push({networkUUID:c,owner:b.Owner,name:b.name,loggedInUserPermission:d})}}),a)},n.getUserGroupMemberships=function(b){a.getUserGroupMembershipsV2(n.identifier,b,0,1e6,function(b){var c=Object.keys(b);a.getGroupsByUUIDsV2(c).success(function(a){n.groupSearchResults=a}).error(function(){console.log("unable to get groups by UUIDs")})},function(){console.log("unable to get user group memberships")})},n.getAllNetworkSetsOwnedByVisitingUser=function(){if(n.isLoggedInUser){a.getAllNetworkSetsOwnedByUserV2(n.loggedInIdentifier,-1,-1,function(a){n.networkSets=_.orderBy(a,["modificationTime"],["desc"])},function(){console.log("unable to get network sets")})}},n.getAllNetworkSetsOwnedByUser=function(b,c){n.isLoggedInUser&&m!==n.loggedInIdentifier?a.getAllNetworkSetsOwnedByUserV2(n.loggedInIdentifier,-1,-1,function(a){n.networkSets=_.orderBy(a,["modificationTime"],["desc"]),b(n.networkSets[0])},function(a,b){console.log("unable to get network sets"),c(a,b)}):a.getAllNetworkSetsOwnedByUserV2(n.identifier,-1,-1,function(a){n.networkSetsOwnerOfPage=_.orderBy(a,["modificationTime"],["desc"])},function(){console.log("unable to get network sets")})},n.getIDsOfSelectedNetworks=function(){for(var a=[],b=d.networkGridApi.selection.getSelectedRows(),c=0;c<b.length;c++)a.push(b[c].externalId);return a},n.adminCheckBoxClicked=function(){var a=n.groupSearchAdmin?"GROUPADMIN":null;n.groupSearchMember=!1,n.getUserGroupMemberships(a)},n.memberCheckBoxClicked=function(){var a=n.groupSearchMember?"MEMBER":null;n.groupSearchAdmin=!1,n.getUserGroupMemberships(a)},n.submitNetworkSearch=function(){n.networkSearchResults=[],n.networkQuery.accountName=n.displayedUser.userName,a.searchNetworksV2(n.networkQuery,n.skip,n.skipSize,function(a){n.networkSearchResults=a.networks,q()},function(a){console.log(a)})};var r=function(a){if(n.userPageNetworksUUIDs=[],a&&0!==a.length)for(var b=0;b<a.length;b++){var c=a[b].externalId;n.userPageNetworksUUIDs.indexOf(c)<0&&n.userPageNetworksUUIDs.push(c)}};n.getUserShowcaseNetworks=function(b,d){a.getUserShowCaseNetworksV2(n.identifier,function(d){n.networkSearchResults=d,q();var e=c.getCurrentUserId();r(d),n.userPageNetworksUUIDs.length>0&&e?a.getUserNetworkPermissionsV2(e,"READ",0,1e6,!1,function(a){n.loggedInUsersNetworkPermissionsMap=a,b()},function(){console.log("unable to get user network memberships"),b()}):b()},function(){console.log("unable to get user show case networks"),d()})};var s=function(){a.getUserPermissionRequestsV2(n.identifier,"received",function(a){n.pendingRequests=a},function(){console.log("unable to get pending requests")}),a.getUserPermissionRequestsV2(n.identifier,"sent",function(a){n.sentRequests=a},function(){console.log("unable to get sent requests")})};if(n.refreshRequests=function(){s()},n.addNetworkSetToTable=function(a){var b=a.showcased;if(b){var c=a.name,e=d.stripHTML(a.description),f=a.networks.length,g=a.externalId,h=i.getSetReferenceObj(a),j=a.visibility?a.visibility:"PUBLIC",k=n.displayedUser.userName,l=new Date(a.modificationTime),m={Status:"Set","Network Name":c," ":"",Format:"Set",Reference:h,Disease:"",Tissue:"",Edges:"",Visibility:j,Owner:k,"Last Modified":l,Show:b,description:e,externalId:g,ownerUUID:a.ownerId,name:c,errorMessage:"",subnetworks:0,networks:f};d.networkGridOptions.data.push(m)}},d.getNetworkURL=function(a){return"#/network/"+a},d.downloadNetwork=function(a){i.downloadCXNetwork(a.externalId)},d.isOwnerOfNetwork=function(a){return!!n.isLoggedInUser&&c.getCurrentUserId()===a},m===n.loggedInIdentifier||m===d.main.userName)e.path("/myAccount");else{if(n.displayedUser=l.user,n.getAllNetworkSetsOwnedByVisitingUser(),n.isLoggedInUser){n.getUserGroupMemberships(null)}n.getUserShowcaseNetworks(function(){a.getAllNetworkSetsOwnedByUserV2(n.identifier,-1,-1,function(a){n.networkSetsOwnerOfPage=_.orderBy(a,["modificationTime"],["desc"]),_.forEach(n.networkSetsOwnerOfPage,function(a){a.showcased&&n.addNetworkSetToTable(a)})},function(){console.log("unable to get network sets")})},function(){console.log("unable to get showcased networks for user")})}$(window).resize(function(){var a=$("#userNetworksGridId");a.height($(window).height()-170),d.networkGridApi.grid.gridHeight=a.height(),d.networkGridApi.core.refresh()})}]),ndexApp.controller("uploadController",["FileUploader","ndexService","ndexConfigs","ndexUtility","sharedProperties","$scope","$routeParams","$modal","$location","ndexNavigation","uiMisc",function(a,b,c,d,e,f,g,h,i,j,k){f.tasks=null,f.taskSkipBlocks=0,f.taskBlockSize=100,f.uploadController={},f.diskSpaceInfo={};var l=f.uploadController;l.displayedUser={};var m=e.getCurrentUserId(),n=window.ndexSettings;l.uploadSizeLimit=n.uploadSizeLimit,l.hasSizeLimit=!1,l.uploadSizeLimit&&"none"!=l.uploadSizeLimit&&(l.hasSizeLimit=!0),l.fileSizeError=!1,l.fileExtensionError=!1,f.removeItemFromQueue=function(a){l.fileExtensionError=!1,l.fileSizeError=!1,a.remove()},f.removeAllFromQueue=function(a){l.fileExtensionError=!1,l.fileSizeError=!1,a.clearQueue()},f.refreshTasks=function(){b.getUserTasksV2("ALL",f.taskSkipBlocks,f.taskBlockSize,function(a){f.tasks=[],$.each(a,function(a,b){"PROCESS_UPLOADED_NETWORK"==b.taskType&&f.tasks.push(b)})},function(a){})},f.deleteAllTasks=function(){if(void 0!=f.tasks){for(var a=f.tasks.length-1;a>=0;a--){var c=f.tasks[a];b.deleteTaskV2(c.externalId,function(){})}f.tasks=[]}},f.deleteTask=function(a){b.deleteTaskV2(a,function(){f.refreshTasks()})};var o=f.uploader=new a({url:b.getNetworkUploadURI(),alias:"CXNetworkStream",headers:{Authorization:d.getAuthHeaderValue(),"NDEx-application":window.navigator.ndexServerVersion}});o.removeAfterUpload=!1,o.queueSize=0,o.filters.push({name:"fileExtensionFilter",fn:function(a,b){var c=["cx"],d=a.name.split(".").pop().toLowerCase();return-1!=$.inArray(d,c)}}),o.filters.push({name:"fileSizeFilter",fn:function(a,b){if(!l.hasSizeLimit)return!0;this.queueSize=0;for(var c=0;c<this.queue.length;c++)this.queueSize+=this.queue[c].file.size;return this.queueSize+a.size<1024*l.uploadSizeLimit*1024}}),o.onWhenAddingFileFailed=function(a,b,c){"fileExtensionFilter"===b.name&&(l.fileExtensionError=!0),"fileSizeFilter"===b.name&&(l.fileSizeError=!0)},o.onAfterAddingFile=function(a){l.fileExtensionError=!1,l.fileSizeError=!1},o.onAfterAddingAll=function(a){l.fileExtensionError=!1,l.fileSizeError=!1},o.onBeforeUploadItem=function(a){a.formData.push({filename:a.file.name})},o.onProgressItem=function(a,b){},o.onProgressAll=function(a){},o.onSuccessItem=function(a,b,c,d){l.fileExtensionError=!1,l.fileSizeError=!1},o.onErrorItem=function(a,b,c,d){var e="<strong>"+a.file.name+"</strong> wasn't uploaded to your account.";b.message&&(e=e+"<br><br>"+b.message),j.genericInfoModal("Unable to Upload Network",e)},o.onCancelItem=function(a,b,c,d){l.fileExtensionError=!1,l.fileSizeError=!1},o.onCompleteItem=function(a,b,c,d){l.fileExtensionError=!1,l.fileSizeError=!1,f.getUserAndDiskInfo()},o.onCompleteAll=function(){l.fileExtensionError=!1,l.fileSizeError=!1,f.refreshTasks()},f.getUserAndDiskInfo=function(){b.getUserByUUIDV2(m).success(function(a){l.displayedUser=a,f.diskSpaceInfo=k.showAvailableDiskSpace(a)})},f.getUserAndDiskInfo(),f.refreshTasks()}]),ndexApp.controller("groupController",["ndexService","ndexUtility","ndexNavigation","sharedProperties","$scope","$location","$routeParams","$modal","$route","uiMisc",function(a,b,c,d,e,f,g,h,i,j){var k=g.identifier;e.groupController={};var l=e.groupController;l.isAdmin=!1,l.isMember=!1,l.identifier=k,l.userSearchAdmin=!1,l.userSearchMember=!1,l.userSearchResults=[],l.originalUserSearchResults=[],l.adminsCount=0,l.networkSearchResults=[],l.networkQuery={},l.errors=[],l.isLoggedInUser=null!=window.currentNdexUser;l.setAndDisplayCurrentNetwork=function(a){f.path("/network/"+a)},e.getNumberOfNetworks=function(){return 0===l.networkSearchResults.length?"":" ("+l.networkSearchResults.length+")"},e.getNumberOfMembers=function(){return 0===l.userSearchResults.length?"":" ("+l.userSearchResults.length+")"};var m=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c].memberUUID;b.push(d)}return b},n=function(a){if(l.adminsUUIDs=[],a)for(var b in a){var c=a[b];"GROUPADMIN"==c.permissions.toUpperCase()&&(l.adminsCount=l.adminsCount+1)}};l.getMembersOfGroup=function(b){a.getMembersOfGroupV2(l.identifier,b,0,1e6,function(b){n(b);var c=m(b);a.getUsersByUUIDsV2(c).success(function(a){l.userSearchResults=a,l.originalUserSearchResults=a}).error(function(a){console.log("unable to get users by UUIDs")})},function(a,b){console.log("unable to get group user memberships")})};var o=function(a){for(var b=!1,c=0;c<l.originalUserSearchResults.length;c++)if(a.externalId==l.originalUserSearchResults[c].externalId){b=!0;break}return b};l.searchMembersFromUserInput=function(){var b=l.memberSearchString;a.searchUsersV2(b,0,1e6,function(a){if(l.userSearchResults=[],a&&a.resultList&&a.resultList.length>0)for(var b=0;b<a.resultList.length;b++){var c=a.resultList[b];o(c)&&l.userSearchResults.push(c)}},function(a){console.log("unable to search users")})},l.adminCheckBoxClicked=function(){var a=l.userSearchAdmin?"GROUPADMIN":null;l.userSearchMember=!1,l.getMembersOfGroup(a)},l.memberCheckBoxClicked=function(){var a=l.userSearchMember?"MEMBER":null;l.userSearchAdmin=!1,l.getMembersOfGroup(a)},l.getNetworksOfGroup=function(){a.getNetworkPermissionsOfGroupV2(l.identifier,"READ",0,1e3,function(b){var c=Object.keys(b);a.getNetworkSummariesByUUIDsV2(c,null,function(a){l.networkSearchResults=a,p()},function(a){a&&r(a)})},function(a){a&&r(a)})},e.networkGridOptions={enableSorting:!0,enableFiltering:!0,showGridFooter:!0,enableSelectAll:!1,enableRowSelection:!1,multiSelect:!1,enableRowHeaderSelection:!1,columnVirtualizationThreshold:20,enableColumnMenus:!1,onRegisterApi:function(a){e.networkGridApi=a,a.selection.on.rowSelectionChanged(e,function(b){var c=a.selection.getSelectedRows();l.atLeastOneSelected=c.length>0}),a.selection.on.rowSelectionChangedBatch(e,function(b){var c=a.selection.getSelectedRows();l.atLeastOneSelected=c.length>0})}};var p=function(){var a=[{field:"  ",enableFiltering:!1,maxWidth:42,cellTemplate:"views/gridTemplates/networkStatus.html",visible:!0},{field:"Network Name",enableFiltering:!0,cellTemplate:"views/gridTemplates/networkName.html"},{field:" ",enableFiltering:!1,width:40,cellTemplate:"views/gridTemplates/downloadNetwork.html"},{field:"Ref.",enableFiltering:!1,maxWidth:45,cellTemplate:"views/gridTemplates/reference.html"},{field:"Disease",enableFiltering:!0,width:82,cellTemplate:"views/gridTemplates/disease.html"},{field:"Tissue",enableFiltering:!0,width:75,cellTemplate:"views/gridTemplates/tissue.html"},{field:"Nodes",enableFiltering:!1,maxWidth:75,sortingAlgorithm:function(a,b){return a===b?0:a<b?-1:1}},{field:"Edges",enableFiltering:!1,maxWidth:75,sortingAlgorithm:function(a,b){return a===b?0:a<b?-1:1}},{field:"Visibility",enableFiltering:!0,width:90,cellTemplate:"views/gridTemplates/visibility.html"},{field:"Owner",enableFiltering:!0,width:80,cellTemplate:"views/gridTemplates/ownedBy.html"},{field:"Last Modified",enableFiltering:!1,maxWidth:120,cellFilter:"date:'short'"},{field:"indexLevel",enableFiltering:!1,visible:!1}];e.networkGridApi.grid.options.columnDefs=a,$("#userGroupsGridId").height($(window).height()-285),e.networkGridApi.grid.gridHeight=$("#userGroupsGridId").height(),q()};e.showNetworkInfo=function(a){if(a||a.externalId){var b=a.externalId,c=_.find(l.networkSearchResults,{externalId:b}),d=JSON.parse(JSON.stringify(c));a.Status&&"collection"==a.Status.toLowerCase()&&(d.collection=!0,d.subnetworks=a.subnetworks),j.showNetworkInfo(d)}},e.stripHTML=function(a){if(!a)return"";var b=toMarkdown(a);return $("<html>"+b+"</html>").text()};var q=function(){e.networkGridOptions.data=[];for(var a=0;a<l.networkSearchResults.length;a++){var b=l.networkSearchResults[a],c=j.getSubNetworkInfo(b),d=c.numberOfSubNetworks,f=c.id,g="success";b.errorMessage?g="failed":b.isValid?b.isCertified&&(g="certified"):g="processing","success"==g&&b.warnings&&b.warnings.length>0&&(g="warning");var h=b.name?b.name:"No name; UUID : "+b.externalId;"failed"==g?h="Invalid Network. UUID: "+b.externalId:d>=1&&(g="collection");var i=e.stripHTML(b.description),k=b.externalId,m=parseInt(b.nodeCount),n=parseInt(b.edgeCount),o=b.owner,p=b.indexLevel,q=b.visibility,r=new Date(b.modificationTime),s="Download "+h,t=j.getNetworkReferenceObj(f,b),u=j.getDisease(b),v=j.getTissue(b),w=b.errorMessage,x={Status:g,"Network Name":h," ":s,Reference:t,Disease:u,Tissue:v,Nodes:m,Edges:n,Visibility:q,Owner:o,"Last Modified":r,description:i,externalId:k,ownerUUID:b.ownerUUID,name:h,errorMessage:w,subnetworks:d,indexLevel:p};e.networkGridOptions.data.push(x)}},r=function(a){var b=a&&a.message?a.message:"Unknown error; Server returned no error information.";l.errors.push(b)},s=function(){if(l.isLoggedInUser){var b=d.getCurrentUserId(),c=l.displayedGroup.externalId;a.getUserMembershipInGroupV2(b,c,function(a){if(a){var b=a[c];"GROUPADMIN"==b&&(l.isAdmin=!0),"MEMBER"==b&&(l.isMember=!0)}},function(a){r(a)})}};e.showWarningsOrErrors=function(a){(a||a.externalId)&&j.showNetworkWarningsOrErrors(a,l.networkSearchResults)},e.getNetworkURL=function(a){return"#/network/"+a},e.downloadNetwork=function(a){j.downloadCXNetwork(a.externalId)},e.isOwnerOfNetwork=function(a){return!!l.isLoggedInUser&&d.getCurrentUserId()==a},a.getGroupV2(l.identifier,function(a){l.displayedGroup=a,s(),l.getNetworksOfGroup();l.getMembersOfGroup(null)}),$(window).resize(function(){$("#userGroupsGridId").height($(window).height()-285),e.networkGridApi.grid.gridHeight=$("#userGroupsGridId").height(),e.networkGridApi.core.refresh()})}]),ndexApp.controller("networkSetController",["ndexService","ndexUtility","ndexNavigation","sharedProperties","$scope","$location","$routeParams","uiMisc",function(a,b,c,d,e,f,g,h){var i=g.identifier;e.networkSetController={};var j=e.networkSetController;j.identifier=i,j.accesskey=g.accesskey,j.networkSearchResults=[],j.errors=[],j.networkTableRowsSelected=0,j.isLoggedInUser=null!=window.currentNdexUser,j.isSetOwner=!1,j.displayedSet={},j.networkSets=[],j.networkSetShareableURL=null,j.networkSetShareableURLLabel=null,j.networkSetOwnerId=null;$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip()}),e.changeTitle=function(a){setTooltip("Copy network set share URL to clipboard")},e.showOriginalTitle=function(){e.copyNetworkSetURLTitle="Copy network set share URL to clipboard"},e.showCopiedTitle=function(){e.copyNetworkSetURLTitle="Copied"},j.getNetworksOfNetworkSet=function(){j.isLoggedInUser&&j.getAllNetworkSetsOwnedByUser(function(a){},function(a,b){}),a.getNetworkSetV2(j.identifier,j.accesskey,function(b){var c=b.networks;j.networkSetOwnerId=b.ownerId,j.displayedSet.name=b.name;var e=b.description?b.description.trim():"";j.displayedSet.description=e?b.description:null,j.displayedSet.creationTime=b.creationTime,j.displayedSet.modificationTime=b.modificationTime,j.displayedSet.networks=b.networks.length,b.properties&&b.properties.reference&&(j.displayedSet.properties={reference:b.properties.reference}),j.isLoggedInUser&&b.ownerId==d.getCurrentUserId()&&(j.isSetOwner=!0,j.getStatusOfShareableURL()),a.getNetworkSummariesByUUIDsV2(c,j.accesskey,function(a){j.networkSearchResults=a,k()},function(a){a&&m(a)})},function(a){a&&m(a)})},e.networkGridOptions={enableSorting:!0,enableFiltering:!0,showGridFooter:!0,columnVirtualizationThreshold:20,enableColumnMenus:!1,onRegisterApi:function(a){e.networkGridApi=a,a.selection.on.rowSelectionChanged(e,function(b){var c=a.selection.getSelectedRows();j.networkTableRowsSelected=c.length}),a.selection.on.rowSelectionChangedBatch(e,function(b){var c=a.selection.getSelectedRows();j.networkTableRowsSelected=c.length})}};var k=function(){var a=[{field:"Status",enableFiltering:!1,maxWidth:60,cellTemplate:"views/gridTemplates/networkStatus.html",visible:!1},{field:"Network Name",enableFiltering:!0,cellTemplate:"views/gridTemplates/networkName.html"},{field:" ",enableFiltering:!1,width:40,cellTemplate:"views/gridTemplates/downloadNetwork.html"},{field:"Ref.",enableFiltering:!1,maxWidth:45,cellTemplate:"views/gridTemplates/reference.html"},{field:"Disease",enableFiltering:!0,width:82,cellTemplate:"views/gridTemplates/disease.html"},{field:"Tissue",enableFiltering:!0,width:75,cellTemplate:"views/gridTemplates/tissue.html"},{field:"Nodes",enableFiltering:!1,maxWidth:75,sortingAlgorithm:function(a,b){return a===b?0:a<b?-1:1}},{field:"Edges",enableFiltering:!1,maxWidth:75,sortingAlgorithm:function(a,b){return a===b?0:a<b?-1:1}},{field:"Visibility",enableFiltering:!0,width:90,cellTemplate:"views/gridTemplates/visibility.html"},{field:"Owner",enableFiltering:!0,width:80,cellTemplate:"views/gridTemplates/ownedBy.html"},{field:"Last Modified",enableFiltering:!1,maxWidth:120,cellFilter:"date:'short'"},{field:"indexLevel",enableFiltering:!1,visible:!1}];e.networkGridApi.grid.options.columnDefs=a,$("#myNetworksOfSetGridId").height($(window).height()-170),e.networkGridApi.grid.gridHeight=$("#myNetworksOfSetGridId").height(),l()};e.stripHTML=function(a){if(!a)return"";var b=toMarkdown(a)
;return $("<html>"+b+"</html>").text()};var l=function(){e.networkGridOptions.data=[];for(var a=0;a<j.networkSearchResults.length;a++){var b=j.networkSearchResults[a],c=h.getSubNetworkInfo(b),d=c.numberOfSubNetworks,f=c.id,g="success";b.errorMessage?g="failed":b.isValid?b.isCertified&&(g="certified"):g="processing","success"==g&&b.warnings&&b.warnings.length>0&&(g="warning");var i=b.name?b.name:"No name; UUID : "+b.externalId;"failed"==g?i="Invalid Network. UUID: "+b.externalId:d>=1&&(g="collection");var k=e.stripHTML(b.description),l=b.externalId,m=parseInt(b.nodeCount),n=parseInt(b.edgeCount),o=b.owner,p=b.indexLevel,q=b.visibility,r=new Date(b.modificationTime),s="Download "+i,t=h.getNetworkReferenceObj(f,b),u=h.getDisease(b),v=h.getTissue(b),w=b.errorMessage,x={Status:g,"Network Name":i," ":s,Reference:t,Disease:u,Tissue:v,Nodes:m,Edges:n,Visibility:q,Owner:o,"Last Modified":r,description:k,externalId:l,ownerUUID:b.ownerUUID,name:i,errorMessage:w,subnetworks:d,indexLevel:p};e.networkGridOptions.data.push(x)}},m=function(a){var b=a&&a.message?a.message:"Unknown error; Server returned no error information.";j.errors.push(b)},n=function(){var b=[],c=e.networkGridApi.selection.getSelectedRows();_.forEach(c,function(a){b.push(a.externalId)}),0!=b.length&&a.deleteNetworksFromNetworkSetV2(j.identifier,b,function(a){e.networkGridApi.grid.selection.selectedCount=0;for(var c=j.networkSearchResults.length-1;c>=0;c--){var d=j.networkSearchResults[c].externalId;-1!=b.indexOf(d)&&j.networkSearchResults.splice(c,1)}l(),j.displayedSet.networks=j.networkSearchResults.length,j.networkTableRowsSelected=0},function(a){a&&m(a)})};j.confirmRemoveSelectedNetworksFromSet=function(){var a=j.networkTableRowsSelected;if(a>1)var b="Remove Selected Networks",d="The selected "+a+" networks will be removed from this Set. Are you sure you want to proceed?";else var b="Remove Selected Network",d="The selected  network will be removed from this Set. Are you sure you want to proceed?";c.openConfirmationModal(b,d,"Remove","Cancel",!0,function(){e.isProcessing=!0,n(),e.isProcessing=!1},function(){e.isProcessing=!1})},j.getAllNetworkSetsOwnedByUser=function(b,c){var e=d.getCurrentUserId();a.getAllNetworkSetsOwnedByUserV2(e,void 0,void 0,function(a){j.networkSets=_.orderBy(a,["modificationTime"],["desc"]),b(j.networkSets[0])},function(a,b){j.networkSets=[],console.log("unable to get network sets"),c(a,b)})},j.getIDsOfSelectedNetworks=function(){var a=[],b=e.networkGridApi.selection.getSelectedRows();return _.forEach(b,function(b){"set"!=b.Status.toLowerCase()&&a.push(b.externalId)}),a},j.deleteNetworkSet=function(b){var d=j.networkSearchResults.length,g="This network set will be deleted from NDEx. ";1==d?g+="The network in this set will not be deleted. ":d>1&&(g=g+"The "+d+" networks in this set will not be deleted. "),g+="Are you sure you want to proceed?";c.openConfirmationModal("Delete This Network Set",g,"Confirm","Cancel",!0,function(){e.isProcessing=!0,a.deleteNetworkSetV2(b,function(a){e.isProcessing=!1,f.path("/myAccount")},function(a){console.log("unable to delete network set"),e.isProcessing=!1,f.path("/myAccount")})},function(){e.isProcessing=!1})},e.showWarningsOrErrors=function(a){(a||a.externalId)&&h.showNetworkWarningsOrErrors(a,j.networkSearchResults)},e.getNetworkURL=function(a){var b="#/network/"+a;return j.accesskey&&(b=b+"?accesskey="+j.accesskey),b},e.downloadNetwork=function(a){h.downloadCXNetwork(a.externalId)},e.isOwnerOfNetwork=function(a){return!!j.isLoggedInUser&&d.getCurrentUserId()==a},e.failedNetworkWarning=function(a){var b=a.name,d=a.errorMessage,e=a.Status,f=(a.externalId,"<strong>Name: </strong>"+b+"<br><strong>Status: </strong>"+e+"<br><strong>Error Message: </strong>"+d);c.genericInfoModal("This Network is Invalid",f)},j.switchShareableURL=function(){var b=j.networkSetShareableURL?"disable":"enable";a.disableOrEnableAccessKeyOnNetworkSetV2(j.identifier,b,function(a,c,d,e,f){"enable"==b?(j.networkSetShareableURLLabel="Disable Share URL",j.networkSetShareableURL=h.buildShareableNetworkSetURL(a.accessKey,j.identifier)):(j.networkSetShareableURLLabel="Enable Share URL",j.networkSetShareableURL=null)},function(a){var d="enable"==b?" Enable ":" Disable ";title="Unable to "+d+"URL",message="Unable to "+d.toLowerCase()+" URL on network set <strong>"+j.displayedSet.name+"</strong>.",a.message&&(message=message+"<br><br>"+a.message),c.genericInfoModal(title,message)})},j.getStatusOfShareableURL=function(){a.getAccessKeyOfNetworkSetV2(j.identifier,function(a){a&&a.accessKey?(j.networkSetShareableURL=h.buildShareableNetworkSetURL(a.accessKey,j.identifier),j.networkSetShareableURLLabel="Disable Share URL"):(j.networkSetShareableURL=null,j.networkSetShareableURLLabel="Enable Share URL")},function(a){title="Unable to Get Status of URL",message="Unable to get status of share URL on network set <strong>"+j.displayedSet.name+"</strong>.",a.message&&(message=message+"<br><br>"+a.message),j.networkSetShareableURLLabel=null,c.genericInfoModal(title,message)})},j.getNetworksOfNetworkSet(),$(window).resize(function(){$("#myNetworksOfSetGridId").height($(window).height()-170),e.networkGridApi.grid.gridHeight=$("#myNetworksOfSetGridId").height(),e.networkGridApi.core.refresh()})}]),ndexApp.controller("editNetworkPropertiesFixedFormController",["$scope","$location","$routeParams","$route","ndexService","$modal","sharedProperties","$timeout","uiMisc","ndexNavigation","ndexUtility","userSessionTablesSettings",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=c.identifier,o="null"===c.subNetworkId.toLocaleLowerCase()?null:c.subNetworkId;a.editor={};var p=a.editor;p.networkExternalId=n,p.propertyValuePairs=[],p.errors=[],p.isAdmin=!1,p.canEdit=!1,p.canRead=!1,p.showcased={state:!0},p.fullIndexed={state:!1},p.subNetworkId=o,p.visibilityIndex="PRIVATE_NOT_INDEXED",a.originalIndexLevel="NONE",a.originalShowCased=!1,a.fullIndexToolTip='Marking this checkbox will force the indexing of "name", "represent" and "alias" for each node of the network. This feature increases the network file size/complexity and should be used sparingly.',a.fillInNameDescriptionVersionFirst="Changing network Visibility requires Name, Description and Version fields to be filled in.",a.referenceToolTip="The Reference field should only contain info of the publication where this network is described. Please don't list more than 1 publication here. Click for more info about adding a reference to your network.",a.rightsTooltip="Click for more information about specific licenses.";const q=["sourceformat","name","description","version","reference","@context"];a.$watch("editor.visibilityIndex",function(){"PUBLIC"===p.visibilityIndex?(a.mainProperty.visibility="PUBLIC",a.mainProperty.indexLevel=p.fullIndexed.state?"ALL":"META"):"PUBLIC_NOT_INDEXED"===p.visibilityIndex?(a.mainProperty.visibility="PUBLIC_NOT_INDEXED",a.mainProperty.indexLevel="NONE"):"PRIVATE"===p.visibilityIndex?(a.mainProperty.visibility="PRIVATE",a.mainProperty.indexLevel=p.fullIndexed.state?"ALL":"META"):"PRIVATE_NOT_INDEXED"===p.visibilityIndex&&(a.mainProperty.visibility="PRIVATE_NOT_INDEXED",a.mainProperty.indexLevel="NONE")}),a.$watch("editor.fullIndexed.state",function(){p.fullIndexed.state?a.mainProperty.indexLevel="ALL":"PUBLIC"===p.visibilityIndex?(a.mainProperty.visibility="PUBLIC",a.mainProperty.indexLevel="META"):"PUBLIC_NOT_INDEXED"===p.visibilityIndex?(a.mainProperty.visibility="PUBLIC_NOT_INDEXED",a.mainProperty.indexLevel="NONE"):"PRIVATE"===p.visibilityIndex?(a.mainProperty.visibility="PRIVATE",a.mainProperty.indexLevel="META"):"PRIVATE_NOT_INDEXED"===p.visibilityIndex&&(a.mainProperty.visibility="PRIVATE_NOT_INDEXED",a.mainProperty.indexLevel="NONE")}),a.checkNameDescriptionVersion=function(){return a.mainProperty.description.length>0&&a.mainProperty.name.length>0&&a.mainProperty.version.length>0},a.doNothingOnMouseClick=function(){event.stopPropagation()},p.reference=null,p.disableSaveChangesButton=!1,p.namespaces=[],p.viewfilter={state:"MAIN"},p.showNameSpaces=!1,p.propertyValuePairs=[],p.propertyValuePairsIndex={},p.hiddenValuePairs=[],p.propertyTemplate={author:{predicateString:"author",value:"",isReadOnlyLabel:!1,dataType:"string",subNetworkId:o},disease:{predicateString:"disease",value:"",isReadOnlyLabel:!1,dataType:"string",subNetworkId:o},labels:{predicateString:"labels",value:"",isReadOnlyLabel:!1,dataType:"string",subNetworkId:o},methods:{predicateString:"methods",value:"",isReadOnlyLabel:!1,dataType:"string",subNetworkId:o},organism:{predicateString:"organism",value:"",isReadOnlyLabel:!1,dataType:"string",subNetworkId:o},networkType:{predicateString:"networkType",value:"",isReadOnlyLabel:!1,dataType:"string",subNetworkId:o},rights:{predicateString:"rights",value:"",isReadOnlyLabel:!1,dataType:"string",subNetworkId:o},rightsHolder:{predicateString:"rightsHolder",value:"",isReadOnlyLabel:!1,dataType:"string",subNetworkId:o},tissue:{predicateString:"tissue",value:"",isReadOnlyLabel:!1,dataType:"string",subNetworkId:o}},p.rights=["","Attribution 4.0 International (CC BY 4.0)","Attribution-NoDerivatives 4.0 International (CC BY-ND 4.0)","Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)","Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)","Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)","Attribution-NonCommercial 4.0 International (CC BY-NC 4.0)","Waiver-No rights reserved (CC0)","Apache License 2.0 (Apache-2.0)","3-clause BSD license (BSD-3-Clause)","2-clause BSD license (BSD-2-Clause)","GNU General Public License (GPL)","GNU Lesser General Public License (LGPL)","MIT license (MIT)","Mozilla Public License 2.0 (MPL-2.0)","Common Development and Distribution License (CDDL-1.0)","Eclipse Public License (EPL-1.0)","Other"],p.rightsCustom="",p.rightsOther="",p.editCustomRights=!1,p.isCertified=!1,p.scoringLookup={author:10,disease:10,labels:5,methods:10,organism:10,networkType:10,rights:5,rightsHolder:5,tissue:5,name:10,description:10,reference:10,version:10},p.score=0,a.score=0,a.scoreClass="progress-bar-danger",a.mainProperty={name:"",description:"",reference:"",version:"",visibility:"PRIVATE",indexLevel:"NONE",readonly:!1},p.doiRequired={name:a.mainProperty.name,description:a.mainProperty.decription,author:p.propertyTemplate.author,rights:p.propertyTemplate.rights,rightsHolder:p.propertyTemplate.rightsHolder,reference:a.mainProperty.reference};var r=k.getUserCredentials(),s=r&&r.userName?r.userName:null;p.doiInfo={user:{username:s,email:""},visibility:"PUBLIC",pubDate:""},window.currentNdexUser&&window.currentNdexUser.emailAddress&&(p.doiInfo.user.email=window.currentNdexUser.emailAddress),a.updatecalendar=function(){p.doiInfo.pubDate=$("#doiDTPicker").val()},a.today=function(){a.dt=new Date},a.today(),a.clear=function(){a.dt=null},a.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],a.format=a.formats[0],a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},p.buildAttributeDictionary=function(){for(var a,b={},c=0;c<p.propertyValuePairs.length;c++)a=p.propertyValuePairs[c].predicateString,"custom..."===a&&(a=p.propertyValuePairs[c].predicateStringCustom),a&&(b[a]=a in b?b[a]+1:1);return b},p.changed=function(b,c,d,e){var f=p.buildAttributeDictionary();b===p.propertyValuePairs.length-1&&c.trim().length>0&&(e&&"del"===e.toLowerCase()||p.propertyValuePairs.push({predicateString:"",value:"",isReadOnlyLabel:!1,dataType:"string",subNetworkId:o})),"del"===e&&c&&-1===a.namesForSolrIndexing.indexOf(c)&&a.permaNamesForSolrIndexing.indexOf(c)>-1&&a.namesForSolrIndexing.push(c),e&&"del"===e.toLowerCase()||(c?"reference"===c.toLowerCase()?(d.labelError="This interface handles 'Reference' specially. If you need to edit Reference property of the current network, please select Edit Network Profile button from the Network page.",p.disableSaveChangesButton=!0):"sourceformat"===c.toLowerCase()?(d.labelError="sourceFormat is reserved for internal use by NDEx and cannot be used as predicate.",p.disableSaveChangesButton=!0):q.indexOf(c.toLowerCase())>-1?(d.labelError=c+" is a reserved keyword. Please enter a different value.",p.disableSaveChangesButton=!0):d.predicateStringCustom&&"custom..."===d.predicateString?(p.propertyValuePairs[b].labelValue=d.predicateStringCustom?d.predicateStringCustom:"",delete d.labelError):(p.propertyValuePairs[b].labelValue=d.predicateString,delete d.labelError):d&&(d.labelError="Missing attribute.",p.disableSaveChangesButton=!0)),p.disableSaveChangesButton=p.checkIfFormIsValid(f)},p.valueChanged=function(a,b){b.value&&b.predicateString?(p.disableSaveChangesButton=!0,b.valueError="Please enter a Value."):delete b.valueError},p.updateScore=function(){a.score=0;for(var b=0;b<p.propertyValuePairs.length;b++){var c=p.propertyValuePairs[b],d=c.predicateString;p.scoringLookup[d]&&c.value&&c.value.length>0&&(a.score+=p.scoringLookup[d])}for(var e in a.mainProperty)p.scoringLookup[e]&&a.mainProperty[e]&&a.mainProperty[e].length>0&&(a.score+=p.scoringLookup[e]);a.score>=25&&a.score<50?a.scoreClass="progress-bar-warning":a.score>=50&&a.score<75?a.scoreClass="":a.score>=75?a.scoreClass="progress-bar-success":a.scoreClass="progress-bar-danger"},p.checkIfFormIsValid=function(a){for(var b=!1,c=0;c<p.propertyValuePairs.length;c++){var d=p.propertyValuePairs[c],e=d.labelValue,f=d.predicateString;"custom..."===f&&(f=d.predicateStringCustom?d.predicateStringCustom:""),"reference"===f.toLowerCase()?(d.labelError="This interface handles 'Reference' specially. If you need to edit Reference property of the current network, please select Edit Network Profile button from the Network page.",b=!0):"sourceformat"===f.toLowerCase()?(d.labelError="sourceFormat is reserved for internal use by NDEx and cannot be used as predicate.",b=!0):q.indexOf(f.toLowerCase())>-1?(d.labelError=f+" is a reserved keyword. Please enter a different value.",b=!0):e in a&&a[e]>1?(p.propertyValuePairs[c].labelError="This attribute entered "+a.labelValue+" times.",b=!0):d.labelError&&delete d.labelError}return 1===p.propertyValuePairs.length&&(void 0!==p.propertyValuePairs[0].predicateString&&p.propertyValuePairs[0].predicateString||(b=!1)),b},p.checkIfFormIsValidOnLoad=function(){for(var b=p.buildAttributeDictionary(),c=!1,d=0;d<p.propertyValuePairs.length;d++){var e=p.propertyValuePairs[d],f=e.labelValue;if(void 0!==e.predicateString&&e.predicateString||p.propertyValuePairs.length-1===d||(e.labelError="Missing attribute.",c=!0),p.updateScore(),f in b&&b[f]>1){c=!0;for(var g=d;g<p.propertyValuePairs.length;g++){p.propertyValuePairs[g].labelValue===f&&(p.propertyValuePairs[g].labelError="This attribute entered "+b[f]+" times.")}}}return a.score>=25&&a.score<50?a.scoreClass="progress-bar-warning":a.score>=50&&a.score<75?a.scoreClass="":a.score>=75?a.scoreClass="progress-bar-success":a.scoreClass="progress-bar-danger",0!==p.propertyValuePairs.length&&(1!==p.propertyValuePairs.length||void 0!==p.propertyValuePairs[0].predicateString&&p.propertyValuePairs[0].predicateString)||(c=!0),c},a.namesForSolrIndexing=["custom..."],a.permaNamesForSolrIndexing=["author","disease","labels","methods","organism","networkType","rights","rightsHolder","tissue"],a.reservedNames=["name","description","version","reference","ndex:sourceformat","sourceformat","@context"],a.namesForCustom=["author","disease","labels","methods","organism","networkType","rights","rightsHolder","tissue"],a.namesForSolrIndexingDictionary={},a.namesForSolrIndexing.forEach(function(b){a.namesForSolrIndexingDictionary[b]=""}),a.customItem=function(a){return"custom..."===a.predicateString},a.updateFieldFilters=function(a){p.viewfilter.state=a},p.saveAndSubmitDOI=function(){if(p.errors.length<1)if(p.checkDOIRequirements()){var b="";b=p.isCertified?"Requesting a DOI for this network will have the following effects:<br /><br /><ul><li>The network will be <span style='font-weight: bold;'>&quot;pre-Certified&quot;</span> and locked.</li><li>You will have a one-time chance to add/modify the reference info later</li><li>The current network's visibility will be preserved</li></ul><span style='font-weight: bold;'>Please make sure all information is correct before proceeding</span>":"Requesting a DOI for this network will have the following effects:<br /><br /><ul><li>The network will be <span style='font-weight: bold;'>&quot;Certified&quot;</span> and permanently locked.</li><li>No further changes will be possible</li><li>The network's visibility will be set to PUBLIC</li><li>The network will be indexed for search</li></ul><span style='font-weight: bold;'>Please make sure all information is correct before proceeding</span>";j.openConfirmationModal("Submit DOI Request",b,"Submit DOI Request","Go Back",!0,function(){var b={name:a.mainProperty.name,description:a.mainProperty.description,version:a.mainProperty.version,author:p.getPropertyValue("author"),rights:p.getPropertyValue("rights"),rightsHolder:p.getPropertyValue("rightsHolder"),reference:a.mainProperty.reference,contactEmail:p.doiInfo.user.email,pubDate:$("#doiDTPicker").val(),isCertified:!p.isCertified};a.mainProperty.readonly?e.setNetworkSystemPropertiesV2(p.networkExternalId,"readOnly",!1,function(){p.save(!0,b)},function(){console.log("unable to unset the Read Only flag on the network")}):p.save(!0,b)},function(){})}else p.errors.push("Missing value")};var t=function(){b.path("/network/"+p.networkExternalId)};p.save=function(b,c){if(p.checkPublicRequirements()){if(a.isProcessing)return;a.isProcessing=!0;for(var d=p.propertyValuePairs.length,f=0;f<d;)p.propertyValuePairs[f].predicateString&&-1!==a.reservedNames.indexOf(p.propertyValuePairs[f].predicateString.toLowerCase())||!p.propertyValuePairs[f].value?(p.propertyValuePairs.splice(f,1),d-=1):f+=1;d=p.propertyValuePairs.length;for(var g=0;g<d;g++){var h=p.propertyValuePairs[g];"custom..."===h.predicateString&&(h.predicateString=h.predicateStringCustom),"rights"===h.predicateString&&"Other"===h.value&&(void 0!==h.rightsOtherURL&&h.rightsOtherURL.length>0?(h.rightsOtherURL.toLowerCase().indexOf("http://")<0&&h.rightsOtherURL.toLowerCase().indexOf("https://")<0&&(h.rightsOtherURL="http://"+h.rightsOtherURL),h.value=h.rightsOtherURL+"|"+h.rightsOther):h.value=h.rightsOther),delete h.isReadOnlyLabel,delete h.labelValue,delete h.labelValue}var i=p.propertyValuePairs.concat(p.hiddenValuePairs),k=!1;for(f=0;f<i.length;f++)if("reference"===i[f].predicateString.toLowerCase()){i[f].value=a.mainProperty.reference,k=!0;break}k||(p.subNetworkId&&a.mainProperty.reference&&a.mainProperty.reference.length>0?i.push({dataType:"string",predicateString:"reference",subNetworkId:parseInt(p.subNetworkId),value:a.mainProperty.reference}):a.mainProperty.reference&&a.mainProperty.reference.length>0&&i.push({dataType:"string",predicateString:"reference",value:a.mainProperty.reference}));var l=a.mainProperty.visibility;"PUBLIC_NOT_INDEXED"===a.mainProperty.visibility?l="PUBLIC":"PRIVATE_NOT_INDEXED"===a.mainProperty.visibility&&(l="PRIVATE");var m={properties:i,name:a.mainProperty.name,description:a.mainProperty.description,version:a.mainProperty.version,visibility:l};e.setNetworkSummaryV2(n,m,function(){a.isProcessing=!1,"PUBLIC"===l&&p.showcased.state!==a.originalShowCased?e.setNetworkSystemPropertiesV2(v,"showcase",p.showcased.state,function(){b?e.requestDoi(p.networkExternalId,c,function(){t()},function(a){p.errors.push(a)}):t()},function(a,b){console.log("unable to change showcase for Network with Id "+b)}):b?e.requestDoi(p.networkExternalId,c,function(){t()},function(a){p.errors.push(a)}):t()},function(b){b&&b.message?p.errors.push(b.message):p.errors.push("Server returned HTTP error response code : "+b.status+". Error message : "+b.statusText+"."),a.isProcessing=!1}),a.originalIndexLevel!==a.mainProperty.indexLevel&&e.setNetworkSystemPropertiesV2(v,"index_level",a.mainProperty.indexLevel,function(){},function(a,b){console.log("unable to change index for Network with Id "+b)})}else{console.log("can't make public");j.genericInfoModal("Unable to Update Network Access","Unable to make network public. <br /><br /> <strong>Name, Description and Version</strong> fields are all required to make this network Public")}},p.checkPublicRequirements=function(){return"PRIVATE"===a.mainProperty.visibility||"PRIVATE_NOT_INDEXED"===a.mainProperty.visibility||!(!a.mainProperty.name||!a.mainProperty.description||!a.mainProperty.version||a.mainProperty.name.length<1||a.mainProperty.description.length<1||a.mainProperty.version.length<1)},p.checkDOIRequirements=function(){return!(!a.mainProperty.name||!a.mainProperty.description||!a.mainProperty.version||!p.getPropertyValue("rights")||!p.getPropertyValue("rightsHolder")||!p.getPropertyValue("author")||a.mainProperty.name.length<1||a.mainProperty.description.length<1||a.mainProperty.version.length<1||p.getPropertyValue("rights").length<1||p.getPropertyValue("rightsHolder").length<1||p.getPropertyValue("author").length<1)},p.removeNamespace=function(a){p.ontologies.splice(a,1)},p.addNamespace=function(){var a={prefix:p.newPrefix,uri:p.newURI};e.addNamespaceToNetwork(n,a,function(){p.namespaces.push(a),p.newPrefix=null,p.newURI=null,p.showNameSpaces=p.namespaces.length>0},function(a){p.errors.push(a.data)})},p.setURI=function(a){p.newURI=a.uri},p.refresh=d.reload,p.cancel=function(){b.path("/network/"+p.networkExternalId)},e.getNetworkSummaryV2(n).success(function(b){if(p.propertyValuePairs=[],p.hiddenValuePairs=[],a.mainProperty.name=b.name,a.mainProperty.indexLevel=b.indexLevel?b.indexLevel.toUpperCase():"NONE",a.originalIndexLevel=a.mainProperty.indexLevel,p.fullIndexed.state="ALL"===a.originalIndexLevel,a.mainProperty.readonly=b.isReadOnly,a.mainProperty.name||(a.mainProperty.name=""),a.mainProperty.description=b.description,a.mainProperty.description||(a.mainProperty.description=""),a.mainProperty.reference=b.reference,!a.mainProperty.reference){for(var d=0;d<b.properties.length;d++)if("reference"===b.properties[d].predicateString.toLowerCase()){a.mainProperty.reference=b.properties[d].value;break}a.mainProperty.reference||(a.mainProperty.reference="")}a.mainProperty.version=b.version,a.mainProperty.version||(a.mainProperty.version=""),a.mainProperty.visibility=b.visibility,"PRIVATE"===a.mainProperty.visibility?"NONE"===a.mainProperty.indexLevel?(p.visibilityIndex="PRIVATE_NOT_INDEXED",a.mainProperty.visibility="PRIVATE_NOT_INDEXED"):(p.visibilityIndex="PRIVATE",a.mainProperty.visibility="PRIVATE"):"NONE"===a.mainProperty.indexLevel?(p.visibilityIndex="PUBLIC_NOT_INDEXED",a.mainProperty.visibility="PUBLIC_NOT_INDEXED"):(p.visibilityIndex="PUBLIC",a.mainProperty.visibility="PUBLIC"),p.showcased.state=b.isShowcase,a.originalShowCased=b.isShowcase,p.isCertified=b.isCertified;for(var e=0,d=0;d<b.properties.length;d++)if(b.properties[d].predicateString&&-1===a.reservedNames.indexOf(b.properties[d].predicateString.toLowerCase())&&b.properties[d].subNetworkId===o){if(b.properties[d].labelValue=b.properties[d].predicateString,"rights"===b.properties[d].predicateString&&b.properties[d].value.indexOf("|")>-1){var f=b.properties[d].value;b.properties[d].value="Other";var h=f.split("|");h.length>1&&(b.properties[d].rightsOtherURL=h[0],b.properties[d].rightsOther=h[1])}else if("rights"===b.properties[d].predicateString&&b.properties[d].value.indexOf("href=")>-1){var f=b.properties[d].value;b.properties[d].value="Other",f=f.replace("<a href='http://","").replace("</a>","");var h=f.split("'>");h.length>1&&(b.properties[d].rightsOtherURL=h[0],b.properties[d].rightsOther=h[1])}p.propertyValuePairs.push(b.properties[d]),p.propertyValuePairsIndex[b.properties[d].predicateString]=e,e++}else p.hiddenValuePairs.push(b.properties[d]);p.propertyValuePairs.length>1&&(p.propertyValuePairs=_.sortBy(p.propertyValuePairs,"predicateString"));for(var i=p.propertyValuePairs.length,d=0;d<i;){if(p.propertyValuePairs[d].isReadOnlyLabel=!0,-1===a.namesForSolrIndexing.indexOf(p.propertyValuePairs[d].predicateString));else{var j=a.namesForSolrIndexing.indexOf(p.propertyValuePairs[d].predicateString);a.namesForSolrIndexing.splice(j,1)}d+=1,p.propertyValuePairs[d]&&"rights"===p.propertyValuePairs[d].predicateString&&p.rights.indexOf(p.propertyValuePairs[d].value)<0&&(p.rights.push(p.propertyValuePairs[d].value),p.rightsCustom=p.propertyValuePairs[d].value)}a.namesForSolrIndexing.indexOf("custom...")>-1&&a.namesForSolrIndexing.splice(a.namesForSolrIndexing.indexOf("custom...")),a.namesForSolrIndexing.push("custom...");for(var k in p.propertyTemplate)if(p.propertyTemplate.hasOwnProperty(k)){for(var l=!1,m=0;m<p.propertyValuePairs.length;m++)if(p.propertyValuePairs[m].predicateString===k){l=!0;break}l||(p.propertyValuePairs.push(p.propertyTemplate[k]),p.propertyValuePairsIndex[k]=e,e++)}p.propertyValuePairs.push({dataType:"string",predicateString:"",value:"",subNetworkId:o}),p.disableSaveChangesButton=p.checkIfFormIsValidOnLoad();var n=b.ownerUUID,q=g.getCurrentUserId();p.isOwner=n===q,c.doi?p.viewfilter.state="DOI":p.viewfilter.state="MAIN"}).error(function(a){p.errors.push(a)});var u=g.getCurrentUserId(),v=n;e.getUserPermissionForNetworkV2(u,v,!1,function(a){if(a){var b=a[v];"ADMIN"===b&&(p.isAdmin=!0),"WRITE"===b&&(p.canEdit=!0),"READ"===b&&(p.canRead=!0)}},function(a){p.errors.push(a)}),p.showNameSpaces=p.namespaces.length>0,a.setToolTips=function(){$('[data-toggle="tooltip"]').tooltip()},p.getPropertyValue=function(a){for(var b=0;b<p.propertyValuePairs.length;b++)if(p.propertyValuePairs[b].predicateString===a)return p.propertyValuePairs[b].value;return null},a.showFullIndexAdvisory=function(){if(p.fullIndexed.state)return void(p.fullIndexed.state=!p.fullIndexed.state);j.openConfirmationModal("Full Index Advisory"," Full Index is resource-expensive feature and should only be used for high quality,  published networks made available to the scientific community... Although we  understand that this feature might also be useful for PRIVATE networks,  we ask you to be considerate and use it sparingly.  <br><br><strong>Would you like to activate the Full Index feature?</strong>","Proceed","Cancel",!0,function(){p.fullIndexed.state=!p.fullIndexed.state},function(){})}}]),ndexApp.controller("manageNetworkAccessController",["ndexService","ndexUtility","sharedProperties","$scope","$location","$routeParams","$q","ndexNavigation","uiMisc",function(a,b,c,d,e,f,g,h,i){var j=f.identifier;d.networkManager={};var k=d.networkManager;k.errors=[],k.isAdmin=!1,k.externalId=j,k.networkUserMemberships=[],k.networkGroupMemberships=[],k.newUsers={},k.newGroups={},k.selectedAccountsForUpdatingAccessPermissions=[],k.originalAccessPermissions=[],k.showShareURLControl=!1,k.mapOfUserPermissions={},k.mapOfGroupPermissions={},k.modifiedAccessObjects=[],k.deletedAccessObjects=[],k.newAdminObj=[],k.networkShareableURL=null,k.networkShareableURLLabel=null,d.progressMessage=null,d.errorMessage=null,d.showChangeShareURLButton=!1,d.showChangeShareURLButtonTitle="",d.showOriginalCopyNetworkShareURLTitle=function(){d.copyNetworkShareURLTitle="Copy network share URL to clipboard"},d.showCopiedNetworkShareURLTitle=function(){d.copyNetworkShareURLTitle="Copied"},d.isDOIPending=function(){return i.isDOIPending(k.network)},d.isDOIAssigned=function(){return i.isDOIAssigned(k.network)},d.isNetworkCertified=function(){return i.isNetworkCertified(k.network)},d.showChangeShareURLButton=function(){var a=d.isDOIPending()||d.isDOIAssigned()||d.isNetworkCertified();d.showChangeShareURLButton=!a,i.isNetworkCertified(k.network)?i.isDOIAssigned(k.network)?d.showChangeShareURLButtonTitle="Unable to Disable Share URL for this network: it is certified and a DOI has been assigned":i.isDOIPending(k.network)&&(d.showChangeShareURLButtonTitle="Unable to Disable Share URL for this network: a request has been submitted and the DOI is pending assignment"):i.isDOIPending(k.network)?d.showChangeShareURLButtonTitle="Unable to Disable Share URL for this network: a request has been submitted and the DOI is pending assignment":i.isDOIAssigned(k.network)&&(d.showChangeShareURLButtonTitle="Unable to Disable Share URL for this network: a DOI been assigned")},k.accessWasRemoved=function(a){if(void 0===a||void 0===a.memberUUID)return!1;for(var b=0;b<k.selectedAccountsForUpdatingAccessPermissions.length;b++)if(a.memberUUID===k.selectedAccountsForUpdatingAccessPermissions[b].memberUUID)return!1;return!0},k.accessWasAdded=function(a){if(void 0===a||void 0===a.memberUUID)return!1;for(var b=0;b<k.originalAccessPermissions.length;b++)if(a.memberUUID===k.originalAccessPermissions[b].memberUUID)return!1;return!0},k.accessWasModified=function(a){if(void 0===a||void 0===a.memberUUID)return!1;for(var b=0;b<k.selectedAccountsForUpdatingAccessPermissions.length;b++)if(a.memberUUID===k.selectedAccountsForUpdatingAccessPermissions[b].memberUUID&&a.permissions.toLowerCase()!==k.selectedAccountsForUpdatingAccessPermissions[b].permissions.toLowerCase())return!0;return!1},d.$on("ADDING_PERMISSIONS_DONE",function(){l(k.modifiedAccessObjects,5,1,"UPDATING_PERMISSIONS_DONE")}),d.$on("UPDATING_PERMISSIONS_DONE",function(){m(k.deletedAccessObjects,5,1,"DELETING_PERMISSIONS_DONE")}),d.$on("DELETING_PERMISSIONS_DONE",function(){l(k.newAdminObj,5,1,"ALL_PERMISSIONS_DONE")}),d.$on("ALL_PERMISSIONS_DONE",function(){d.progressMessage=null,d.isProcessing=!1,e.path("network/"+d.networkManager.externalId)});var l=function(b,c,e,f){if(!b||0==b.length)return void d.$emit(f);var g=b[0],i="user"==g.accountType.toLowerCase()?" user "+g.firstName+" "+g.lastName:" group "+g.groupName;d.progressMessage="Processing permission "+g.permissions+" for "+i,a.updateNetworkPermissionV2(g.resourceUUID,g.accountType,g.memberUUID,g.permissions,function(a,d,g,h,i){b.splice(0,1),l(b,c,e,f)},function(a,i,j,k,m){if(500!=i||!a||!a.errorCode||"NDEx_Concurrent_Modification_Exception"!=a.errorCode){var n="Unable to Update or Add Network Access",o="Unable to update or add network access for ";return o="group"==g.accountType.toLowerCase()?o+" group <strong>"+g.groupName+"</strong>.<br>":o+" user <strong>"+g.firstName+" "+g.lastName+"</strong>.<br>",d.progressMessage=null,o+=a.message,d.errorMessage=o,void h.genericInfoModal(n,o)}if(0==(c-=1)){var n="Unable to Update Network Access",o="Unable to update access to network for ";return o="group"==g.accountType.toLowerCase()?o+" group <strong>"+g.groupName+"</strong>.<br>":o+" user <strong>"+g.firstName+" "+g.lastName+"</strong>.<br>",d.progressMessage=null,o+=a.message,d.errorMessage=o,void h.genericInfoModal(n,o)}void 0===e&&(e=1),setTimeout(function(){l(b,c,e,f)},1e3*e)})},m=function(b,c,e,f){if(!b||0==b.length)return void d.$emit(f);var g=b[0],i="user"==g.accountType.toLowerCase()?" user "+g.firstName+" "+g.lastName:" group "+g.groupName;d.progressMessage="Deleting permission "+g.permissions+" for "+i,a.deleteNetworkPermissionV2(g.resourceUUID,g.accountType,g.memberUUID,function(a,d,g,h,i){b.splice(0,1),m(b,c,e,f)},function(a,b,f,i,j){if(500!=b||!a||!a.errorCode||"NDEx_Concurrent_Modification_Exception"!=a.errorCode){var k="Unable to Delete Network Access",l="Unable to remove access to network for ";return l="group"==g.accountType.toLowerCase()?l+" group <strong>"+g.groupName+"</strong>.<br>":l+" user <strong>"+g.firstName+" "+g.lastName+"</strong>.<br>",d.progressMessage=null,l+=a.message,d.errorMessage=l,void h.genericInfoModal(k,l)}if(0==(c-=1)){var k="Unable to Delete Network Access",l="Unable to remove access to network for ";return l="group"==g.accountType.toLowerCase()?l+" group <strong>"+g.groupName+"</strong>.<br>":l+" user <strong>"+g.firstName+" "+g.lastName+"</strong>.<br>",d.progressMessage=null,l+=a.message,d.errorMessage=l,void h.genericInfoModal(k,l)}void 0===e&&(e=1),setTimeout(function(){m(g,c,e)},1e3*e)})},n=function(a){_.each(a,function(a){a.permissions&&(a.permissions=a.permissions.toUpperCase())});var b=_.find(a,{permissions:"ADMIN"});return b?b.memberUUID:null},o=function(a,b){var c=_.find(a,{memberUUID:b})
;if(c)var d=c.accountType&&"user"==c.accountType.toLowerCase()?c.firstName+" "+c.lastName:c.groupName;return d||""};k.isSelfAdminRemoval=function(){var a={adminIssue:!1,issueSeverity:"none"},b=[],c=0,d=n(k.originalAccessPermissions);if(_.each(k.selectedAccountsForUpdatingAccessPermissions,function(a){"ADMIN"==a.permissions&&(c++,d!=a.memberUUID&&b.push(a.memberUUID))}),0==c)return a.adminIssue=!0,a.issueSeverity="ABORT",a.title="Admin Required",a.message="This action cannot be completed because one admin should always be designated.",a;if(c>2||2==c&&b.length>1)return a.adminIssue=!0,a.issueSeverity="ABORT",a.title="Too Many Admins Specified",a.message="You specified "+c+" admins. Please select only one admin.",a;if(2==c||1==c&&1==b.length){a.adminIssue=!0,a.issueSeverity="WARNING",a.title="New Admin Specified";var e=o(k.selectedAccountsForUpdatingAccessPermissions,b[0]),f=o(k.originalAccessPermissions,d);return a.message="You specified <strong>"+e+" </strong>as new admin. <br><br><strong>"+f+'</strong> permission will be downgraded to "Can Edit" and this  user will no longer be able to manage access permissions for this network. <br><br>Are you sure you want to proceed?',a}return a},k.save=function(){if(!k.changesWereMade())return d.isProcessing=!1,void e.path("network/"+d.networkManager.externalId);if(!d.isProcessing){d.isProcessing=!0;var a=n(k.originalAccessPermissions),b=n(k.selectedAccountsForUpdatingAccessPermissions);a!=b&&(_.remove(k.originalAccessPermissions,{memberUUID:a}),_.remove(k.originalAccessPermissions,{memberUUID:b}),_.remove(k.selectedAccountsForUpdatingAccessPermissions,{memberUUID:a}),k.newAdminObj.push(_.clone(_.find(k.selectedAccountsForUpdatingAccessPermissions,{memberUUID:b}))),_.remove(k.selectedAccountsForUpdatingAccessPermissions,{memberUUID:b}));var c=[];_.each(k.selectedAccountsForUpdatingAccessPermissions,function(a){if(k.accessWasAdded(a)){var b={memberUUID:a.memberUUID,resourceUUID:a.resourceUUID,permissions:a.permissions,accountType:a.accountType.toLowerCase()};"user"==b.accountType?(b.firstName=a.firstName,b.lastName=a.lastName):b.groupName=a.groupName,c.push(b)}}),_.each(c,function(a){_.remove(k.selectedAccountsForUpdatingAccessPermissions,{memberUUID:a.memberUUID})}),_.each(k.originalAccessPermissions,function(a){k.accessWasRemoved(a)&&k.deletedAccessObjects.push(a)}),_.each(k.deletedAccessObjects,function(a){_.remove(k.originalAccessPermissions,{memberUUID:a.memberUUID})}),_.each(k.originalAccessPermissions,function(a){if(k.accessWasModified(a)){var b=_.find(k.selectedAccountsForUpdatingAccessPermissions,{memberUUID:a.memberUUID}),c={memberUUID:a.memberUUID,resourceUUID:a.resourceUUID,permissions:b.permissions,accountType:a.accountType.toLowerCase()};"user"==c.accountType?(c.firstName=a.firstName,c.lastName=a.lastName):c.groupName=a.groupName,k.modifiedAccessObjects.push(c)}}),_.each(k.modifiedAccessObjects,function(a){_.remove(k.selectedAccountsForUpdatingAccessPermissions,{memberUUID:a.memberUUID})}),l(c,5,1,"ADDING_PERMISSIONS_DONE")}},k.memberIsAdmin=function(a){if(!a||!a.memberUUID)return!1;var b=_.find(k.originalAccessPermissions,{permissions:"ADMIN"});return b&&b.memberUUID==a.memberUUID},k.loadUserPermissionsOnNetwork=function(){a.getAllPermissionsOnNetworkV2(k.externalId,"user",null,0,1e6,function(b,c){var d=Object.keys(b);k.mapOfUserPermissions=b,a.getUsersByUUIDsV2(d).success(function(a){k.networkUserMemberships=a,k.processUserAccessPermissions()}).error(function(a){console.log("unable to get users by UUIDs")})})},k.loadGroupPermissionsOnNetwork=function(){a.getAllPermissionsOnNetworkV2(k.externalId,"group",null,0,1e6,function(b,c){var d=Object.keys(b);k.mapOfGroupPermissions=b,a.getGroupsByUUIDsV2(d).success(function(a){k.networkGroupMemberships=a,k.processGroupAccessPermissions()}).error(function(a){console.log("unable to get groups by UUIDs")})})},k.processGroupAccessPermissions=function(){for(var a=0;a<k.networkGroupMemberships.length;a++){var b=k.networkGroupMemberships[a],c={memberUUID:b.externalId,groupName:b.groupName,resourceUUID:k.externalId,permissions:k.mapOfGroupPermissions[b.externalId],accountType:"group",member:!0};k.originalAccessPermissions.push(c),k.selectedAccountsForUpdatingAccessPermissions.push(JSON.parse(JSON.stringify(c)))}},k.processUserAccessPermissions=function(){for(var a=0;a<k.networkUserMemberships.length;a++){var b=k.networkUserMemberships[a],c={memberAccountName:b.userName,memberUUID:b.externalId,resourceUUID:k.externalId,permissions:k.mapOfUserPermissions[b.externalId],firstName:b.firstName,lastName:b.lastName,accountType:"user",member:!0};k.originalAccessPermissions.push(c),k.selectedAccountsForUpdatingAccessPermissions.push(JSON.parse(JSON.stringify(c)))}},k.getGroupPermissions=function(a,b){for(var c=b.memberUUID,d=0;d<a.length;d++)if(c===a[d].externalId){b.groupName=a[d].groupName;break}},k.getNamesAndAccountType=function(a,b){for(var c=b.memberUUID,d=0;d<a.length;d++)if(c===a[d].externalId){"user"===a[d].accountType.toLowerCase()?(b.firstName=a[d].firstName,b.lastName=a[d].lastName,b.accountType=a[d].accountType):"group"===a[d].accountType.toLowerCase()&&(b.groupName=a[d].groupName,b.accountType=a[d].accountType);break}},k.findUsers=function(){var b=k.searchString;a.searchUsersV2(b,0,10,function(a){k.newUsers=a.resultList;for(var b=a.resultList.length,c=k.selectedAccountsForUpdatingAccessPermissions.length,d=0;d<b;d++)for(var e=0;e<c;e++)k.selectedAccountsForUpdatingAccessPermissions[e].memberUUID==a.resultList[d].externalId&&(a.resultList[d].member=!0)},function(a){k.errors.push(a.data)})},k.findGroups=function(){a.searchGroupsV2(k.groupSearchString,0,10,function(a){k.newGroups=a.resultList;for(var b=a.resultList.length,c=k.selectedAccountsForUpdatingAccessPermissions.length,d=0;d<b;d++)for(var e=0;e<c;e++)k.selectedAccountsForUpdatingAccessPermissions[e].memberUUID==a.resultList[d].externalId&&(a.resultList[d].member=!0)},function(a){k.errors.push(a.data)})},k.discardChanges=function(){if(k.changesWereMade()){for(var a=0;a<k.selectedAccountsForUpdatingAccessPermissions.length;a++){var b=k.selectedAccountsForUpdatingAccessPermissions[a];if("user"===b.accountType.toLowerCase()&&void 0!==k.newUsers)for(var c=0;c<k.newUsers.length;c++)k.newUsers[c].externalId===b.memberUUID&&(k.newUsers[c].member=!1);else if("group"===b.accountType.toLowerCase()&&void 0!==k.newGroups)for(var c=0;c<k.newGroups.length;c++)k.newGroups[c].externalId===b.memberUUID&&(k.newGroups[c].member=!1)}k.selectedAccountsForUpdatingAccessPermissions=[];for(var a=0;a<k.originalAccessPermissions.length;a++){var d=k.originalAccessPermissions[a];if(k.selectedAccountsForUpdatingAccessPermissions.push(JSON.parse(JSON.stringify(d))),void 0!==k.newUsers)for(var c=0;c<k.newUsers.length;c++)k.newUsers[c].externalId===d.memberUUID&&(k.newUsers[c].member=!0);if(void 0!==k.newGroups)for(var c=0;c<k.newGroups.length;c++)k.newGroups[c].externalId===d.memberUUID&&(k.newGroups[c].member=!0)}}},k.removeMember=function(a,b){if(k.selectedAccountsForUpdatingAccessPermissions.splice(a,1),void 0!==k.newUsers)for(var c=0;c<k.newUsers.length;c++)k.newUsers[c].externalId===b.memberUUID&&(k.newUsers[c].member=!1);if(void 0!==k.newGroups)for(var c=0;c<k.newGroups.length;c++)k.newGroups[c].externalId===b.memberUUID&&(k.newGroups[c].member=!1)},k.addMember=function(a){var b={memberAccountName:k.getAccountName(a),memberUUID:a.externalId,resourceName:k.network.name,resourceUUID:k.network.externalId,permissions:"READ",firstName:void 0===a.firstName?"":a.firstName,lastName:void 0===a.lastName?"":a.lastName,groupName:void 0===a.groupName?"":a.groupName,accountType:a.accountType,member:!0};a.member=!0,k.selectedAccountsForUpdatingAccessPermissions.push(b)},k.addUserMember=function(a){var b={memberAccountName:k.getUserAccountName(a),memberUUID:a.externalId,resourceName:k.network.name,resourceUUID:k.network.externalId,permissions:"READ",firstName:void 0===a.firstName?"":a.firstName,lastName:void 0===a.lastName?"":a.lastName,accountType:"user",member:!0};a.member=!0,k.selectedAccountsForUpdatingAccessPermissions.push(b)},k.addGroupMember=function(a){var b={memberAccountName:k.getGroupAccountName(a),memberUUID:a.externalId,resourceName:k.network.name,resourceUUID:k.network.externalId,permissions:"READ",groupName:void 0===a.groupName?"":a.groupName,accountType:"group",member:!0};a.member=!0,k.selectedAccountsForUpdatingAccessPermissions.push(b)},k.changesWereMade=function(){if(k.selectedAccountsForUpdatingAccessPermissions.length!=k.originalAccessPermissions.length)return!0;for(var a=0;a<k.selectedAccountsForUpdatingAccessPermissions.length;a++){for(var b=k.selectedAccountsForUpdatingAccessPermissions[a],c=!1,d=0;d<k.originalAccessPermissions.length;d++){var e=k.originalAccessPermissions[d];if(b.memberUUID===e.memberUUID){if(b.permissions.toUpperCase()===e.permissions.toUpperCase()){c=!0;break}return!0}}if(!c)return!0}return!1},k.nothingSelected=function(){return 0==k.selectedAccountsForUpdatingAccessPermissions.length},k.getAccountName=function(a){return void 0===a?"undefined":void 0!==a.userName&&"ndexadministrator"===a.userName?a.userName:void 0!==a.memberAccountName&&"ndexadministrator"===a.memberAccountName?a.memberAccountName:"user"==a.accountType.toLowerCase()?a.firstName+" "+a.lastName:"group"==a.accountType.toLowerCase()?a.groupName:"unknown account type"},k.getUserAccountName=function(a){if(void 0===a)return"undefined";if(void 0!==a.userName&&"ndexadministrator"===a.userName)return a.userName;if(void 0!==a.memberAccountName&&"ndexadministrator"===a.memberAccountName)return a.memberAccountName;if(a.isIndividual){if(a.firstName&&a.lastName)return a.firstName+" "+a.lastName}else if(a.displayName)return a.displayName;return"unknown user"},k.getGroupAccountName=function(a){return void 0===a?"undefined":a.groupName?a.groupName:"unknown group"},k.checkIfUserAccount=function(a){return!(!a||!a.accountType)&&"user"===a.accountType.toLowerCase()},k.switchShareableURL=function(){var b=k.networkShareableURL?"disable":"enable";a.disableOrEnableAccessKeyOnNetworkV2(k.externalId,b,function(a,c,d,e,f){"enable"==b?(k.networkShareableURLLabel="Disable Share URL",k.networkShareableURL=i.buildNetworkURL(a.accessKey,k.externalId)):(k.networkShareableURLLabel="Enable Share URL",k.networkShareableURL=null)},function(a){console.log("unable to get access key for network "+k.externalId)})},k.getStatusOfShareableURL=function(){a.getAccessKeyOfNetworkV2(k.externalId,function(a){a&&a.accessKey?(k.networkShareableURL=i.buildNetworkURL(a.accessKey,k.externalId),k.networkShareableURLLabel="Disable Share URL"):(k.networkShareableURL=null,k.networkShareableURLLabel="Enable Share URL")},function(a){console.log("unable to get access key for network "+k.externalId)})},a.getNetworkSummaryV2(j).success(function(a){k.network=a,d.showChangeShareURLButton(),a.visibility&&"PRIVATE"==a.visibility.toUpperCase()&&(k.showShareURLControl=!0,k.getStatusOfShareableURL())}).error(function(a){k.errors.push(a.data)});var p=c.getCurrentUserId(),q=j;a.getUserPermissionForNetworkV2(p,q,!1,function(a){if(a){"ADMIN"==a[q]&&(k.isAdmin=!0)}},function(a){k.errors.push(a.data)}),k.loadUserPermissionsOnNetwork(),k.loadGroupPermissionsOnNetwork()}]),ndexApp.controller("manageBulkNetworkAccessController",["ndexService","ndexUtility","sharedProperties","$scope","$location","$routeParams","$q",function(a,b,c,d,e,f,g){d.bulkNetworkManager={};var h=d.bulkNetworkManager;h.errors=[],h.isAdmin=!1,h.selectedAccountsForUpdatingAccessPermissions=[],h.newUsers={},h.newGroups={},d.noNetworksSelected=!1,h.selectedIDsAndNetworks=c.getSelectedNetworkIDs(),h.selectedIDs=Object.keys(c.getSelectedNetworkIDs()),h.currentUserId=c.getCurrentUserId(),h.selectedNetworksForUpdatingAccessPermissions={},h.getNetworkPermissions=function(b){if(void 0===b)return void(d.noNetworksSelected=!0);for(var c=0;c<b.length;c++){var e=b[c];a.getAllPermissionsOnNetworkV2(e,"user",null,0,1e6,function(a,b){var c=[];for(userId in a){var d={memberUUID:userId,resourceUUID:b,permissions:a[userId],accountType:"user"};c.push(d)}h.selectedNetworksForUpdatingAccessPermissions[b]=c})}},h.findUsers=function(){var b=h.searchString;a.searchUsersV2(b,0,10,function(a){h.newUsers=a.resultList;for(var b=a.numFound,c=h.selectedAccountsForUpdatingAccessPermissions.length,d=0;d<b;d++)for(var e=0;e<c;e++)h.selectedAccountsForUpdatingAccessPermissions[e].memberUUID==a.resultList[d].externalId&&(a[d].member=!0)},function(a){h.errors.push(a.data)})},h.findGroups=function(){a.searchGroupsV2(h.groupSearchString,0,10,function(a){h.newGroups=a.resultList;for(var b=a.numFound,c=h.selectedAccountsForUpdatingAccessPermissions.length,d=0;d<b;d++)for(var e=0;e<c;e++)h.selectedAccountsForUpdatingAccessPermissions[e].memberUUID==a.resultList[d].externalId&&(a[d].member=!0)},function(a){h.errors.push(a.data)})},h.removeMember=function(a,b){if(b.member=!1,h.selectedAccountsForUpdatingAccessPermissions.splice(a,1),void 0!==h.newUsers.length)for(var c=0;c<h.newUsers.length;c++)h.newUsers[c].externalId===b.memberUUID&&(h.newUsers[c].member=!1);if(void 0!==h.newGroups.length)for(var c=0;c<h.newGroups.length;c++)h.newGroups[c].externalId===b.memberUUID&&(h.newGroups[c].member=!1)},h.addUserMember=function(a){var b={memberAccountName:h.getUserAccountName(a),memberUUID:a.externalId,permissions:"READ",firstName:void 0===a.firstName?"":a.firstName,lastName:void 0===a.lastName?"":a.lastName,accountType:"user",member:!0};a.member=!0,h.selectedAccountsForUpdatingAccessPermissions.push(b)},h.addGroupMember=function(a){var b={memberAccountName:h.getGroupAccountName(a),memberUUID:a.externalId,permissions:"READ",groupName:void 0===a.groupName?"":a.groupName,accountType:"group",member:!0};a.member=!0,h.selectedAccountsForUpdatingAccessPermissions.push(b)},h.getAccountName=function(a){return void 0===a?"undefined":"ndexadministrator"==a.userName?a.userName:"user"==a.accountType?a.firstName+" "+a.lastName:"group"==a.accountType?a.groupName:"unknown account type"},h.getUserAccountName=function(a){if(void 0===a)return"undefined";if(void 0!==a.userName&&"ndexadministrator"===a.userName)return a.userName;if(void 0!==a.memberAccountName&&"ndexadministrator"===a.memberAccountName)return a.memberAccountName;if(a.isIndividual){if(a.firstName&&a.lastName)return a.firstName+" "+a.lastName}else if(a.displayName)return a.displayName;return"unknown user"},h.getGroupAccountName=function(a){return void 0===a?"undefined":a.groupName?a.groupName:"unknown group"},h.checkIfNetworkAccessNeedsUpdating=function(a,b,c){for(var d,e=0;e<a.length;e++){var f=a[e];if(f.memberUUID==b.memberUUID){d=f.permissions;break}}if(void 0===d)return!0;var g=3,h=3;return"WRITE"===c?g=2:"READ"===c&&(g=1),"WRITE"===d.toUpperCase()?h=2:"READ"===d.toUpperCase()&&(h=1),g>h},h.getNetworkPermissions(h.selectedIDs)}]),ndexApp.controller("manageGroupAccessController",["ndexService","ndexUtility","sharedProperties","$scope","$location","$routeParams","$q",function(a,b,c,d,e,f,g){var h=f.identifier;d.groupManager={};var i=d.groupManager;i.errors=[],i.externalId=h,i.newUsers={},i.originalAccessPermissions=[],i.selectedAccountsForUpdatingAccessPermissions=[],i.userGroupMemberships=[],i.save=function(){if(!i.changesWereMade())return d.isProcessing=!1,void e.path("group/"+d.groupManager.externalId);if(!d.isProcessing){d.isProcessing=!1;for(var a=[],b=0;b<i.selectedAccountsForUpdatingAccessPermissions.length;b++){var c=i.selectedAccountsForUpdatingAccessPermissions[b];if(i.accessWasAdded(c)){a.push(b);var f={memberUUID:c.memberUUID,resourceUUID:c.resourceUUID,permissions:i.selectedAccountsForUpdatingAccessPermissions[b].permissions,accountType:c.accountType.toLowerCase()};j(f)}}for(var b=a.length-1;b>=0;b--)i.selectedAccountsForUpdatingAccessPermissions.splice(a[b],1);for(var g=[],b=0;b<i.originalAccessPermissions.length;b++){var c=i.originalAccessPermissions[b];i.accessWasRemoved(c)&&(g.push(b),k(c))}if(g.length>0)for(var b=g.length-1;b>=0;b--)i.originalAccessPermissions.splice(g[b],1);for(var b=0;b<i.originalAccessPermissions.length;b++){var c=i.originalAccessPermissions[b];if(i.accessWasModified(c)){var f={memberUUID:c.memberUUID,resourceUUID:c.resourceUUID,permissions:i.selectedAccountsForUpdatingAccessPermissions[b].permissions,accountType:c.accountType.toLowerCase()};j(f)}}d.isProcessing=!1,e.path("group/"+d.groupManager.externalId)}},i.accessWasAdded=function(a){if(void 0===a||void 0===a.memberUUID)return!1;for(var b=0;b<i.originalAccessPermissions.length;b++)if(a.memberUUID===i.originalAccessPermissions[b].memberUUID)return!1;return!0},i.accessWasRemoved=function(a){if(void 0===a||void 0===a.memberUUID)return!1;for(var b=0;b<i.selectedAccountsForUpdatingAccessPermissions.length;b++)if(a.memberUUID===i.selectedAccountsForUpdatingAccessPermissions[b].memberUUID)return!1;return!0},i.accessWasModified=function(a){if(void 0===a||void 0===a.memberUUID)return!1;for(var b=0;b<i.selectedAccountsForUpdatingAccessPermissions.length;b++)if(a.memberUUID===i.selectedAccountsForUpdatingAccessPermissions[b].memberUUID&&a.permissions.toLowerCase()!==i.selectedAccountsForUpdatingAccessPermissions[b].permissions.toLowerCase())return!0;return!1};var j=function(b){var c=b.resourceUUID,d=b.memberUUID,e=b.permissions;a.addOrUpdateGroupMemberV2(c,d,e,function(a){},function(a){console.log("unable to update group membership for group="+c+" user="+d+" membership type="+e)})},k=function(b){var c=b.resourceUUID,d=b.memberUUID;a.removeGroupMemberV2(c,d,function(a){},function(a){console.log("unable to remove group member with Id="+d+" from group="+c),a&&a.message&&i.errors.push(a.message)})},l=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c].memberUUID;b.push(d)}return b};i.getMembersOfGroup=function(){a.getMembersOfGroupV2(i.externalId,null,0,1e6,function(b){i.userGroupMemberships=b;var c=l(b);a.getUsersByUUIDsV2(c).success(function(a){i.originalAccessPermissions=[],i.selectedAccountsForUpdatingAccessPermissions=[];for(var b=0;b<i.userGroupMemberships.length;b++){var c=i.userGroupMemberships[b],d={memberAccountName:c.memberAccountName,memberUUID:c.memberUUID,resourceName:c.resourceName,resourceUUID:c.resourceUUID,permissions:c.permissions,firstName:"",lastName:"",accountType:"user",member:!0};i.getUserAccountNames(a,d),i.originalAccessPermissions.push(d),i.selectedAccountsForUpdatingAccessPermissions.push(JSON.parse(JSON.stringify(d)))}}).error(function(a){console.log("unable to get users by UUIDs")})},function(a,b){console.log("unable to get group user memberships")})},i.getUserAccountNames=function(a,b){for(var c=b.memberUUID,d=0;d<a.length;d++)if(c===a[d].externalId){b.firstName=a[d].firstName,b.lastName=a[d].lastName;break}},i.getUserAccountName=function(a){return void 0===a?"undefined":void 0!==a.userName&&"ndexadministrator"===a.userName?a.userName:void 0!==a.memberAccountName&&"ndexadministrator"===a.memberAccountName?a.memberAccountName:a.firstName&&a.lastName?a.firstName+" "+a.lastName:"unknown user"},i.findUsers=function(){var b=i.searchString;a.searchUsersV2(b,0,10,function(a){i.newUsers=a.resultList;for(var b=a.resultList.length,c=i.selectedAccountsForUpdatingAccessPermissions.length,d=0;d<b;d++)for(var e=0;e<c;e++)i.selectedAccountsForUpdatingAccessPermissions[e].memberUUID==a.resultList[d].externalId&&(a.resultList[d].member=!0)},function(a){i.errors.push(a.data)})},i.addUserMember=function(a){var b={memberAccountName:i.getUserAccountName(a),memberUUID:a.externalId,resourceName:i.group.name,resourceUUID:i.group.externalId,permissions:"MEMBER",firstName:void 0===a.firstName?"":a.firstName,lastName:void 0===a.lastName?"":a.lastName,accountType:"user",member:!0};a.member=!0,i.selectedAccountsForUpdatingAccessPermissions.push(b)},i.removeMember=function(a,b){if(i.selectedAccountsForUpdatingAccessPermissions.splice(a,1),void 0!==i.newUsers)for(var c=0;c<i.newUsers.length;c++)i.newUsers[c].externalId===b.memberUUID&&(i.newUsers[c].member=!1)},i.changesWereMade=function(){if(i.selectedAccountsForUpdatingAccessPermissions.length!=i.originalAccessPermissions.length)return!0;for(var a=0;a<i.selectedAccountsForUpdatingAccessPermissions.length;a++){for(var b=i.selectedAccountsForUpdatingAccessPermissions[a],c=!1,d=0;d<i.originalAccessPermissions.length;d++){var e=i.originalAccessPermissions[d];if(b.memberUUID===e.memberUUID){if(b.permissions.toUpperCase()===e.permissions.toUpperCase()){c=!0;break}return!0}}if(!c)return!0}return!1},i.discardChanges=function(){if(i.changesWereMade()){for(var a=0;a<i.selectedAccountsForUpdatingAccessPermissions.length;a++){var b=i.selectedAccountsForUpdatingAccessPermissions[a];if("user"===b.accountType.toLowerCase()&&void 0!==i.newUsers)for(var c=0;c<i.newUsers.length;c++)i.newUsers[c].externalId===b.memberUUID&&(i.newUsers[c].member=!1)}i.selectedAccountsForUpdatingAccessPermissions=[];for(var a=0;a<i.originalAccessPermissions.length;a++){var d=i.originalAccessPermissions[a];if(i.selectedAccountsForUpdatingAccessPermissions.push(JSON.parse(JSON.stringify(d))),void 0!==i.newUsers)for(var c=0;c<i.newUsers.length;c++)i.newUsers[c].externalId===d.memberUUID&&(i.newUsers[c].member=!0)}}},a.getGroupV2(h,function(a){i.group=a},function(a){i.errors.push(a.data)}),i.getMembersOfGroup()}]),ndexApp.controller("homeController",["sharedProperties","$scope","uiMisc",function(a,b,c){b.homeController={};var d=b.homeController;d.featuredContent=[],d.URL=c.getCurrentServerURL(),window.featuredContent&&(d.featuredContent=window.featuredContent),d.getURLOfFeaturedCollection=function(a){return"#/"+a.account+"/"+a.UUID}}]),ndexApp.controller("myAccountController",["ndexService","ndexUtility","sharedProperties","$scope","$rootScope","$location","$routeParams","$route","$modal","uiMisc","ndexNavigation","uiGridConstants","ndexSpinner","$compile","userSessionTablesSettings",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a,b){return a.reduce(function(a,c){return a.then(function(){return b(c)})},Promise.resolve())}function q(b){return a.deleteNetworkPermissionNoHandlersV2(b,"user",w.loggedInIdentifier)}function r(b){return a.deleteNetworkNoHandlersV2(b.externalId)}function s(b){var c=b.typeFromServer.toLowerCase(),d={};return"export_network_to_file"===c?(d.newTask=!1,a.updateTaskPropertiesNoHandlersV2(b.id,d)):"usernetworkaccess"===c||"groupnetworkaccess"===c||"joingroup"===c?(d.newSent=!1,a.updateRequestPropertiesNoHandlersV2(b.id,d)):void 0}function t(b){var c=b.typeFromServer.toLowerCase();if("export_network_to_file"===c)return a.deleteTaskNoHandlersV2(b.id);var d={requesterId:b.ownerUUID,externalId:b.id};return"usernetworkaccess"===c||"groupnetworkaccess"===c?a.deletePermissionRequestNoHandlersV2(d):"joingroup"===c?a.deleteMembershipRequestNoHandlersV2(d):void 0}function u(b,c,e){var f=b.typeFromServer.toLowerCase(),g=w.identifier,h=b.taskId,i=c?"accept":"deny";if(c){if("usernetworkaccess"===f||"groupnetworkaccess"===f){var j=_.find(d.myAccountController.pendingRequests,{externalId:h}),k=j.destinationUUID,l=j.sourceUUID,m=j.permission,n="usernetworkaccess"===f?"user":"group";return a.updateNetworkPermissionNoHandlersV2(k,n,l,m).then(function(){return a.acceptOrDenyPermissionRequestNoHandlersV2(g,h,i,e)}).catch(function(){return a.acceptOrDenyPermissionRequestNoHandlersV2(g,h,i,e)})}if("joingroup"===f)return a.acceptOrDenyMembershipRequestNoHandlersV2(g,h,i,e)}else{if("usernetworkaccess"===f||"groupnetworkaccess"===f)return a.acceptOrDenyPermissionRequestNoHandlersV2(g,h,i,e);if("joingroup"===f)return a.acceptOrDenyMembershipRequestNoHandlersV2(g,h,i,e)}}var v=c.getCurrentUserId();d.myAccountController={};var w=d.myAccountController;w.isLoggedInUser=!!window.currentNdexUser,w.identifier=v,w.loggedInIdentifier=c.getCurrentUserId(),w.displayedUser={},w.groupSearchAdmin=!1,w.groupSearchMember=!1,w.groupSearchResults=[],w.originalGroupSearchResults=[],w.networkQuery={},w.networkSearchResults=[],w.skip=0,w.skipSize=1e4,w.networkTableRowsSelected=0,w.taskTableRowsSelected=0,w.pendingRequests=[],w.sentRequests=[],w.tasks=[],d.getClassForMyTasksTab=function(){return 0===w.tasks.length&&0===w.pendingRequests.length&&0===w.sentRequests.length?"disabled":"enabled"},w.networksWithAdminAccess={},w.networksWithWriteAccess={},w.networksWithReadAccess={},w.networksWithMultipleSubNetworks={};var x=window.ndexSettings.refreshIntervalInSeconds,y=-1,z=1;if(void 0!==g.pageNo&&null!==g.pageNo&&g.pageNo.match(/p[1-9]+[0-9]*/)){var A=g.pageNo.substring(1);z=Number(A)}var B="p"+z;window.performance&&window.performance.navigation&&void 0!==window.performance.navigation.type&&1===window.performance.navigation.type&&(B="p1",z=1,f.path("/myAccount")),d.$on("$destroy",function(){e.signOut&&(e.signOut=!1,o.clearState()),x>0&&-1!==y&&clearInterval(y)}),d.diskSpaceInfo={},w.showNetworkTable=!1,d.editProfileDropDownBulkButtonTitle="",d.enableEditPropertiesBulkButton=!1,d.changeDescriptionButtonTitle="",d.changeReferenceButtonTitle="",d.changeVersionButtonTitle="",d.enableChangeVisibilityBulkButton=!1,d.changeVisibilityButtonTitle="",d.enableSetReadOnlyBulkButton=!1,d.setReadOnlNetworkButtonTitle="",d.enableShareBulkButton=!1,d.shareNetworkButtonTitle="",d.enableExportBulkButton=!1,d.exportNetworkButtonTitle="",d.enableAddToMySetsBulkButton=!1,d.addToMySetsButtonTitle="",d.enableRemoveSharedNetworksBulkButton=!1,d.removeFromMyNetworksButtonTitle="",d.enableDeleteBulkButton=!1,d.deleteNetworkButtonTitle="",w.editProfilesLabel="Edit Profile",w.exportNetworksLabel="Export Network",w.removeNetworksButtonLabel="Remove from My Networks",w.deleteNetworksLabel="Delete Network",w.networkSets=[],d.refreshNetworksButtonDisabled=!0,d.refreshTasksButtonDisabled=!0;var C=!1,D=!1;d.tasksReceived=!1,d.sentRequestsReceived=!1,d.receivedRequestsReceived=!1,d.selectedRowsNetworkExternalIds={},d.selectedRowsTasksExternalIds={},w.numberOfNewTasksAndRequests=0,w.numberOfReceivedRequests=0,w.numberOfDownloadableTasks=0,w.currentTab="networks",o.initMyAccountPageStates(),d.networksTasksAndRequestsReceived=function(){return D&&d.tasksReceived&&d.sentRequestsReceived&&d.receivedRequestsReceived},d.resetNetworksFlag=function(){D=!1},d.resetTasksAndRequestsReceivedFlags=function(){d.tasksReceived=d.sentRequestsReceived=d.receivedRequestsReceived=!1},d.resetNetworksTasksAndRequestsReceivedFlags=function(){D=!1,d.resetTasksAndRequestsReceivedFlags()},d.onTabSelect=function(a){w.currentTab=a};var E={pageNumber:z,pageSize:o.getTablePaginationSize(),sort:null,networkCount:0,networkSetCount:0},F=function(){w.networkTableRowsSelected>1?(w.editProfilesLabel="Edit Profiles",w.exportNetworksLabel="Export Networks",w.deleteNetworksLabel="Delete Networks"):(w.editProfilesLabel="Edit Profile",w.exportNetworksLabel="Export Network",w.deleteNetworksLabel="Delete Network")},G=function(){var a=d.networkGridApi.selection.getSelectedRows();d.enableEditPropertiesBulkButton=!0;var b={read:0,certified:0,failed:0,processing:0,collection:0,readonly:0},c=Object.keys(b);_.forEach(a,function(a){var e=a.Status;e&&c.indexOf(e.toLowerCase())>-1?(d.enableEditPropertiesBulkButton=!1,b[e.toLowerCase()]+=1):a.isReadOnly?(d.enableEditPropertiesBulkButton=!1,b.readonly+=1):a.externalId in w.networksWithReadAccess&&(d.enableEditPropertiesBulkButton=!1,b.read+=1)}),d.enableEditPropertiesBulkButton?(d.changeDescriptionButtonTitle=w.networkTableRowsSelected>1?"Change Description of the selected networks":"Change Description of the selected network",d.changeReferenceButtonTitle=w.networkTableRowsSelected>1?"Change Reference of the selected networks":"Change Reference of the selected network",d.changeVersionButtonTitle=w.networkTableRowsSelected>1?"Change Version of the selected networks":"Change Version of the selected network"):(d.changeDescriptionButtonTitle="Unable to change Description of the selected ",d.changeReferenceButtonTitle="Unable to change Reference of the selected ",d.changeVersionButtonTitle="Unable to change Version of the selected ",w.networkTableRowsSelected>1?(d.changeDescriptionButtonTitle+="networks: ",d.changeReferenceButtonTitle+="networks: ",d.changeVersionButtonTitle+="networks: ",b.read>1?(d.changeDescriptionButtonTitle+="you do not have privilege to modify "+b.read+" networks",d.changeReferenceButtonTitle+="you do not have privilege to modify "+b.read+" networks",d.changeVersionButtonTitle+="you do not have privilege to modify "+b.read+" networks"):1===b.read&&(d.changeDescriptionButtonTitle+="you do not have privilege to modify "+b.read+" network",d.changeReferenceButtonTitle+="you do not have privilege to modify "+b.read+" network",d.changeVersionButtonTitle+="you do not have privilege to modify "+b.read+" network"),b.read>0&&(b.certified>0||b.failed>0||b.processing>0||b.collection>0||b.readonly>0)&&(d.changeDescriptionButtonTitle+=", ",d.changeReferenceButtonTitle+=", ",d.changeVersionButtonTitle+=", "),b.certified>1?(d.changeDescriptionButtonTitle+=b.certified+" networks are certified",d.changeReferenceButtonTitle+=b.certified+" networks are certified",d.changeVersionButtonTitle+=b.certified+" networks are certified"):1===b.certified&&(d.changeDescriptionButtonTitle+=b.certified+" network is certified",d.changeReferenceButtonTitle+=b.certified+" network is certified",d.changeVersionButtonTitle+=b.certified+" network is certified"),b.certified>0&&(b.failed>0||b.processing>0||b.collection>0||b.readonly>0)&&(d.changeDescriptionButtonTitle+=", ",d.changeReferenceButtonTitle+=", ",d.changeVersionButtonTitle+=", "),b.failed>1?(d.changeDescriptionButtonTitle+=b.failed+" networks failed",d.changeReferenceButtonTitle+=b.failed+" networks failed",d.changeVersionButtonTitle+=b.failed+" networks failed"):1===b.failed&&(d.changeDescriptionButtonTitle+=b.failed+" network failed",d.changeReferenceButtonTitle+=b.failed+" network failed",d.changeVersionButtonTitle+=b.failed+" network failed"),b.failed>0&&(b.processing>0||b.collection>0||b.readonly>0)&&(d.changeDescriptionButtonTitle+=", ",d.changeReferenceButtonTitle+=", ",d.changeVersionButtonTitle+=", "),b.processing>1?(d.changeDescriptionButtonTitle+=b.processing+" networks are processing",d.changeReferenceButtonTitle+=b.processing+" networks are processing",d.changeVersionButtonTitle+=b.processing+" networks are processing"):1===b.processing&&(d.changeDescriptionButtonTitle+=b.processing+" network is processing",d.changeReferenceButtonTitle+=b.processing+" network is processing",d.changeVersionButtonTitle+=b.processing+" network is processing"),b.processing>0&&(b.collection>0||b.readonly>0)&&(d.changeDescriptionButtonTitle+=", ",d.changeReferenceButtonTitle+=", ",d.changeVersionButtonTitle+=", "),b.collection>1?(d.changeDescriptionButtonTitle+=b.collection+" networks are Cytoscape collections",d.changeReferenceButtonTitle+=b.collection+" networks are Cytoscape collections",d.changeVersionButtonTitle+=b.collection+" networks are Cytoscape collections"):1===b.collection&&(d.changeDescriptionButtonTitle+=b.collection+" networks is a Cytoscape collection",d.changeReferenceButtonTitle+=b.collection+" networks is a Cytoscape collection",d.changeVersionButtonTitle+=b.collection+" networks is a Cytoscape collection"),b.collection>0&&b.readonly>0&&(d.changeDescriptionButtonTitle+=", ",d.changeReferenceButtonTitle+=", ",d.changeVersionButtonTitle+=", "),b.readonly>1?(d.changeVisibilityButtonTitle+=b.readonly+" networks are read-only",d.changeDescriptionButtonTitle+=b.readonly+" networks are read-only",d.changeReferenceButtonTitle+=b.readonly+" networks are read-only",d.changeVersionButtonTitle+=b.readonly+" networks are read-only"):1===b.readonly&&(d.changeDescriptionButtonTitle+=b.readonly+" network is read-only",d.changeReferenceButtonTitle+=b.readonly+" network is read-only",d.changeVersionButtonTitle+=b.readonly+" network is read-only")):(d.changeDescriptionButtonTitle+="network",d.changeReferenceButtonTitle+="network",d.changeVersionButtonTitle+="network",b.read>0?(d.changeDescriptionButtonTitle+=": you do not have privilege to modify it ",
d.changeReferenceButtonTitle+=": you do not have privilege to modify it ",d.changeVersionButtonTitle+=": you do not have privilege to modify it "):b.certified>0?(d.changeDescriptionButtonTitle+=": it is certified ",d.changeReferenceButtonTitle+=": it is certified ",d.changeVersionButtonTitle+=": it is certified "):b.failed>0?(d.changeDescriptionButtonTitle+=": it is failed ",d.changeReferenceButtonTitle+=": it is failed ",d.changeVersionButtonTitle+=": it is failed "):b.processing>0?(d.changeDescriptionButtonTitle+=": it is processing ",d.changeReferenceButtonTitle+=": it is processing ",d.changeVersionButtonTitle+=": it is processing "):b.collection>0?(d.changeDescriptionButtonTitle+=": it is a Cytoscape collection ",d.changeReferenceButtonTitle+=": it is a Cytoscape collection ",d.changeVersionButtonTitle+=": it is a Cytoscape collection "):b.readonly>0&&(d.changeDescriptionButtonTitle+=": it is read-only ",d.changeReferenceButtonTitle+=": it is read-only ",d.changeVersionButtonTitle+=": it is read-only ")))},H=function(){var a=d.networkGridApi.selection.getSelectedRows();d.enableChangeVisibilityBulkButton=!0;var b={nonadmin:0,certified:0,failed:0,processing:0,readonly:0},c=Object.keys(b);_.forEach(a,function(a){if(a.ownerUUID!==w.loggedInIdentifier)return b.nonadmin+=1,d.enableChangeVisibilityBulkButton=!1,!0;var e=a.Status;e&&c.indexOf(e.toLowerCase())>-1?(d.enableChangeVisibilityBulkButton=!1,b[e.toLowerCase()]+=1):a.isReadOnly&&(d.enableChangeVisibilityBulkButton=!1,b.readonly+=1)}),d.enableChangeVisibilityBulkButton?d.changeVisibilityButtonTitle=w.networkTableRowsSelected>1?"Change Visibility of the selected networks":"Change Visibility of the selected network":(d.changeVisibilityButtonTitle="Unable to change Visibility of the selected ",w.networkTableRowsSelected>1?(d.changeVisibilityButtonTitle+="networks: ",b.nonadmin>1?d.changeVisibilityButtonTitle+="you do not own "+b.nonadmin+" networks":1===b.nonadmin&&(d.changeVisibilityButtonTitle+="you do not own "+b.nonadmin+" network"),b.nonadmin>0&&(b.certified>0||b.failed>0||b.processing>0||b.readonly>0)&&(d.changeVisibilityButtonTitle+=", "),b.certified>1?d.changeVisibilityButtonTitle+=b.certified+" networks are certified":1===b.certified&&(d.changeVisibilityButtonTitle+=b.certified+" network is certified"),b.certified>0&&(b.failed>0||b.processing>0||b.readonly>0)&&(d.changeVisibilityButtonTitle+=", "),b.failed>1?d.changeVisibilityButtonTitle+=b.failed+" networks failed":1===b.failed&&(d.changeVisibilityButtonTitle+=b.failed+" network failed"),b.failed>0&&(b.processing>0||b.readonly>0)&&(d.changeVisibilityButtonTitle+=", "),b.processing>1?d.changeVisibilityButtonTitle+=b.processing+" networks are processing":1===b.processing&&(d.changeVisibilityButtonTitle+=b.processing+" network is processing"),b.processing>0&&b.readonly>0&&(d.changeVisibilityButtonTitle+=", "),b.readonly>1?d.changeVisibilityButtonTitle+=b.readonly+" networks are read-only":1===b.readonly&&(d.changeVisibilityButtonTitle+=b.readonly+" network is read-only")):(d.changeVisibilityButtonTitle+="network",b.nonadmin>0?d.changeVisibilityButtonTitle+=": you do not own it ":b.certified>0?d.changeVisibilityButtonTitle+=": it is certified ":b.failed>0?d.changeVisibilityButtonTitle+=": it is failed ":b.processing>0?d.changeVisibilityButtonTitle+=": it is processing ":b.readonly>0&&(d.changeVisibilityButtonTitle+=": it is read-only ")))},I=function(){var a=d.networkGridApi.selection.getSelectedRows();d.enableSetReadOnlyBulkButton=!0;var b={nonadmin:0,certified:0,failed:0,processing:0},c=Object.keys(b);_.forEach(a,function(a){if(a.ownerUUID!==w.loggedInIdentifier)return b.nonadmin+=1,d.enableSetReadOnlyBulkButton=!1,!0;var e=a.Status;e&&c.indexOf(e.toLowerCase())>-1&&(d.enableSetReadOnlyBulkButton=!1,b[e.toLowerCase()]+=1)}),d.enableSetReadOnlyBulkButton?d.setReadOnlNetworkButtonTitle=w.networkTableRowsSelected>1?"Change read-only flag of selected networks":"Change read-only flag of selected network":(d.setReadOnlNetworkButtonTitle="Unable change read-only flag of selected ",w.networkTableRowsSelected>1?(d.setReadOnlNetworkButtonTitle+="networks: ",b.nonadmin>1?d.setReadOnlNetworkButtonTitle+="you do not own "+b.nonadmin+" networks":1===b.nonadmin&&(d.setReadOnlNetworkButtonTitle+="you do not own "+b.nonadmin+" network"),b.nonadmin>0&&(b.certified>0||b.failed>0||b.processing>0)&&(d.setReadOnlNetworkButtonTitle+=", "),b.certified>1?d.setReadOnlNetworkButtonTitle+=b.certified+" networks are certified":1===b.certified&&(d.setReadOnlNetworkButtonTitle+=b.certified+" network is certified"),b.certified>0&&(b.failed>0||b.processing>0)&&(d.setReadOnlNetworkButtonTitle+=", "),b.failed>1?d.setReadOnlNetworkButtonTitle+=b.failed+" networks failed":1===b.failed&&(d.setReadOnlNetworkButtonTitle+=b.failed+" network failed"),b.failed>0&&b.processing>0&&(d.setReadOnlNetworkButtonTitle+=", "),b.processing>1?d.setReadOnlNetworkButtonTitle+=b.processing+" networks are processing":1===b.processing&&(d.setReadOnlNetworkButtonTitle+=b.processing+" network is processing")):(d.setReadOnlNetworkButtonTitle+="network",b.nonadmin>0?d.setReadOnlNetworkButtonTitle+=": you do not own it ":b.certified>0?d.setReadOnlNetworkButtonTitle+=": it is certified ":b.failed>0?d.setReadOnlNetworkButtonTitle+=": it is failed ":b.processing>0&&(d.setReadOnlNetworkButtonTitle+=": it is processing ")))},J=function(){var a=d.networkGridApi.selection.getSelectedRows();d.enableRemoveSharedNetworksBulkButton=!0,_.forEach(a,function(a){if(a.ownerUUID===w.loggedInIdentifier)return d.enableRemoveSharedNetworksBulkButton=!1,!1}),d.enableRemoveSharedNetworksBulkButton?d.removeFromMyNetworksButtonTitle=1===a.length?" Remove selected shared network from My Networks ":" Remove "+a.length+" selected shared networks from My Networks ":d.removeFromMyNetworksButtonTitle=" You can only remove networks that other NDEx users have shared with you "},K=function(){var a=d.networkGridApi.selection.getSelectedRows();d.enableDeleteBulkButton=!0;var b={nonadmin:0,certified:0,readonly:0},c=Object.keys(b);_.forEach(a,function(a){if(a.ownerUUID!==w.loggedInIdentifier)return b.nonadmin+=1,d.enableDeleteBulkButton=!1,!0;var e=a.Status;e&&c.indexOf(e.toLowerCase())>-1?(d.enableDeleteBulkButton=!1,b[e.toLowerCase()]+=1):a.isReadOnly&&(d.enableDeleteBulkButton=!1,b.readonly+=1)}),d.enableDeleteBulkButton?d.deleteNetworkButtonTitle=w.networkTableRowsSelected>1?"Delete selected networks":"Delete selected network":(d.deleteNetworkButtonTitle="Unable to delete selected ",w.networkTableRowsSelected>1?(d.deleteNetworkButtonTitle+="networks: ",b.nonadmin>1?d.deleteNetworkButtonTitle+="you do not own "+b.nonadmin+" networks":1===b.nonadmin&&(d.deleteNetworkButtonTitle+="you do not own "+b.nonadmin+" network"),b.nonadmin>0&&(b.certified>0||b.readonly>0||b.processing>0)&&(d.deleteNetworkButtonTitle+=", "),b.certified>1?d.deleteNetworkButtonTitle+=b.certified+" networks are certified":1===b.certified&&(d.deleteNetworkButtonTitle+=b.certified+" network is certified"),b.certified>0&&(b.readonly>0||b.processing>0)&&(d.deleteNetworkButtonTitle+=", "),b.readonly>1?d.deleteNetworkButtonTitle+=b.readonly+" networks are read-only":1===b.readonly&&(d.deleteNetworkButtonTitle+=b.readonly+" network is read-only"),b.readonly>0&&b.processing>0&&(d.deleteNetworkButtonTitle+=", "),b.processing>1?d.deleteNetworkButtonTitle+=b.processing+" networks are processing":1===b.processing&&(d.deleteNetworkButtonTitle+=b.processing+" network is processing")):(d.deleteNetworkButtonTitle+="network",b.nonadmin>0?d.deleteNetworkButtonTitle+=": you do not own it ":b.certified>0?d.deleteNetworkButtonTitle+=": it is certified ":b.readonly>0?d.deleteNetworkButtonTitle+=": it is read-only ":b.processing>0&&(d.deleteNetworkButtonTitle+=": it is processing ")))},L=function(){var a=d.networkGridApi.selection.getSelectedRows();d.enableShareBulkButton=!0;var b={nonadmin:0,failed:0,processing:0},c=Object.keys(b);_.forEach(a,function(a){if(a.ownerUUID!==w.loggedInIdentifier)return b.nonadmin+=1,d.enableShareBulkButton=!1,!0;var e=a.Status;e&&c.indexOf(e.toLowerCase())>-1&&(d.enableShareBulkButton=!1,b[e.toLowerCase()]+=1)}),d.enableShareBulkButton?d.shareNetworkButtonTitle=w.networkTableRowsSelected>1?"Share selected networks":"Share selected network":(d.shareNetworkButtonTitle="Unable to share selected ",w.networkTableRowsSelected>1?(d.shareNetworkButtonTitle+="networks: ",b.nonadmin>1?d.shareNetworkButtonTitle+="you do not own "+b.nonadmin+" networks":1===b.nonadmin&&(d.shareNetworkButtonTitle+="you do not own "+b.nonadmin+" network"),b.nonadmin>0&&(b.failed>0||b.processing>0)&&(d.shareNetworkButtonTitle+=", "),b.failed>1?d.shareNetworkButtonTitle+=b.failed+" networks failed":1===b.failed&&(d.shareNetworkButtonTitle+=b.failed+" network failed"),b.failed>0&&b.processing>0&&(d.shareNetworkButtonTitle+=", "),b.processing>1?d.shareNetworkButtonTitle+=b.processing+" networks are processing":1===b.processing&&(d.shareNetworkButtonTitle+=b.processing+" network is processing")):(d.shareNetworkButtonTitle+="network",b.nonadmin>0?d.shareNetworkButtonTitle+=": you do not own it ":b.failed>0?d.shareNetworkButtonTitle+=": it is failed ":b.processing>0&&(d.shareNetworkButtonTitle+=": it is processing ")))},M=function(){var a=d.networkGridApi.selection.getSelectedRows();d.enableExportBulkButton=!0;var b={failed:0,processing:0,collection:0},c=Object.keys(b);_.forEach(a,function(a){var e=a.Status;e&&c.indexOf(e.toLowerCase())>-1&&(d.enableExportBulkButton=!1,b[e.toLowerCase()]+=1)}),d.enableExportBulkButton?d.exportNetworkButtonTitle=w.networkTableRowsSelected>1?"Export selected networks":"Export selected network":(d.exportNetworkButtonTitle="Unable to export selected ",w.networkTableRowsSelected>1?(d.exportNetworkButtonTitle+="networks: ",b.failed>1?d.exportNetworkButtonTitle+=b.failed+" networks failed":1===b.failed&&(d.exportNetworkButtonTitle+=b.failed+" network failed"),b.failed>0&&(b.processing>0||b.collection>0)&&(d.exportNetworkButtonTitle+=", "),b.processing>1?d.exportNetworkButtonTitle+=b.processing+" networks are processing":1===b.processing&&(d.exportNetworkButtonTitle+=b.processing+" network is processing"),b.processing>0&&b.collection>0&&(d.exportNetworkButtonTitle+=", "),b.collection>1?d.exportNetworkButtonTitle+=b.collection+" networks are Cytoscape collection":1===b.collection&&(d.exportNetworkButtonTitle+=b.collection+" network is Cytoscape collection")):(d.exportNetworkButtonTitle+="network",b.failed>0?d.exportNetworkButtonTitle+=": it is failed ":b.processing>0?d.exportNetworkButtonTitle+=": it is processing ":b.collection>0&&(d.exportNetworkButtonTitle+=": it is a Cytoscape collection ")))},N=function(){var a=d.networkGridApi.selection.getSelectedRows();d.enableAddToMySetsBulkButton=!0;var b={failed:0},c=Object.keys(b);_.forEach(a,function(a){var e=a.Status;e&&c.indexOf(e.toLowerCase())>-1&&(d.enableAddToMySetsBulkButton=!1,b[e.toLowerCase()]+=1)}),d.enableAddToMySetsBulkButton?d.addToMySetsButtonTitle=w.networkTableRowsSelected>1?"Add selected networks to my set(s)":"Add selected network to my set(s)":(d.addToMySetsButtonTitle="Unable to add selected ",w.networkTableRowsSelected>1?(d.addToMySetsButtonTitle+="networks to my sets: ",b.failed>1?d.addToMySetsButtonTitle+=b.failed+" networks failed":1===b.failed&&(d.addToMySetsButtonTitle+=b.failed+" network failed")):(d.addToMySetsButtonTitle+="network to my sets",b.failed>0&&(d.addToMySetsButtonTitle+=": it is failed ")))},O=function(){d.networkGridApi.grid.options.columnDefs=[{field:"  ",enableFiltering:!1,maxWidth:42,cellTemplate:"views/gridTemplates/networkStatusOnMyAccountPage.html"},{field:"Network Name",enableFiltering:!0,cellTemplate:"views/gridTemplates/networkName.html"},{field:" ",enableFiltering:!1,width:40,cellTemplate:"views/gridTemplates/downloadNetwork.html"},{field:"Format",enableFiltering:!0,maxWidth:77,sort:{direction:l.DESC,priority:0},sortingAlgorithm:function(a,b){return a===b?0:"Set"===a?1:"Set"===b?-1:a<b?-1:1}},{field:"Ref.",enableFiltering:!1,maxWidth:45,cellTemplate:"views/gridTemplates/reference.html"},{field:"Edges",enableFiltering:!1,maxWidth:75,sortingAlgorithm:function(a,b){return a===b?0:a<b?-1:1}},{field:"Visibility",enableFiltering:!0,width:90,cellTemplate:"views/gridTemplates/visibility.html"},{field:"Owner",enableFiltering:!0,width:80,cellTemplate:"views/gridTemplates/ownedBy.html"},{field:"Last Modified",enableFiltering:!1,maxWidth:120,cellFilter:"date:'short'",sortingAlgorithm:function(a,b){var c=new Date(a),d=new Date(b);return c===d?0:c<d?-1:1}},{field:"Show",enableFiltering:!1,maxWidth:60,cellTemplate:"views/gridTemplates/showCase.html"},{field:"description",enableFiltering:!1,visible:!1},{field:"externalId",enableFiltering:!1,visible:!1},{field:"ownerUUID",enableFiltering:!1,visible:!1},{field:"name",enableFiltering:!1,visible:!1},{field:"errorMessage",enableFiltering:!1,visible:!1},{field:"subnetworks",enableFiltering:!1,visible:!1},{field:"isReadOnly",enableFiltering:!1,visible:!1},{field:"indexLevel",enableFiltering:!1,visible:!1}];var a=$("#myNetworksGridId");a.height($(window).height()-170),d.networkGridApi.grid.gridHeight=a.height()};d.networkGridOptions={enableSorting:!0,enableFiltering:!0,showGridFooter:!0,columnVirtualizationThreshold:20,enableColumnMenus:!1,enableRowHeaderSelection:!0,paginationPageSizes:[25,50,75],paginationPageSize:e.myAccountPageStates.table.networksPerPage,useExternalPagination:!0,saveFocus:!0,onRegisterApi:function(a){d.networkGridApi=a,O(),a.pagination.on.paginationChanged(d,function(a,b){z===a&&b===e.myAccountPageStates.table.networksPerPage||(b===e.myAccountPageStates.table.networksPerPage?1===a?f.path("/myAccount",!1):f.path("/myAccount/p"+a,!1):e.myAccountPageStates.table.networksPerPage=b,E.pageNumber=a,z=a,B="p"+z,E.pageSize=b,m.startSpinner("spinnerMyAccountPageId"),w.getNoOfNetworksAndSets(function(){w.loadNetworks()},function(){console.log("unable to get No of Networks and Sets for this account")}))}),a.core.on.rowsRendered(d,function(){if(setTimeout(d.networkGridApi.core.handleWindowResize,250),w.networkTableRowsSelected>0)for(var a=0;a<d.networkGridApi.grid.rows.length;a++){var b=d.networkGridApi.grid.rows[a];b.entity&&b.entity.externalId&&b.entity.externalId in d.selectedRowsNetworkExternalIds&&(d.networkGridApi.grid.rows[a].isSelected=!0)}d.refreshNetworksButtonDisabled=!1,G(),H(),I(),M(),L(),N(),J(),K()}),a.selection.on.rowSelectionChanged(d,function(a){if("Set"===a.entity.Status&&a.isSelected){a.isSelected=!1;var b=d.networkGridApi.grid.selection.selectedCount;if(b>0){d.networkGridApi.grid.selection.selectedCount=b-1;k.genericInfoModal("Cannot Select a Set","Cannot select a Set in this release. This feature will be added in future.")}}else a.isSelected?(d.selectedRowsNetworkExternalIds[a.entity.externalId]=a.entity.name,o.addUUIDToSelectedNetworks(a.entity.externalId)):(delete d.selectedRowsNetworkExternalIds[a.entity.externalId],o.deleteUUIDFromSelectedNetworks(a.entity.externalId)),w.networkTableRowsSelected=_.size(d.selectedRowsNetworkExternalIds),F(),G(),H(),I(),M(),L(),N(),J(),K()}),a.selection.on.rowSelectionChangedBatch(d,function(a){_.forEach(a,function(a){if("Set"===a.entity.Status){if(a.isSelected){a.isSelected=!1;var b=d.networkGridApi.grid.selection.selectedCount;b>0&&(d.networkGridApi.grid.selection.selectedCount=b-1)}}else a.isSelected?(d.selectedRowsNetworkExternalIds[a.entity.externalId]=a.entity.name,o.addUUIDToSelectedNetworks(a.entity.externalId)):(delete d.selectedRowsNetworkExternalIds[a.entity.externalId],o.deleteUUIDFromSelectedNetworks(a.entity.externalId))}),w.networkTableRowsSelected=_.size(d.selectedRowsNetworkExternalIds),F(),G(),H(),I(),M(),L(),N(),J(),K()}),a.core.on.sortChanged(d,function(a,b){Array.isArray(b)&&1===b.length?o.setPageSorting(B,b[0].name,b[0].sort):o.setPageSortingToUnsorted(B)}),a.core.on.filterChanged(d,function(){var a=this.grid;angular.forEach(a.columns,function(a){var b=a.filters[0].term,c=a.name;b?o.setFilterForPage(B,c,b):o.removeFilterFromPage(B,c)})})}},d.tasksAndRequestsGridOptions={enableSorting:!0,enableFiltering:!0,showGridFooter:!0,columnVirtualizationThreshold:20,enableColumnMenus:!1,enableRowHeaderSelection:!0,onRegisterApi:function(a){d.taskGridApi=a,a.core.on.rowsRendered(d,function(){setTimeout(d.taskGridApi.core.handleWindowResize,250),d.refreshTasksButtonDisabled=!1,w.taskTableRowsSelected>0&&_.forEach(d.taskGridApi.grid.rows,function(a){a.entity&&a.entity.taskId&&a.entity.taskId in d.selectedRowsTasksExternalIds&&(a.isSelected=!0)})}),a.selection.on.rowSelectionChanged(d,function(a){a.isSelected?(a.entity.taskId&&(d.selectedRowsTasksExternalIds[a.entity.taskId]=""),"export_network_to_file"===a.entity.typeFromServer&&"completed"===a.entity.Status&&w.numberOfDownloadableTasks++,"received"===a.entity.whatType&&w.numberOfReceivedRequests++):(a.entity.taskId&&delete d.selectedRowsTasksExternalIds[a.entity.taskId],"export_network_to_file"===a.entity.typeFromServer&&w.numberOfDownloadableTasks>0&&w.numberOfDownloadableTasks--,"received"===a.entity.whatType&&w.numberOfReceivedRequests>0&&w.numberOfReceivedRequests--),w.taskTableRowsSelected=_.size(d.selectedRowsTasksExternalIds)}),a.selection.on.rowSelectionChangedBatch(d,function(a){_.forEach(a,function(a){a.isSelected?(a.entity.taskId&&(d.selectedRowsTasksExternalIds[a.entity.taskId]=""),"export_network_to_file"===a.entity.typeFromServer&&"completed"===a.entity.Status&&w.numberOfDownloadableTasks++,"received"===a.entity.whatType&&w.numberOfReceivedRequests++):(a.entity.taskId&&delete d.selectedRowsTasksExternalIds[a.entity.taskId],"export_network_to_file"===a.entity.typeFromServer&&w.numberOfDownloadableTasks>0&&w.numberOfDownloadableTasks--,"received"===a.entity.whatType&&w.numberOfReceivedRequests>0&&w.numberOfReceivedRequests--)}),w.taskTableRowsSelected=_.size(d.selectedRowsTasksExternalIds)})}},w.tasksAndRequestsGridOptions=d.tasksAndRequestsGridOptions,d.showTasksAndRequestsTable=function(){return w.pendingRequests.length>0||w.sentRequests.length>0||w.tasks.length>0};var P=function(){d.taskGridApi.grid.options.columnDefs=[{field:"New",enableFiltering:!0,width:60,sort:{direction:"desc",priority:5},cellTemplate:"views/gridTemplates/taskOrRequestNew.html"},{field:"Status",enableFiltering:!0,maxWidth:80,cellTemplate:"views/gridTemplates/taskOrRequestStatus.html"},{field:"Type",enableFiltering:!0,width:150,cellTemplate:"views/gridTemplates/taskOrRequestType.html"},{field:"Description",enableFiltering:!0,cellTemplate:"views/gridTemplates/taskOrRequestDescription.html"},{field:"Created",enableFiltering:!1,maxWidth:120,cellFilter:"date:'short'",sort:{direction:"desc",priority:5}},{field:"Delete",enableFiltering:!1,maxWidth:60,cellTemplate:"views/gridTemplates/deleteTask.html"},{field:"taskId",enableFiltering:!1,visible:!1},{field:"ownerUUID",enableFiltering:!1,visible:!1},{field:"typeFromServer",enableFiltering:!1,visible:!1},{field:"newTask",enableFiltering:!1,visible:!1},{field:"newSent",enableFiltering:!1,visible:!1},{field:"newReceived",enableFiltering:!1,visible:!1},{field:"whatType",enableFiltering:!1,visible:!1}];var a=$("#myTasksAndRequestsGridId");a.height($(window).height()-170),d.taskGridApi.grid.gridHeight=a.height()};d.getCredentialsForExportedNetworkDownload=function(c){var d=a.getNdexServerUri()+"/task/"+c+"/file?download=true",e=document.createElement("a");if("google"===window.currentSignInType)e.setAttribute("href",d+"&id_token="+gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token);else if("basic"===window.currentSignInType){var f=b.getUserCredentials();e.setAttribute("href",d+"&auth_token="+btoa(f.userName+":"+f.token))}e.setAttribute("type","hidden"),document.body.appendChild(e),e.click(),e.remove()},w.downloadSelectedTasks=function(){for(var a=_.filter(d.taskGridApi.selection.getSelectedRows(),{typeFromServer:"export_network_to_file",Status:"completed"}),b=a.length,c=0;c<b;c++){var e=a[c].taskId;setTimeout(d.getCredentialsForExportedNetworkDownload,500*c,e)}},d.enabledManageRequestsBulkButton=function(){return w.numberOfReceivedRequests>0},d.enabledBulkDownloadButton=function(){return w.numberOfDownloadableTasks>0},d.markAsRead=function(b){if(!("sent"===b.whatType&&b.newSent&&"accepted"!==b.Status&&"declined"!==b.Status||!b.newTask&&!b.newSent)){var c={};"task"===b.whatType?(c.newTask=!1,a.updateTaskPropertiesV2(b.taskId,c,function(){b.newTask=!1,b.New="&nbsp;&nbsp;",w.numberOfNewTasksAndRequests>0&&w.numberOfNewTasksAndRequests--,d.taskGridApi.core.refresh()},function(){console.log("unable to update task")})):"sent"===b.whatType&&(c.newSent=!1,a.updateRequestPropertiesV2(b.taskId,c,function(){b.newSent=!1,b.New="&nbsp;&nbsp;",w.numberOfNewTasksAndRequests>0&&w.numberOfNewTasksAndRequests--,d.taskGridApi.core.refresh()},function(){console.log("unable to update request")}))}},d.showSetInfo=function(a){var b=_.find(w.networkSets,{externalId:a}),c=JSON.parse(JSON.stringify(b));j.showSetInfo(c)},d.stripHTML=function(a){if(!a)return"";var b=toMarkdown(a);return $("<html>"+b+"</html>").text()};var Q=function(){d.networkGridOptions.data=[],_.forEach(w.networkSets,function(a){w.addNetworkSetToTable(a)});for(var a=0;a<w.networkSearchResults.length;a++){var b=w.networkSearchResults[a],c=j.getSubNetworkInfo(b),e=c.numberOfSubNetworks,f=c.id,g="success";b.errorMessage?g="failed":b.isValid?b.isCertified&&(g="certified"):g="processing","success"===g&&b.warnings&&b.warnings.length>0&&(g="warning");var h=b.name?b.name:"No name; UUID : "+b.externalId;"failed"===g?h="Invalid Network. UUID: "+b.externalId:e>=1&&(g="collection");var i=d.stripHTML(b.description),k=b.externalId,l=parseInt(b.edgeCount),m=b.owner,n=b.indexLevel,p=b.visibility,q=new Date(b.modificationTime),r=b.isShowcase,s=f?j.getNetworkFormat(f,b):j.getNetworkFormatForMultipleSubNetworks(b),t="Download "+h,u=j.getNetworkReferenceObj(f,b),v=b.errorMessage?b.errorMessage:"",x={Status:g,"Network Name":h,Download:t,Format:s,Reference:u,Edges:l,Visibility:p,Owner:m,"Last Modified":q,Show:r,description:i,externalId:k,ownerUUID:b.ownerUUID,name:h,errorMessage:v,subnetworks:e,isReadOnly:b.isReadOnly,indexLevel:n};d.networkGridOptions.data.push(x)}w.showNetworkTable=_.size(d.networkGridOptions.data)>0,d.networkGridApi.grid.options.paginationCurrentPage=z,o.clearPreviousFiltersAndSetNewOnes(d.networkGridApi.grid,B),o.clearPreviousSortingAndSetNewOne(d.networkGridApi.grid,B)},R=function(){d.tasksAndRequestsGridOptions.data=[];var a=0;_.forEach(w.tasks,function(b){var c=b.taskType.toLowerCase(),e=b.creationTime,f=b.description,g=b.externalId,h=b.taskOwnerId,i=b.status.toLowerCase();if(c&&"EXPORT_NETWORK_TO_FILE"===c.toUpperCase()&&b.attributes){var j=b.attributes.downloadFileName;"processing"===i?f="Exporting "+j+"...":"completed"===i&&(f="Download "+j)}"export_network_to_file"===c&&(c="export network to file");var k=!b.ownerProperties||void 0===b.ownerProperties.newTask||b.ownerProperties.newTask,l="New!";!k||"failed"!==i&&"completed"!==i?l=" ":a++;var m={New:l,Status:i,Type:c,Description:f,Created:e,Delete:"delete",taskId:g,ownerUUID:h,typeFromServer:b.taskType.toLowerCase(),newTask:k,newSent:!1,newReceived:!1,whatType:"task"};d.tasksAndRequestsGridOptions.data.push(m)}),_.forEach(w.pendingRequests,function(b){var c="unknown";if(b.requestType){var e=b.requestType.toLowerCase();"usernetworkaccess"===e?c="user network access":"groupnetworkaccess"===e?c="group network access":"joingroup"===e&&(c="received join group")}var f=b.creationTime,g=b.sourceName+" requests "+_.startCase(b.permission.toLowerCase())+" access to "+b.destinationName,h=b.externalId,i=b.requesterId,j=b.response.toLowerCase(),k=!b.properties||void 0===b.properties.newReceived||b.properties.newReceived,l="New!";k?a++:l=" ";var m=b.requestType.toLowerCase(),n={New:l,Status:j,Type:c,Description:g,Created:f,Delete:"delete",taskId:h,ownerUUID:i,typeFromServer:m,newTask:!1,newSent:!1,newReceived:k,whatType:"received"};d.tasksAndRequestsGridOptions.data.push(n)}),_.forEach(w.sentRequests,function(b){var c="unknown";b.requestType&&("usernetworkaccess"===b.requestType.toLowerCase()?c="user network access":"groupnetworkaccess"===b.requestType.toLowerCase()?c="group network access":"joingroup"===b.requestType.toLowerCase()&&(c="sent join group"));var e=b.creationTime,f=b.sourceName+" requests "+_.startCase(b.permission.toLowerCase())+" access to "+b.destinationName,g=b.externalId,h=b.requesterId,i=b.response.toLowerCase(),j=!b.properties||void 0===b.properties.newSent||b.properties.newSent,k="New!";!j||"accepted"!==i&&"declined"!==i?k=" ":a++;var l=b.requestType.toLowerCase(),m={New:k,Status:i,Type:c,Description:f,Created:e,Delete:"delete",taskId:g,ownerUUID:h,typeFromServer:l,newTask:!1,newSent:j,newReceived:!1,whatType:"sent"};d.tasksAndRequestsGridOptions.data.push(m)}),w.numberOfNewTasksAndRequests=a};w.getNoOfSelectedNetworksOnCurrentPage=function(){return d.networkGridApi&&d.networkGridApi.selection?d.networkGridApi.selection.getSelectedRows().length:0},w.getTaskFileExt=function(a){return a.format?"BIOPAX"===a.format.toUpperCase()?"owl":a.format.toLowerCase()+".gz":""},w.getNetworkDownloadName=function(a){var b=_.find(w.tasks,{externalId:a});if(b&&void 0!==b.attributes){return(void 0===b.attributes.downloadFileName?b.externalId:b.attributes.downloadFileName.replace(/ /g,"_"))+"."+(void 0===b.attributes.downloadFileExtension?"txt":w.getTaskFileExt(b))}},w.getNetworkName=function(a){return void 0===a.attributes||void 0===a.attributes.downloadFileName?a.externalId:a.attributes.downloadFileName},w.removeSharedSelectedNetworks=function(){var a=d.networkGridApi.selection.getSelectedRows(),b=d.networkGridApi.selection.getSelectedRows().length,c=b>1?"Remove Selected Shared Networks":"Remove Selected Shared Network",f=b>1?"Another NDEx user has shared these "+b+" networks with you and  removing them from your account might prevent you from accessing them in the future. <br><br>Are you sure you want to remove these shared networks?":"Another NDEx user has shared this network with you and  removing it from your account might prevent you from accessing it in the future. <br><br>Are you sure you want to remove this shared network?",g=!1,h=!1,i=0;k.openConfirmationModal(c,f,"Remove","Cancel",!1,function(c){d.isProcessing=!0,e.confirmButtonDisabled=!0,p(a,function(a){if(!g&&!h)return q(a.externalId).then(function(){i++,w.networkTableRowsSelected>0&&w.networkTableRowsSelected--,delete d.selectedRowsNetworkExternalIds[a.externalId],o.deleteUUIDFromSelectedNetworks(a.externalId),e.progress="Removed: "+i+" of "+b+" selected networks",e.progress2="Removed: "+a.name,i!==b&&d.isProcessing||(d.networkGridApi.grid.selection.selectedCount=w.networkTableRowsSelected,w.checkAndRefreshMyNetworksTableAndDiskInfo(),setTimeout(function(){delete e.progress,delete e.progress2,delete e.errors,delete e.confirmButtonDisabled,d.isProcessing=!1,c.dismiss()},1e3))})}).catch(function(a){h=!0;e.errors=a.data&&a.data.message?"Unable to remove: "+a.data.message:".",d.networkGridApi.grid.selection.selectedCount=w.networkTableRowsSelected,w.checkAndRefreshMyNetworksTableAndDiskInfo()})},function(a){d.isProcessing=!1,0===i||h?(a.dismiss(),delete e.progress,delete e.progress2,delete e.errors,delete e.confirmButtonDisabled):(g=!0,setTimeout(function(){delete e.progress,delete e.progress2,delete e.errors,delete e.confirmButtonDisabled,a.dismiss()},1e3))})};var S=function(a){var b=a.selected,c=a.readOnly,f=a.nonAdmin,g=a.networks,h=g.length,i="",j="";if(c>0||f>0)return j=1===b?"Cannot Delete Selected Network":"Cannot Delete Selected Networks",1===b?(i="The selected network cannot be deleted: ",i+=1===c&&1===f?" you are not an owner and it is read-only.":1===c?" it is read-only.":1===f?" you are not an owner.":"."):(i="The selected "+b+" networks cannot be deleted: ",0===c?i+=f===b?" you are not an owner.":1===f?" you are not an owner of "+f+" network.":" you are not an owner of "+f+" networks.":0===f?i+=c===b?" they are read-only.":1===c?c+" network is read-only.":c+" networks are read-only.":(i+=1===f?" you do not own 1 network":" you do not own "+f+" networks",i+=1===c?" and 1 network is read-only.":" and "+c+" networks are read-only.")),void k.genericInfoModal(j,i);e.progress=null,e.progress2=null,e.errors=null,e.confirmButtonDisabled=!1;var l=0,m=!1,n=!1;j=h>1?"Delete Selected Networks":"Delete Selected Network",i=h>1?"The selected "+h+" networks ":"The selected network ",i+="will be permanently deleted from NDEx. Are you sure you want to proceed?",k.openConfirmationModal(j,i,"Confirm","Cancel",!1,function(a){d.isProcessing=!0,e.confirmButtonDisabled=!0,p(g,function(b){if(!m&&!n)return r(b).then(function(){l++,w.networkTableRowsSelected>0&&w.networkTableRowsSelected--,delete d.selectedRowsNetworkExternalIds[b.externalId],o.deleteUUIDFromSelectedNetworks(b.externalId),e.progress="Deleted: "+l+" of "+h+" selected networks",e.progress2="Deleted: "+b.name,l!==h&&d.isProcessing||(d.networkGridApi.grid.selection.selectedCount=w.networkTableRowsSelected,w.checkAndRefreshMyNetworksTableAndDiskInfo(),setTimeout(function(){delete e.progress,delete e.progress2,delete e.errors,delete e.confirmButtonDisabled,d.isProcessing=!1,a.dismiss()},1e3))})}).catch(function(a){n=!0;e.errors=a.data&&a.data.message?"Unable to delete: "+a.data.message:".",d.networkGridApi.grid.selection.selectedCount=w.networkTableRowsSelected,w.checkAndRefreshMyNetworksTableAndDiskInfo()})},function(a){d.isProcessing=!1,0===l||n?(a.dismiss(),delete e.progress,delete e.progress2,delete e.errors,delete e.confirmButtonDisabled):(m=!0,setTimeout(function(){delete e.progress,delete e.progress2,delete e.errors,delete e.confirmButtonDisabled,a.dismiss()},1e3))})};w.checkAndDeleteSelectedNetworks=function(){j.findWhatSelectedNetworksCanBeModified(w,"admin",function(a){S(a)},function(){k.genericInfoModal("Unable To Get Info About Selected Networks","Unable To Get Info About Selected Networks.")})},w.checkAndMarkAsRead=function(){var a=_.map(d.taskGridApi.selection.getSelectedRows(),function(a){return"sent"===a.whatType&&a.newSent&&"accepted"!==a.Status&&"declined"!==a.Status||!a.newTask&&!a.newSent?null:{id:a.taskId,typeFromServer:a.typeFromServer,ownerUUID:a.ownerUUID}});a=_.without(a,null);var b=a.length,c=w.taskTableRowsSelected,f="",g="";if(0===b&&c>0)return f=1===c?"Cannot Mark Selected Task":"Cannot Mark Selected Tasks",g=1===c?"The selected task cannot be marked as read.":"The selected "+c+" tasks can not be marked as read.",void k.genericInfoModal(f,g);b>1?(f="Mark Selected Tasks",g=b!==c?b+" of the selected "+c+" tasks will be marked as read. Are you sure you want to proceed?":"The selected "+b+" tasks will be marked as read. Are you sure you want to proceed?"):(f="Mark Selected Task",g=c>1?b+" of the selected "+c+" tasks will be marked as read. Are you sure you want to proceed?":"The selected task will be marked as read. Are you sure you want to proceed?");e.progress=null,e.progress2=null,e.errors=null,e.confirmButtonDisabled=!1;var h=0,i=!1,j=!1;k.openConfirmationModal(f,g,"Mark As Read","Cancel",!1,function(c){d.isProcessing=!0,e.confirmButtonDisabled=!0,p(a,function(a){if(!i&&!j)return s(a).then(function(){h++,e.progress="Marked: "+h+" of "+b+" selected tasks",h!==b&&d.isProcessing||(w.checkAndRefreshMyTaskAndNotification(),setTimeout(function(){delete e.progress,delete e.progress2,delete e.errors,delete e.confirmButtonDisabled,d.isProcessing=!1,c.dismiss()},1e3))})}).catch(function(a){j=!0;e.errors=a.data&&a.data.message?"Unable to mark: "+a.data.message:".",w.checkAndRefreshMyTaskAndNotification()})},function(a){d.isProcessing=!1,0===h||j?(a.dismiss(),delete e.progress,delete e.progress2,delete e.errors,delete e.confirmButtonDisabled):(i=!0,setTimeout(function(){delete e.progress,delete e.progress2,delete e.errors,delete e.confirmButtonDisabled,a.dismiss()},1e3))})},w.checkAndDeleteSelectedTasks=function(){var a=_.sumBy(d.taskGridApi.selection.getSelectedRows(),function(a){
return a.newReceived?1:0}),b=w.taskTableRowsSelected,c="",f="";if(a===b)return c=1===a?"Cannot Delete Selected Task":"Cannot Delete Selected Tasks",f=1===a?"The selected task is received and cannot be deleted.":"All of "+a+" selected tasks are received and cannot be deleted.",void k.genericInfoModal(c,f);var g=b-a;g>1?(c="Remove Selected Tasks",f=a>0?g+" of the selected "+b+" tasks will be deleted. Are you sure you want to proceed?":"The selected "+g+" tasks will be deleted. Are you sure you want to proceed?"):(c="Remove Selected Task",f=a>0?g+" of the selected "+b+" tasks will be deleted. Are you sure you want to proceed?":"The selected task will be deleted. Are you sure you want to proceed?");e.progress=null,e.progress2=null,e.errors=null,e.confirmButtonDisabled=!1;var h=0,i=!1,j=!1;k.openConfirmationModal(c,f,"Delete","Cancel",!1,function(a){d.isProcessing=!0,e.confirmButtonDisabled=!0;var b=d.taskGridApi.selection.getSelectedRows(),c=_.map(b,function(a){return a.newReceived?null:{id:a.taskId,typeFromServer:a.typeFromServer,ownerUUID:a.ownerUUID}});p(_.without(c,null),function(b){if(!i&&!j)return t(b).then(function(){h++;var c=b.id;w.taskTableRowsSelected--,delete d.selectedRowsTasksExternalIds[c],e.progress="Deleted: "+h+" of "+g+" selected tasks",h!==g&&d.isProcessing||(w.checkAndRefreshMyTaskAndNotification(),d.taskGridApi.grid.selection.selectedCount=w.taskTableRowsSelected,setTimeout(function(){delete e.progress,delete e.progress2,delete e.errors,delete e.confirmButtonDisabled,d.isProcessing=!1,a.dismiss()},1e3))})}).catch(function(a){j=!0,e.errors=a.data&&a.data.message?"Unable to delete: "+a.data.message:".",w.checkAndRefreshMyTaskAndNotification(),d.taskGridApi.grid.selection.selectedCount=w.taskTableRowsSelected})},function(a){d.isProcessing=!1,0===h||j?(a.dismiss(),delete e.progress,delete e.progress2,delete e.errors,delete e.confirmButtonDisabled):(i=!0,setTimeout(function(){delete e.progress,delete e.progress2,delete e.errors,delete e.confirmButtonDisabled,a.dismiss()},1e3))})},w.manageSelectedRequests=function(){var a=_.filter(d.taskGridApi.selection.getSelectedRows(),{whatType:"received"}),b=a.length;e.progress=null,e.progress2=null,e.errors=null;var c=0,f=!1,g=!1,h="Respond to "+b+" Selected "+(b>1?"Requests":"Request");k.openManageBulkRequestsModal(h,null,"Accept","Decline","Cancel",function(h,i,j){var k=i?"Accepted: ":"Declined: ";d.isProcessing=!0,p(a,function(a){if(!f&&!g)return u(a,i,j).then(function(){c++,e.progress=k+c+" of "+b+" selected requests",c!==b&&d.isProcessing||(w.checkAndRefreshMyTaskAndNotification(),setTimeout(function(){delete e.progress,delete e.progress2,delete e.errors,h.dismiss()},1e3))})}).catch(function(a){g=!0;e.errors=a.data&&a.data.message?"Unable to process request: "+a.data.message:".",w.checkAndRefreshMyTaskAndNotification()})},function(a){0===c||g?(a.dismiss(),delete e.progress,delete e.progress2,delete e.errors):(f=!0,setTimeout(function(){delete e.progress,delete e.progress2,delete e.errors,a.dismiss()},1e3))})},w.genericInfoModal=function(a,b){i.open({templateUrl:"views/generic-info-modal.html",scope:d,controller:["$scope","$modalInstance",function(c,d){c.title=a,c.message=b,c.close=function(){d.dismiss()}}]})},w.manageBulkAccess=function(a,b){c.setSelectedNetworkIDs(d.selectedRowsNetworkExternalIds),c.setCurrentUserId(b),f.path(a)},w.allTasksCompleted=function(){for(var a,b=0;b<w.tasks.length;b++)if(a=w.tasks[b],"PROCESSING"===a.status.toUpperCase())return!1;return!0},w.getIDsOfSelectedNetworks=function(){return Object.keys(d.selectedRowsNetworkExternalIds)},w.getSummariesOfSelectedNetworks=function(){var a=d.networkGridApi.selection.getSelectedRows(),b={};_.forEach(a,function(a){b[a.externalId]=null});var c=[];return _.forEach(w.networkSearchResults,function(a){a.externalId in b&&c.push(a)}),c},w.updateVisibilityOfNetworks=function(a,b){var c=d.networkGridApi.selection.getSelectedRows();_.forEach(c,function(c){c.externalId in a&&(c.Visibility=b)}),_.forEach(w.networkSearchResults,function(c){c.externalId in a&&(c.visibility=b)})},w.updateShowcaseOfNetworks=function(a,b){var c=d.networkGridApi.selection.getSelectedRows();_.forEach(c,function(c){c.externalId in a&&(c.Show=b)}),_.forEach(w.networkSearchResults,function(c){c.externalId in a&&(c.isShowcase=b)})},w.updateReadOnlyOfNetworks=function(a,b){var c=d.networkGridApi.selection.getSelectedRows();_.forEach(c,function(c){c.externalId in a&&(c.isReadOnly=b)}),_.forEach(w.networkSearchResults,function(c){c.externalId in a&&(c.isReadOnly=b)})},w.updateDescriptionOfNetworks=function(a,b){var c=b?d.stripHTML(b):b,e=d.networkGridApi.selection.getSelectedRows();_.forEach(e,function(b){b.externalId in a&&(b.description=c)}),_.forEach(w.networkSearchResults,function(b){b.externalId in a&&(b.description=c)})},w.updateReferenceOfNetworks=function(a,b){var c=d.networkGridApi.selection.getSelectedRows();_.forEach(c,function(c){c.externalId in a&&(c.Reference=b)})},w.setAndDisplayCurrentNetwork=function(a){f.path("/network/"+a)};var T=function(a){for(var b=!1,c=0;c<w.originalGroupSearchResults.length;c++)if(a.externalId===w.originalGroupSearchResults[c].externalId){b=!0;break}return b};w.searchGroupsFromUserInput=function(){var b=w.groupSearchString;a.searchGroupsV2(b,0,1e6,function(a){if(w.groupSearchResults=[],a&&a.resultList&&a.resultList.length>0)for(var b=0;b<a.resultList.length;b++){var c=a.resultList[b];T(c)&&w.groupSearchResults.push(c)}},function(){console.log("unable to search groups")})},w.getUserGroupMemberships=function(b){a.getUserGroupMembershipsV2(w.identifier,b,0,1e6,function(b){var c=Object.keys(b);a.getGroupsByUUIDsV2(c).success(function(a){w.groupSearchResults=a,w.originalGroupSearchResults=a}).error(function(){console.log("unable to get groups by UUIDs")})},function(){console.log("unable to get user group memberships")})},w.getAllNetworkSetsOwnedByUser=function(b,c){a.getAllNetworkSetsOwnedByUserV2(w.identifier,-1,-1,function(a){w.networkSets=_.orderBy(a,["modificationTime"],["desc"]),b(w.networkSets[0])},function(a,b){console.log("unable to get network sets"),c(a,b)})},w.addNetworkSetToTable=function(a){var b=a.name,e=d.stripHTML(a.description),f=a.networks.length,g=a.externalId,h=j.getSetReferenceObj(a),i=a.visibility?a.visibility:"PUBLIC",k=c.getCurrentUserAccountName(),l=new Date(a.modificationTime),m=a.showcased,n={Status:"Set","Network Name":b," ":"",Format:"Set",Reference:h,Disease:"",Tissue:"",Edges:"",Visibility:i,Owner:k,"Last Modified":l,Show:m,description:e,externalId:g,ownerUUID:a.ownerId,name:b,errorMessage:"",subnetworks:0,networks:f};d.networkGridOptions.data.push(n)},w.adminCheckBoxClicked=function(){var a=w.groupSearchAdmin?"GROUPADMIN":null;w.groupSearchMember=!1,w.getUserGroupMemberships(a)},w.memberCheckBoxClicked=function(){var a=w.groupSearchMember?"MEMBER":null;w.groupSearchAdmin=!1,w.getUserGroupMemberships(a)},d.getLoggedInUserUUID=function(){return w.loggedInIdentifier},d.deleteTask=function(b){if("export_network_to_file"===b.typeFromServer){if(b.ownerUUID!==w.loggedInIdentifier)return void alert("You cannot delete this task since you are not the owner.");var c=b.taskId;w.deleteTask(c,function(){_.remove(d.tasksAndRequestsGridOptions.data,{taskId:c}),_.remove(w.tasks,{externalId:c}),b.newTask&&"queued"!==b.Status&&"processing"!==b.Status&&w.numberOfNewTasksAndRequests>0&&w.numberOfNewTasksAndRequests--,c in d.selectedRowsTasksExternalIds&&(delete d.selectedRowsTasksExternalIds[c],d.taskGridApi.grid.selection.selectedCount=w.taskTableRowsSelected=_.size(d.selectedRowsTasksExternalIds))},function(){console.log("unable to delete task")})}else if("usernetworkaccess"===b.typeFromServer||"groupnetworkaccess"===b.typeFromServer){if(b.ownerUUID!==w.loggedInIdentifier)return void alert("You cannot delete this request since you are not the owner.");var e={requesterId:b.ownerUUID,externalId:b.taskId};a.deletePermissionRequestV2(e,function(){_.remove(d.tasksAndRequestsGridOptions.data,{taskId:b.taskId}),_.remove(w.sentRequests,{externalId:b.taskId}),(b.newSent&&"pending"!==b.Status||b.newReceived)&&w.numberOfNewTasksAndRequests>0&&w.numberOfNewTasksAndRequests--,b.taskId in d.selectedRowsTasksExternalIds&&(delete d.selectedRowsTasksExternalIds[c],d.taskGridApi.grid.selection.selectedCount=w.taskTableRowsSelected=_.size(d.selectedRowsTasksExternalIds))},function(){console.log("unable to delete request")})}else if("joingroup"===b.typeFromServer){if(b.ownerUUID!==w.loggedInIdentifier)return void alert("You cannot delete this request since you are not the owner.");var f={requesterId:b.ownerUUID,externalId:b.taskId};a.deleteMembershipRequestV2(f,function(){_.remove(d.tasksAndRequestsGridOptions.data,{taskId:b.taskId}),_.remove(w.sentRequests,{externalId:b.taskId}),(b.newSent||b.newReceived)&&w.numberOfNewTasksAndRequests>0&&w.numberOfNewTasksAndRequests--,b.taskId in d.selectedRowsTasksExternalIds&&(delete d.selectedRowsTasksExternalIds[c],d.taskGridApi.grid.selection.selectedCount=w.taskTableRowsSelected=_.size(d.selectedRowsTasksExternalIds))},function(){console.log("unable to delete request")})}},w.deleteTask=function(b,c,d){a.deleteTaskV2(b,function(){c&&c()},function(){console.log("unable to delete task"),d&&d()})},w.getTasks=function(b,c){a.getUserTasksV2("ALL",0,0,function(a){w.tasks=a,b&&b()},function(){console.log("unable to get user's tasks"),c&&c()})};var U=function(a){var b=[];if(!a||0===a.length)return b;for(var c=0;c<a.length;c++){var d=a[c].requesterId;b.indexOf(d)<0&&b.push(d)}return b},V=function(a,b){if(b&&a&&0!==b.length&&0!==a.length)for(var c=0;c<a.length;c++)if(!a[c].requestType||"usernetworkaccess"===a[c].requestType.toLowerCase())for(var d=a[c].requesterId,e=0;e<b.length;e++)d===b[e].externalId&&(a[c].sourceName=b[e].firstName+" "+b[e].lastName)};w.getSentRequests=function(b,c){a.getUserPermissionRequestsV2(w.identifier,"sent",function(d){var e=U(d);a.getUsersByUUIDsV2(e).success(function(e){V(d,e),w.sentRequests=d,a.getUserMembershipRequestsV2(w.identifier,"sent",function(a){a&&a.length>0&&(w.sentRequests=w.sentRequests.concat(a)),b()},function(){console.log("unable to get sent requests"),c()})}).error(function(){console.log("unable to get users by UUIDs"),c()})},function(){console.log("unable to get sent requests"),c()})},w.getReceivedRequests=function(b,c){a.getUserPermissionRequestsV2(w.identifier,"received",function(d){var e=U(d);a.getUsersByUUIDsV2(e).success(function(e){V(d,e),w.pendingRequests=d,a.getUserMembershipRequestsV2(w.identifier,"received",function(a){a&&a.length>0&&(w.pendingRequests=w.pendingRequests.concat(a)),b()},function(){console.log("unable to get pending requests"),c()})}).error(function(){console.log("unable to get users by UUIDs"),c()})},function(){console.log("unable to get pending requests"),c()})},w.getUserAccountPageNetworks=function(b,c){var d=w.networkSets.length;d>=E.pageSize&&b();var e=0,f=0;d>0&&d<E.pageSize?f=E.pageSize-d:0===d&&0===E.networkSetCount?(e=(E.pageNumber-1)*E.pageSize,f=E.pageSize):0===d&&E.networkSetCount>0&&(e=(E.pageNumber-1)*E.pageSize-E.networkSetCount,f=E.pageSize),a.getUserAccountPageNetworksV2(w.identifier,e,f,function(d){w.networkSearchResults=d,0===_.size(d)&&b();var e=_.map(d,"externalId");a.getNetworkPermissionsByUUIDsV2(e,function(a){var c=_.invertBy(a),d=c.ADMIN,e=c.WRITE,f=c.READ;w.networksWithAdminAccess=d?_.invert(d):{},w.networksWithWriteAccess=e?_.invert(e):{},w.networksWithReadAccess=f?_.invert(f):{},_.forEach(w.networkSearchResults,function(a){var b=j.getNoOfSubNetworks(a);b>=1&&(w.networksWithMultipleSubNetworks[a.externalId]=b)}),b()},function(){console.log("unable to get user network permissions for the logged in user"),c()})},function(){console.log("unable to get user account page networks"),c()})};var W=function(){d.selectedRowsNetworkExternalIds={},w.networkTableRowsSelected=0,d.networkGridApi.grid.selection.selectedCount=0,o.noNetworksSelected()||(_.forEach(d.networkGridOptions.data,function(a){var b=a.externalId;o.isUUIDInSelectedNetworks(b)&&(d.networkGridApi.selection.selectRow(a,null),d.selectedRowsNetworkExternalIds[b]=a.name)}),w.networkTableRowsSelected=_.size(d.selectedRowsNetworkExternalIds),d.networkGridApi.grid.selection.selectedCount=w.networkTableRowsSelected)};w.getUserNetworksAndPopulateTable=function(a,b){w.getUserAccountPageNetworks(function(){Q(),W(),a&&a()},function(){b&&b()})},d.showWarningsOrErrors=function(a){if(a||a.externalId)if(a.subnetworks>=1){k.genericInfoModal("Warning","This network is part of a Cytoscape collection and cannot be operated on or edited in NDEx.")}else j.showNetworkWarningsOrErrors(a,w.networkSearchResults)},d.switchShowcase=function(b){if(b&&b.entity){var c=!b.entity.Show;if("Set"===b.entity.Status){var d=_.find(w.networkSets,{externalId:b.entity.externalId});if(c){var e=d.networks?d.networks:[],f=0;if(_.forEach(w.networkSearchResults,function(a){_.includes(e,a.externalId)&&"PRIVATE"===a.visibility.toUpperCase()&&(f+=1)}),f>0){var g="";g=1===f?f+"  network in this Set is private  and will not be visible to other users. <br><br>":f+" networks in this Set are private  and will not be visible to other users. <br><br>";g+="Do you want to proceed and activate the Showcase function?";k.openConfirmationModal("Activate Showcase function",g,"Proceed","Cancel",!0,function(){a.updateNetworkSetSystemPropertiesV2(b.entity.externalId,"showcase",c,function(){b.entity.Show=!b.entity.Show,d.showcased=b.entity.Show},function(a,b){console.log("unable to update showcase for Network Set with Id "+b)})},function(){})}else a.updateNetworkSetSystemPropertiesV2(b.entity.externalId,"showcase",c,function(){b.entity.Show=!b.entity.Show,d.showcased=b.entity.Show},function(a,b){console.log("unable to update showcase for Network Set with Id "+b)})}else a.updateNetworkSetSystemPropertiesV2(b.entity.externalId,"showcase",c,function(){b.entity.Show=!b.entity.Show,d.showcased=b.entity.Show},function(a,b){console.log("unable to update showcase for Network Set with Id "+b)})}else a.setNetworkSystemPropertiesV2(b.entity.externalId,"showcase",c,function(){b.entity.Show=!b.entity.Show},function(a){var c=j.formatErrorMessage("Unable to change showcase for network <strong>"+b.entity.name+"</strong>",a);k.genericInfoModal("Unable to Change Showcase",c)})}},d.getNetworkURL=function(a){return"#/network/"+a},d.downloadNetwork=function(a){j.downloadCXNetwork(a.externalId)},d.isOwnerOfNetwork=function(a){return!!w.isLoggedInUser&&w.loggedInIdentifier===a},d.failedNetworkWarning=function(b){var c=b.name,d=b.errorMessage,e=b.Status,f=b.externalId,g="<strong>Name: </strong>"+c+"<br><strong>Status: </strong>"+e+"<br><strong>Error Message: </strong>"+d+"<br><br><strong>Would you like to permanently DELETE this network?</strong>";k.openConfirmationModal("This Network is Invalid",g,"Delete","Cancel",!0,function(){a.deleteNetworkV2(f,function(){for(var a=w.networkSearchResults.length-1;a>=0;a--){if(w.networkSearchResults[a].externalId===f){w.networkSearchResults.splice(a,1),Q();break}}},function(){console.log("unable to delete network")})},function(){})},d.updateLastTimeVisitedMyTasksTimestamp=function(){w.displayedUser.properties.lastTimeVisitedMyTasksTab=(new Date).getTime(),a.updateUserV2(w.displayedUser,function(){},function(){})},d.isEditProfileDropDownButtonDisabled=function(){var a=!d.enableEditPropertiesBulkButton&&!d.enableChangeVisibilityBulkButton&&!d.enableSetReadOnlyBulkButton;return d.editProfileDropDownBulkButtonTitle=a?w.networkTableRowsSelected>1?"No editing options are available for the selected networks":"No editing options are available for the selected network":"",a},w.getNoOfNetworksAndSets=function(b,c){a.getNumberOfNetworksInUsersAccountPageV2(w.identifier,function(a){E.networkCount=a.networkCount,E.networkSetCount=a.networkSetCount,d.networkGridOptions.totalItems=E.networkCount+E.networkSetCount,b&&b()},function(){c&&c()})},w.checkAndRefreshMyNetworksTableAndDiskInfo=function(){w.getNoOfNetworksAndSets(function(){w.loadNetworks()},function(){console.log("unable to get No of Networks and Sets for this account")})},d.checkAndRefreshMyNetworksTableAndDiskInfo=function(){d.refreshNetworksButtonDisabled||(x>0&&-1!==y&&clearInterval(y),m.startSpinner("spinnerMyAccountPageId"),w.checkAndRefreshMyNetworksTableAndDiskInfo())},w.checkAndRefreshMyTaskAndNotification=function(){w.loadTasksAndRequests()},d.checkAndRefreshMyTaskAndNotification=function(){d.refreshTasksButtonDisabled||(x>0&&-1!==y&&clearInterval(y),w.checkAndRefreshMyTaskAndNotification())},w.refreshMyNetworksTableAndDiskInfo=function(b,c){a.getUserByUUIDV2(w.identifier).success(function(e){w.displayedUser=e,d.diskSpaceInfo=j.showAvailableDiskSpace(e),E.networkSetCount>0?a.getAllNetworkSetsOwnedByUserV2(w.identifier,(E.pageNumber-1)*E.pageSize,E.pageSize,function(a){w.networkSets=_.orderBy(a,["modificationTime"],["desc"]),w.getUserNetworksAndPopulateTable(b,c)},function(){console.log("unable to get network sets"),c()}):(w.networkSets=[],w.getUserNetworksAndPopulateTable(b,c))})},w.loadNetworksTasksAndRequests=function(){w.loadNetworks(),w.loadTasksAndRequests()};var X=function(){d.networksTasksAndRequestsReceived()&&(m.stopSpinner(),d.refreshTasksButtonDisabled=!1,x>0&&(-1!==y&&clearInterval(y),y=setInterval(w.loadNetworksTasksAndRequests,1e3*x)))};w.loadNetworks=function(){d.resetNetworksFlag(),d.refreshNetworksButtonDisabled=!0,w.refreshMyNetworksTableAndDiskInfo(function(){D=!0,X(),d.refreshNetworksButtonDisabled=!1},function(){D=!0,X(),d.refreshNetworksButtonDisabled=!1})},d.loadTasksAndRequests=function(){w.loadTasksAndRequests()},w.loadTasksAndRequests=function(){d.resetTasksAndRequestsReceivedFlags(),d.refreshTasksButtonDisabled=!0,w.getTasks(function(){d.tasksReceived=!0,X()},function(){d.tasksReceived=!0,X()}),w.getSentRequests(function(){d.sentRequestsReceived=!0,X()},function(){d.sentRequestsReceived=!0,X()}),w.getReceivedRequests(function(){d.receivedRequestsReceived=!0,X()},function(){d.receivedRequestsReceived=!0,X()})},d.$watchGroup(["tasksReceived","sentRequestsReceived","receivedRequestsReceived"],function(){d.tasksReceived&&d.sentRequestsReceived&&d.receivedRequestsReceived&&(C||(C=!0,P()),R())},!0),m.startSpinner("spinnerMyAccountPageId"),w.getNoOfNetworksAndSets(function(){w.loadNetworksTasksAndRequests()},function(){console.log("unable to get No of Networks and Sets for this account")}),$(window).resize(function(){var a=$("#myNetworksGridId");a.height($(window).height()-170),d.networkGridApi.grid.gridHeight=a.height(),d.networkGridApi.core.refresh();var b=$("#myTasksAndRequestsGridId");b.height($(window).height()-170),d.taskGridApi.grid.gridHeight=b.height(),d.taskGridApi.core.refresh()});w.getUserGroupMemberships(null),angular.element(document).ready(function(){$(window).trigger("resize")})}]),angular.module("ndexApp").run(["$templateCache",function(a){"use strict";a.put("views/confirmationModal.html",'<div class="modal-content"> <div class="modal-header"> <h5 class="modal-title"><strong><span ng-bind-html="title"></span></strong></h5> </div> <div class="modal-body"> <div class="wrapLongLine"> <br> <span ng-bind-html="message"></span> </div> <div ng-if="progress"> <br> <strong><span style="color: green; font-size: 1.1em" ng-bind-html="progress"></span></strong> </div> <div ng-if="progress2"> <strong><span style="color: green; font-size: 1.1em" ng-bind-html="progress2"></span></strong> </div> <div ng-if="errors" class="text-danger" style="word-wrap:break-word"> <br> <strong><span style="font-size: 1.1em" ng-bind-html="errors"></span></strong> </div> <div id="confirmationSpinnerId"></div> </div> <div class="modal-footer"> <button ng-class="cancelButtonDisabled ? \'btn btn-default disabled\' : \'btn btn-default\'" ng-click="cancel()"> {{cancelLabel}} </button> <button ng-class="confirmButtonDisabled ? \'btn btn-primary disabled\' : \'btn btn-primary\' " ng-click="confirm()"> {{confirmLabel}} </button> </div> </div> \x3c!--\n<div class="modal-content">\n\n    <div class="modal-header">\n        <h5 class="modal-title"><strong><span ng-bind-html="title"></span></strong></h5>\n    </div>\n\n    <div class="modal-body wrapLongLine" style="max-height:520px; overflow:auto">\n        <span ng-bind-html=\'message\'></span>\n    </div>\n\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">{{cancelLabel}}</button>\n        <button class="btn btn-primary" ng-click="confirm()">{{confirmLabel}}</button>\n    </div>\n\n</div>\n--\x3e'),a.put("views/context-modal.html",'<div class="modal-content"> <form class="form-horizontal" role="form" ng-submit="save()"> <div class="modal-header"> <h4 class="modal-title">@context</h4> </div> <div class="modal-body" style="max-height:520px; overflow:auto"> <div class="form-group"> <div class="container"> \x3c!------------- USER LOGGED IN AND HAS EDIT PERMISSIONS ----------------\x3e <div class="row" style="margin-bottom: 5px" ng-if="isEdit && !contextIsEmpty"> <div class="col-sm-3 col-3 col-xs-3 col-md-3"> <span style="font-size: medium; font-weight: bold">Namespace</span> </div> <div class="col-sm-8 col-8 col-xs-8 col-md-8"> <span style="font-size: medium; font-weight: bold">URL</span> </div> <div class="col-sm-1 col-1 col-xs-1 col-md-1"> </div> </div> <div class="row" ng-if="isEdit"> <div class="col-sm-12 col-12 col-xs-12 col-md-12" ng-show="contextIsEmpty"> <div class="alert alert-warning" role="alert">No namespaces defined for this network. Click the Add button below to define a namespace</div> </div> <div class="col-sm-12 col-12 col-xs-12 col-md-12" ng-show="!contextIsEmpty"> <div class="row" style="margin-bottom: 5px" ng-repeat="rec in context"> <div class="col-sm-3 col-3 col-xs-3 col-md-3" style="width:170px"> <input name="{{rec.namespace}}_tb" type="text" class="form-control" placeholder="Namespace" ng-model="rec.namespace"> </div> <div class="col-sm-8 col-8 col-xs-8 col-md-8" style="width:520px"> <input name="{{rec.url}}value_tb" type="text" class="form-control" placeholder="Url" ng-model="rec.url" required> </div> <div class="col-sm-1 col-1 col-xs-1 col-md-1" style="width:60px"> <button class="btn btn-link" style="padding-top:0px; padding-bottom: 0px" ng-click="removeContext($index);"><i class="fa fa-times" style="color: #D9534F; margin-top: 10px" aria-hidden="true"></i></button> </div> </div> </div> </div> <div class="row" style="margin-bottom: 10px" ng-if="isEdit"> <div> \x3c!--                            <div class="row" style="margin-bottom: 5px;" ng-repeat="atc in addTheseContexts">\n                                <div class="col-sm-3">\n                                    <input name="{{atc.namespace}}_tb" type="text" class="form-control" placeholder="Namespace" ng-model="atc.namespace">\n                                </div>\n                                <div class="col-sm-8"> --\x3e \x3c!--<input name="{{atc.url}}value_tb" type="url" class="form-control" placeholder="Url" ng-model="atc.url"\n                                           pattern="^(https?://)?([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,6}$" required>--\x3e \x3c!--                                    <input name="{{atc.url}}value_tb" type="text" class="form-control" placeholder="Url" ng-model="atc.url" required>\n                                </div>\n                                <div class="col-sm-1">\n                                    <button class="btn btn-link" style="padding-top:0px; padding-bottom: 0px;" ng-click="removeCustomContext($index);"><i class="fa fa-times" style="color: #D9534F; margin-top: 10px;" aria-hidden="true"></i></button>\n                                </div>\n                            </div>  --\x3e </div> </div> <div class="row" ng-if="isEdit"> <div class="col-sm-2"> <button class="actionsLabel btn btn-primary ng-scope" ng-click="addContext()"> <i class="fa fa-plus" aria-hidden="true"></i> Add </button> </div> </div> \x3c!------------- USER NOT LOGGED IN AND/OR DOES NOT HAVE EDIT PERMISSIONS ----------------\x3e <div class="row" ng-if="!isEdit"> <div class="col-sm-12 col-12 col-xs-12 col-md-12"> <div class="row" style="margin-bottom: 5px" ng-show="!contextIsEmpty"> <div class="col-sm-3"> <span style="font-size: medium; font-weight: bold">Namespace</span> </div> <div class="col-sm-9"> <span style="font-size: medium; font-weight: bold">URL</span> </div> </div> <div class="row" ng-repeat="rec in context"> <div class="col-sm-3 col-3 col-xs-3 col-md-3" style="width:170px"> <div class="well well-sm"><span style="font-size: medium">{{rec.namespace}}</span></div> </div> <div class="col-sm-9 col-9 col-xs-9 col-md-9"> <div class="well well-sm"><span style="font-size: medium">{{rec.url}}</span></div> </div> </div> <div class="row" ng-show="contextIsEmpty"> <div class="col-sm-12 col-12 col-xs-12 col-md-12"> <div class="alert alert-warning" role="alert">No namespaces defined for this network. </div>\x3c!--To learn more about @context click here--\x3e </div> </div> </div> </div> </div> </div> <div class="text-danger" style="word-wrap:break-word"> <strong> {{errors}} </strong> </div> </div> <div class="modal-footer"> <button class="btn btn-default" type="button" ng-if="isEdit" ng-click="close()">Cancel</button> <button class="btn btn-default" type="button" ng-if="!isEdit" ng-click="close()">Close</button> <button class="btn btn-success" type="submit" ng-if="isEdit">Save</button> </div> </form> </div> '),a.put("views/directives/accountImage.html",'<img ng-class="ndexClass" ng-src="{{ndexSrc}}">'),a.put("views/directives/bulkEditNetworkPropertyModal.html",'<div class="modal-content"> <form class="form-horizontal" role="form" ng-submit="submit()"> <div class="modal-header"> <h4 class="modal-title">{{title}}</h4> </div> <div class="modal-body"> <div class="rowWithOneLineTopPad"> {{text}} </div> <div class="form-group rowWithTwoLinesTopPad" ng-show="action==\'description\'"> <label class="col-sm-3 control-label">Description</label> <div class="col-sm-8"> <text-angular ta-toolbar="[[&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;p&quot;,&quot;pre&quot;],[&quot;bold&quot;,&quot;italics&quot;,&quot;underline&quot;,&quot;clear&quot;],[&quot;justifyLeft&quot;,&quot;justifyCenter&quot;],[&quot;html&quot;,&quot;insertLink&quot;]]" ta-toolbar-class="btn-toolbar" ta-toolbar-group-class="btn-group btn-group-xs" ta-toolbar-button-class="btn btn-default" ta-toolbar-button-active-class="active" ta-default-wrap="null" ng-model="network.description"> </text-angular> </div> </div> <div class="form-group rowWithTwoLinesTopPad" ng-show="action==\'reference\'"> <label class="col-sm-3 control-label">Reference</label> <div class="col-sm-8"> <text-angular ta-toolbar="[[&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;p&quot;,&quot;pre&quot;],[&quot;bold&quot;,&quot;italics&quot;,&quot;underline&quot;,&quot;clear&quot;],[&quot;justifyLeft&quot;,&quot;justifyCenter&quot;],[&quot;html&quot;,&quot;insertLink&quot;]]" ta-toolbar-class="btn-toolbar" ta-toolbar-group-class="btn-group btn-group-xs" ta-toolbar-button-class="btn btn-default" ta-toolbar-button-active-class="active" ta-default-wrap="null" ng-model="network.reference"> </text-angular> </div> </div> <div class="form-group rowWithTwoLinesTopPad" ng-show="action==\'version\'"> <label class="col-sm-3 control-label">Version</label> <div class="col-sm-8"> <input type="text" class="form-control" placeholder="1.0" ng-model="network.version"> </div> </div> <div class="form-group rowWithTwoLinesTopPad" ng-show="action==\'visibility\'" ng-init="network.visibility=\'[Select Network Visibility]\'"> <div class="row"> <label class="col-sm-3 control-label">Visibility</label> <div class="col-sm-5"> \x3c!--<select class="form-control input-sm" ng-model="network.visibility">--\x3e <select class="form-control input-sm" ng-model="network.visibilityIndex"> <option value>[Select Network Visibility] </option> <option value="PUBLIC">Public </option> <option value="PUBLIC_NOT_INDEXED">Public (not searchable)</option> <option value="PRIVATE">Private </option> <option value="PRIVATE_NOT_INDEXED">Private (not searchable)</option> </select> </div> </div> <div class="row rowWithOneLineTopPad" ng-show="(network.visibilityIndex == \'PUBLIC\') || (network.visibilityIndex == \'PRIVATE\') ||\n                            (network.visibilityIndex == \'PUBLIC_NOT_INDEXED\')"> <div class="col-sm-3"></div> <div class="col-sm-5"> <a ng-show="(network.visibilityIndex == \'PUBLIC\') || (network.visibilityIndex == \'PUBLIC_NOT_INDEXED\')" ng-click="network.showcase = !network.showcase" style="text-decoration: none; color: #656565"> <span class="fa-stack"> <i class="fa fa-square-o fa-stack-2x"></i> <i ng-show="network.showcase" class="fa fa-check fa-stack-1x"></i> </span> <strong>Showcase</strong> </a> \x3c!--\n                        <a ng-show="(network.visibilityIndex == \'PUBLIC\') || (network.visibilityIndex == \'PRIVATE\')"\n                            ng-click="network.fullIndex = !network.fullIndex" style="text-decoration: none; color: #656565;">\n                            <span ng-if="network.visibilityIndex == \'PUBLIC\'"><br></span>\n                            <span class="fa-stack">\n                                <i class="fa fa-square-o fa-stack-2x"></i>\n                                <i ng-show="network.fullIndex" class="fa fa-check fa-stack-1x"></i>\n                            </span>\n\n                            <strong>Full Index</strong>\n                        </a>\n--\x3e </div> </div> </div> <div class="form-group rowWithTwoLinesTopPad" ng-show="action==\'readOnly\'" ng-init="network.readOnly=\'[Select Network Read-Only Flag]\'"> <label class="col-sm-3 control-label">Read-Only Flag</label> <div class="col-sm-5"> <select class="form-control input-sm" ng-model="network.readOnly"> <option>[Select Network Read-Only Flag]</option> <option value="SET">Set the flag</option> <option value="UNSET">Unset the flag</option> </select> </div> </div> <div ng-if="progress1"> <strong><span style="color: green; font-size: 1.1em" ng-bind-html="progress1"></span></strong> </div> <div ng-if="progress2"> <strong><span style="color: green; font-size: 1.1em" ng-bind-html="progress2"></span></strong> </div> <div ng-show="errors" class="text-danger"> <br> <strong><span style="font-size: 1.1em" ng-bind-html="errors"></span></strong> </div> </div> <div class="modal-footer"> <a class="btn btn-default" type="button" ng-click="cancel()">Cancel</a> <button class="btn btn-primary" type="submit" ng-disabled="isProcessing || errorFromServer" ng-show="action==\'version\' || action==\'reference\' || action==\'description\'"> {{network.submitButtonLabel}} </button> <button class="btn btn-primary" type="submit" ng-disabled="isProcessing || !network.visibilityIndex || network.visibilityIndex==\'[Select Network Visibility]\' || errorFromServer" ng-show="action==\'visibility\'"> {{network.submitButtonLabel}} </button> <button class="btn btn-primary" type="submit" ng-disabled="isProcessing || network.readOnly==\'[Select Network Read-Only Flag]\' || errorFromServer" ng-show="action==\'readOnly\'"> {{network.submitButtonLabel}} </button> </div> </form> </div>'),
a.put("views/directives/bulkExportNetwork.html",'<div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">{{title}}</h4> </div> <div class="modal-body"> <div class="rowWithOneLineTopPad"> Choose the export format using the dropdown menu below. The NDEx team will be adding other export options in future updates. </div> <h5> <strong> Export Format: <span class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown"> {{networkExporterName}} <span class="caret"></span> </a> <ul class="dropdown-menu" ng-if="exporters.length > 0"> <li ng-repeat="exporter in exporters"> <a ng-click="exporterSelected(exporter)">{{exporter.name}}</a> </li> </ul> </span> </strong> </h5> <div ng-if="exporters.length > 0" style="border:1px; border-style:solid; border-color:#428BCA; padding: 1em; background-color:#f9f9f9"> {{description}} </div> </div> <div class="modal-footer"> <button class="btn btn-default" ng-click="close()">Cancel</button> <button class="btn btn-primary" ng-click="exportNetworks()" ng-disabled="isProcessing  || exporters.length == 0">{{exportButtonLabel}}</button> </div> </div>'),a.put("views/directives/bulkNetworkAccessModal.html",'<div class="modal-content"> <form class="form-horizontal" name="manageBulkNetworkAccessForm" role="form" ng-submit="submit()"> <div class="modal-header"> <h4 class="modal-title">Select Access to Grant</h4> </div> <div class="modal-body"> <div class="rowWithOneLineTopPad">This will create a background task to grant the selected access to the selected users for the selected networks. </div> <div class="rowWithOneLineTopPad"> Please choose Access below: </div> <h5><strong> Access: <span class="dropdown"> <a href class="dropdown-toggle" data-toggle="dropdown"> {{accessType.permission}} <span class="caret"></span> </a> <ul class="dropdown-menu"> <li> <a class="dropdown-toggle" ng-click="accessType.permission = &quot;Read&quot;"><small>Read (Users and Groups)</small></a> </li> <li> <a class="dropdown-toggle" ng-click="accessType.permission = &quot;Edit&quot;"><small>Edit (Users and Groups)</small></a> </li> <li> <a class="dropdown-toggle" ng-click="accessType.permission = &quot;Admin&quot;"><small>Admin (Users)</small></a> </li> </ul> </span> </strong></h5> <div ng-if="progress"> <br> <strong><span style="color: green; font-size: 1.1em" ng-bind-html="progress"></span></strong> </div> <div ng-if="errors" class="text-danger"> <br> <strong>{{errors}}</strong> </div> </div> <div class="modal-footer"> <a type="cancel" class="btn btn-default" ng-click="cancel()">Cancel </a> <button type="submit" class="btn btn-primary" ng-disabled="accessType.permission==\'\' || isProcessing"> Grant Access </button> </div> </form> </div>'),a.put("views/directives/changePasswordModal.html",'<div class="modal-content"> <form name="changePasswordForm" class="form-horizontal" role="form" ng-submit="submit()"> <div class="modal-header"> <h4 class="modal-title">Change Password</h4> </div> <div class="modal-body"> <div class="form-group rowWithOneLineTopPad"> <label class="col-md-3 control-label">New Password</label> <div class="col-md-7"> <input name="password" type="password" class="form-control" ng-model="change.newPassword" placeholder="New Password" required> </div> </div> <div class="form-group"> <label class="col-md-3 control-label">Confirm Password</label> <div class="col-md-7"> <input name="confirmPassword" type="password" class="form-control" ng-model="change.newPasswordConfirm" placeholder="Confirm Password" required> </div> </div> <div class="text-danger"> <strong> {{errors}} </strong> </div> </div> <div class="modal-footer"> <a class="btn btn-default" ng-click="cancel()">Cancel</a> <button class="btn btn-primary" type="submit" ng-disabled="errors || !changePasswordForm.password.$valid || !changePasswordForm.confirmPassword.$valid"> Change</button> </div> </form> </div>'),a.put("views/directives/choiceOfThreeModal.html",'<div class="modal-content"> <div class="modal-header"> <h5 class="modal-title"><strong><span ng-bind-html="title"></span></strong></h5> </div> <div class="modal-body"> <div class="wrapLongLine"> <br> <span ng-bind-html="message"></span> </div> <div ng-if="progress"> <br> <strong><span style="color: green; font-size: 1.1em" ng-bind-html="progress"></span></strong> </div> <div ng-if="progress2"> <strong><span style="color: green; font-size: 1.1em" ng-bind-html="progress2"></span></strong> </div> <div ng-if="errors" class="text-danger"> <br> <strong><span style="font-size: 1.1em" ng-bind-html="errors"></span></strong> </div> <div id="confirmationSpinnerId"></div> </div> <div class="modal-footer"> <button ng-if="cancelButtonLabel" ng-class="cancelButtonDisabled ? \'btn btn-default disabled\' : \'btn btn-default\'" ng-click="cancel()">{{cancelButtonLabel}} </button> <button ng-if="choiceOneButtonLabel" ng-class="choiceOneButtonDisabled ? \'btn btn-primary disabled\' : \'btn btn-primary\' " ng-click="choiceOne()">{{choiceOneButtonLabel}} </button> <button ng-if="choiceTwoButtonLabel" ng-class="choiceTwoButtonDisabled ? \'btn btn-primary disabled\' : \'btn btn-primary\' " ng-click="choiceTwo()">{{choiceTwoButtonLabel}} </button> </div> </div>'),a.put("views/directives/confirmationModal.html",'<div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">{{title}}</h4> </div> <div class="modal-body"> <div> <br> {{message}} </div> <div ng-if="progress"> <br> <strong><span style="color: green; font-size: 1.1em" ng-bind-html="progress"></span></strong> </div> <div ng-if="progress2"> <strong><span style="color: green; font-size: 1.1em" ng-bind-html="progress2"></span></strong> </div> <div ng-if="errors" class="text-danger"> <br> <strong>{{errors}}</strong> </div> </div> <div class="modal-footer"> <button class="btn btn-default" ng-click="cancel()">Cancel</button> <button class="btn btn-primary" ng-click="confirm()" ng-disabled="isProcessing">Confirm</button> </div> </div>'),a.put("views/directives/createGroupModal.html",'<div class="modal-content"> <form class="form-horizontal" name="createGroupForm" role="form" ng-submit="submit()"> <div class="modal-header"> <h4 class="modal-title">Create Group</h4> </div> <div class="modal-body"> <div class="form-group rowWithOneLineTopPad"> <label class="col-sm-3 control-label">Group Name</label> <div class="col-sm-8"> <input type="text" id="groupName" name="groupName" type="groupName" class="form-control" placeholder="Group Name" required="required" ng-model="group.groupName"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Website</label> <div class="col-sm-8"> <input type="text" class="form-control" placeholder="e.g. www.ndexbio.com" ng-model="group.website"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Image Host</label> <div class="col-sm-8"> <input type="text" class="form-control" placeholder="e.g. http://i.imgur.com/09oVvZg.jpg" ng-model="group.image"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Description</label> <div class="col-sm-8"> <text-angular ta-toolbar="[[&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;p&quot;,&quot;pre&quot;],[&quot;bold&quot;,&quot;italics&quot;,&quot;underline&quot;,&quot;clear&quot;],[&quot;justifyLeft&quot;,&quot;justifyCenter&quot;],[&quot;html&quot;,&quot;insertLink&quot;]]" ta-toolbar-class="btn-toolbar" ta-toolbar-group-class="btn-group btn-group-xs" ta-toolbar-button-class="btn btn-default" ta-toolbar-button-active-class="active" ta-default-wrap="div" ng-model="group.description"> </text-angular> </div> </div> <div class="text-danger"> <strong> {{errors}} </strong> </div> </div> <div class="modal-footer"> <a type="cancel" class="btn btn-default" ng-click="cancel()">Cancel</a> <button type="submit" class="btn btn-primary" ng-disabled="errors || !createGroupForm.groupName.$valid"> Create</button> </div> </form> </div>'),a.put("views/directives/createNetworkSetModal.html",'<div class="modal-content"> <form class="form-horizontal" name="createNetworkSetForm" role="form" ng-submit="submit()"> <div class="modal-header"> <h4 class="modal-title">{{title}}</h4> </div> <div class="modal-body"> <div class="form-group rowWithOneLineTopPad"> <label class="col-sm-3 control-label">Network Set Name</label> <div class="col-sm-8"> <input type="text" id="networkSetName" name="networkSetName" type="networkSetName" class="form-control" placeholder="Network Set Name" required="required" ng-model="networkSet.networkSetName"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Description</label> <div class="col-sm-8"> <text-angular ta-toolbar="[[&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;p&quot;,&quot;pre&quot;],[&quot;bold&quot;,&quot;italics&quot;,&quot;underline&quot;,&quot;clear&quot;],[&quot;justifyLeft&quot;,&quot;justifyCenter&quot;],[&quot;html&quot;,&quot;insertLink&quot;]]" ta-toolbar-class="btn-toolbar" ta-toolbar-group-class="btn-group btn-group-xs" ta-toolbar-button-class="btn btn-default" ta-toolbar-button-active-class="active" ta-default-wrap="null" ng-model="networkSet.description"> </text-angular> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Reference</label> <div class="col-sm-8"> <text-angular ta-toolbar="[[&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;p&quot;,&quot;pre&quot;],[&quot;bold&quot;,&quot;italics&quot;,&quot;underline&quot;,&quot;clear&quot;],[&quot;justifyLeft&quot;,&quot;justifyCenter&quot;],[&quot;html&quot;,&quot;insertLink&quot;]]" ta-toolbar-class="btn-toolbar" ta-toolbar-group-class="btn-group btn-group-xs" ta-toolbar-button-class="btn btn-default" ta-toolbar-button-active-class="active" ta-default-wrap="null" ng-model="networkSet.properties.reference"> </text-angular> </div> </div> <div class="text-danger"> <strong> {{errors}} </strong> </div> </div> <div class="modal-footer"> <a type="cancel" class="btn btn-default" ng-click="cancel()">Cancel</a> <button type="submit" class="btn btn-primary" ng-click="submit()" ng-disabled="errors || isProcessing"> Create New Set</button> </div> </form> </div>'),a.put("views/directives/createRequestGroup.html",'<div class="modal-content">  <div class="modal-body" ng-hide="false"> <h5><strong> Ask to join {{request.groupName}}! </strong></h5> <span class="dropdown"> <a href class="dropdown-toggle" data-toggle="dropdown"> {{request.permissionLabel}} <span class="caret"></span> </a> <ul class="dropdown-menu"> <li> <a class="dropdown-toggle" ng-click="request.permissionLabel = &quot;Is admin&quot;"><small>Is Admin</small></a> </li> <li> <a class="dropdown-toggle" ng-click="request.permissionLabel = &quot;Is member&quot;"><small>Is Member</small></a> </li> </ul> </span> <hr> <strong>Message</strong> <textarea class="form-control" rows="3" placeholder ng-model="request.message"></textarea> <div class="text-danger text-center"> <br> <strong> {{request.error}} </strong> </div> </div> <div class="modal-footer" ng-hide="false"> <a class="btn btn-default" ng-click="close()">Cancel</a> <button type="submit" class="btn btn-primary" ng-click="submitRequest()">Send</button> </div>  </div>'),a.put("views/directives/createRequestNetwork.html",'<div class="modal-content"> <div class="modal-body" ng-hide="false"> <h5><strong> <div class="wrapLongLine"> Ask for access to {{request.destinationName}}! </div> </strong></h5> <span class="dropdown"> <a href class="dropdown-toggle" data-toggle="dropdown"> {{modal.permissionLabel}}<span class="caret"></span> </a> <ul class="dropdown-menu"> \x3c!--\n\t\t\t<li>\n\t\t\t  <a class="dropdown-toggle" ng-click=\'modal.permissionLabel = "Is admin"\'><small>Is Admin</small></a>\n\t\t\t</li>\n\t\t\t--\x3e <li ng-show="privileges==\'None\' || privileges==\'Read\'"> <a class="dropdown-toggle" ng-click="modal.permissionLabel = &quot;Can edit&quot;"><small>Can edit</small></a> </li> <li ng-show="privileges==\'None\'"> <a class="dropdown-toggle" ng-click="modal.permissionLabel = &quot;Can read&quot;"><small>Can read</small></a> </li> </ul> </span> <span>&nbspfor&nbsp</span> <span class="dropdown"> <a href class="dropdown-toggle" data-toggle="dropdown"> {{request.sourceName}}<span class="caret"></span> </a> <ul class="dropdown-menu"> <li ng-repeat="account in accounts"> <a class="dropdown-toggle" ng-click="request.sourceName = ((account.groupName) ? account.groupName : account.userName); selected.account=account"> <small>{{account.groupName}} {{account.userName}}</small> </a> </li> </ul> </span> <hr> <strong>Message</strong> <textarea class="form-control" rows="3" placeholder ng-model="request.message"></textarea> <div class="text-success"> <br> <strong>{{request.progress}}</strong> </div> <div class="text-danger text-center"> <br> <strong> {{request.error}} </strong> </div> </div> <div class="modal-footer" ng-hide="false"> <button class="btn btn-default" ng-click="close()">Cancel</button> <button class="btn btn-primary" ng-click="submitRequest()">Send</button> </div> </div>'),a.put("views/directives/downloadBelNamespace.html",'<span style="cursor: pointer" ng-click="openMe()" ng-transclude></span> <script type="text/ng-template" id="download-bel-namespace-modal.html"><div class=\'modal-content\'>\n        <form class="form-horizontal" role="form" ng-submit=\'submit()\'>\n\n            <div class="modal-header">\n                <h4 class="modal-title">{{title}}</h4>\n            </div>\n\n            <div class=\'modal-body\'>\n\n\n                <div class="form-group">\n                    <label class="col-sm-3 control-label">Network </label>\n                    <div class="col-sm-8">\n                        <p class="form-control-static">{{ndexNetworkName}}</p>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <label class="col-sm-3 control-label">Namespace</label>\n                    <div class="col-sm-4">\n                        <select ng-model="namespace.selectedNameSpace"\n                                class="form-control"\n                                ng-options="namespace as namespace.prefix for namespace in nameSpaces">\n                        </select>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <label class="col-sm-3 control-label">URI</label>\n                    <div class="col-sm-8">\n                        <p class="form-control-static wrapLongLine">{{namespace.selectedNameSpace.uri}}</p>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <label class="col-sm-3 control-label text-danger"  ng-if="errors">Error </label>\n                    <div class="col-sm-8" ng-if="errors">\n                        <p class="form-control-static text-danger" >{{errors}}</p>\n                    </div>\n                </div>\n\n                <div class=\'modal-footer\' ng-hide=\'false\'>\n                    <button class=\'btn btn-default\' ng-click=\'close()\'>Close</button>\n                    <button class=\'btn btn-primary\' ng-click=\'viewNameSpace()\' ng-disabled=\'isProcessing\'>View Namespace</button>\n                </div>\n\n            </div>\n\n        </form>\n\n    </div><\/script> <script type="text/ng-template" id="bel-namespace-show-contents.html"><div class=\'modal-content belNamespaceFileModalSize\'>\n        <form class="form-horizontal" role="form" ng-submit=\'submit()\'>\n\n            <div class="modal-header">\n                <h4 class="modal-title">BEL Namespace file for prefix {{namespace.prefixForTitle}}</h4>\n            </div>\n\n            <div class="modal-body my-modal-body-size">\n                <span class="belNamespaceFileModal"\n                      ng-bind-html="namespace.namespaceFileContents"\n                      id="namespaceFileContentsId">\n                </span>\n            </div>\n\n'+"            <div class='modal-footer' ng-hide='false'>\n                <button class='btn btn-default' ng-click='namespace.close()'>Close</button>\n                <button class='btn btn-primary' ng-click='namespace.saveToFile()' ng-disabled='errors'>Download Namespace</button>\n            </div>\n\n        </form>\n\n    </div><\/script>"),a.put("views/directives/editGroupModal.html",'<div class="modal-content"> <form class="form-horizontal" role="form" ng-submit="submit()"> <div class="modal-header"> <h4 class="modal-title">Edit Group Profile</h4> </div> <div class="modal-body"> <div class="form-group rowWithOneLineTopPad"> <label class="col-sm-3 control-label">Group Name</label> <div class="col-sm-8"> <input type="text" readonly="readonly" class="form-control" placeholder="Group Name" ng-model="group.groupName"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Website</label> <div class="col-sm-8"> <input type="text" class="form-control" placeholder="e.g. www.ndexbio.com" ng-model="group.website"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Image Host</label> <div class="col-sm-8"> <input type="text" class="form-control" placeholder="e.g. http://i.imgur.com/09oVvZg.jpg" ng-model="group.image"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Description</label> <div class="col-sm-8"> <text-angular ta-toolbar="[[&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;p&quot;,&quot;pre&quot;],[&quot;bold&quot;,&quot;italics&quot;,&quot;underline&quot;,&quot;clear&quot;],[&quot;justifyLeft&quot;,&quot;justifyCenter&quot;],[&quot;html&quot;,&quot;insertLink&quot;]]" ta-toolbar-class="btn-toolbar" ta-toolbar-group-class="btn-group btn-group-xs" ta-toolbar-button-class="btn btn-default" ta-toolbar-button-active-class="active" ta-default-wrap="div" ng-model="group.description"> </text-angular> </div> </div> <div class="text-danger"> <strong> {{errors}} </strong> </div> </div> <div class="modal-footer"> <a class="btn btn-default" type="button" ng-click="cancel()">Cancel</a> <button class="btn btn-primary" type="submit" ng-disabled="isProcessing"> Save</button> </div> </form> </div>'),a.put("views/directives/editNetworkSetModal.html",'<div class="modal-content"> <form class="form-horizontal" name="editNetworkSetForm" role="form" ng-submit="submit()"> <div class="modal-header"> <h4 class="modal-title">{{title}}</h4> </div> <div class="modal-body"> <div class="form-group rowWithOneLineTopPad"> <label class="col-sm-3 control-label">Network Set Name</label> <div class="col-sm-8"> <input type="text" id="networkSetName1" name="networkSetName1" type="networkSetName1" class="form-control" placeholder="Network Set Name" required="required" ng-model="networkSet.name"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Description</label> <div class="col-sm-8"> <text-angular ta-toolbar="[[&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;p&quot;,&quot;pre&quot;],[&quot;bold&quot;,&quot;italics&quot;,&quot;underline&quot;,&quot;clear&quot;],[&quot;justifyLeft&quot;,&quot;justifyCenter&quot;],[&quot;html&quot;,&quot;insertLink&quot;]]" ta-toolbar-class="btn-toolbar" ta-toolbar-group-class="btn-group btn-group-xs" ta-toolbar-button-class="btn btn-default" ta-toolbar-button-active-class="active" ta-default-wrap="null" ng-model="networkSet.description"> </text-angular> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Reference</label> <div class="col-sm-8"> <text-angular ta-toolbar="[[&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;p&quot;,&quot;pre&quot;],[&quot;bold&quot;,&quot;italics&quot;,&quot;underline&quot;,&quot;clear&quot;],[&quot;justifyLeft&quot;,&quot;justifyCenter&quot;],[&quot;html&quot;,&quot;insertLink&quot;]]" ta-toolbar-class="btn-toolbar" ta-toolbar-group-class="btn-group btn-group-xs" ta-toolbar-button-class="btn btn-default" ta-toolbar-button-active-class="active" ta-default-wrap="null" ng-model="networkSet.properties.reference"> </text-angular> </div> </div> <div class="text-danger"> <strong> {{errors}} </strong> </div> </div> <div class="modal-footer"> <a type="cancel" class="btn btn-default" ng-click="cancel()">Cancel</a> <button type="submit" class="btn btn-primary" ng-click="submit()" ng-disabled="errors || isProcessing"> Save</button> </div> </form> </div>'),a.put("views/directives/editNetworkSummaryModal.html",'<span ng-click="openMe()" ng-transclude></span> <script type="text/ng-template" id="edit-network-summary-modal.html"><div class=\'modal-content\'>\n  <form class="form-horizontal" role="form" ng-submit=\'submit()\'>\n    <div class="modal-header">\n        <h4 class="modal-title">Edit Network Profile</h4>\n    </div>\n    <div class="modal-body">\n        \n          <div class="form-group rowWithOneLineTopPad">\n            <label class="col-sm-3 control-label">Name</label>\n            <div class="col-sm-8">\n              <input type="text" class="form-control" placeholder="Network Name" ng-model=\'network.name\'>\n            </div>\n          </div>\n          <div class="form-group">\n              <label class="col-sm-3 control-label">Description</label>\n              <div class="col-sm-8">\n                  <text-angular\n                      ta-toolbar=\'[["h3","h4","h5","h6","p","pre"],["bold","italics","underline","clear"],["justifyLeft","justifyCenter"],["html","insertLink"]]\'\n                      ta-toolbar-class="btn-toolbar"\n                      ta-toolbar-group-class="btn-group btn-group-xs"\n                      ta-toolbar-button-class="btn btn-default"\n                      ta-toolbar-button-active-class="active"\n                      ta-default-wrap="null"\n                      ng-model=\'network.description\'>\n                  </text-angular>\n              </div>\n          </div>\n          <div class="form-group">\n              <label class="col-sm-3 control-label">Reference</label>\n              <div class="col-sm-8">\n                  <text-angular\n                        ta-toolbar=\'[["h3","h4","h5","h6","p","pre"],["bold","italics","underline","clear"],["justifyLeft","justifyCenter"],["html","insertLink"]]\'\n                        ta-toolbar-class="btn-toolbar"\n                        ta-toolbar-group-class="btn-group btn-group-xs"\n                        ta-toolbar-button-class="btn btn-default"\n                        ta-toolbar-button-active-class="active"\n                        ta-default-wrap="null"\n                        ng-model=\'network.reference\'>\n                  </text-angular>\n              </div>\n          </div>\n          <div class="form-group">\n            <label class="col-sm-3 control-label">Version</label>\n            <div class="col-sm-8">\n              <input type="text" class="form-control" placeholder="1.0"\n                ng-model=\'network.version\'>\n            </div>\n          </div>\n          <div class="form-group">\n            <label class="col-sm-3 control-label">Visibility</label>\n            <div class="col-sm-4">\n                <span ng-if="network.isOwner">\n                    <select class="form-control" ng-model=\'network.visibility\'>\n                        <option value=\'PUBLIC\' ng-selected=\'network.visibility ==  "PUBLIC"\'>Public</option>\n                        <option value=\'PRIVATE\' ng-selected=\'network.visibility ==  "PRIVATE"\'>Private</option>\n                    </select>\n                </span>\n                <span ng-if="!network.isOwner">\n                    <select class="form-control" ng-model=\'network.visibility\'\n                            title="Only network owners can change network Visibility" disabled>\n                        <option value=\'PUBLIC\' ng-selected=\'network.visibility ==  "PUBLIC"\'>Public</option>\n                        <option value=\'PRIVATE\' ng-selected=\'network.visibility ==  "PRIVATE"\'>Private</option>\n                    </select>\n                </span>\n            </div>\n          </div>\n\n          <div class=\'text-danger\'>\n            <strong>\n              {{errors}}\n            </strong>\n          </div>\n        </div>\n        <div class="modal-footer">\n            <a class="btn btn-default" type=\'button\' ng-click=\'cancel()\'>Cancel</a>\n            <button class="btn btn-primary" type=\'submit\' ng-disabled=\'isProcessing\'>Save</button>\n        </div>\n  </form>\n</div><\/script>'),a.put("views/directives/editReferenceForCertificationModal.html",'<div class="modal-content"> <form name="addReference" class="form-horizontal" role="form" ng-submit="submit()"> <div class="modal-header"> <h4 class="modal-title">Add Reference</h4> </div> <div class="modal-body"> <div class="form-group rowWithOneLineTopPad"> <label class="col-sm-3 control-label">Authors</label> <div class="col-sm-8"> <input type="text" name="authors" class="form-control" placeholder="List all authors separated by commas" ng-model="reference.authors" required> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Title</label> <div class="col-sm-8"> <input type="text" name="title" class="form-control" placeholder="Title of your publication" ng-model="reference.title" required> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Journal Issue</label> <div class="col-sm-8"> <input type="text" name="issue" class="form-control" placeholder="e.g., Cell Syst. 2015 Oct 28;1(4):302-305." ng-model="reference.issue" required> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Year Of Publication</label> <div class="col-sm-8"> <input type="text" name="year" class="form-control" placeholder="e.g., 2018" ng-model="reference.year" required> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">DOI</label> <div class="col-sm-8"> <input type="text" name="doi" class="form-control" placeholder="e.g., 10.1016/j.cels.2015.10.001" ng-model="reference.doi" required> </div> </div> <div class="text-danger" ng-if="errors"> <strong ng-bind-html="errors"></strong> </div> </div> <div class="modal-footer"> <button class="btn btn-default" type="button" ng-click="cancel()">Cancel</button> <button class="btn btn-primary" type="submit" ng-disabled="errors || addReference.$invalid">Add Reference</button> </div> </form> </div>'),a.put("views/directives/editUserModal.html",'<div class="modal-content"> <form name="editPersonalInfo" class="form-horizontal" role="form" ng-submit="submit()"> <div class="modal-header"> <h4 class="modal-title">Edit Personal Info</h4> </div> <div class="modal-body"> <div class="form-group rowWithOneLineTopPad"> <label class="col-sm-3 control-label">Name</label> <div class="col-sm-4"> <input type="text" name="firstName" class="form-control" placeholder="First Name" ng-model="user.firstName" required> </div> <div class="col-sm-4"> <input type="text" class="form-control" placeholder="Last Name" ng-model="user.lastName" required> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Email <span style="color:red">*</span></label> <div class="col-sm-8"> <input type="email" name="userEmail" class="form-control" placeholder="e.g., myemail@yahoo.com" ng-model="user.emailAddress" required> <div ng-show="editPersonalInfo.userEmail.$error.required" style="color:red; font-weight:bold; margin-top: 0.5em">E-mail is required </div> <div ng-show="editPersonalInfo.userEmail.$invalid && !editPersonalInfo.userEmail.$error.required" style="color:red; font-weight:bold; margin-top: 0.5em">Invalid e-mail </div> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Website</label> <div class="col-sm-8"> <input type="url" class="form-control" placeholder="e.g. www.ndexbio.com" name="userWebsite" ng-model="user.website" ng-change="checkLengthOfWebsite()" maxlength="{{maxInputLength}}"> <div ng-show="websiteTooLongWarning" style="color:red; font-weight:bold; margin-top: 0.5em" ng-bind-html="websiteTooLongWarning"> </div> <div ng-show="editPersonalInfo.userWebsite.$invalid" style="color:red; font-weight:bold; margin-top: 0.5em">Invalid URL </div> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Image Host</label> <div class="col-sm-8"> <input type="url" class="form-control" placeholder="e.g. http://i.imgur.com/09oVvZg.jpg" name="imageHost" ng-model="user.image" ng-change="checkLengthOfImageHost()" maxlength="{{maxInputLength}}"> <div ng-show="imageURLTooLongWarning" style="color:red; font-weight:bold; margin-top: 0.5em" ng-bind-html="imageURLTooLongWarning"> </div> <div ng-show="editPersonalInfo.imageHost.$invalid" style="color:red; font-weight:bold; margin-top: 0.5em">Invalid URL </div> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Description</label> <div class="col-sm-8"> <text-angular ta-toolbar="[[&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;p&quot;,&quot;pre&quot;],[&quot;bold&quot;,&quot;italics&quot;,&quot;underline&quot;,&quot;clear&quot;],[&quot;justifyLeft&quot;,&quot;justifyCenter&quot;],[&quot;html&quot;,&quot;insertLink&quot;]]" ta-toolbar-class="btn-toolbar" ta-toolbar-group-class="btn-group btn-group-xs" ta-toolbar-button-class="btn btn-default" ta-toolbar-button-active-class="active" ta-default-wrap="null" ng-model="user.description"> </text-angular> </div> </div> <div class="text-danger"> <strong> {{errors}} </strong> </div> </div> <div class="modal-footer"> <button class="btn btn-default" type="button" ng-click="cancel()">Cancel</button> <button class="btn btn-primary" type="submit" ng-disabled="errors || editPersonalInfo.$invalid">Save</button> </div> </form> </div>'),a.put("views/directives/exportNetwork.html",'<div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">{{title}}</h4> </div> <div class="modal-body"> <h5 ng-if="name"> <strong> <div class="wrapLongLine"> Network: {{name}} </div> </strong> </h5> <div class="rowWithOneLineTopPad"> Choose the export format using the dropdown menu below. The NDEx team will be adding other export options in future updates. </div> <h5> <strong> Export Format: <span class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown"> {{networkExporterName}} <span class="caret"></span> </a> <ul class="dropdown-menu" ng-if="exporters.length > 0"> <li ng-repeat="exporter in exporters"> <a ng-click="exporterSelected(exporter)">{{exporter.name}}</a> </li> </ul> </span> </strong> </h5> <div ng-if="exporters.length > 0" style="border:1px; border-style:solid; border-color:#428BCA; padding: 1em; background-color:#f9f9f9"> {{description}} </div> <div ng-if="errors" class="text-danger" style="word-wrap:break-word"> <br> <strong><span style="font-size: 1.1em" ng-bind-html="errors"></span></strong> </div> </div> <div class="modal-footer"> <button class="btn btn-default" ng-click="close()">Cancel</button> <button class="btn btn-primary" ng-click="exportNetwork()" ng-disabled="isProcessing || exporters.length == 0">{{exportButtonLabel}}</button> </div> </div>'),a.put("views/directives/informationModal.html",'<span ng-click="openMe()" ng-transclude></span> <script type="text/ng-template" id="information-modal.html"><div class="modal-header">\n\t    <h5 class="modal-title"><strong>{{title}}</strong></h5>\n\t</div>\n\n\t<div class="modal-body wrapLongLine">\n\t    <strong>{{message}}</strong>\n\t</div>\n\n\t<div class="modal-footer">\n\t    <button class="btn btn-default" ng-click="cancel()">Close</button>\n\t</div><\/script>'),
a.put("views/directives/invite-members.html","<span ng-click=\"openMe()\" ng-transclude></span> <script type=\"text/ng-template\" id=\"invite-members-modal.html\"><div class='modal-content'>\n    <div class=\"modal-header\">\n        <h4 class=\"modal-title\">Add NDEx Users to Group</h4>\n    </div>\n    <div class=\"modal-body\">\n        \n          <div class='row'>\n            <div class='col-md-8'>\n                <input name='text' type=\"text\" class=\"form-control input-sm\" placeholder=\"Search for Ndex Users\" \n                    ng-model='query.searchString'>\n            </div>\n          </div>\n          <hr>\n          <div class='row'>\n\n            <ul ng-repeat='user in userSearchResults'>\n              <div class='row' \n                    ng-click='addUser(user.externalId)'\n                    ng-show='{{user.showMe}}'\n                    style='cursor:pointer'>\n                <ndex-account-image \n                    ndex-class=\"'col-xs-2 col-sm-2 col-md-2 col-lg-2'\" \n                     ndex-src=\"user.image\">\n                </ndex-account-image>\n                <p>{{user.accountName}}</p>\n              </div>\n            </ul>\n          </div>\n\n          <div class='text-danger'>\n            <strong>\n              {{errors}}\n            </strong>\n          </div>\n        \n    <div class=\"modal-footer\">\n        <sm>Click on a user to add to group.\n        <button class=\"btn btn-default\" ng-click='close()'>Done</button>\n    </div>\n  </div><\/script>"),a.put("views/directives/ndexNavigation.html",'<span ng-click="location.path(ndexUrl)" ng-class="ndexClass" ng-transclude style="cursor:pointer"></span>'),a.put("views/directives/networkProperty.html",'<div> <div class="col-sm-offset-1 col-sm-4"> <div class="input-group"> <input class="form-control input-sm" type="text" placeholder="Label" disabled="disabled" ng-model="propertyModel.predicateString"> <span class="input-group-addon" style="color: white; background-color: white; border: 1px solid white" ng-show="propertyModel.predicateString != \'custom...\'"> </span> </div> <span class="text-danger"> <strong>{{propertyModel.labelError}}</strong> </span> </div> \x3c!--    <div class="col-sm-offset-1 col-sm-5">\n        <div class=\'input-group\'>\n\n            <input class="form-control input-sm"\n                   ng-if="propertyModel.isReadOnlyLabel"\n                   type="text"\n                   placeholder="Label"\n                   disabled\n                   ng-model=\'propertyModel.predicateString\'>\n\n\n            <select ng-if="!propertyModel.isReadOnlyLabel" class="form-control input-sm"\n                    ng-options="item as item for item in namesForSolrIndexing"\n                    ng-model="propertyModel.predicateString"\n                    ng-change=\'editorChangedCall(propertyModel.predicateString, propertyModel)\'\n                    ng-readonly=\'!(editor.isAdmin || editor.canEdit)\'>\n                <option style="display:none" value="">select a type</option>\n            </select>\n\n            <span class="input-group-addon" style="color: white; background-color: white; border: 1px solid white;" ng-show="propertyModel.predicateString != \'custom...\'"> </span>\n\n\n        </div>\n\n        <span class=\'text-danger\'>\n\t\t\t\t\t<strong>{{propertyModel.labelError}}</strong>\n\t\t\t\t</span>\n\n    </div>\n--\x3e <div class="col-sm-5"> <input class="form-control input-sm" placeholder="Value" ng-model="propertyModel.value" ng-change="updateScore()"> \x3c!-- ng-readonly=\'!(isAdmin || isEdit) || !(propertyModel.predicateString)\'>--\x3e </div> <div class="col-sm-1"> <i ng-if="propertyModel.value.length > 0" class="fa fa-star icon-fixed-width" style="color: gold; margin-top: 10px" aria-hidden="true"></i> <i ng-if="propertyModel.value.length < 1" class="fa fa-star-o icon-fixed-width" style="color: white; margin-top: 10px" aria-hidden="true"></i>&nbsp;&nbsp; <button type="button" class="btn btn-link pull-right" style="margin-right: 5px" ng-click="vpsplice(); editorChangedCall(propertyModel.predicateString, propertyModel);"> <span class="glyphicon glyphicon-remove text-muted"></span> </button> </div> \x3c!--\n'+"    <div class='' ng-hide='$last || !(isAdmin || isEdit)'>\n        <button type='button' class='btn btn-link' ng-click='vpsplice(); editorChangedCall(propertyModel.predicateString, propertyModel);'>\n            <span class=\"glyphicon glyphicon-remove text-muted\"></span>\n        </button>\n    </div>\n    --\x3e </div>"),a.put("views/directives/receivedRequest.html",'<span style="cursor: pointer" ng-click="openMe()" ng-transclude></span> <script type="text/ng-template" id="received-request-modal.html"><div class=\'modal-content wrapLongLine\'>\n\t\t<div class=\'modal-body\' ng-hide=\'false\'>\n\t\t\t<h5><strong>\n\t\t\t\t<div class="wrapLongLine">\n\t\t\t       {{request.sourceName}} requests <span class=\'text-success\'>{{request.permission | permissionToLabel}}</span> access to {{request.destinationName}}\n\t\t\t    </div>\n\t\t\t</strong></h5>\n\t\t\t<p><span ng-bind-html="request.message"></span></p>\n\n\t\t\t<hr>\n\t\t\t<strong>Response Message</strong>\n'+"\t\t\t<textarea class='form-control' rows='3' ng-model='request.responseMessage'></textarea>\n\n\t\t\t<div class='text-danger'>\n\t\t\t\t<strong>\n\t\t\t\t\t<br>\n\t\t\t\t\t{{request.error}}\n\t\t\t\t</strong>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class='modal-footer'>\n\t\t\t<button class='btn btn-default' ng-click='close()'>Cancel</button>\n\t\t\t<button class='btn btn-danger' ng-click='decline()'>Decline</button>\n\t\t\t<button class='btn btn-primary' ng-click='accept()'>Accept</button>\n\t\t</div>\n\t</div><\/script>"),a.put("views/directives/sentRequest.html",'<span style="cursor: pointer" ng-click="openMe()" ng-transclude></span> <script type="text/ng-template" id="sent-request-modal.html"><div class=\'modal-content\'>\n\t\t<div class=\'modal-body wrapLongLine\'>\n\t\t\t<h5>\n\t\t\t\t<strong>\n\t\t\t\t\t<div class="wrapLongLine">\n\t\t\t\t        You requested <span class=\'text-success\'>{{request.permission | permissionToLabel}}</span>\n\t\t\t\t\t\taccess to {{request.destinationName}} for {{request.sourceName}}\n\t\t\t\t    </div>\n\t\t\t\t</strong>\n\t\t\t\t<em class=\'text-muted\' \n\t\t\t\t\tng-class=\'{"text-danger":request.response=="DECLINED", "text-success":request.response=="ACCEPTED"}\'>\n\t\t\t\t\t - {{request.response | requestStatusToLabel}}\n\t\t\t\t</em>\n\t\t\t</h5>\n\t\t\t<hr ng-show=\'request.message\'>\n\t\t\t<strong ng-show=\'request.message\'>Message</strong>\n\t\t\t<p><span ng-bind-html="request.message"></span></p>\n\t\t\t<div ng-hide=\'request.response == "PENDING"\'>\n\t\t\t\t<hr>\n\t\t\t\t<h5><strong>Response</strong> - <em>from {{request.responder}}</em></h5>\n\t\t\t\t<p ng-show=\'request.responseMessage\' ng-bind-html="request.responseMessage"></p>\n\t\t\t</div>\n\n\t\t\t<div class=\'text-danger\' ng-if="request.error">\n\t\t\t\t<strong>\n\t\t\t\t\t<br>\n\t\t\t\t\t{{request.error}}\n\t\t\t\t</strong>\n\t\t\t</div>\n\n\t\t</div>\n\n'+"\t\t<div class='modal-footer' ng-hide='false'>\n\t\t\t<button class='btn btn-default' ng-click='close()'>Cancel</button>\n\t\t\t<button class='btn btn-danger' ng-click='delete()'>Delete</button>\n\t\t</div>\n\t</div><\/script>"),a.put("views/directives/shareNetworkSetModal.html",'<span ng-click="openMe()">{{text}}</span> <script type="text/ng-template" id="share-network-set.html"><div class=\'modal-content\'>\n        <form class="form-horizontal" name="editNetworkSetForm" role="form" ng-submit=\'submit()\'>\n\n            <div class="modal-header">\n                <h4 class="modal-title">{{title}}</h4>\n            </div>\n\n\n            <div class="modal-body">\n\n                <div class="form-group" ng-if="networkSetShareableURL">\n\n                    <div class="col-sm-12" style="padding-bottom:1em;">\n                        <h5><strong>Anyone with the link can view this network set</strong></h5>\n                    </div>\n\n                    <div class="col-sm-12">\n                        <input type="text" class="form-control" readonly value="{{networkSetShareableURL}}">\n                    </div>\n                </div>\n\n\n                <div class="form-group">\n                    <label  class="col-sm-4 control-label"\n                            style="font-size: 1.2em;">Share URL Status:\n                    </label>\n\n                    <span class="col-sm-8">\n                        <p class="form-control-static" ng-if="networkSetShareableURL"\n                           style="font-size: 1.2em; color: green">Active\n                        </p>\n                        <p class="form-control-static"  ng-if="!networkSetShareableURL"\n                           style="font-size: 1.2em">Inactive\n                        </p>\n                    </span>\n\n                </div>\n\n\n                <div ng-if="errors" class=\'text-danger\'>\n                    <strong>\n                        {{errors}}\n                    </strong>\n                </div>\n\n            </div>\n\n            <div class="modal-footer">\n\n                <a type=\'cancel\' class="btn btn-default" ng-click="switchShareableURL()">{{networkSetShareableURLLabel}}</a>\n\n                <button id="copyButtonId" ng-hide="!networkSetShareableURL" type="button" class="btn btn-default"\n                        ng-click="showURLInClipboardMessage()"\n                        ngclipboard data-clipboard-text="{{networkSetShareableURL}}">\n                    Copy URL\n                </button>\n\n                <a type=\'cancel\' class="btn btn-default" ng-click="close()">Close</a>\n\n            </div>\n\n        </form>\n    </div><\/script>'),a.put("views/directives/showNetworkReferenceModal.html",'<span style="cursor: pointer" ng-click="openMe()" ng-transclude></span> <script type="text/ng-template" id="show-network-reference-modal.html"><div class=\'modal-content\'>\n\n        <form class="form-horizontal" role="form" ng-submit=\'submit()\'>\n\n            <div class="modal-header">\n                <h4 class="modal-title" ng-bind-html="network.title"></h4>\n            </div>\n\n            <div class="modal-body" style="max-height:520px; overflow:auto;">\n                <div class="form-group">\n                    <label for="referenceId" class="col-sm-3 control-label">Reference:</label>\n                    <span class="col-sm-8">\n                        <p class="form-control-static" id="referenceId" ng-bind-html="network.reference"></p>\n                    </span>\n                </div>\n            </div>\n\n            <div class="modal-footer">\n                <a class="btn btn-default" type=\'button\' ng-click=\'close()\'>Close</a>\n            </div>\n\n        </form>\n\n    </div><\/script>'),a.put("views/directives/showNetworkSetsModal.html",'<style>tbody > tr:nth-child(odd)\n    {\n        background: #FFFFFF;\n    }\n\n    tbody > tr:nth-child(even)\n    {\n        background: #F0F0F0;\n    }</style> <div class="modal-content"> <form class="form-horizontal" role="form"> <div class="modal-header"> <h4 class="modal-title">Select Network Sets</h4> </div> <div class="modal-body"> <table class="table table-striped table-bordered" style="empty-cells: show; margin-bottom: 0px"> <tr ng-repeat="thisSet in loadTheseSets" ng-class="selectedRow==$index ? \'info\':\'\'" ng-click="thisSet.selected = !thisSet.selected; updateNoOSelectedSets()"> <td style="width: 35px"> <i ng-show="thisSet.selected" style="color: green" class="fa fa-check-square fa-lg" aria-hidden="true"></i> <i ng-show="!thisSet.selected" class="fa fa-square-o fa-lg" aria-hidden="true"></i> </td> <td> <span ng-bind-html="thisSet.name"></span> \x3c!--<span ng-bind-html="thisSet.description"></span> --\x3e </td> </tr> <tr> <div ng-if="loadTheseSets.length == 0" style="font-size: 1.2em; text-align: left; padding-top: 1em"> No sets available. Use <strong>Create Network Set</strong> button to add new sets. </div> </tr> </table> <span ng-show="progress"> <strong><span style="color: green; font-size: 1.3em" ng-bind-html="progress"></span></strong> </span> <span class="text-danger"> <br> <strong><span style="font-size: 1.3em" ng-bind-html="errors"></span></strong> </span> </div> <div class="modal-footer"> <a class="btn btn-default" type="button" ng-click="closeModal()">Cancel</a> <button class="btn btn-primary" ng-click="submit()" ng-disabled="noSetsSelected() || isProcessing">Add to Selected Sets </button> <trigger-create-network-set-modal my-account-controller="myAccountController" signal-new-set-creation="true"> </trigger-create-network-set-modal> </div> </form> </div>'),a.put("views/directives/warningModal.html",'<span ng-click="openMe()" ng-transclude></span> <script type="text/ng-template" id="warning-modal.html"><div class="modal-content">\n\t\tWARNING\n\t    <div class="modal-header">\n\t        <h4 class="modal-title">\n\t\t\t\t<span ng-bind-html="title"></span>\n\t\t\t</h4>\n\t    </div>\n\n\t    <div class="modal-body">\n\t\t\t<div>\n\t\t\t\t<br>\n\t\t\t\t<span ng-bind-html="message"></span>\n\t\t\t</div>\n\n\t\t    <div class=\'text-danger\'>\n\t\t\t\t<strong><span ng-bind-html="errors"></span></strong>\n            </div>\n\n            <div class=\'text-success\'>\n\t\t\t\t<strong><span ng-bind-html="progress"></span></strong>\n            </div>\n\t\t</div>\n\n\t\t<div class="modal-footer">\n\t\t\t<button class="btn btn-default" ng-click="cancel()" ng-if="!canProceed">OK</button>\n\t\t\t<button class="btn btn-default" ng-click="cancel()" ng-if="canProceed">Cancel</button>\n\t\t\t<button class="btn btn-primary" ng-click="confirm()" ng-disabled="isProcessing" ng-if="canProceed">Confirm</button>\n\t\t</div>\n\n\t</div><\/script>'),a.put("views/editNetworkPropertiesFixedForm.html","<style>.competeInput {\n\tborder: 2px solid green;\n}\n.incompleteInput {\n\tborder: 2px solid red;\n}\n\n@media (min-width: 1599px) {\n\t.main-area {\n\t\twidth: 1600px;\n        margin-left: auto;\n        margin-right: auto;\n\t}\n}\n\n@media (max-width: 1600px) {\n\t.main-area {\n\t\twidth: 100%;\n\t}\n}\n\ninput[type='radio']:after {\n\twidth: 15px;\n\theight: 15px;\n\tborder-radius: 15px;\n\ttop: -2px;\n\tleft: -1px;\n\tposition: relative;\n\tbackground-color: #eee;/*#d1d3d1;*/\n\tcontent: '';\n\tdisplay: inline-block;\n\tvisibility: visible;\n\tborder: 2px solid white;\n}\n\ninput[type='radio']:checked:after {\n\twidth: 15px;\n\theight: 15px;\n\tborder-radius: 15px;\n\ttop: -2px;\n\tleft: -1px;\n\tposition: relative;\n\tbackground-color: #606060;\n\tcontent: '';\n\tdisplay: inline-block;\n\tvisibility: visible;\n\tborder: 2px solid white;\n"+'}</style> <div class="row"> <div class="col-sm-offset-2 col-sm-8"> <p class="alert alert-danger" ng-repeat="error in editor.errors" style="word-wrap:break-word"> {{error}} <span class="glyphicon glyphicon-remove pull-right" style="cursor:pointer" ng-click="editor.errors.splice($index,1)"> </span> </p> </div> </div> <div class="row"> <div class="col-sm-2"> <h4 ng-show="editor.isAdmin || editor.canEdit">Network Properties Editor</h4> <h4 ng-hide="editor.isAdmin || editor.canEdit">Network Properties</h4> </div> <div class="col-sm-offset-8 col-sm-2"> <div class="btn-group btn-group-xs" role="group" aria-label="..."> <button type="button" class="btn btn-default disabled"><i class="fa fa-filter" aria-hidden="true"></i></button> <button ng-if="!mainProperty.readonly" type="button" class="btn" ng-click="updateFieldFilters(\'MAIN\')" ng-class="editor.viewfilter.state == \'DOI\' ? \'btn-default\': \'btn-primary\'">All </button> <a ng-if="mainProperty.readonly" type="button" title="Uanble to edit this network: it is read-only" class="btn btn-disabled actionsLabelDisabled-default-btn" style="cursor: not-allowed" ng-class="editor.viewfilter.state == \'DOI\' ? \'btn-default\': \'btn-primary\'">All </a> <button type="button" class="btn" ng-click="updateFieldFilters(\'DOI\')" ng-class="editor.viewfilter.state == \'DOI\' ? \'btn-primary\': \'btn-default\'">DOI</button> </div> </div> <hr> </div> <div class="row"> <div class="col-sm-offset-2 col-sm-2"> <h4 style="margin-top:0px" class="pull-right">NDEx Score {{score}}</h4> </div> <div class="col-sm-8"> <div class="progress" style="width: 500px"> <div class="progress-bar progress-bar-striped" ng-class="scoreClass" role="progressbar" style="min-width: 2%" aria-valuenow="{{score}}" aria-valuemin="0" aria-valuemax="100" ng-style="{width : ( score + \'%\' ) }"> </div> </div> </div> </div> <div class="row" ng-show="editor.viewfilter.state === \'DOIX\'"> <div class="col-sm-offset-2 col-sm-2"> <h4 style="margin-top:0px" class="pull-right">DOI Readiness {{score}}</h4> </div> <div class="col-sm-8"> <div class="progress" style="width: 500px"> <div class="progress-bar progress-bar-striped" ng-class="scoreClass" role="progressbar" style="min-width: 2%" aria-valuenow="{{score}}" aria-valuemin="0" aria-valuemax="100" ng-style="{width : ( score + \'%\' ) }"> </div> </div> </div> </div> <div class="row"> <div class="col-sm-8"> \x3c!--\n    {{editor.propertyValuePairs}}\n--\x3e </div> <div class="col-sm-4"> \x3c!--\t\t<button class="btn btn-success" ng-click="updatePointers()">click me</button>--\x3e </div> </div> <hr style="margin-top:0px"> <div class="row"> <div class="main-area"> <div ng-show="editor.viewfilter.state === \'DOI\'"> <ng-include src="\'views/partials/doiNetworkProperties.html\'"></ng-include> </div> <div ng-show="editor.viewfilter.state === \'MAIN\'"> <ng-include src="\'views/partials/mainNetworkProperties.html\'"></ng-include> </div> </div> </div>'),a.put("views/generic-info-modal.html",'<div class="modal-content"> <div class="modal-header"> <h5 class="modal-title"><strong>{{title}}</strong></h5> </div> <div class="modal-body wrapLongLine" style="max-height:520px; overflow:auto"> <span ng-bind-html="message"></span> </div> <div class="modal-footer"> <button class="btn btn-default" ng-click="close()">Close</button> </div> </div>'),a.put("views/gridTemplates/deleteTask.html",'<div id="deleteTaskTemplate" class="ui-grid-cell-contents text-center"> <span ng-if="(row.entity.Status && row.entity.Status != \'processing\')\n                    && (grid.appScope.getLoggedInUserUUID() == row.entity.ownerUUID)"> <a ng-href="{{$location.path()}}" ng-click="grid.appScope.deleteTask(row.entity)" title="Delete"> <span class="text-danger glyphicon glyphicon-trash"></span> </a> </span> </div>'),a.put("views/gridTemplates/disease.html",'<div id="networkDiseaseTemplate" class="ui-grid-cell-contents"> <span title="{{COL_FIELD}}" ng-bind-html="COL_FIELD"></span> </div>'),a.put("views/gridTemplates/downloadNetwork.html",'<div id="downloadNetworkTemplate" class="ui-grid-cell-contents"> <span ng-if="(row.entity.Status != \'processing\') && (row.entity.Status != \'Set\')" ng-click="grid.appScope.downloadNetwork(row.entity)" style="cursor:pointer" title="Download CX file for this network"> \x3c!--\n            <img src="img/download.png" width="20px" height="20px" align="center">\n        --\x3e <i class="fa fa-download fa-lg download-icon" aria-hidden="true"></i> </span> </div>'),a.put("views/gridTemplates/groupName.html",'<div ng-if="row.entity.Status == \'failed\'" class="ui-grid-cell-contents" title="{{row.entity.errorMessage}}"> <span style="cursor: not-allowed">{{COL_FIELD}}</span> </div> <div ng-if="row.entity.Status != \'failed\'" class="ui-grid-cell-contents" title="{{row.entity.description}}"> <a href="#/group/{{row.entity.externalId}}">{{COL_FIELD}}</a> </div>'),a.put("views/gridTemplates/networkName.html",'<div ng-if="row.entity.Status == \'success\' || row.entity.Status == \'certified\'" class="ui-grid-cell-contents" title="{{row.entity.name}} &#x0D;&#x0D; {{row.entity.description}}"> \x3c!--<a href="#/network/{{row.entity.externalId}}">{{COL_FIELD}} </a>--\x3e <a ng-href="{{grid.appScope.getNetworkURL(row.entity.externalId)}}">{{COL_FIELD}} </a> </div> <div ng-if="row.entity.Status == \'warning\'" class="ui-grid-cell-contents" title="{{row.entity.name}} &#x0D;&#x0D; {{row.entity.description}}"> \x3c!--<a href="#/network/{{row.entity.externalId}}">{{COL_FIELD}} </a>--\x3e <a ng-href="{{grid.appScope.getNetworkURL(row.entity.externalId)}}">{{COL_FIELD}} </a> </div> <div ng-if="row.entity.Status == \'failed\'" class="ui-grid-cell-contents" title="{{row.entity.errorMessage}}"> <span ng-if="grid.appScope.isOwnerOfNetwork(row.entity.ownerUUID)"> <a ng-click="grid.appScope.failedNetworkWarning(row.entity)">{{COL_FIELD}}</a> </span> <span ng-if="!grid.appScope.isOwnerOfNetwork(row.entity.ownerUUID)"> <span style="cursor: not-allowed">{{COL_FIELD}}</span> </span> </div> <div ng-if="row.entity.Status == \'processing\'" class="ui-grid-cell-contents" title="{{row.entity.name}} &#x0D;&#x0D; {{row.entity.description}}"> <span style="cursor: not-allowed">{{COL_FIELD}}</span> </div> <div ng-if="row.entity.Status == \'collection\'" class="ui-grid-cell-contents" title="{{row.entity.name}} &#x0D;&#x0D; {{row.entity.description}}"> \x3c!--<a href="#/network/{{row.entity.externalId}}">{{COL_FIELD}} </a>--\x3e <a ng-href="{{grid.appScope.getNetworkURL(row.entity.externalId)}}">{{COL_FIELD}} </a> </div> <div ng-if="row.entity.Status == \'Set\'" class="ui-grid-cell-contents" title="{{row.entity.name}} &#x0D;&#x0D; {{row.entity.description}}"> <a ng-href="#/networkset/{{row.entity.externalId}}"><strong style="font-size: 1.1em">{{COL_FIELD}}</strong></a> </div>'),a.put("views/gridTemplates/networkStatus.html",'<div id="networkStatusTemplate" class="ui-grid-cell-contents"> <span ng-if="row.entity.Status == \'certified\'"> <a ng-href="{{$location.path()}}" ng-click="grid.appScope.showNetworkInfo(row.entity)" title="Click to view information about this network"> <img src="images/certifiedNetwork.d259cc5d.png" width="20px" height="20px" align="center"> </a> </span> <span ng-if="(row.entity.Status == \'success\') || (row.entity.Status == \'warning\')"> <a ng-href="{{$location.path()}}" ng-click="grid.appScope.showNetworkInfo(row.entity)" title="Click to view information about this network"> <img src="images/ndex-icon.6b234ebc.png" width="28px" height="16px" align="center"> </a> </span> <span ng-if="row.entity.Status == \'failed\'"> <a ng-href="{{$location.path()}}" ng-click="grid.appScope.showWarningsOrErrors(row.entity)" title="Click to see error message"> <img src="images/failed.a87d1b7a.png" width="20px" height="20px" align="center"> </a> </span> <span ng-if="row.entity.Status == \'processing\'"> <img src="images/hourglass.b27b6c7d.png" width="20px" height="20px" align="center"> </span> <span ng-if="row.entity.Status == \'collection\'"> <a ng-href="{{$location.path()}}" ng-click="grid.appScope.showNetworkInfo(row.entity)" title="This network is part of a Cytoscape collection. Click to view information about it."> <img src="images/cytoscape.10e7b2a3.png" width="20px" height="20px" align="center"> </a> </span> <span ng-if="row.entity.Status == \'Set\'"> <a ng-href="{{$location.path()}}" ng-click="grid.appScope.showSetInfo(row.entity.externalId)" title="Click to see information about this Set"> <img src="images/folder.801176c3.png" align="center"> </a> </span> </div>'),a.put("views/gridTemplates/networkStatusOnMyAccountPage.html",'<div id="networkStatusTemplate" class="ui-grid-cell-contents"> <span ng-if="row.entity.Status == \'certified\'"> <img src="images/certifiedNetwork.d259cc5d.png" width="20px" height="20px" align="center"> </span> <span ng-if="row.entity.Status == \'success\'"> <img src="images/success.9bce2464.png" width="20px" height="20px" align="center"> </span> <span ng-if="row.entity.Status == \'warning\'"> <a ng-href="{{$location.path()}}" ng-click="grid.appScope.showWarningsOrErrors(row.entity)" title="Click to see warnings"> <img src="images/warning.a651ca7d.png" width="20px" height="20px" align="center"> </a> </span> <span ng-if="row.entity.Status == \'failed\'"> <a ng-href="{{$location.path()}}" ng-click="grid.appScope.showWarningsOrErrors(row.entity)" title="Click to see error message"> <img src="images/failed.a87d1b7a.png" width="20px" height="20px" align="center"> </a> </span> <span ng-if="row.entity.Status == \'processing\'"> <img src="images/hourglass.b27b6c7d.png" width="20px" height="20px" align="center"> </span> <span ng-if="row.entity.Status == \'collection\'"> <a ng-href="{{$location.path()}}" ng-click="grid.appScope.showWarningsOrErrors(row.entity)" title="This network is part of a Cytoscape collection and cannot be operated on or edited in NDEx."> <img src="images/cytoscape.10e7b2a3.png" width="20px" height="20px" align="center"> </a> </span> <span ng-if="row.entity.Status == \'Set\'"> <a ng-href="{{$location.path()}}" ng-click="grid.appScope.showSetInfo(row.entity.externalId)" title="Click to see information about this Set"> <img src="images/folder.801176c3.png" align="center"> </a> </span> </div>'),a.put("views/gridTemplates/ownedBy.html",'<div class="ui-grid-cell-contents" title="{{row.entity.owner}}"> <a href="#/user/{{row.entity.ownerUUID}}">{{COL_FIELD}}</a> </div>'),a.put("views/gridTemplates/reference.html",'<div id="networkReferenceTemplate" class="ui-grid-cell-contents"> <span ng-if="row.entity.Reference && row.entity.Reference != \'\'"> <a> <show-network-reference reference="row.entity.Reference" directive-title="{{row.entity.name}}"> <img src="images/ref-icon.9e25feba.png" width="20px" height="20px" align="center"> </show-network-reference> </a> </span> \x3c!--\n    <span ng-if="((row.entity.Reference.referenceText.length > 0) && (row.entity.Reference.url && row.entity.Reference.url.length > 0) && (row.entity.Reference.urlCount == 1))">\n        <a ng-href="{{row.entity.Reference.url}}" target="_blank">\n            <img src="images/ref-icon.9e25feba.png" width="20px" height="20px" align="center">\n        </a>\n    </span>\n\n    <span ng-if="((row.entity.Reference.referenceText.length > 0) && (row.entity.Reference.urlCount != 1))">\n            <a>\n               <show-network-reference\n                       reference=\'row.entity.Reference.referenceHTML\'\n                       directive-title={{row.entity.name}}>\n                    <img src="images/ref-icon.9e25feba.png" width="20px" height="20px" align="center">\n                </show-network-reference>\n            </a>\n    </span>\n    --\x3e </div>'),a.put("views/gridTemplates/setName.html",'<div class="ui-grid-cell-contents" title="{{row.entity.name}} &#x0D;&#x0D; {{row.entity.description}}"> <a ng-href="#/networkset/{{row.entity.externalId}}"> {{COL_FIELD}} </a> </div> \x3c!--\n<div id="setNameTemplateId" class="ui-grid-cell-contents">\n\n    <a ng-click="grid.appScope.signClicked(networkSetExpanded, row); networkSetExpanded=!networkSetExpanded">\n\n        <span ng-show="networkSetExpanded" style="font-size:1.3em;"\n              title="Click to collapse networks">&ndash;\n        </span>\n\n        <span ng-hide="networkSetExpanded" style="font-size:1.4em;"\n              title="Click to show networks in this Set">&plus;\n        </span>\n    </a>\n\n    &nbsp;\n\n    <a ng-href="#/networkset/{{row.entity.externalId}}"\n       title="{{row.entity.name}} &#x0D;&#x0D; {{row.entity.description}}">{{COL_FIELD}}\n    </a>\n</div>\n--\x3e'),a.put("views/gridTemplates/showCase.html",'<div id="showCaseTemplate" class="ui-grid-cell-contents"> <span ng-if="row.entity.Show && ((row.entity.Status == \'success\')  || (row.entity.Status == \'certified\') ||\n        (row.entity.Status == \'warning\') || (row.entity.Status == \'collection\') || (row.entity.Status == \'Set\')) && (row.entity.Visibility == \'PUBLIC\')"> <a ng-href="{{$location.path()}}" ng-click="grid.appScope.switchShowcase(row)" title="Click to turn off"> <img src="images/openedeye.156b3b9e.png" width="25px" height="25px" style="margin-top:-0.26em"> </a> </span> <span ng-if="!row.entity.Show && ((row.entity.Status == \'success\') || (row.entity.Status == \'warning\') || (row.entity.Status == \'certified\') ||\n        (row.entity.Status == \'collection\') || (row.entity.Status == \'Set\')) && (row.entity.Visibility == \'PUBLIC\')"> <a ng-href="{{$location.path()}}" ng-click="grid.appScope.switchShowcase(row)" title="Click to turn on"> <img src="images/closedeye.c947dbe2.png" width="25px" height="25px" style="margin-top:-0.26em"> </a> </span> </div>'),a.put("views/gridTemplates/showCellContentsInNetworkTable.html",'<div id="showCellContentsInNetworkTableId" class="ui-grid-cell-contents"> <span ng-if="grid.appScope.getNumEdgeAttributes(COL_FIELD) <= 1"> <div class="ui-grid-cell-contents hideLongLine" ng-bind-html="grid.appScope.linkify(COL_FIELD)"></div> </span> <span ng-if="grid.appScope.getNumEdgeAttributes(COL_FIELD) > 1"> <div class="text-center"> <a ng-click="grid.appScope.showMoreEdgeAttributes(row, COL_FIELD)"> {{grid.appScope.getNumEdgeNdexCitations(COL_FIELD)}} </a> </div> </span> </div>'),
a.put("views/gridTemplates/taskOrRequestDescription.html","<div id=\"taskOrRequestNewTemplate\" class=\"ui-grid-cell-contents\"> <span ng-if=\"(row.entity.typeFromServer == 'usernetworkaccess') ||\n        (row.entity.typeFromServer == 'groupnetworkaccess') || (row.entity.typeFromServer == 'joingroup')\"> <a ng-if=\"row.entity.Status == 'completed' || row.entity.Status == 'declined' || row.entity.Status == 'accepted'\"> <span ng-style=\"(row.entity.newTask || row.entity.newSent || row.entity.newReceived) ?\n                {'font-weight':'bold',   'font-style':'normal', 'color':'#428bca'} :\n                {'font-weight':'normal', 'font-style':'normal', 'color':'#428bca'}\"> <sent-request ng-if=\"row.entity.whatType == 'sent'\" class=\"wrapLongLine\" my-account-controller=\"grid.appScope.myAccountController\" request-id=\"row.entity.taskId\" class=\"wrapLongLine\" ng-click=\"grid.appScope.markAsRead(row.entity)\" title=\"{{row.entity.Description}}\"> {{row.entity.Description}} </sent-request> <received-request ng-if=\"row.entity.whatType == 'received'\" class=\"wrapLongLine\" my-account-controller=\"grid.appScope.myAccountController\" request-id=\"row.entity.taskId\" class=\"wrapLongLine\" ng-click=\"grid.appScope.markAsRead(row.entity)\" title=\"{{row.entity.Description}}\"> {{row.entity.Description}} </received-request> </span> </a> <a ng-if=\"row.entity.Status == 'pending'\"> <span ng-style=\"(row.entity.newTask || row.entity.newSent || row.entity.newReceived) ?\n                {'font-weight':'bold',   'font-style':'italic', 'color':'#428bca'} :\n                {'font-weight':'normal', 'font-style':'italic', 'color':'#428bca'}\"> <sent-request ng-if=\"row.entity.whatType == 'sent'\" class=\"wrapLongLine\" my-account-controller=\"grid.appScope.myAccountController\" request-id=\"row.entity.taskId\" class=\"wrapLongLine\" ng-click=\"grid.appScope.markAsRead(row.entity)\" title=\"{{row.entity.Description}}\"> {{row.entity.Description}} </sent-request> <received-request ng-if=\"row.entity.whatType == 'received'\" class=\"wrapLongLine\" my-account-controller=\"grid.appScope.myAccountController\" request-id=\"row.entity.taskId\" class=\"wrapLongLine\" ng-click=\"grid.appScope.markAsRead(row.entity)\" title=\"{{row.entity.Description}}\"> {{row.entity.Description}} </received-request> </span> </a> </span> <span ng-if=\"(row.entity.typeFromServer == 'export_network_to_file')\"> <span ng-if=\"row.entity.Status != 'completed'\"> <span ng-style=\"(row.entity.newTask || row.entity.newSent || row.entity.newReceived) ?\n                {'font-weight':'bold',   'font-style':'italic', 'color':'#428bca'} :\n                {'font-weight':'normal', 'font-style':'italic', 'color':'#428bca'}\"> {{row.entity.Description}} </span> </span> <a ng-if=\"row.entity.Status == 'completed'\" id=\"exportedNetworkDownoadLinkId\" title=\"{{row.entity.Description}}\" ng-click=\"grid.appScope.getCredentialsForExportedNetworkDownload(row.entity.taskId); grid.appScope.markAsRead(row.entity)\" ng-style=\"(row.entity.newTask || row.entity.newSent || row.entity.newReceived) ?\n                {'font-weight':'bold',   'color':'#428bca'} :{'font-weight':'normal', 'color':'#428bca'}\"> {{row.entity.Description}} </a> </span> \x3c!--\n        <sent-request ndex-data='request' class=\"wrapLongLine\" user-controller=\"myAccountController\"\n                      typeFromServer\n                   ng-style=\"\">\n            <span class='text-info'>{{request.permission | permissionToLabel}}</span> access to\n            <span class='text-success'>{{request.destinationName}}</span> for\n            <span class='text-success'>{{request.sourceName}}</span>\n            <br>\n            <em class='text-muted'\n            ng-class='{\"text-danger\":request.response==\"DECLINED\", \"text-success\":request.response==\"ACCEPTED\"}'>\n                {{request.response | requestStatusToLabel}}\n            </em>\n        </sent-request>\n\n--\x3e \x3c!--\n        <span ng-style=\"row.entity.new ?\n            {'font-weight':'bold',   'color':'#428bca'} :\n            {'font-weight':'normal', 'color':'#428bca'}\">\n                {{row.entity.Description}}\n        </span>\n--\x3e </div>"),a.put("views/gridTemplates/taskOrRequestNew.html","<div id=\"taskOrRequestNewTemplate\" class=\"ui-grid-cell-contents text-center text-info\"> \x3c!--\n    <span ng-if=\"(row.entity.typeFromServer == 'export_network_to_file') && row.entity.newTask &&\n            (row.entity.Status == 'completed' || row.entity.Status == 'failed') &&\n            (row.entity.whatType != 'received')\">\n\n        <span ng-style=\"{'font-style':'normal', 'font-weight':'bold', 'color':'red'}\" ng-bind-html=\"row.entity.New\">\n        </span>\n    </span>\n\n    <span ng-if=\"row.entity.whatType == 'received'\">\n        <span ng-style=\"{'font-style':'italic', 'font-weight':'bold', 'color':'red'}\" ng-bind-html=\"row.entity.New\">\n        </span>\n    </span>\n\n    <span ng-if=\"(row.entity.whatType == 'sent') && (row.entity.newSent) &&\n                (row.entity.Status == 'accepted' || row.entity.Status == 'declined')\">\n        <span ng-style=\"{'font-style':'normal', 'font-weight':'bold', 'color':'red'}\" ng-bind-html=\"row.entity.New\">\n        </span>\n    </span>\n    --\x3e <span ng-style=\"{'font-style':'normal', 'font-weight':'bold', 'color':'red'}\" ng-bind-html=\"row.entity.New\"></span> </div>"),a.put("views/gridTemplates/taskOrRequestStatus.html","<div id=\"taskOrRequestStatusTemplate\" class=\"ui-grid-cell-contents text-left text-muted\"> <span ng-if=\"(row.entity.Status == 'queued') || (row.entity.Status == 'processing')\"> <span ng-style=\"(row.entity.newTask || row.entity.newSent || row.entity.newReceived) ?\n            {'font-weight':'bold', 'font-style':'italic'} : {'font-weight':'normal', 'font-style':'italic'}\"> {{row.entity.Status}} </span> </span> <span ng-if=\"(row.entity.Status == 'completed') || (row.entity.Status == 'failed')\"> <span ng-style=\"(row.entity.newTask || row.entity.newSent || row.entity.newReceived) ?\n            {'font-weight':'bold', 'color':'green'} : {'font-weight':'normal', 'color':'green'}\"> {{row.entity.Status}} </span> </span> <span ng-if=\"row.entity.Status == 'declined' || row.entity.Status == 'accepted'\"> <span ng-style=\"row.entity.newSent ?\n            {'font-weight':'bold', 'color':'green'} : {'font-weight':'normal', 'color':'green'}\"> {{row.entity.Status}} </span> </span> <span ng-if=\"row.entity.Status == 'pending'\"> <span ng-style=\"{'font-weight':'bold', 'color':'green', 'font-style':'italic'}\"> {{row.entity.Status}} </span> </span> \x3c!--\n    <span ng-if=\"row.entity.Status == 'accepted'\">\n        <span ng-style=\"row.entity.newSent ?\n            {'font-weight':'bold', 'color':'green', 'font-style':'italic'} : {'font-weight':'normal', 'color':'green'}\">\n                {{row.entity.Status}}\n        </span>\n    </span>\n--\x3e </div> \x3c!--\n&& (row.entity.Status == 'accepted' || row.entity.Status == 'declined')\n--\x3e"),a.put("views/gridTemplates/taskOrRequestType.html","<div id=\"taskOrRequestTypeTemplate\" class=\"ui-grid-cell-contents text-left text-info\"> <span ng-if=\"row.entity.Status == 'queued' || row.entity.Status == 'processing'\"> <span ng-style=\"(row.entity.newTask || row.entity.newSent || row.entity.newReceived) ?\n            {'font-weight':'bold', 'font-style':'italic'} : {'font-weight':'normal', 'font-style':'italic'}\"> {{row.entity.Type}} </span> </span> <span ng-if=\"row.entity.Status == 'completed' || row.entity.Status == 'accepted' || row.entity.Status == 'declined'\"> <span ng-style=\"(row.entity.newTask || row.entity.newSent || row.entity.newReceived) ?\n            {'font-weight':'bold'} : {'font-weight':'normal'}\"> {{row.entity.Type}} </span> </span> <span ng-if=\"row.entity.Status == 'pending'\"> <span ng-style=\"{'font-weight':'bold', 'font-style':'italic'}\"> {{row.entity.Type}} </span> </span> </div>"),a.put("views/gridTemplates/tissue.html",'<div id="networkTissueTemplate" class="ui-grid-cell-contents"> <span title="{{COL_FIELD}}" ng-bind-html="COL_FIELD"></span> </div>'),a.put("views/gridTemplates/userName.html",'<div class="ui-grid-cell-contents" title="{{ row.entity.Description }}"> <a href="#/user/{{ row.entity.externalId}}">{{COL_FIELD}}</a> </div>'),a.put("views/gridTemplates/visibility.html",'<div id="visibilityNetworkTemplate" class="ui-grid-cell-contents"> <span ng-if="(row.entity.Status != \'Set\') && (row.entity.indexLevel != \'NONE\')" title="{{COL_FIELD}}"> {{row.entity.Visibility}}&nbsp;&nbsp; <i class="fa fa-search"></i> </span> <span ng-if="(row.entity.Status != \'Set\') && (row.entity.indexLevel == \'NONE\')" title="{{COL_FIELD}} (not searchable) "> {{row.entity.Visibility}}&nbsp;&nbsp; </span> </div>'),a.put("views/group.html",'<div id="divGroup" class="row"> <div style="margin-bottom: 1em" ng-show="groupController.errors.length > 0"> <div class="alert alert-danger" style="word-wrap:break-word; margin-bottom: 1em; font-size: 1.2em; font-weight: bold" ng-repeat="error in groupController.errors"> {{error}} <span class="glyphicon glyphicon-remove pull-right" style="cursor:pointer" ng-click="groupController.errors.splice($index,1)"> </span> </div> </div> <div class="col-md-2"> <div class="row"> <div class="row"> <ndex-account-image ndex-class="\'col-md-10\'" ndex-src="groupController.displayedGroup.image"> </ndex-account-image> </div> \x3c!--\n            <h4>\n                {{groupController.displayedGroup.userName}}\n            </h4>\n            --\x3e <div class="wrapLongLine"> <h4> {{groupController.displayedGroup.groupName}} </h4> </div> <div class="wrapLongLine"> <small>{{groupController.displayedGroup.emailAddress}}</small> </div> <div class="wrapLongLine"> <a ng-href="{{groupController.displayedGroup.website}}" target="_blank">{{groupController.displayedGroup.website}}</a> </div> <div class="wrapLongLine" ng-bind-html="groupController.displayedGroup.description"></div> <span class="btn-group btn-group-vertical buttonWithMarginBottom" ng-show="groupController.isAdmin || groupController.isMember"> <hr> <h5><strong>Actions:</strong></h5> <span ng-show="groupController.isAdmin"> <edit-group-modal ndex-data="groupController.displayedGroup"> </edit-group-modal> <a class="btn btn-primary customButtonWidth" ng-href="{{\'#/access/group/\'+groupController.displayedGroup.externalId}}"> Manage Members </a> </span> <leave-group ndex-data="groupController"></leave-group> <span ng-show="groupController.isAdmin"> <delete-group group-id-to-del="groupController.displayedGroup.externalId"> </delete-group> </span> </span> <span class="btn-group btn-group-vertical buttonWithMarginBottom" ng-hide="groupController.isMember || groupController.isAdmin || !groupController.isLoggedInUser"> <hr> <h5><strong>Actions:</strong></h5> <create-request-group ndex-data="groupController.displayedGroup"></create-request-group> </span> </div> </div> \x3c!-- tabs --\x3e <div id="divgroupTabs" class="col-md-9" ng-show="groupController.displayedGroup"> <tabset justified="true"> <tab heading="Networks {{getNumberOfNetworks()}}"> <div id="divNetworks" ng-show="groupController.networkSearchResults.length > 0"> <div id="userGroupsGridId" ui-grid-selection ui-grid="networkGridOptions" ui-grid-resize-columns ui-grid-auto-resize class="networkGrid"></div> </div> \x3c!--\n                <div id="divNetworks" ng-show=\'groupController.networkSearchResults.length > 0\'>\n                    <table class="table table-hover" ng-show="groupController.networkSearchResults.length > 0">\n                        \x3c!--\n                        <tbody ng-repeat="(index, network) in displayedGroup.networks">\n                        <tr ng-click="setAndDisplayCurrentNetwork(network.resourceId)">\n                            <td>{{network.resourceName}}</td>\n                        </tr>\n                        </tbody>\n                        --\x3e \x3c!--\n                        <thead>\n                        <tr>\n                            <th>Title</th>\n                            <th style="width: 10%;">Nodes</th>\n                            <th style="width: 10%;">Edges</th>\n                        </tr>\n                        </thead>\n                        <tbody  ng-repeat="network in groupController.networkSearchResults">\n                        <tr ng-click="groupController.setAndDisplayCurrentNetwork(network.externalId)">\n                            <td>{{network.name}}</td>\n                            <td class="AlignRight">{{network.nodeCount}}</td>\n                            <td class="AlignRight">{{network.edgeCount}}</td>\n                        </tr>\n                        </tbody>\n\n                    </table>\n                </div>\n                --\x3e <div class="row" ng-hide="groupController.networkSearchResults.length > 0"> <br> <p class="text-center text-muted">No networks to display</p> </div> </tab> <tab heading="Members {{getNumberOfMembers()}}"> <div id="divGroups"> <div class="row center-block"> <hr> <form class="form-inline col-md-6" role="form" ng-submit="groupController.searchMembersFromUserInput()"> <div class="form-group"> <div class="input-group input-group-sm"> <input type="text" class="form-control input-sm" placeholder="Search Members" ng-model="groupController.memberSearchString"> <div class="input-group-btn"><button type="submit" class="btn btn-default"> <span class="glyphicon glyphicon-search"></span></button></div> </div> </div> </form> <div class="offset-col-md-2 col-md-2"> <div class="checkbox"><label> <input type="checkbox" ng-click="groupController.adminCheckBoxClicked()" ng-model="groupController.userSearchAdmin">Admin</label> </div> </div> <div class="col-md-2"> <div class="checkbox"><label> <input type="checkbox" ng-click="groupController.memberCheckBoxClicked()" ng-model="groupController.userSearchMember">Member</label> </div> </div> </div> <div ng-show="groupController.userSearchResults.length > 0"> <ul ng-repeat="user in groupController.userSearchResults"> <div class="row"> <ndex-navigation ndex-class="" ndex-url="\'user/\'+user.externalId"> <ndex-account-image ndex-class="\'col-xs-2 col-sm-2 col-md-2 col-lg-2\'" ndex-src="user.image"> </ndex-account-image> <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10"> <h5><strong>{{user.firstName}} {{user.lastName}} </strong> </h5> <p class="text-muted">{{user.accountName}}</p> </div> </ndex-navigation> </div> </ul> </div> <div class="row" ng-hide="groupController.userSearchResults.length > 0"> <br> <p class="text-center text-muted">No users to display</p> </div> </div> </tab> </tabset> </div> </div>'),a.put("views/home.html",'<div class="container" style="width:100%; width: 1180px; margin-bottom: 1em; margin-top: 5px"> <div class="row" ng-show="!main.serverIsDown"> <div ng-show="main.isSupportedBrowserUsed()"> <div class="row" ng-show="!featuredContentDefined"> <div class="login-page-shadow col-md-12" style="border: 1px solid #3576BE; border-radius: 20px; height: 150px"> <div class="AlignLeft" style="width: 100%; margin: auto; padding-top: 8px" ng-include="\'search_bar.html\'"></div> </div> </div> <div class="row" ng-show="featuredContentDefined"> <div class="login-page-shadow col-7 col-xs-7 col-sm-7 col-md-7" style="width: 56%; border: 1px solid #3576BE; border-radius: 20px; height: 150px"> <div class="AlignLeft" style="width: 100%; margin: auto; padding-top: 8px" ng-include="\'search_bar.html\'"></div> </div> <div class="login-page-shadow col-5 col-xs-5 col-sm-5 col-md-5 pull-right" style="width: 43%; border: 1px solid #3576BE; border-radius: 20px; padding-left: 2px; padding-right: 2px; height: 150px"> <legend class="centerFeaturedCollection" style="border: none; margin-bottom: 7px; padding-top: 5px">Featured Content</legend> \x3c!-- the code below is taken from https://angular-ui.github.io/bootstrap/ --\x3e \x3c!-- https://www.jquery-az.com/bootstrap-carousel-5-single-multiple-horizontal-and-vertical-sliding-demos/ --\x3e \x3c!-- https://www.jquery-az.com/boots/demo.php?ex=8.0_3 --\x3e <div uib-carousel active="active" interval="carouselInterval" nowrap="noWrapSlides"> <div uib-slide ng-repeat="slide in slides track by slide.id" index="slide.id" style="height: 100px"> <a ng-href="{{slide.link}}" ng-click="saveSlideId(slide.id)"> <img ng-src="{{slide.image}}" class="slideImage"> <div ng-bind-html="slide.text" class="featuredCollectionDescriptionArea"></div> </a> </div> </div> </div> </div> <div class="row" style="margin-top: 1em"> <div class="col-10 col-xs-10 col-sm-10 col-md-10" style="width: 74%"> <div class="login-page-shadow row" style="border: 1px solid #3576BE; border-radius: 20px; height:556px"> <div ng-repeat="item in mainContent"> <div class="{{mainContentClass}}" style="word-wrap: break-word"> <div class="mainAreaLandingPage" style="height: 506px"> <ng-include src="item.content"></ng-include> </div> <a ng-show="item.href" ng-href="{{item.href}}" target="_blank" style="text-align: center"> >> Learn more ... </a> </div> </div> </div> </div> \x3c!-- Tweets --\x3e <div class="login-page-shadow col-2 col-xs-2 col-sm-2 col-md-2 pull-right" style="width: 25%; border: 1px solid #3576BE; border-radius: 20px; height: 556px"> <br> <twitter-widget> <a class="twitter-timeline" data-height="520" href="https://twitter.com/NDExProject" data-widget-id="639213859547521024" data-twitter-extracted-i1478884078554431236="true" data-chrome="noscrollbar nofooter"> </a> </twitter-widget> </div> </div> <div class="row" style="margin-top: 0.5em" ng-show="logosDefined()"> <div class="col-12 col-xs-12 col-sm-12 col-md-12"> <div class="login-page-shadow row" style="border: 1px solid #3576BE; border-radius: 20px; height:110px; margin-top:1em"> <div id="logoContainer"> <slick ng-if="logosLoaded" init-onload="true" data="logosLoaded" settings="slickConfig" slides-to-show="8" slides-to-scroll="1" dots="false" variable-width="true" autoplay="true"> <div ng-repeat="logo in logos"> <a ng-href="{{logo.href}}" target="_blank"> <img class="logosStyle" src="{{logo.image}}" data-toggle="tooltip" data-placement="right" onmouseenter="$(this).tooltip(\'show\')" title="{{logo.title}}"> </a> </div> </slick> </div> </div> </div> </div> </div> </div> </div> <script type="text/ng-template" id="generic-info-modal.html"><div class="modal-content">\n\n        <div class="modal-header">\n            <h4 class="modal-title">{{title}}</h4>\n        </div>\n\n        <div class="modal-body">\n            {{message}}\n        </div>\n\n        <div class="modal-footer">\n            <button class="btn btn-default" ng-click="close()">Close</button>\n        </div>\n\n    </div><\/script>'),a.put("views/logInModal.html",'<div class="modal-content"> <div class="modal-header"> <h4 class="modal-title"><strong>Network not Public. Sign in to Your NDEx Account.</strong></h4> </div> <div class="modal-body wrapLongLine" style="max-height:520px; overflow:auto"> <div class="form-group"> <h5 class="modal-title" style="font-weight: bold" ng-bind-html="message"></h5> </div> <div class="form-group"> <input name="accountName" type="accountName" class="form-control" placeholder="Account Name" required autofocus ng-model="credentials.user"> </div> <div class="form-group"> <input name="password" type="password" class="form-control" placeholder="Password" required ng-model="credentials.password"> </div> <span class="text-danger" ng-show="credentials.errorMessage" style="word-wrap:break-word"> <strong>{{credentials.errorMessage}}</strong> </span> </div> <div class="modal-footer"> <div class="AlignCenter"> <button class="btn btn-danger" ng-click="cancel()">Cancel</button> <button class="btn btn-primary" ng-click="signIn()" ng-disabled="!credentials.user || !credentials.password"> Sign In </button> <br><br> <div> <div>OR</div> <br> <div class="google-button"> <button class="google-sign-in-button" type="button" ng-click="signInWithGoogle()"> <span class="google-sign-in-button-span"> <img src="images/google-logo.9ac57bb2.svg" alt="" style="height: 20px; margin-right: 8px; vertical-align: middle; width: 20px"> <span>Sign in with Google</span> </span> </button> </div> <br> </div> \x3c!--  <div ng-show="!isNotSafari">\n                Single Sign on is not supported in this browser. Please use Chrome or Firefox if you want to use this feature.\n                <br>\n            </div> --\x3e </div> </div> </div>'),a.put("views/manageBulkNetworkAccess.html",'<div class="row"> <div class="col-sm-offset-2 col-sm-8"> <p class="alert alert-danger" ng-repeat="error in bulkNetworkManager.errors" style="word-wrap:break-word"> {{error}} <span class="glyphicon glyphicon-remove pull-right" style="cursor:pointer" ng-click="bulkNetworkManager.errors.splice($index,1)"> </span> </p> </div> </div> <div class="row"> <div class="col-sm-offset-2 col-sm-8" ng-hide="!noNetworksSelected"> <div class="row"> <hr> <h5>No networks selected</h5> <hr> </div> </div> <div class="col-sm-offset-2 col-sm-8" ng-hide="noNetworksSelected"> <div class="row"> <h5>Grant access to the <strong>selected networks</strong></h5> <br> <p class="text-info"> Users and groups with admin access modify and delete the network as well as manage who has access. Users and groups who can edit the network can only modify the network. Users and groups with read access can view the network even if it is private. </p> <p class="text-info"> Please note that granting access to a group is equivalent to granting access to all the members for the specified access. </p> </div> <div class="row"> <h6>Who has access</h6> <hr> <div ng-repeat="member in bulkNetworkManager.selectedAccountsForUpdatingAccessPermissions"> <div class="row"> <div class="col-sm-offset-1 col-sm-3 text-muted"> {{member.memberAccountName}} </div> <div class="col-sm-1"> <span class="glyphicon glyphicon-remove text-muted" style="cursor:pointer" ng-click="bulkNetworkManager.removeMember($index, member);"> </span> </div> </div> <hr> </div> <div class="pull-right"> <bulk-network-access-modal ndex-data="bulkNetworkManager"> </bulk-network-access-modal> </div> </div> <br> <br> <div class="row"> <div class="col-sm-4"> <h6>Grant access to users</h6> <div class="row"> <form role="form" ng-submit="bulkNetworkManager.findUsers()"> <input type="text" class="input-sm" placeholder="find a person" ng-model="bulkNetworkManager.searchString"> <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button> </form> </div> <div class="row" ng-repeat="user in bulkNetworkManager.newUsers"> <br> <div class="col-sm-8"> <div class="row"> <div class="col-sm-6"> <div class="row"> <ndex-account-image ndex-class="\'col-sm-10\'" ndex-src="user.image"> </ndex-account-image> </div> </div> <div class="col-sm-6"> {{bulkNetworkManager.getUserAccountName(user)}} </div> </div> </div> <div class="col-sm-4"> <div class="row"> <button class="btn btn-xs btn-primary pull-right" ng-disabled="user.member" ng-click="bulkNetworkManager.addUserMember(user)"> Add </button> </div> </div> </div> </div> <div class="col-sm-offset-2 col-sm-4"> <h6>Grant access to groups</h6> <div class="row"> <form role="form" ng-submit="bulkNetworkManager.findGroups()"> <input type="text" class="input-sm" placeholder="find a group" ng-model="bulkNetworkManager.groupSearchString"> <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button> </form> </div> <div class="row" ng-repeat="group in bulkNetworkManager.newGroups"> <br> <div class="col-sm-8"> <div class="row"> <div class="col-sm-6"> <div class="row"> <ndex-account-image ndex-class="\'col-sm-10\'" ndex-src="group.image"> </ndex-account-image> </div> </div> <div class="col-sm-6"> {{bulkNetworkManager.getGroupAccountName(group)}} </div> </div> </div> <div class="col-sm-4"> <div class="row"> <button class="btn btn-xs btn-primary pull-right" ng-disabled="group.member" ng-click="bulkNetworkManager.addGroupMember(group)"> Add </button> </div> </div> </div> </div> </div> </div> </div>'),a.put("views/manageGroupAccess.html",'<div class="row"> <div class="col-sm-offset-2 col-sm-8"> <p class="alert alert-danger" ng-repeat="error in groupManager.errors" style="word-wrap:break-word"> {{error}} <span class="glyphicon glyphicon-remove pull-right" style="cursor:pointer" ng-click="groupManager.errors.splice($index,1)"> </span> </p> </div> </div> <div class="row"> <div class="col-sm-offset-2 col-sm-8"> <div class="row"> <h5>Manage Members for <strong>{{groupManager.group.groupName}}</strong></h5> <br> <p class="text-info">All members inherit access to networks that this group has. Admin members can delete the group, manage members, and grant network access.</p> </div> <div class="row"> <h6>Members</h6> <hr> <div ng-repeat="member in groupManager.selectedAccountsForUpdatingAccessPermissions"> <div class="row"> <div class="col-sm-offset-1 col-sm-3 text-muted"> {{groupManager.getUserAccountName(member)}} </div> <div class="col-sm-3"> <span class="dropdown"> <a href class="dropdown-toggle" data-toggle="dropdown"> {{member.permissions | permissionToLabel}}<span class="caret"></span> </a> <ul class="dropdown-menu"> <li> <a class="dropdown-toggle" ng-click="groupManager.selectedAccountsForUpdatingAccessPermissions[$index].permissions = &quot;GROUPADMIN&quot;; groupManager.changesWereMade()"> <small>Is Admin</small> </a> </li> <li> <a class="dropdown-toggle" ng-click="groupManager.selectedAccountsForUpdatingAccessPermissions[$index].permissions = &quot;MEMBER&quot;; groupManager.changesWereMade()"> <small>Is Member</small> </a> </li> </ul> </span> </div> <div class="col-sm-1"> <span class="glyphicon glyphicon-remove text-muted" style="cursor:pointer" ng-click="groupManager.removeMember($index, member);"> </span> </div> </div> <hr> </div> <div class="pull-right"> <button type="button" class="btn btn-sm btn-danger" ng-click="groupManager.discardChanges()" ng-disabled="isProcessing || !groupManager.changesWereMade()"> Discard Changes </button> <button type="button" class="btn btn-sm btn-success" ng-click="groupManager.save()" ng-disabled="isProcessing || !groupManager.changesWereMade()"> Save Changes </button> </div> </div> <br><br> <div class="row"> <h6>Add members</h6> <div class="col-sm-4"> <div class="row"> <form role="form" ng-submit="groupManager.findUsers()"> <input type="text" class="input-sm" placeholder="find a person" ng-model="groupManager.searchString"> <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button> </form> </div> <div class="row" ng-repeat="user in groupManager.newUsers"> <br> <div class="col-sm-8"> <div class="row"> <div class="col-sm-6"> <div class="row"> <ndex-account-image ndex-class="\'col-sm-10\'" ndex-src="user.image"> </ndex-account-image> </div> </div> <div class="col-sm-6"> {{groupManager.getUserAccountName(user)}} </div> </div> </div> <div class="col-sm-4"> <br> <button class="btn btn-xs btn-primary pull-right" ng-disabled="user.member" ng-click="groupManager.addUserMember(user)"> Add </button> </div> </div> </div> </div> </div> </div>'),
a.put("views/manageNetworkAccess.html",'<div class="row"> <div class="col-sm-offset-2 col-sm-8"> <p class="alert alert-danger" ng-repeat="error in networkManager.errors" style="word-wrap:break-word"> {{error}} <span class="glyphicon glyphicon-remove pull-right" style="cursor:pointer" ng-click="networkManager.errors.splice($index,1)"> </span> </p> </div> </div> <div class="row"> <div class="col-sm-offset-2 col-sm-8"> <div class="row rowWithOneLineTopPad rowWithOneLineBottomPad" ng-if="networkManager.showShareURLControl"> <h4><strong>Share With Others</strong></h4> <h5 ng-hide="!networkManager.networkShareableURL">Anyone with the link can view this network</h5> <div ng-hide="!networkManager.networkShareableURL"> <input type="text" class="form-control" readonly="readonly" value="{{networkManager.networkShareableURL}}"> </div> <h5 ng-if="networkManager.networkShareableURL"> <strong>Share URL Status:</strong><span style="color:green">&nbsp;Enabled</span> </h5> <h5 ng-if="!networkManager.networkShareableURL"> <strong>Share URL Status:</strong>&nbsp;Disabled </h5> <button type="button" ng-if="showChangeShareURLButton" class="btn btn-default" ng-click="networkManager.switchShareableURL()"> {{networkManager.networkShareableURLLabel}} </button> <a ng-if="!showChangeShareURLButton" title="{{showChangeShareURLButtonTitle}}" class="btn btn-default actionsLabelDisabled-default-btn"> {{networkManager.networkShareableURLLabel}} </a> <a ng-hide="!networkManager.networkShareableURL" class="btn btn-default" tooltip="{{copyNetworkShareURLTitle}}" tooltip-placement="bottom" ng-click="showCopiedNetworkShareURLTitle()" ng-mouseover="showOriginalCopyNetworkShareURLTitle()" ngclipboard data-clipboard-text="{{networkManager.networkShareableURL}}"> Copy URL </a> </div> <hr class="row" ng-if="networkManager.showShareURLControl"> <div class="row"> <h4>Manage who has access for <strong>{{networkManager.network.name}}</strong></h4> <br> <p class="text-info">Users and groups with admin access modify and delete the network as well as manage who has access. Users and groups who can edit the network can only modify the network. Users and groups with read access can view the network even if it is private. </p> <p class="text-info"> Please note that granting access to a group is equivalent to granting access to all the members for the specified access. </p> </div> <div class="row"> <h6>Who has access</h6> <hr> \x3c!--<div ng-repeat=\'member in networkManager.memberships\'>--\x3e <div ng-repeat="member in networkManager.selectedAccountsForUpdatingAccessPermissions"> <div class="row"> <div class="col-sm-offset-1 col-sm-3 text-muted"> {{networkManager.getAccountName(member)}} </div> <div class="col-sm-3"> <span class="dropdown"> <a href class="dropdown-toggle" data-toggle="dropdown"> {{member.permissions | permissionToLabel}}<span class="caret"></span> </a> <ul class="dropdown-menu"> <li> <a ng-show="!networkManager.memberIsAdmin(member)" class="dropdown-toggle" ng-click="networkManager.selectedAccountsForUpdatingAccessPermissions[$index].permissions = &quot;READ&quot;; networkManager.changesWereMade();"> <small>Can Read</small> </a> </li> <li> <a class="dropdown-toggle" ng-click="networkManager.selectedAccountsForUpdatingAccessPermissions[$index].permissions = &quot;WRITE&quot;; networkManager.changesWereMade();"> <small>Can Edit</small> </a> </li> <li ng-show="networkManager.checkIfUserAccount(member)"> <a class="dropdown-toggle" ng-click="networkManager.selectedAccountsForUpdatingAccessPermissions[$index].permissions = &quot;ADMIN&quot;; networkManager.changesWereMade();"> <small>Is Admin</small> </a> </li> </ul> </span> </div> <div class="col-sm-1"> <span ng-show="!networkManager.memberIsAdmin(member)" class="glyphicon glyphicon-remove text-muted" style="cursor:pointer" ng-click="networkManager.removeMember($index, member);"> </span> </div> </div> <hr> </div> <div class="pull-left"> <span ng-show="progressMessage"> <strong><span style="color: green; font-size: 1.3em" ng-bind-html="progressMessage"></span></strong> </span> <span ng-show="errorMessage" style="word-wrap:break-word"> <strong><span style="color: red; font-size: 1.3em" ng-bind-html="errorMessage"></span></strong> </span> </div> <div class="pull-right"> <button type="button" class="btn btn-sm btn-danger" ng-click="networkManager.discardChanges()" ng-disabled="isProcessing || !networkManager.changesWereMade()"> Discard Changes </button> <a class="btn btn-sm btn-success" style="width: 120px" ng-disabled="isProcessing || !networkManager.changesWereMade() || networkManager.nothingSelected()"> <confirm-admin-removal success-call="networkManager.save()" check-admin-removal="networkManager.isSelfAdminRemoval()"> Save Changes </confirm-admin-removal> </a> </div> </div> <br> <br> <div class="row"> <div class="col-sm-4"> <h6>Grant access to users</h6> <div class="row"> <form role="form" ng-submit="networkManager.findUsers()"> <input type="text" class="input-sm" placeholder="find a person" ng-model="networkManager.searchString"> <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button> </form> </div> <div class="row" ng-repeat="user in networkManager.newUsers"> <br> <div class="col-sm-8"> <div class="row"> <div class="col-sm-6"> <div class="row"> <ndex-account-image ndex-class="\'col-sm-10\'" ndex-src="user.image"> </ndex-account-image> </div> </div> <div class="col-sm-6"> {{networkManager.getUserAccountName(user)}} </div> </div> </div> <div class="col-sm-4"> <button class="btn btn-xs btn-primary pull-right" ng-disabled="user.member" ng-click="networkManager.addUserMember(user)"> Add </button> </div> </div> </div> <div class="col-sm-offset-2 col-sm-4"> <h6>Grant access to groups</h6> <div class="row"> <form role="form" ng-submit="networkManager.findGroups()"> <input type="text" class="input-sm" placeholder="find a group" ng-model="networkManager.groupSearchString"> <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button> </form> </div> <div class="row" ng-repeat="group in networkManager.newGroups"> <br> <div class="col-sm-8"> <div class="row"> <div class="col-sm-6"> <div class="row"> <ndex-account-image ndex-class="\'col-sm-10\'" ndex-src="group.image"> </ndex-account-image> </div> </div> <div class="col-sm-6"> {{networkManager.getGroupAccountName(group)}} </div> </div> </div> <div class="col-sm-4"> <button class="btn btn-xs btn-primary pull-right" ng-disabled="group.member" ng-click="networkManager.addGroupMember(group)"> Add </button> </div> </div> </div> </div> </div> </div>'),a.put("views/myAccount.html",'<div class="row"> <div class="col-md-2"> <div class="row"> <div class="row" ng-show="myAccountController.displayedUser.image"> <ndex-account-image ndex-class="\'col-md-10\'" ndex-src="myAccountController.displayedUser.image"> </ndex-account-image> </div> <h4> {{myAccountController.displayedUser.firstName}} {{myAccountController.displayedUser.lastName}} </h4> <div> {{myAccountController.displayedUser.userName}} </div> <div class="wrapLongLine"> <a href="{{myAccountController.displayedUser.website}}" target="_blank"> {{myAccountController.displayedUser.website}} </a> </div> <div class="wrapLongLine" ng-bind-html="myAccountController.displayedUser.description"></div> <div class="rowWithOneLineTopPad"><strong>Disk Space Used: </strong> <span ng-if="!diskSpaceInfo.diskQuotaUnlimited">{{diskSpaceInfo.diskPercentageUsed}}%</span> <span ng-if="diskSpaceInfo.diskUsed>0"> <br> ( {{diskSpaceInfo.diskUsedString}} ) </span> </div> <div class="progress progress-striped" ng-if="diskSpaceInfo.diskUsed > 0"> <div ng-class="diskSpaceInfo.diskPercentageUsedClass" ng-style="diskSpaceInfo.diskPercentageUsedStyle"></div> </div> <hr> <span ng-show="myAccountController.isLoggedInUser && myAccountController.identifier == myAccountController.loggedInIdentifier"> <div class="btn-group btn-group-vertical buttonWithMarginBottom" ng-show="(myAccountController.networkTableRowsSelected > 0) &&\n                               (myAccountController.currentTab == \'networks\')"> <h5><strong>Bulk Actions:</strong></h5> <span ng-show="(myAccountController.networkTableRowsSelected > 0) &&\n                               (myAccountController.currentTab == \'networks\')"> <div class="btn-group dropdown"> <button id="editNetworksPropertiesButton" type="button" data-toggle="dropdown" ng-show="!isEditProfileDropDownButtonDisabled()" tooltip="Change description, reference, version, visibility, read-only flag of the selected network(s)" tooltip-placement="bottom" class="btn btn-primary dropdown-toggle customButtonWidth"> {{myAccountController.editProfilesLabel}} <span class="caret"></span> </button> <span title="{{editProfileDropDownBulkButtonTitle}}" ng-show="isEditProfileDropDownButtonDisabled()"> <a class="btn btn-primary customButtonWidth disabled"> {{myAccountController.editProfilesLabel}} <span class="caret"></span> </a> </span> <ul class="dropdown-menu" role="menu" aria-labelledby="editNetworksPropertiesButton"> <li style="margin: 3px 0" ng-show="!enableEditPropertiesBulkButton" class="disabled"> <a title="{{changeDescriptionButtonTitle}}">Change Description</a> </li> <li style="margin: 3px 0" ng-show="enableEditPropertiesBulkButton"> <bulk-change-network-property ndex-data="myAccountController" directive-title="Change Description of Selected Networks" directive-action="description" directive-description="Change Descriptions of the selected networks to the one below:" title="Change Description of the selected networks" directive-label="Change Description"> </bulk-change-network-property> </li> <li style="margin: 3px 0" ng-show="!enableEditPropertiesBulkButton" class="disabled"> <a title="{{changeReferenceButtonTitle}}">Change Reference</a> </li> <li style="margin: 3px 0" ng-show="enableEditPropertiesBulkButton"> <bulk-change-network-property ndex-data="myAccountController" directive-title="Change Reference of Selected Networks" directive-action="reference" directive-description="Change Reference of the selected networks to the one below:" title="Change Reference of the selected networks" directive-label="Change Reference"> </bulk-change-network-property> </li> <li style="margin: 3px 0" ng-show="!enableEditPropertiesBulkButton" class="disabled"> <a title="{{changeVersionButtonTitle}}">Change Version</a> </li> <li style="margin: 3px 0" ng-show="enableEditPropertiesBulkButton"> <bulk-change-network-property ndex-data="myAccountController" directive-title="Change Version of Selected Networks" directive-action="version" directive-description="Change Versions of the selected networks to the one below:" title="Change Version of the selected networks" directive-label="Change Version"> </bulk-change-network-property> </li> <li style="margin: 3px 0" ng-show="!enableChangeVisibilityBulkButton" class="disabled"> <a title="{{changeVisibilityButtonTitle}}">Change Visibility</a> </li> <li style="margin: 3px 0" ng-show="enableChangeVisibilityBulkButton"> <bulk-change-network-system-property ndex-data="myAccountController" directive-title="Change Visibility of Selected Networks" directive-action="visibility" directive-description="Change Visibility of the selected networks to the one below:" title="Change Visibility of the selected networks" directive-label="Change Visibility"> </bulk-change-network-system-property> </li> <li style="margin: 3px 0" ng-show="!enableSetReadOnlyBulkButton" class="disabled"> <a title="{{setReadOnlNetworkButtonTitle}}">Set Read-Only</a> </li> <li style="margin: 3px 0" ng-show="enableSetReadOnlyBulkButton"> <bulk-change-network-system-property ndex-data="myAccountController" directive-title="Change Read-Only Flag of Selected Networks" directive-action="readOnly" directive-description="Change Read-Only flag of the selected networks to the one below:" title="Change Read-Only Flag of the selected networks" directive-label="Set Read-Only"> </bulk-change-network-system-property> </li> </ul> </div> <span> \x3c!-- <a ng-class="enableEditAndExportBulkButtons ? \'btn btn-primary customButtonWidth\' :\'btn btn-primary customButtonWidth disabled\'">--\x3e <bulk-export-network title="{{exportNetworkButtonTitle}}" ndex-data="myAccountController" my-class="{{enableExportBulkButton ?\n                                            \'btn btn-primary customButtonWidth\' :\n                                            \'btn btn-primary customButtonWidth disabled\'}}"> </bulk-export-network> </span> \x3c!-- NB: title directive should be in the span element below; if it is moved to a element,\n                             it wil not work for case when button is disabled!!!\n                         --\x3e <span title="{{shareNetworkButtonTitle}}"> <a ng-class="enableShareBulkButton ? \'btn btn-primary customButtonWidth\' :\n                                    \'btn btn-primary customButtonWidth disabled\'" ng-click="myAccountController.manageBulkAccess(\'/access/bulk/network\', main.getCurrentUserId())"> Share </a> </span> <span title="{{addToMySetsButtonTitle}}" ng-show="!enableAddToMySetsBulkButton"> <a class="btn btn-primary customButtonWidth disabled"> Add To My Sets </a> </span> <spn ng-show="enableAddToMySetsBulkButton"> <show-network-sets-modal controller-name="myAccountController" my-account-controller="myAccountController" my-class="btn btn-primary customButtonWidth"> </show-network-sets-modal> </spn> <span title="{{removeFromMyNetworksButtonTitle}}"> <a ng-class="enableRemoveSharedNetworksBulkButton ? \'btn btn-primary customButtonWidth\' :\n                                    \'btn btn-primary customButtonWidth disabled\'" ng-click="myAccountController.removeSharedSelectedNetworks()"> {{myAccountController.removeNetworksButtonLabel}} </a> </span> \x3c!-- NB: title directive should be in the span element below; if it is moved to an element,\n                            it wil not work for case when button is disabled!!!\n                        --\x3e <span title="{{deleteNetworkButtonTitle}}"> <a ng-class="enableDeleteBulkButton ? \'btn btn-primary customButtonWidth\' :\n                                    \'btn btn-primary customButtonWidth disabled\'" ng-click="myAccountController.checkAndDeleteSelectedNetworks()"> {{myAccountController.deleteNetworksLabel}} </a> </span> </span> <hr> </div> <div class="btn-group btn-group-vertical buttonWithMarginBottom" ng-show="(myAccountController.taskTableRowsSelected > 0) &&\n                               (myAccountController.currentTab == \'tasks\')"> <h5><strong>Bulk Actions:</strong></h5> <span ng-show="(myAccountController.taskTableRowsSelected > 0) &&\n                               (myAccountController.currentTab == \'tasks\')"> <span> <a class="btn btn-primary customButtonWidth" ng-click="myAccountController.checkAndMarkAsRead()"> Mark As Read </a> </span> <span> <a class="btn btn-primary customButtonWidth" ng-click="myAccountController.checkAndDeleteSelectedTasks()"> Delete </a> </span> <span> <a ng-class="enabledManageRequestsBulkButton() ? \'btn btn-primary customButtonWidth\' :\n                                        \'btn btn-primary customButtonWidth disabled\'" ng-click="myAccountController.manageSelectedRequests()"> Manage Requests </a> </span> <span> <a ng-class="enabledBulkDownloadButton() ? \'btn btn-primary customButtonWidth\' :\n                                        \'btn btn-primary customButtonWidth disabled\'" ng-click="myAccountController.downloadSelectedTasks()"> Download </a> </span> </span> <hr> </div> <div class="btn-group btn-group-vertical buttonWithMarginBottom"> <h5><strong>Actions:</strong></h5> <span> <div class="btn-group dropdown"> <button id="editAccountButton" type="button" data-toggle="dropdown" tooltip="Update personal info, change password, delete account" tooltip-placement="bottom" class="btn btn-primary dropdown-toggle customButtonWidth"> Edit Account <span class="caret"></span> </button> <ul class="dropdown-menu" role="menu" aria-labelledby="editAccountButton"> <li style="margin: 3px 0"> <edit-user-modal ndex-data="myAccountController.displayedUser"></edit-user-modal> </li> <li style="margin: 3px 0"> <change-password-modal></change-password-modal> </li> <li class="disabled" style="margin: 3px 0"><a href="#">Notification Settings</a></li> <li style="margin: 3px 0"> <delete-user></delete-user> </li> </ul> </div> </span> <trigger-create-group-modal></trigger-create-group-modal> <trigger-create-network-set-modal my-account-controller="myAccountController" signal-new-set-creation="false"> </trigger-create-network-set-modal> <span> <a class="btn btn-primary customButtonWidth" ng-href="#upload">Upload Networks</a> </span> </div> </span> </div> </div> \x3c!-- tabs --\x3e <div class="col-md-10" ng-show="myAccountController.displayedUser"> <div class="row"> <div id="spinnerMyAccountPageId" style="position:relative; top:20em"></div> </div> <tabset justified="false"> \x3c!--\n            <button ng-click="myAccountController.refreshMyNetworksTableAndDiskInfo();" ng-disabled="refreshNetworksButtonDisabled"\n                    style="float: left;" type="button" class="btn btn-default btn-md">\n                <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> Refresh\n            </button>\n            --\x3e \x3c!--<tab style="padding-left: 10px" heading="My Networks" ng-click="networkGridApi.core.handleWindowResize()">--\x3e <tab ng-click="onTabSelect(\'networks\'); networkGridApi.core.handleWindowResize()"> <tab-heading> My Networks &nbsp; <span class="glyphicon glyphicon-refresh" aria-hidden="true" ng-click="checkAndRefreshMyNetworksTableAndDiskInfo();" title="Refresh My Networks" ng-disabled="refreshNetworksButtonDisabled" ng-style="refreshNetworksButtonDisabled ? {color: \'#3576BE\', cursor:\'progress\'} : {color: \'#3576BE\', cursor:\'pointer\'}"> </span> </tab-heading> \x3c!-- adding ui-grid-auto-resize fixes the issue of distorted Networks Tab (NDEX-578).\n                 Resolution is described here: http://ui-grid.info/docs/#/tutorial/108_hidden_grids\n                 The use ng-if="tabShown" ... described on the page above introduces another issue:\n                 the selected rows on the Networks page get unselected if you select a different tab (i.e., Groups)\n                 and come back to Networks tab. --\x3e <div ng-show="myAccountController.showNetworkTable"> <div id="myNetworksGridId" ui-grid-selection ui-grid="networkGridOptions" ui-grid-resize-columns ui-grid-auto-resize ui-grid-pagination class="networkGrid"> </div> </div> <div class="row" ng-hide="myAccountController.showNetworkTable"> <br> <p class="text-center text-muted">No Networks or Network Sets to display</p> </div> </tab> <tab heading="My Groups" ng-click="onTabSelect(\'groups\')"> <div id="divGroups"> <div class="row center-block"> <hr> <form class="form-inline col-md-6" role="form" ng-submit="myAccountController.searchGroupsFromUserInput()"> <div class="form-group"> <div class="input-group input-group-sm"> <input type="text" class="form-control input-sm" placeholder="Search groups this account is in" ng-model="myAccountController.groupSearchString"> <div class="input-group-btn"><button type="submit" class="btn btn-default"> <span class="glyphicon glyphicon-search"></span></button> </div> </div> </div> </form> <div class="offset-col-md-2 col-md-2"> <div class="checkbox"><label> <input type="checkbox" ng-click="myAccountController.adminCheckBoxClicked()" ng-model="myAccountController.groupSearchAdmin">Admin</label> </div> </div> <div class="col-md-2"> <div class="checkbox"><label> <input type="checkbox" ng-click="myAccountController.memberCheckBoxClicked()" ng-model="myAccountController.groupSearchMember">Member</label> </div> </div> </div> <div ng-show="myAccountController.groupSearchResults.length > 0"> <ul ng-repeat="group in myAccountController.groupSearchResults"> <div class="row"> <ndex-navigation ndex-class="" ndex-url="\'group/\'+group.externalId"> <ndex-account-image ndex-class="\'col-xs-2 col-sm-2 col-md-2 col-lg-2\'" ndex-src="group.image"> </ndex-account-image> <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10"> <h5 style="color:#428BCA"><strong>{{group.groupName}}</strong></h5> <div class="wrapLongLine, text-muted"> <p>{{group.website}}</p> </div> <div class="wrapLongLine, text-muted"> <p> {{stripHTML(group.description) | limitTo:30}} {{stripHTML(group.description).length > 30 ? \'...\' : \'\'}} </p> </div> </div> </ndex-navigation> </div> </ul> </div> <div class="row" ng-hide="myAccountController.groupSearchResults.length > 0"> <br> <p class="text-center text-muted">No groups to display</p> </div> </div> </tab> <tab ng-click="onTabSelect(\'tasks\'); updateLastTimeVisitedMyTasksTimestamp(); taskGridApi.core.handleWindowResize()" ng-show="(myAccountController.isLoggedInUser) &&\n                    (myAccountController.displayedUser.externalId===myAccountController.loggedInIdentifier)" class="{{getClassForMyTasksTab()}}"> <tab-heading> My Tasks & Notifications &nbsp; <span class="glyphicon glyphicon-refresh" aria-hidden="true" ng-click="checkAndRefreshMyTaskAndNotification();" title="Refresh My Tasks & Notifications" ng-disabled="refreshTasksButtonDisabled" ng-style="refreshTasksButtonDisabled ?\n                          {color: \'#3576BE\', cursor:\'progress\'} : {color: \'#3576BE\', cursor:\'pointer\'}"> </span> <span class="badge badge-notify" ng-if="myAccountController.numberOfNewTasksAndRequests > 0"> {{myAccountController.numberOfNewTasksAndRequests}} </span> </tab-heading> <div ng-show="showTasksAndRequestsTable()"> <div id="myTasksAndRequestsGridId" ui-grid-selection ui-grid="tasksAndRequestsGridOptions" ui-grid-resize-columns ui-grid-auto-resize class="networkGrid"> </div> </div> <div class="row" ng-hide="showTasksAndRequestsTable()"> <br> <p class="text-center text-muted">No Tasks or Notifications to display</p> </div> </tab> </tabset> </div> </div>'),
a.put("views/network.html",'<div class="row"> <div style="margin-bottom: 1em" ng-show="networkController.errors.length > 0"> <div class="alert alert-danger" style="margin-bottom: 1em; font-size: 1.2em; font-weight: bold" ng-repeat="error in networkController.errors" style="word-wrap:break-word"> {{error}} <span class="glyphicon glyphicon-remove pull-right" style="cursor:pointer" ng-click="networkController.errors.splice($index,1)"> </span> </div> </div> <div class="col-md-7"> <div class="row"> <div id="spinnerId"></div> <div class="cytoscapeCanvas" id="cytoscape-canvas" ng-style="{background: networkController.bgColor}" ng-show="currentView == \'Graphic\'"> </div> <div id="messageOverlay" ng-show="showNetworkSample()" style="float:bottom;\n                    display: inline-block;\n                    border-radius: 5px;\n                    position: absolute;\n                    top:5px;\n                    right:4px;\n                    font-size: 1.1em;\n                    background-color: #FCCB29;\n                    padding:0.3em 1em;\n                    border-style: ridge;\n                    border-width: 4px"> <span> <strong>Sample: {{networkController.sampleSize}} edges</strong> </span> </div> \x3c!--\n            <div id="switchCanvasToFullScreenId"\n                 style=\'\n                    display: inline-block;\n                    position: absolute;\n                    bottom: 50px;\n                    right: 10px;\n                    font-size: 1.1em;\'\n                 ng-show="fullScreen && currentView == \'Graphic\'">\n\n                <button type="button" class="actionsLabel btn btn-primary" ng-click="openInFullScreenMode(\'canvas\')">\n                    Full Screen\n                </button>\n            </div>\n--\x3e <tabset ng-show="currentView == \'Table\'"> <tab heading="Edges" ng-click="activateTab(\'Edges\'); edgeGridApi.core.handleWindowResize()"> <div id="edgeGridId" ui-grid="edgeGridOptions" ui-grid-resize-columns ui-grid-auto-resize> </div> </tab> <tab heading="Nodes" ng-click="activateTab(\'Nodes\'); nodeGridApi.core.handleWindowResize()"> <div id="nodeGridId" ui-grid="nodeGridOptions" ui-grid-resize-columns ui-grid-auto-resize> </div> </tab> </tabset> <div class="rowWithOneLineTopPad"></div> <div id="queryWarningsOrErrorsId" ng-show="networkController.queryWarnings.length > 0 || networkController.queryErrors.length" style="position: absolute; bottom: 36px; word-wrap:break-word" class="rowWithOneLineBottomPad"> <p class="alert alert-success" style="margin-bottom: 0; margin-right: -3px" ng-repeat="warning in networkController.queryWarnings"> {{warning}} <span class="glyphicon glyphicon-remove pull-right" style="cursor:pointer" ng-click="networkController.queryWarnings.splice($index,1)"> </span> </p> <p class="alert alert-danger" style="word-wrap:break-word; margin-bottom: 0; margin-right: -3px" ng-repeat="error in networkController.queryErrors"> {{error}} <span class="glyphicon glyphicon-remove pull-right" style="cursor:pointer" ng-click="networkController.queryErrors.splice($index,1)"> </span> </p> </div> <button type="button" class="btn btn-primary" ng-click="networkController.backToOriginalNetwork($event)" ng-show="networkController.successfullyQueried"> <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span> Back To Original Network </button> <div class="networkActionsSection" ng-show="!networkController.successfullyQueried" id="simpleQueryNetworkViewId"> <form id="frmSearchNetwork" class="form-inline pull-left"> <div class="form-group"> <span ng-show="networkController.hasMultipleSubNetworks() || disableQuery" tooltip="{{disabledQueryTooltip}}" tooltip-placement="right"> <input class="form-control" type="search" placeholder="Query Terms" style="width:300px" disabled="disabled"> </span> <input id="inputQueryStrId" class="form-control" type="search" ng-model="networkController.searchString" placeholder="Query Terms (i.e., AKT1 or WNT*)" style="width:330px" required ng-show="!networkController.hasMultipleSubNetworks() && !disableQuery"> </div> <div class="form-group"> &nbsp;&nbsp; <label>Type:</label> <a data-toggle="tooltip" ng-click="showQueriesExplanation()" ng-init="setToolTips()" tooltip="{{queryTypesTooltipText}}"> <i class="fa fa-info-circle"></i> </a> &nbsp; </div> <div class="form-group"> <select class="form-control" ng-model="selectedQuery" ng-options="query.name for query in networkController.queryTypes" ng-disabled="networkController.hasMultipleSubNetworks() || disableQuery" required> </select> </div> &nbsp; <button class="btn btn-default btn-primary" ng-show="!networkController.hasMultipleSubNetworks() && !disableQuery" ng-click="networkController.checkQueryNetworkAndDisplay(\'neighborhood\')" style="margin-bottom:0">Run Query </button> <a class="actionsLabelDisabled-btn btn btn-primary" ng-show="networkController.hasMultipleSubNetworks() || disableQuery" tooltip="{{disabledQueryTooltip}}"> Run Query </a> &nbsp; </form> \x3c!--\n                <span class="pull-left" style="margin-top:0.5em"\n                      ng-if="!networkController.hasMultipleSubNetworks() && !disableQuery">\n                    <a ng-click="activateAdvancedQueryTab()">\n                        <u><strong>Advanced Query</strong></u>\n                    </a>\n                </span>\n--\x3e \x3c!--\n                <span id="disabledQueryId3"\n                      class="pull-left" style="margin-top:0.5em"\n                      ng-disable="true"\n                      ng-mouseover="changeDisabledQueryTitle3()" title="">\n                    <span  style="color:#999999; cursor:not-allowed">\n                        <u><strong>Advanced Query</strong></u>\n                    </span>\n                </span>\n--\x3e \x3c!--\n                <a class="pull-left" style="margin-top:0.5em; color:#999999; cursor: not-allowed">\n                    Advanced Query\n                    <img src="img/coming_soon.png">\n                </a>\n--\x3e </div> </div> </div> <div class="col-md-5"> <div id="divNetworkTabs" class="networkPropertiesTabset"> <tabset> <tab active="networkController.tabs[0].active"> <tab-heading>{{ networkController.tabs[0].heading }}</tab-heading> <div class="rowWithOneLineTopPad"></div> <div class="rowWithOneLineTopPad"></div> <div class="networkPropertyValueInTabsetMargins"> <div class="networkViewHeader rowWithOneLineBottomPad" id="networkViewHeaderId"> {{networkController.currentNetwork.name}} <br> </div> <div ng-if="networkController.currentNetwork.doi"> <span ng-if="isDOIPending()"> <button type="button" class="btn btn-primary btn-sm disabled"><strong>&nbsp;DOI:</strong> Pending &nbsp; </button> <span ng-if="showDeleteDOILink"> \x3c!-- if user is logged in and is owner of this network, then --\x3e \x3c!-- show the Delete DOI Request link  --\x3e &nbsp;&nbsp;&nbsp; <a ng-click="networkController.deletePendingDOIRequest()" data-toggle="tooltip" data-placement="bottom" onmouseenter="$(this).tooltip(\'show\')" style="text-decoration: underline; font-size: 0.9em" title="Delete pending DOI Request for this network."> <i class="fa fa-times" aria-hidden="true" style="color: red; text-decoration: underline"></i> Delete DOI Request </a> </span> </span> <a ng-if="!isDOIPending()" tooltip="{{copyNetworkDOITitle}}" tooltip-placement="bottom" ng-click="showCopiedDOITitle()" ng-mouseover="showOriginalCopyDOITitle()" ngclipboard data-clipboard-text="http://doi.org/{{networkController.currentNetwork.doi}}" class="actionsLabel btn btn-primary btn-sm"> <strong>&nbsp;DOI:</strong> {{networkController.currentNetwork.doi}}&nbsp; </a> <br><br> </div> <span class="networkPropertyName">Nodes: </span>{{networkController.currentNetwork.nodeCount}} &nbsp;&nbsp; <span class="networkPropertyName">Edges: </span>{{networkController.currentNetwork.edgeCount}} &nbsp;&nbsp; <div ng-show="networkController.successfullyQueried"> <span class="networkPropertyName" ng-show="networkController.currentNetwork.queryString">Query Terms: </span>{{networkController.currentNetwork.queryString}} <br> <span class="networkPropertyName">Query Depth: </span> <span>{{networkController.currentNetwork.depth}}</span> <span class="networkPropertyName" ng-show="networkController.currentNetwork.edgeFilter">Edge filter: <br> <span ng-repeat="edgeFilter in networkController.currentNetwork.edgeFilter.propertySpecifications"> &nbsp;&nbsp;&nbsp;{{edgeFilter.name}} : <span style="font-weight: normal">{{edgeFilter.value}}</span> <br> </span> </span> <span class="networkPropertyName" ng-show="networkController.currentNetwork.nodeFilter"> <br> Mode : <span style="font-weight: normal">{{networkController.currentNetwork.nodeFilter.mode}}</span> <br><br> Node filter: <br> <span ng-repeat="nodeFilter in networkController.currentNetwork.nodeFilter.propertySpecifications"> &nbsp;&nbsp;&nbsp;{{nodeFilter.name}} : <span style="font-weight: normal">{{nodeFilter.value}}</span> <br> </span> </span> </div> <div ng-show="!networkController.successfullyQueried"> <span ng-show="networkController.currentNetwork.externalId !== undefined"> <strong>{{networkController.currentNetwork.visibility}}</strong> &nbsp; <i class="fa fa-search" aria-hidden="true" ng-if="networkController.currentNetwork.indexLevel != \'NONE\'"></i> </span> &nbsp;&nbsp; <span class="networkPropertyName" ng-show="networkController.isAdmin"> <input type="checkbox" ng-model="networkController.readOnlyChecked" ng-change="readOnlyChanged()" ng-disabled="networkController.currentNetwork.isReadOnly && networkController.currentNetwork.doi"> Read Only </span> <span class="networkPropertyName" ng-show="networkController.currentNetwork.externalId !== undefined && !networkController.isAdmin" tooltip="{{onlyNetworkOwnersCanUnsetReadOnlyTitle}}" tooltip-placement="bottom"> <input type="checkbox" disabled="disabled" ng-model="networkController.readOnlyChecked"> Read Only </span> &nbsp;&nbsp; <span ng-if="!networkController.currentNetwork.doi || networkController.currentNetwork.doi == \'Pending\'"> <span ng-if="networkController.isNetworkOwner && (networkController.currentNetwork.visibility.toUpperCase() == \'PRIVATE\')"> <strong>Share URL: </strong> <span ng-style="networkController.networkShareURL ? {color:\'#18AD31\'} : {color:\'black\'}"> {{networkController.networkShareURL ? \'Enabled\' : \'Disabled\'}} </span> <a ng-hide="!networkController.networkShareURL" tooltip="{{copyNetworkShareURLTitle}}" tooltip-placement="bottom" ng-click="showCopiedNetworkShareURLTitle()" ng-mouseover="showOriginalCopyNetworkShareURLTitle()" ngclipboard data-clipboard-text="{{networkController.networkShareURL}}" class="actionsLabel btn btn-primary btn-xs copy-url-button">Copy URL </a> </span> <span ng-if="networkController.currentNetwork.visibility.toUpperCase() == \'PUBLIC\'"> <a ng-hide="networkController.currentNetwork.doi && networkController.currentNetwork.doi != \'Pending\'" tooltip="{{copyNetworkShareURLTitle}}" tooltip-placement="bottom" ng-click="showCopiedNetworkShareURLTitle()" ng-mouseover="showOriginalCopyNetworkShareURLTitle()" ngclipboard data-clipboard-text="{{networkController.networkURL}}" class="actionsLabel btn btn-primary btn-xs">Copy URL </a> </span> </span> <br> \x3c!--======================================--\x3e \x3c!--=============  CONTEXT  ==============--\x3e \x3c!--======================================--\x3e <span ng-show="networkController.isLoggedInUser && networkController.isAdmin\n                                && !networkController.currentNetwork.doi && !isNetworkCertified()\n                                && !networkController.hasMultipleSubNetworks() && !networkController.readOnlyChecked"> <span style="font-weight: bold">@context: </span> <a ng-click="networkController.showContextModal(true);" tooltip-placement="bottom" tooltip="Click here to view or modify the namespaces defined for this network."> view/edit namespaces </a> </span> <span ng-show="!networkController.isLoggedInUser || !networkController.isAdmin\n                                || networkController.currentNetwork.doi || isNetworkCertified() || networkController.hasMultipleSubNetworks()\n                                || networkController.readOnlyChecked"> <span style="font-weight: bold">@context: </span> <a ng-click="networkController.showContextModal(false);" tooltip-placement="bottom" tooltip="Click here to view the namespaces defined for this network."> view namespaces </a> </span> <span ng-show="networkController.currentNetwork.externalId !== undefined"> <br><br> <span ng-hide="hideNetworkOwner()"> <span class="networkPropertyName">Owner: </span> <a ng-href="#/user/{{networkController.networkOwner.ownerUUID}}"> {{networkController.networkOwner.firstName}} {{networkController.networkOwner.lastName}} </a> <br> </span> <span class="networkPropertyName">Created: </span> {{networkController.currentNetwork.creationTime | date: \'medium\'}} <br> <span ng-show="(networkController.currentNetwork.creationTime) !=\n                                               (networkController.currentNetwork.modificationTime)"> <span class="networkPropertyName">Last Modified: </span> {{networkController.currentNetwork.modificationTime | date: \'medium\'}} <br> </span> </span> <span class="networkPropertyName" ng-show="networkController.currentNetwork.externalId !== undefined">UUID: </span> {{networkController.currentNetwork.externalId}}<br> <span class="networkPropertyName">Format: </span> {{networkController.currentNetwork.sourceFormat}}<br> <span ng-show="networkController.isLoggedInUser && networkController.currentNetwork.externalId !== undefined"> <span class="networkPropertyName">Your Privileges: </span> {{networkController.privilegeLevel}}<br> </span> <span ng-show="networkController.hasMultipleSubNetworks()" style="color:red"> <span class="networkPropertyName">Warning: </span> This network is part of a Cytoscape collection and cannot be operated on or edited in NDEx<br> </span> <div class="wrapLongLine rowWithOneLineTopPad" ng-show="networkController.currentNetwork.description" style="margin-right: 1px"> <span class="networkPropertyName">Description: </span> <span ng-bind-html="networkController.currentNetwork.description"></span> </div> <span ng-show="networkController.currentNetwork.rightsHolder"> <br> <span class="networkPropertyName">Rights Holder: </span> <span ng-bind-html="networkController.currentNetwork.rightsHolder"></span> </span> <span ng-show="networkController.currentNetwork.rights"> <br> <span class="networkPropertyName">Rights: </span> <span ng-bind-html="networkController.currentNetwork.rights"></span> </span> <div class="wrapLongLine rowWithOneLineTopPad" ng-show="networkController.currentNetwork.reference" style="margin-right: 1px"> <div class="networkPropertyName">Reference: </div> <div ng-bind-html="networkController.currentNetwork.reference"></div> </div> <div class="rowWithOneLineTopPad" ng-show="networkController.currentNetwork.version"> <span class="networkPropertyName">Version: </span> {{networkController.currentNetwork.version}} </div> <div class="rowWithOneLineTopPad" ng-if="networkController.otherProperties.length > 0"> <span class="networkPropertyName">Properties:</span> <div class="networkPropertiesNameMargins"> <span class ng-repeat="property in networkController.otherProperties"> <span> <span class="networkPropertiesNameFont" ng-bind-html="property.predicateString"> </span> \x3c!--\n                                               <span class="networkPropertiesValueFont"\n                                                     ng-hide=\'property.value.toString().length > 40\'\n                                                     ng-bind-html="property.value.toString()">\n                                               </span>\n                                               --\x3e <span class="networkPropertiesValueFont" ng-show="property.value" ng-bind-html="property.value"> </span> <br> </span> </span> </div> </div> </div> </div> </tab> \x3c!-- node/edge tab --\x3e <tab id="nodesEdgesTabId" class="{{isEdgesAndNodesTabDisabled()}}" active="networkController.tabs[1].active" tooltip="{{nodesAndEdgesTabTitle}}" ng-click="handleNodesAndEdgesTabClick()" ng-mouseenter="setToolTipOnNodesAndEdgesTab()" ng-init="setToolTips()" tooltip-placement="bottom"> <tab-heading>{{ networkController.tabs[1].heading }}</tab-heading> <div> <table style="width:100%"> <tr ng-if="networkController.selectionContainer.nodes.length > 0"> <td>Selected Nodes: {{networkController.selectionContainer.nodes.length}}</td> </tr> <tr ng-repeat-start="node in networkController.selectionContainer.nodes"> <td class="wrappedCell"> <button ng-if="node.$$expanded" ng-click="node.$$expanded = false" ng-disabled="getNodeAttributesNames(node).length == 0">-</button> <button ng-if="!node.$$expanded" ng-click="node.$$expanded = true" ng-disabled="getNodeAttributesNames(node).length == 0">+</button> &nbsp;{{getNodeName(node)}} </td> </tr> <tr ng-if="node.$$expanded && getNodeAttributesNames(node).length > 0" ng-repeat-end=""> <td class="wrappedCell"> <span ng-repeat="attributeName in getNodeAttributesNames(node)"> <span ng-show="getAttributeValue(attributeName, node[attributeName])"> <span ng-switch="attributeName"> <span ng-switch-when="r"> &nbsp;&nbsp;&nbsp;<strong>ID:</strong> <span ng-bind-html="getAttributeValue(attributeName, node[attributeName])"></span> <br> </span> <span ng-switch-when="n"> &nbsp;&nbsp;&nbsp;<strong>Name:</strong> <span ng-bind-html="getAttributeValue(attributeName, node[attributeName])"></span> <br> </span> <span ng-switch-when="id"> &nbsp;&nbsp;&nbsp;<strong>Node Id:</strong> <span ng-bind-html="getAttributeValue(attributeName, node[attributeName])"></span> <br> </span> <span ng-switch-when="citations"> <span ng-repeat="citation in node.citations"> &nbsp;&nbsp; <span ng-bind-html="getCitation(citation)"></span> <br> </span> </span> <span ng-switch-when="ndex:internalLink"> <br> <span style="font-size:0.9em" ng-bind-html="getAttributeValue(attributeName, node[attributeName])"></span> </span> <span ng-switch-when="ndex:externalLink"> <span style="font-size:0.9em" ng-bind-html="getAttributeValue(attributeName, node[attributeName])"></span> </span> <span ng-switch-default> &nbsp;&nbsp;&nbsp;<strong>{{attributeName}}:</strong> <span ng-bind-html="getAttributeValue(attributeName, node[attributeName])"></span> <span ng-show="howManyAttributes(node[attributeName]) > 5"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a ng-click="networkController.showMoreAttributes(attributeName, node[attributeName])"> more... </a> <br> </span> <br> </span> </span> </span> </span> </td> </tr> <tr ng-if="networkController.selectionContainer.edges.length > 0"> <td>Selected Edges: {{ networkController.selectionContainer.edges.length}}</td> </tr> <tr ng-repeat-start="edge in networkController.selectionContainer.edges"> <td class="wrappedCell"> <button ng-if="edge.$$expanded" ng-click="edge.$$expanded = false" ng-disabled="getEdgeAttributesNames(edge).length == 0">-</button> <button ng-if="!edge.$$expanded" ng-click="edge.$$expanded = true" ng-disabled="getEdgeAttributesNames(edge).length == 0">+</button> &nbsp;{{getEdgeLabel(edge)}} </td> </tr> <tr ng-if="edge.$$expanded && getEdgeAttributesNames(edge).length > 0" ng-repeat-end=""> <td class="wrappedCell"> <span ng-repeat="attributeName in getEdgeAttributesNames(edge)"> <span ng-show="getAttributeValue(attributeName, edge[attributeName])"> &nbsp;&nbsp;&nbsp; <strong>{{attributeName}}:</strong> <span ng-bind-html="getAttributeValue(attributeName, edge[attributeName])"></span> <span ng-show="howManyAttributes(edge[attributeName]) > 5"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a ng-click="networkController.showMoreAttributes(attributeName, edge[attributeName])"> more... </a> <br> </span> <br> </span> </span> </td> </tr> </table> </div> </tab> \x3c!--\n                <tab active="networkController.tabs[3].active" ng-hide="networkController.tabs[3].hidden">\n\n                    <tab-heading>\n                        {{ networkController.tabs[3].heading }}\n\n                        <a ng-click="networkController.backToOriginalNetwork($event); networkController.resetForm();">\n                            <span class="glyphicon glyphicon-remove"></span>\n                        </a>\n                    </tab-heading>\n\n                    <div class="rowWithOneLineTopPad"></div>\n                    <div class="rowWithOneLineTopPad"></div>\n\n                    <div class="networkPropertyValueInTabsetMargins">\n\n                        <div class="networkViewHeader rowWithOneLineBottomPad">\n                            {{networkController.currentNetwork.name}}  <br/>\n                        </div>\n\n                        <span class="networkPropertyName">Nodes: </span>{{networkController.currentNetwork.nodeCount}}\n                        &nbsp;&nbsp;\n                        <span class="networkPropertyName">Edges: </span>{{networkController.currentNetwork.edgeCount}}\n                        &nbsp;&nbsp;\n                    </div>\n\n                    <div class="rowWithOneLineTopPad"></div>\n                    <div class="rowWithOneLineTopPad"></div>\n\n                    <div>\n\n                        <form novalidate style="padding-left:15px">\n                            Find a subnetwork with edges that,<br>\n                            (1) have one or more of these properties:<br>\n\n                            <div class="row">\n                                <div ng-repeat="property in networkController.advancedQueryEdgeProperties">\n                                    <div class="col-sm-5" style="padding-right: 5px">\n                                        <select class="form-control input-sm" ng-model="property.name" ng-change="networkController.validateAdvancedQuery()">\n                                            <option value="">[Select Edge Property Name]</option>\n                                            <option disabled role="separator"></option>\n                                            <option value="ndex:interaction">interaction</option>\n                                            <option disabled role="separator"></option>\n                                            <option ng-repeat="edgeProperty in networkController.edgePropertyNamesForAdvancedQuery"\n                                                    value="{{edgeProperty}}">{{edgeProperty}}\n                                            </option>\n                                        </select>\n                                    </div>\n\n                                    <div class="col-sm-5" style="padding-left: 5px; padding-right: 5px">\n                                        <input class="form-control input-sm"\n                                               ng-model="property.value"\n                                               ng-change="networkController.validateAdvancedQuery()"\n                                               placeholder="Value">\n                                    </div>\n\n                                    <div class="col-sm-1" style="padding-left: 5px">\n                                        <button type="button" ng-click="networkController.removeQueryEdgeProperty($index)"\n                                                ng-hide="networkController.advancedQueryEdgeProperties.length == 1"\n                                                class="btn btn-default btn-sm vcenter"\n                                                tabindex="-1">\n                                            <span class="glyphicon glyphicon-minus"></span>\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <button type="button"\n                                    ng-click="networkController.addQueryEdgeProperty()"\n                                    class="btn btn-default btn-sm"\n                                    ng-show="networkController.advancedEdgeQueryIsValid()"\n                                    tabindex="-1">\n                                <span class="glyphicon glyphicon-plus"></span>\n                            </button>\n                            <br />\n\n                            (2) and which have\n                            <span class="dropdown">\n                                <a href class="dropdown-toggle" data-toggle="dropdown">\n                                    {{networkController.advancedQueryNodeCriteria}} <span class="caret"></span>\n                                </a>\n                                <ul class="dropdown-menu">\n                                    <li><a href class="dropdown-toggle" ng-click="networkController.advancedQueryNodeCriteria=\'Source\'">Source</a></li>\n                                    <li><a href class="dropdown-toggle" ng-click="networkController.advancedQueryNodeCriteria=\'Target\'">Target</a></li>\n                                    <li><a href class="dropdown-toggle" ng-click="networkController.advancedQueryNodeCriteria=\'Both\'">Both source and target</a></li>\n                                    <li><a href class="dropdown-toggle" ng-click="networkController.advancedQueryNodeCriteria=\'Either\'">Either source or target</a></li>\n                                </ul>\n                            </span>\n                            nodes<br>\n                            (3) with one or more of these properties.\n                            <div ng-repeat="property in networkController.advancedQueryNodeProperties">\n                                <div class="row">\n                                    <div class="col-sm-5" style="padding-right: 5px">\n                                        <select class="form-control input-sm" ng-model="property.name" ng-change="networkController.validateAdvancedQuery()">\n                                            <option value="">[Select Node Property Name]</option>\n                                            <option disabled role="separator"></option>\n                                            <option value="ndex:name">name</option>\n                                            \x3c!--\n                                            <option value="ndex:nameOrTermName">nameOrTermName</option>\n                                            <option value="ndex:functionTermType">functionTermType</option>\n                                            --\x3e \x3c!--\n                                            <option disabled role="separator"></option>\n                                            <option ng-repeat="nodeProperty in networkController.nodePropertyNamesForAdvancedQuery"\n                                                    value="{{nodeProperty}}">{{nodeProperty}}\n                                            </option>\n                                        </select>\n                                    </div>\n\n                                    <div class="col-sm-5" style="padding-left: 5px; padding-right: 5px">\n                                        <input class="form-control input-sm"\n                                               ng-model="property.value"\n                                               ng-change="networkController.validateAdvancedQuery()"\n                                               placeholder="Value">\n                                    </div>\n\n                                    <div class="col-sm-1" style="padding-left: 5px">\n                                        <button type="button"\n                                                ng-click="networkController.removeQueryNodeProperty($index)"\n                                                ng-hide="networkController.advancedQueryNodeProperties.length == 1"\n                                                class="btn btn-default btn-sm"\n                                                tabindex="-1">\n                                            <span class="glyphicon glyphicon-minus"></span>\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <button type="button"\n                                    ng-click="networkController.addQueryNodeProperty()"\n                                    class="btn btn-default btn-sm"\n                                    ng-show="networkController.advancedNodeQueryIsValid()"\n                                    tabindex="-1">\n                                <span class="glyphicon glyphicon-plus"></span>\n                            </button>\n\n                            <div class="container; rowWithTwoLinesTopPad">\n\n                                <button ng-disabled="!networkController.advancedQueryIsValid"\n                                        ng-click="networkController.checkQueryNetworkAndDisplay(\'advanced\')"\n                                        class="actionsLabel btn btn-primary btn-default">Run Query\n                                </button>\n\n                                <button type="button"\n                                        class="actionsLabel btn btn-primary btn-default"\n                                        ng-click="networkController.resetForm(); networkController.resetAdvancedQuery()">Reset Query\n                                </button>\n\n                            </div>\n\n                        </form>\n                    </div>\n\n\n                </tab>\n--\x3e </tabset> </div> <div class="rowWithOneLineTopPad"></div> <div class="networkActionsSection pull-right" ng-show="networkController.successfullyQueried &&\n                     ((networkController.currentNetwork.edgeCount > 0) || (networkController.currentNetwork.nodeCount > 0))"> \x3c!--\n            <button ng-show="fullScreen"\n                    type="button" class="actionsLabel btn btn-primary"\n                    ng-click="openInFullScreenMode(\'page\')">\n                Full Screen\n            </button>\n--\x3e <span> <img class="{{getCytoscapeButtonClass()}}" tooltip="{{openInCytoscapeTitle}}" ng-click="networkToCytoscape()" style="height: 32px" src="images/cytoscape_logo.78cd649b.png"> </span> <button id="converNiceCXtoTSVId" type="button" class="actionsLabel btn btn-primary" data-toggle="tooltip" title="Download Result in tab-delimited text format (TSV)" ng-click="saveAsTSV()" style="margin-right: 5px"> Download Result </button> <button type="button" ng-class="switchViewButtonEnabled ? \'actionsLabel btn btn-primary\' : \'actionsLabelDisabled-btn btn btn-primary\'" data-toggle="tooltip" title="Switch to Table View" ng-click="switchView()" ng-show="!networkController.hasMultipleSubNetworks() && currentView==\'Graphic\'"> {{buttonLabel}} </button> <button type="button" ng-class="switchViewButtonEnabled ? \'actionsLabel btn btn-primary\' : \'actionsLabelDisabled-btn btn btn-primary\'" tooltip="{{switchToGraphViewButtonTitle}}" ng-click="switchView()" ng-show="!networkController.hasMultipleSubNetworks() && currentView==\'Table\'"> {{buttonLabel}} </button> <button ng-show="showSetSampleButton" tooltip="{{setSampleButtonToolTip}}" ng-init="setToolTips()" ng-class="showSetSampleButtonEnabled ? \'actionsLabel btn btn-primary\' : \'actionsLabelDisabled-btn btn btn-primary\'" ng-click="networkController.setSampleFromQuery()"> Set Sample </button> <button id="saveQueryButton" ng-show="networkController.isLoggedInUser" class="actionsLabel btn btn-primary" data-toggle="tooltip" title="Save query result to your account" ng-click="networkController.saveQueryResult()"> Save Result </button> </div> <div class="networkActionsSection pull-right" ng-show="!networkController.successfullyQueried || networkController.accesskey"> \x3c!--\n            <button ng-show="fullScreen"\n                    type="button" class="actionsLabel btn btn-primary" ng-click="openInFullScreenMode(\'page\')">\n                Full Screen\n            </button>\n--\x3e <span> <img class="{{getCytoscapeButtonClass()}}" tooltip="{{openInCytoscapeTitle}}" ng-click="networkToCytoscape()" style="height: 32px" src="images/cytoscape_logo.78cd649b.png"> </span> <span ng-show="((networkController.currentNetwork.visibility == &quot;PUBLIC&quot;)\n                    || networkController.isAdmin\n                    || networkController.canEdit\n                    || networkController.canRead) || networkController.accesskey" ng-click="downloadNetwork()" style="cursor:pointer"> <button type="button" class="btn btn-primary download-btn" data-toggle="tooltip" title="Download this network in CX format"> <i class="fa fa-download fa-lg" aria-hidden="true" style="vertical-align: middle; margin-bottom: -4px"> </i> </button> </span> \x3c!--\n            <span ng-show=\'showSetSampleButton\'>\n                <a class="actionsLabel btn btn-primary"\n                   data-toggle="tooltip" title="Set Sample by uploading a CX File"\n                   ng-click="networkController.setSample()">\n                        Set Sample\n                </a>\n            </span>\n            --\x3e <span ng-show="networkController.isLoggedInUser && networkController.currentNetwork.externalId !== undefined"> <a class="actionsLabel btn btn-primary" data-toggle="tooltip" title="Clone this network and save a copy to your account" ng-click="networkController.cloneNetwork()"> <i class="fa fa-clone"></i> </a> </span> <span> <button type="button" ng-class="switchViewButtonEnabled ? \'actionsLabel btn btn-primary\' : \'actionsLabelDisabled-btn btn btn-primary\'" data-toggle="tooltip" title="Switch to Table View" ng-click="switchView()" ng-show="!networkController.hasMultipleSubNetworks() && currentView==\'Graphic\'"> {{buttonLabel}} </button> <button type="button" ng-class="switchViewButtonEnabled ? \'actionsLabel btn btn-primary\' : \'actionsLabelDisabled-btn btn btn-primary\'" data-toggle="tooltip" title="Switch to Graphic View" ng-click="switchView()" ng-show="!networkController.hasMultipleSubNetworks() && currentView==\'Table\'"> {{buttonLabel}} </button> <a class="actionsLabelDisabled-btn btn btn-primary" ng-show="networkController.hasMultipleSubNetworks()" data-toggle="tooltip" title="This network is part of a Cytoscape collection and cannot be operated on or edited in NDEx."> {{buttonLabel}} </a> </span> <span ng-show="networkController.isLoggedInUser && !networkController.isAdmin" class="actionsLabelDisabled-btn btn btn-primary" tooltip="{{shareTitle}}"> Share </span> <span ng-show="networkController.isLoggedInUser && networkController.isAdmin"> <a class="actionsLabel btn btn-primary" tooltip="{{shareTitle}}" ng-href="{{\'#/access/network/\'+networkController.currentNetwork.externalId}}"> Share </a> </span> <span ng-show="networkController.isLoggedInUser"> <span ng-if="(networkController.currentNetwork.doi == null) || isNetworkCertified()"> <a class="actionsLabel btn btn-primary" ng-if="(networkController.isAdmin || networkController.canEdit) && !networkController.readOnlyChecked\n                                    && !networkController.hasMultipleSubNetworks()" tooltip="{{editPropertiesButtonTitle}}" ng-href="{{\'#/properties/network/\'+networkController.currentNetwork.externalId+\'/\'+networkController.subNetworkId}}"> Edit </a> <a class="actionsLabelDisabled-btn btn btn-primary" ng-if="!(networkController.isAdmin || networkController.canEdit) ||\n                       networkController.hasMultipleSubNetworks() || networkController.readOnlyChecked" tooltip="{{editPropertiesButtonTitle}}"> Edit </a> </span> <span ng-if="networkController.isAdmin && (isDOIPending() || isDOIAssigned()) && !isNetworkCertified() "> <reference-for-certification network-controller="networkController" my-class="actionsLabel btn btn-primary"> </reference-for-certification> </span> </span> <span ng-show="networkController.isLoggedInUser && networkController.currentNetwork.externalId !== undefined"> <div class="btn-group dropup"> <button id="moreNetworkButton" type="button" data-toggle="dropdown" class="actionsLabel btn btn-primary dropdown-toggle"> More <span class="caret"></span> </button> <ul class="dropdown-menu pull-right" role="menu" aria-labelledby="moreNetworkButton"> <li class="elementOfDropDownOnNetworkPage disabled" ng-if="!isRequestingDOIEnabled()"> <a class="disabledElementOfDropDownOnNetworkPage" tooltip="{{requestDOITitle}}">Request DOI</a> </li> <li class="elementOfDropDownOnNetworkPage" ng-if="isRequestingDOIEnabled()"> <request-doi network-controller="networkController" request-doi> </request-doi></li> <li class="elementOfDropDownOnNetworkPage disabled" ng-if="networkController.hasMultipleSubNetworks()"> <a class="disabledElementOfDropDownOnNetworkPage" tooltip="{{exportTitle}}">Export </a> </li> <li class="elementOfDropDownOnNetworkPage" ng-if="!networkController.hasMultipleSubNetworks()"> <export-network ndex-data="networkController.currentNetwork"></export-network> </li> <li class="elementOfDropDownOnNetworkPage"> <show-network-sets-modal my-account-controller="networkController" my-class="dropdown-btn"> </show-network-sets-modal> </li> <li class="elementOfDropDownOnNetworkPage disabled" ng-if="!enableSetSampleViaUUID"> <a class="disabledElementOfDropDownOnNetworkPage" tooltip="{{setNetworkSampleViaUUIDTitle}}">Set Network Sample </a> </li> <li class="elementOfDropDownOnNetworkPage" ng-if="enableSetSampleViaUUID"> <set-network-sample-via-uuid controller-name="networkController" my-class="dropdown-btn"> </set-network-sample-via-uuid> </li> <li class="elementOfDropDownOnNetworkPage disabled" ng-if="!isUpgradingPermissionsEnabled()"> <a class="disabledElementOfDropDownOnNetworkPage" tooltip="{{upgradePermissionTitle}}">Upgrade Permission </a> </li> <li class="elementOfDropDownOnNetworkPage" ng-if="isUpgradingPermissionsEnabled()"> <create-request-network privileges="networkController.privilegeLevel" ndex-data="networkController.currentNetwork" my-class="dropdown-btn"> </create-request-network> </li> <li class="elementOfDropDownOnNetworkPage disabled" ng-if="!enableRemoveFromMyAccount"> <a class="disabledElementOfDropDownOnNetworkPage" tooltip="{{removeFromMyAccountTitle}}">Remove from My Networks </a> </li> <li class="elementOfDropDownOnNetworkPage" ng-if="enableRemoveFromMyAccount"> <remove-from-my-networks controller-name="networkController" my-class="dropdown-btn"> </remove-from-my-networks> </li> <li class="elementOfDropDownOnNetworkPage disabled" ng-if="!isDeleteNetworkEnabled()"> <a class="disabledElementOfDropDownOnNetworkPage" tooltip="{{deleteTitle}}">Delete </a> </li> <li class="elementOfDropDownOnNetworkPage" ng-if="isDeleteNetworkEnabled()"> <delete-network ndex-data="networkController.currentNetwork.externalId" my-class="dropdown-btn"> </delete-network> </li> </ul> </div> </span> <span ng-show="!networkController.isLoggedInUser"> <a class="actionsLabel btn btn-primary" ng-click="main.showSignInSignUpOptions()" data-toggle="tooltip" title="Log in to operate on this network"> Log in </a> </span> </div> </div> </div> <script type="text/ng-template" id="citations.html"><form>\n        <div>\n            <div class="modal-header">\n                <h3>Citations</h3>\n            </div>\n            <div class="modal-body" style="max-height:520px; overflow:auto">\n                <span ng-repeat="citation in citations">\n                    <dl class="dl-horizontal">\n                        \x3c!--\n                        <dt>Citation ID</dt>\n                        <dd>{{citation.id}}</dd>\n                        --\x3e\n                        <dt ng-show="citation.title">\n                            Title\n                        </dt>\n                        <dd ng-show="citation.title">\n                            {{citation.title}}\n                        </dd>\n\n                        <dt ng-show="citation.description">\n                            Description\n                        </dt>\n                        <dd ng-show="citation.description">\n                            {{citation.description}}\n                        </dd>\n\n                        <dt ng-show="citation.type">\n                            Type\n                        </dt>\n                        <dd ng-show="citation.type">\n                            {{citation.type}}\n                        </dd>\n\n                        <dt ng-show="citation.identifier">\n                            Identifier\n                        </dt>\n                        <dd ng-show="citation.identifier">\n                            {{citation.identifier}}\n                        </dd>\n\n                        <dt ng-show="citation.contributor">\n                            Contributor\n                        </dt>\n                        <dd ng-show="citation.contributor">\n                            {{citation.contributor}}\n                        </dd>\n\n                        <dt ng-show="citation.attributes">\n                            Attributes\n                        </dt>\n                        <dd ng-show="citation.attributes">\n                            {{citation.attributes}}\n                        </dd>\n\n                        <dt ng-show="citation.link">\n                            Link\n                        </dt>\n                        <dd ng-show="citation.link">\n                            <a ng-href="{{citation.link}}" target="_blank">{{citation.link}}</a>\n                        </dd>\n                    </dl>\n                </span>\n            </div>\n            <div class="modal-footer">\n                <button class="btn btn-primary" ng-enter="ok()" ng-click="ok()">OK</button>\n            </div>\n        </div>\n    </form><\/script>'),
a.put("views/networkInfoModal.html",'<div class="modal-content"> <form class="form-horizontal" role="form"> <div class="modal-header"> <h4 class="modal-title" ng-bind-html="network.name"></h4> </div> <div class="modal-body" style="max-height:520px; overflow:auto"> <div class="form-group"> <label for="networkNameId" class="col-sm-3 control-label">Network Name:</label> <span class="col-sm-8"> <p class="form-control-static" id="networkNameId" ng-bind-html="network.name"></p> </span> <label for="networkNodesId" class="col-sm-3 control-label">Nodes:</label> <span class="col-sm-8"> <p class="form-control-static" id="networkNodesId" ng-bind-html="network.nodeCount"></p> </span> <label for="networkEdgesId" class="col-sm-3 control-label">Edges:</label> <span class="col-sm-8"> <p class="form-control-static" id="networkEdgesId" ng-bind-html="network.edgeCount"></p> </span> <label for="networkDescrId" class="col-sm-3 control-label" ng-if="network.description">Description:</label> <span class="col-sm-8" ng-if="network.description"> <p class="form-control-static" id="networkDescrId" ng-bind-html="network.description"></p> </span> <label class="col-sm-3 control-label" ng-if="network.reference">Reference:</label> <span class="col-sm-8" ng-if="network.reference"> <p class="form-control-static" ng-bind-html="network.reference"></p> </span> <label class="col-sm-3 control-label" ng-if="network.version">Version:</label> <span class="col-sm-8" ng-if="network.version"> <p class="form-control-static" ng-bind-html="network.version"></p> </span> <label class="col-sm-3 control-label" ng-if="network.visibility">Visibility:</label> <span class="col-sm-8" ng-if="network.visibility"> <p class="form-control-static" ng-bind-html="network.visibility"></p> </span> <label class="col-sm-3 control-label" ng-if="network.visibility">Modified:</label> <span class="col-sm-8" ng-if="network.visibility"> <p class="form-control-static" ng-bind-html="network.modificationTime | date: \'medium\'"></p> </span> <label class="col-sm-3 control-label" ng-if="network.visibility">Created:</label> <span class="col-sm-8" ng-if="network.visibility"> <p class="form-control-static" ng-bind-html="network.creationTime | date: \'medium\'"></p> </span> <label class="col-sm-3 control-label" ng-if="network.collection" style="color:red">Warning:</label> <span class="col-sm-8" ng-if="network.collection"> <p class="form-control-static" style="color:red"> This network is part of a Cytoscape collection and cannot be operated on or edited in NDEx. </p> </span> </div> <div class="text-danger" style="word-wrap:break-word"> <strong> {{errors}} </strong> </div> </div> <div class="modal-footer"> <button class="btn btn-default" type="button" ng-click="close()">Close</button> </div> </form> </div> '),a.put("views/networkSet.html",'<div id="divGroup" class="row"> \x3c!--\n    <div style="margin-bottom: 1em" ng-show="groupController.errors.length > 0">\n        <div class="alert alert-danger" style="margin-bottom: 1em; font-size: 1.2em; font-weight: bold" ng-repeat=\'error in groupController.errors\'>\n            {{error}}\n            <span class="glyphicon glyphicon-remove pull-right"\n                  style=\'cursor:pointer\'\n                  ng-click=\'groupController.errors.splice($index,1)\'>\n            </span>\n        </div>\n    </div>\n--\x3e <div class="col-md-2"> <div class="row"> <div class="wrapLongLine"> <h4> <strong>{{networkSetController.displayedSet.name}}</strong> </h4> </div> <div class="wrapLongLine" ng-if="networkSetController.displayedSet.description"> <strong>Description: </strong> <span ng-bind-html="networkSetController.displayedSet.description"></span> </div> <div class="wrapLongLine" ng-if="networkSetController.displayedSet.properties.reference"> <br> <strong>Reference: </strong> <span ng-bind-html="networkSetController.displayedSet.properties.reference"></span> </div> <div class="wrapLongLine"> <br> <strong>Modified: </strong> <span ng-bind-html="networkSetController.displayedSet.modificationTime | date: \'medium\'"></span> </div> <div class="wrapLongLine"> <strong>Created: </strong> <span ng-bind-html="networkSetController.displayedSet.creationTime | date: \'medium\'"></span> </div> <div class="wrapLongLine" ng-show="networkSetController.displayedSet.networks > 0"> <strong>Networks: </strong><span ng-bind-html="networkSetController.displayedSet.networks"></span> </div> <div class="wrapLongLine" ng-if="networkSetController.isSetOwner &&  networkSetController.networkSetShareableURLLabel"> <strong>Share URL: </strong> <span ng-style="networkSetController.networkSetShareableURL ? {color:\'#18AD31\'} : {color:\'black\'}"> &nbsp;{{networkSetController.networkSetShareableURL ? \'Enabled\' : \'Disabled\'}} </span> &nbsp;&nbsp; <a ng-show="networkSetController.networkSetShareableURL" tooltip="{{copyNetworkSetURLTitle}}" tooltip-placement="bottom" ng-click="showCopiedTitle()" ng-mouseover="showOriginalTitle()" ngclipboard data-clipboard-text="{{networkSetController.networkSetShareableURL}}" class="actionsLabel btn btn-primary btn-xs copy-url-button">Copy URL </a> </div> <div class="btn-group btn-group-vertical buttonWithMarginBottom" ng-if="networkSetController.isLoggedInUser"> <div ng-if="networkSetController.isSetOwner"> <hr> <h5><strong>Actions:</strong></h5> <trigger-edit-network-set-modal network-set-controller="networkSetController"> </trigger-edit-network-set-modal> <span> <a class="btn btn-primary customButtonWidth" ng-click="networkSetController.switchShareableURL()" ng-if="networkSetController.networkSetShareableURLLabel"> {{networkSetController.networkSetShareableURLLabel}} </a> </span> <span> <a class="btn btn-primary customButtonWidth" ng-click="networkSetController.deleteNetworkSet(networkSetController.identifier)"> Delete Network Set </a> </span> </div> <hr> <h5><strong>Bulk Actions:</strong></h5> <span ng-if="!networkSetController.isSetOwner"> <show-network-sets-modal controller-name="networkSetController" my-account-controller="networkSetController" my-class="{{networkSetController.networkTableRowsSelected == 0 ?\n                                \'btn btn-primary customButtonWidth disabled\' :\n                                \'btn btn-primary customButtonWidth\'}}"> </show-network-sets-modal> </span> <span ng-if="networkSetController.isSetOwner"> <a class="btn btn-primary customButtonWidth" ng-disabled="networkSetController.networkTableRowsSelected == 0" ng-click="networkSetController.confirmRemoveSelectedNetworksFromSet()"> Remove From Set </a> </span> </div> </div> </div> \x3c!-- tabs --\x3e <div id="divgroupTabs" class="col-md-10"> <tabset justified="true"> <tab heading="Networks in set {{networkSetController.displayedSet.name}}"> <div id="divNetworks" ng-show="networkSetController.networkSearchResults.length > 0"> <div id="myNetworksOfSetGridId" ui-grid-selection ui-grid="networkGridOptions" ui-grid-resize-columns ui-grid-auto-resize class="networkGrid"> </div> </div> <div class="row" ng-hide="networkSetController.networkSearchResults.length > 0"> <br> <p class="text-center text-muted">No networks to display</p> </div> </tab> </tabset> </div> </div>'),a.put("views/networkSetInfoModal.html",'<div class="modal-content"> <form class="form-horizontal" role="form"> <div class="modal-header"> <h4 class="modal-title" ng-bind-html="set.name"></h4> </div> <div class="modal-body"> <div class="form-group"> <div class="row rowWithHalfLineBottomPad rowWithOneLineTopPad"> <span class="col-sm-3" style="text-align: right"><strong>Network Set Name:</strong></span> <span class="col-sm-8" ng-bind-html="set.name"></span> </div> <div class="row rowWithHalfLineBottomPad"> <span class="col-sm-3" style="text-align: right" ng-if="set.showcased"><strong>Showcased:</strong></span> <span class="col-sm-8" ng-if="set.showcased" ng-bind-html="set.showcased"></span> </div> <div class="row rowWithHalfLineBottomPad" ng-if="set.description"> <span class="col-sm-3" style="text-align: right" ng-if="set.description"><strong>Description:</strong></span> <span class="col-sm-8" ng-if="set.description" ng-bind-html="set.description"></span> </div> <div class="row rowWithHalfLineBottomPad" ng-if="set.reference"> <span class="col-sm-3" style="text-align: right" ng-if="set.reference"><strong>Reference:</strong></span> <span class="col-sm-8" ng-if="set.reference" ng-bind-html="set.reference"></span> </div> <div class="row rowWithHalfLineBottomPad"> <span class="col-sm-3" style="text-align: right"><strong>Modified:</strong></span> <span class="col-sm-8" ng-bind-html="set.modificationTime | date: \'medium\'"> </span> </div> <div class="row rowWithHalfLineBottomPad"> <span class="col-sm-3" style="text-align: right"><strong>Created:</strong></span> <span class="col-sm-8" ng-bind-html="set.creationTime | date: \'medium\'"> </span> </div> <div class="row rowWithHalfLineBottomPad"> <span class="col-sm-3" style="text-align: right"><strong>Networks:</strong></span> <span class="col-sm-8" ng-bind-html="set.networkCount"></span> </div> <div class="row"> <span ng-if="set.shareLinkStatus"> <span class="col-sm-3" style="text-align: right"><strong>Share URL Status:</strong></span> <span class="col-sm-8"> <span ng-style="set.shareLinkStatus == \'Enabled\' ? {color: \'#18AD31\'} : {color: \'black\'}" ng-bind-html="set.shareLinkStatus"> </span> &nbsp; <a ng-show="set.shareLinkStatus == \'Enabled\'" tooltip="{{copyNetworkSetURLTitle}}" tooltip-placement="bottom" ng-click="showCopiedTitle()" ng-mouseover="showOriginalTitle()" ngclipboard data-clipboard-text="{{set.networkSetShareableURL}}" class="actionsLabel btn btn-primary btn-xs copy-url-button">Copy URL </a> </span> </span> </div> </div> <div class="text-danger" style="word-wrap:break-word"> <strong> {{errors}} </strong> </div> </div> <div class="modal-footer"> <button class="btn btn-default" type="button" ng-click="close()">Close</button> </div> </form> </div>'),a.put("views/partials/doiNetworkProperties.html",'<style>.tooltip-inner {\n        width: 300px;\n    }</style> <form role="form" ng-submit="editor.saveAndSubmitDOI()" name="doiform"> \x3c!--\n    ==========================\n    = Main profile properties\n    ==========================\n    --\x3e \x3c!------------------------\n        NAME and place holder\n    --------------------------\x3e <div class="row"> <div class="col-sm-12"> <h3 class="text-center" style="font-weight: bold"><i class="fa fa-certificate" aria-hidden="true" style="color: #406DC9"></i> Required DOI Properties <br> <small>Please fill out all the fields below and provide your preferred contact email <br>address. When you are ready click on the green request button.</small> </h3> </div> </div> <div class="row"> <div class="col-sm-offset-1 col-sm-5"> <div class="form-group rowWithOneLineTopPad"> <label class="col-sm-3 control-label">name</label> <div class="col-sm-8" style="margin-bottom: 15px"> <input type="text" class="form-control" ng-change="editor.updateScore()" ng-class="mainProperty.name.length > 0 ? \'competeInput\': \'\'" type="text" placeholder="Network Name" ng-model="mainProperty.name" required> </div> <div class="col-sm-1"> <div class="input-group-btn"> <i ng-if="mainProperty.name.length > 0" class="fa fa-check-square-o icon-fixed-width" style="color: green; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> <i ng-if="mainProperty.name.length <= 0" class="fa fa-square-o icon-fixed-width" style="color: #C0C0C0; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> <div title="Name is required for public status"> <i ng-if="mainProperty.name.length < 1 && mainProperty.visibility !=  \'PRIVATE\'" class="fa fa-exclamation-triangle icon-fixed-width" style="color: red; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> </div> <i ng-if="mainProperty.name.length < 1 && mainProperty.visibility ==  \'PRIVATE\'" class="fa fa-check icon-fixed-width" style="color: white; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i>&nbsp;&nbsp; </div> </div> </div> </div> <div class="col-sm-5"> <div class="form-group rowWithOneLineTopPad"> <label class="col-sm-3 control-label">version</label> <div class="col-sm-8" style="margin-bottom: 15px"> <input type="text" class="form-control" placeholder="1.0" ng-change="editor.updateScore()" ng-class="mainProperty.version.length > 0 ? \'competeInput\': \'\'" ng-model="mainProperty.version" required> </div> <div class="col-sm-1"> <div class="input-group-btn"> <i ng-if="mainProperty.version.length > 0" class="fa fa-check-square-o icon-fixed-width" style="color: green; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> <i ng-if="mainProperty.version.length <= 0" class="fa fa-square-o icon-fixed-width" style="color: #C0C0C0; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> </div> </div> </div> </div> </div> \x3c!------------------------------\n        DESCRIPTION and REFERENCES\n    --------------------------------\x3e <div class="row"> <div class="col-sm-offset-1 col-sm-5"> <div class="form-group"> <label class="col-sm-3 control-label">description</label> <div class="col-sm-8" style="margin-bottom: 15px"> <text-angular ta-toolbar="[[&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;p&quot;,&quot;pre&quot;],[&quot;bold&quot;,&quot;italics&quot;,&quot;underline&quot;,&quot;clear&quot;],[&quot;justifyLeft&quot;,&quot;justifyCenter&quot;],[&quot;html&quot;,&quot;insertLink&quot;]]" id="descriptionTextBox" ta-toolbar-class="btn-toolbar" ta-toolbar-group-class="btn-group btn-group-xs" ta-toolbar-button-class="btn btn-default" ta-toolbar-button-active-class="active" ta-default-wrap="null" ng-change="editor.updateScore()" ng-model="mainProperty.description"> </text-angular> </div> <div class="col-sm-1"> <div class="input-group-btn"> <i ng-if="mainProperty.description.length > 0" class="fa fa-check-square-o icon-fixed-width" style="color: green; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> <i ng-if="mainProperty.description.length <= 0" class="fa fa-square-o icon-fixed-width" style="color: #C0C0C0; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> <div title="Description is required for public status"> <i ng-if="mainProperty.description.length < 1 && mainProperty.visibility !=  \'PRIVATE\'" class="fa fa-exclamation-triangle icon-fixed-width" style="color: red; margin-top: 20px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> </div> <i ng-if="mainProperty.description.length < 1 && mainProperty.visibility ==  \'PRIVATE\'" class="fa fa-check icon-fixed-width" style="color: white; margin-top: 20px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i>&nbsp;&nbsp; </div> </div> </div> </div> <div class="col-sm-5"> <div class="form-group"> <div class="col-sm-3"> <label class="control-label">reference &nbsp;&nbsp;&nbsp;&nbsp; <a href="http://home.ndexbio.org/publishing-in-ndex/#addref" tooltip="{{referenceToolTip}}" style="text-decoration: none" target="_blank" ng-init="setToolTips()"> <i class="fa fa-info-circle"></i> </a> </label> </div> <div class="col-sm-8"> <div> <div> <input type="checkbox" id="referenceChange3" style="margin-right: 0px" name="referenceChange3" ng-model="editor.isCertified" value="Let me add/modify the reference later."> <label for="referenceChange3">Let me add/modify the reference later.</label> &nbsp;&nbsp; <a href="http://home.ndexbio.org/publishing-in-ndex/#addref" data-toggle="tooltip" title="A reference is not required to request a DOI. If you want the ability to add or\n                               modify a reference later on, please indicate your intentions by checking this box to the left.\n                               If you don\'t check this box, the network will be permenantly locked, made publicly visible and no\n                               further changes will be allowed." style="text-decoration: none; font-weight: normal"><i class="fa fa-info-circle"></i></a> </div> </div> <div> <text-angular ta-toolbar="[[&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;p&quot;,&quot;pre&quot;],[&quot;bold&quot;,&quot;italics&quot;,&quot;underline&quot;,&quot;clear&quot;],[&quot;justifyLeft&quot;,&quot;justifyCenter&quot;],[&quot;html&quot;,&quot;insertLink&quot;]]" ta-toolbar-class="btn-toolbar" ta-toolbar-group-class="btn-group btn-group-xs" ta-toolbar-button-class="btn btn-default" ta-toolbar-button-active-class="active" ta-default-wrap="null" ng-change="editor.updateScore()" ng-model="mainProperty.reference"> </text-angular> </div> </div> <div class="col-sm-1"> <div class="input-group-btn" style="margin-top: 40px"><br> \x3c!--\n                        <i ng-if="mainProperty.reference.length > 0" class="fa fa-check-square-o icon-fixed-width" style="color: green; margin-top: 10px; margin-left: 10px;" aria-hidden="true"></i>\n                        <i ng-if="mainProperty.reference.length <= 0" class="fa fa-square-o icon-fixed-width" style="color: #C0C0C0; margin-top: 10px; margin-left: 10px;" aria-hidden="true"></i>\n                        --\x3e </div> </div> </div> </div> </div> \x3c!--\n    ===================\n    = Known Properties\n    ===================\n    --\x3e <div class="row"> <div class="col-sm-offset-1 col-sm-5"> <div class="form-group rowWithOneLineTopPad" ng-repeat="property in editor.propertyValuePairs" ng-if="property.predicateString == \'rights\'"> <label class="col-sm-3 control-label">rights &nbsp;&nbsp; <a href="http://home.ndexbio.org/publishing-in-ndex/#rights" tooltip="{{rightsTooltip}}" style="text-decoration: none; font-weight: normal" target="_blank" ng-init="setToolTips()"><i class="fa fa-info-circle"></i></a> &nbsp;&nbsp;&nbsp; <a ng-show="property.value == editor.rightsCustom && !editor.editCustomRights" ng-click="editor.editCustomRights = !editor.editCustomRights" data-toggle="tooltip" title="Click to edit custom rights" style="text-decoration: none; font-weight: normal" target="_blank"><i class="fa fa-edit fa-lg"></i></a> <a ng-show="editor.editCustomRights" ng-click="editor.editCustomRights = !editor.editCustomRights; property.value = editor.rightsCustom;" data-toggle="tooltip" title="Click to edit custom rights" style="text-decoration: none; font-weight: normal" target="_blank">Undo</a> </label> <div class="col-sm-8" style="margin-bottom: 15px" ng-if="property.value != \'Other\'"> <div ng-show="editor.editCustomRights"> <input class="form-control input-sm" style="background-color: #f9f9f9" type="text" ng-model="property.value"> </div> <select ng-show="!editor.editCustomRights" class="form-control input-sm" ng-model="property.value" ng-readonly="!(editor.isAdmin || editor.canEdit) || !(editor.propertyTemplate.rights.predicateString)" ng-options="item for item in editor.rights" ng-change="editor.updateScore()" name="rights_dd" required> </select> </div> <div class="col-sm-3" style="margin-bottom: 15px" ng-if="property.value == \'Other\'"> <select class="form-control input-sm" ng-model="property.value" ng-readonly="!(editor.isAdmin || editor.canEdit) || !(editor.propertyTemplate.rights.predicateString)" ng-options="item for item in editor.rights" ng-change="editor.updateScore()" name="rights_dd" required> </select> </div> <div class="col-sm-5" style="margin-bottom: 15px" ng-if="property.value == \'Other\'"> <input class="form-control input-sm" type="text" placeholder="license title" ng-model="property.rightsOther" id="doiinputrightsOther1" ng-readonly="!(editor.isAdmin || editor.canEdit) || !(editor.propertyTemplate.rights.predicateString)" required> <input class="form-control input-sm" type="url" placeholder="URL (http://www.mylicense.com)" ng-model="property.rightsOtherURL" id="doiinputrightsOtherUrl" style="margin-top: 10px" ng-readonly="!(editor.isAdmin || editor.canEdit) || !(editor.propertyTemplate.rights.predicateString)" required> </div> <div class="col-sm-1"> <div class="input-group-btn"> <i ng-if="property.value.length > 0" class="fa fa-check-square-o icon-fixed-width" style="color: green; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> <i ng-if="!property.value || property.value.length <= 0" class="fa fa-square-o icon-fixed-width" style="color: #C0C0C0; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> </div> </div> </div> </div> <div class="col-sm-5"> <div class="form-group rowWithOneLineTopPad" ng-repeat="property in editor.propertyValuePairs | filter: {predicateString: \'rightsHolder\'}"> <label class="col-sm-3 control-label">rights holder</label> <div class="col-sm-8" style="margin-bottom: 15px"> <input class="form-control input-sm" ng-change="editor.updateScore()" type="text" ng-model="property.value" id="doiinputrightsHolder" ng-class="property.value.length > 0 ? \'competeInput\': \'\'" ng-readonly="!(editor.isAdmin || editor.canEdit) || !(editor.propertyTemplate.rightsHolder.predicateString)" required> </div> <div class="col-sm-1"> <div class="input-group-btn"> <i ng-if="property.value.length > 0" class="fa fa-check-square-o icon-fixed-width" style="color: green; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> <i ng-if="!property.value || property.value.length <= 0" class="fa fa-square-o icon-fixed-width" style="color: #C0C0C0; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> </div> </div> </div> </div> </div> <div class="row"> <div class="col-sm-offset-1 col-sm-5"> <div class="form-group rowWithOneLineTopPad" ng-repeat="property in editor.propertyValuePairs | filter: {predicateString: \'author\'}"> <label class="col-sm-3 control-label">author</label> <div class="col-sm-8" style="margin-bottom: 15px"> <input class="form-control input-sm" ng-change="editor.updateScore()" type="text" ng-model="property.value" id="doiinputauthor" ng-class="property.value.length > 0 ? \'competeInput\': \'\'" ng-readonly="!(editor.isAdmin || editor.canEdit) || !(editor.propertyTemplate.author.predicateString)" required> </div> <div class="col-sm-1"> <div class="input-group-btn"> <i ng-if="property.value.length > 0" class="fa fa-check-square-o icon-fixed-width" style="color: green; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> <i ng-if="!property.value || property.value.length <= 0" data-toggle="tooltip" title="Hooray!" id="authorTooltip" name="authorTooltip" class="fa fa-square-o icon-fixed-width" style="color: #C0C0C0; margin-top: 10px; margin-left: 10px; font-weight: normal; font-size: 1.5em" aria-hidden="true"></i> </div> </div> </div> </div> <div class="col-sm-5"> <div class="well" style="margin-bottom: 0px"> <div class="row"> <label class="col-sm-3 control-label">Publication Date &nbsp;&nbsp; <a data-toggle="tooltip" title="**Optional" style="text-decoration: none; font-weight: normal"><i class="fa fa-info-circle"></i></a></label>  <div class="col-sm-8"> \x3c!--------------------------------------------\n                        --- THIS NON-ANGULAR CONTROL CAN BE REPLACED\n                        --- IF A GOOD, COMPATIBLE CONTROL IS FOUND\n                        ----------------------------------------------\x3e <input type="text" class="form-control input-sm" id="doiDTPicker"> <script type="text/javascript">$(function () {\n                                $(\'#doiDTPicker\').datetimepicker({\n                                    viewMode: \'days\',\n                                    format: \'MM/DD/YYYY\'\n                                });\n                            });<\/script> </div> <div class="col-sm-1"> </div> </div> <div class="row rowWithOneLineTopPad"> <label class="col-sm-3 control-label">Contact Email</label> <div class="col-sm-8"> <input class="form-control input-sm" ng-change="editor.updateScore()" ng-model="editor.doiInfo.user.email" id="doiinputemail" name="doiinputemail" type="email" ng-class="editor.doiInfo.user.email.length > 0 ? \'competeInput\': \'\'" required> </div> <div class="col-sm-1"> <div class="input-group-btn"> <i ng-if="!doiform.doiinputemail.$error.required && !doiform.doiinputemail.$error.email" class="fa fa-check-square-o icon-fixed-width" style="color: green; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> <i ng-if="doiform.doiinputemail.$error.required || doiform.doiinputemail.$error.email" c lass="fa fa-square-o icon-fixed-width" style="color: #C0C0C0; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> </div> </div> </div> </div> </div> </div> <div class="row"> <div class="col-sm-offset-1 col-sm-5" style="max-height: 47px"> &nbsp; </div> <div class="col-sm-5"> <div class="form-group rowWithOneLineTopPad" ng-show="editor.isAdmin || editor.canEdit"> <div class="pull-right" ng-show="editor.isAdmin || editor.canEdit" style="margin-right: 30px"> <button type="button" class="btn btn-sm btn-danger" ng-click="editor.cancel()">Cancel</button> <button type="submit" class="btn btn-sm btn-success" ng-disabled="editor.disableSaveChangesButton">Save and Request DOI</button> </div> </div> </div> </div> <div class="row" ng-show="editor.isAdmin || editor.canEdit"> <div class="col-sm-offset-1 col-sm-10"> <hr> </div> </div> \x3c!--    <div class="row" ng-show=\'editor.isAdmin || editor.canEdit\'>\n        <div class=\'col-sm-offset-1 col-sm-10\'>\n            <div class="pull-right">\n                <button type="button" class="btn btn-sm btn-danger" ng-click=\'editor.refresh()\'>Discard Changes</button>\n                <button type="submit" class="btn btn-sm btn-success" ng-disabled=\'editor.disableSaveChangesButton\'>Save and Request DOI</button>\n            </div>\n        </div>\n    </div>\n--\x3e <script>$(\'authorTooltip\').tooltip();<\/script> </form>'),
a.put("views/partials/mainNetworkProperties.html",'<script>$(document).ready(function(){\n        $(\'[data-toggle="tooltip"]\').tooltip();\n    });<\/script> <form role="form" ng-submit="editor.save(false, null)"> \x3c!--\n    ==========================\n    = Main profile properties\n    ==========================\n    --\x3e <div class="row"> <div class="col-sm-offset-1 col-sm-5"> <div class="form-group rowWithOneLineTopPad"> <label class="col-sm-3 control-label">name</label> <div class="col-sm-8" style="margin-bottom: 15px"> <input id="nameId" type="text" class="form-control" ng-change="editor.updateScore()" ng-class="mainProperty.name.length > 0 ? \'competeInput\' : \'incompleteInput\'" placeholder="Network Name" ng-model="mainProperty.name"> </div> <div class="col-sm-1"> <div class="input-group-btn"> <i ng-if="mainProperty.name.length > 0" class="fa fa-check icon-fixed-width" style="color: green; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> <div tooltip="Name is required for public status"> <i ng-if="mainProperty.name.length < 1 && mainProperty.visibility !=  \'PRIVATE\'" class="fa fa-exclamation-triangle icon-fixed-width" style="color: red; margin-top: 10px; margin-left: 1px; font-size: 1.5em" aria-hidden="true"></i> </div> <i ng-if="mainProperty.name.length < 1 && mainProperty.visibility ==  \'PRIVATE\'" class="fa fa-check icon-fixed-width" style="color: white; margin-top: 10px; margin-left: 1px; font-size: 1.5em" aria-hidden="true"></i>&nbsp;&nbsp; </div> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">description</label> <div class="col-sm-8" style="margin-bottom: 15px"> <text-angular id="descriptionTextBoxId" ta-toolbar="[[&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;p&quot;,&quot;pre&quot;],[&quot;bold&quot;,&quot;italics&quot;,&quot;underline&quot;,&quot;clear&quot;],[&quot;justifyLeft&quot;,&quot;justifyCenter&quot;],[&quot;html&quot;,&quot;insertLink&quot;]]" ta-toolbar-class="btn-toolbar" ta-toolbar-group-class="btn-group btn-group-xs" ta-toolbar-button-class="btn btn-default" ta-toolbar-button-active-class="active" ta-default-wrap="null" ng-change="editor.updateScore()" ng-model="mainProperty.description"> </text-angular> </div> <div class="col-sm-1"> <div class="input-group-btn"> <i ng-if="mainProperty.description.length > 0" class="fa fa-check icon-fixed-width" style="color: green; margin-top: 20px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> <div tooltip="Description is required for public status"> <i ng-if="mainProperty.description.length < 1 && mainProperty.visibility != \'PRIVATE\'" class="fa fa-exclamation-triangle icon-fixed-width" style="color: red; margin-top: 15px;  margin-left: 1px; font-size: 1.5em" aria-hidden="true"></i> </div> <i ng-if="mainProperty.description.length < 1 && mainProperty.visibility ==  \'PRIVATE\'" class="fa fa-check icon-fixed-width" style="color: white; margin-top: 15px;  margin-left: 1px; font-size: 1.5em" aria-hidden="true"></i>&nbsp;&nbsp; </div> </div> </div> <div class="form-group" ng-init="eyeopened=false"> <label class="col-sm-3 control-label">visibility</label> <div class="col-sm-5" style="margin-bottom: 15px"> <span ng-show="editor.isOwner"> <div ng-show="checkNameDescriptionVersion()"> <select class="form-control minwidth170" ng-model="editor.visibilityIndex"> <option value="PUBLIC" ng-selected="editor.visibilityIndex ==  &quot;PUBLIC&quot;">Public </option> <option value="PUBLIC_NOT_INDEXED" ng-selected="editor.visibilityIndex ==  &quot;PUBLIC_NOT_INDEXED&quot;">Public (not searchable)</option> <option value="PRIVATE" ng-selected="editor.visibilityIndex ==  &quot;PRIVATE&quot;">Private </option> <option value="PRIVATE_NOT_INDEXED" ng-selected="editor.visibilityIndex ==  &quot;PRIVATE_NOT_INDEXED&quot;">Private (not searchable)</option> </select> </div> <div ng-show="!checkNameDescriptionVersion()"> <div tooltip="{{fillInNameDescriptionVersionFirst}}" style="cursor: not-allowed"> <select disabled="disabled" class="form-control minwidth170 showTooltipOnDisabledElement" ng-model="editor.visibilityIndex"> <option value="PUBLIC" ng-selected="editor.visibilityIndex ==  &quot;PUBLIC&quot;">Public </option> <option value="PUBLIC_NOT_INDEXED" ng-selected="editor.visibilityIndex ==  &quot;PUBLIC_NOT_INDEXED&quot;">Public (not searchable)</option> <option value="PRIVATE" ng-selected="editor.visibilityIndex ==  &quot;PRIVATE&quot;">Private </option> <option value="PRIVATE_NOT_INDEXED" ng-selected="editor.visibilityIndex ==  &quot;PRIVATE_NOT_INDEXED&quot;">Private (not searchable)</option> </select> </div> </div> </span> <span ng-show="!editor.isOwner"> <select class="form-control minwidth170" ng-model="editor.visibilityIndex" title="Only network owners can change network Visibility" disabled="disabled"> <option value="PUBLIC" ng-selected="editor.visibilityIndex ==  &quot;PUBLIC&quot;">Public </option> <option value="PUBLIC_NOT_INDEXED" ng-selected="editor.visibilityIndex ==  &quot;PUBLIC_NOT_INDEXED&quot;">Public (not searchable)</option> <option value="PRIVATE" ng-selected="editor.visibilityIndex ==  &quot;PRIVATE&quot;">Private </option> <option value="PRIVATE_NOT_INDEXED" ng-selected="editor.visibilityIndex ==  &quot;PRIVATE_NOT_INDEXED&quot;">Private (not searchable)</option> </select> </span> </div> <div class="col-sm-2" ng-show="(mainProperty.visibility == \'PUBLIC\' || mainProperty.visibility == \'PUBLIC_NOT_INDEXED\')" style="margin-top: 5px"> <a ng-click="editor.showcased.state = !editor.showcased.state" style="text-decoration: none; color: #656565"> <div style="width: 95px"> <span ng-show="checkNameDescriptionVersion()"> <span class="fa-stack" ng-show="!editor.showcased.state"> <i ng-show="checkNameDescriptionVersion()" class="fa fa-square-o fa-stack-2x"></i> </span> <span class="fa-stack" ng-show="editor.showcased.state"> <i class="fa fa-square-o fa-stack-2x"></i> <i class="fa fa-check fa-stack-1x"></i> </span> <div class="pull-right" style="font-size: 15px; margin-top: 3px">Showcase</div> </span> <span ng-show="!checkNameDescriptionVersion()" ng-click="doNothingOnMouseClick()" tooltip="{{fillInNameDescriptionVersionFirst}}"> <span class="fa-stack" ng-show="!editor.showcased.state"> <i class="fa fa-square-o fa-stack-2x fa-disabled"></i> </span> <span class="fa-stack" ng-show="editor.showcased.state"> <i class="fa fa-square-o fa-stack-2x fa-disabled"></i> <i class="fa fa-check fa-stack-1x fa-disabled"></i> </span> <div class="pull-right fa-disabled" style="font-size: 15px; margin-top: 3px">Showcase</div> </span> </div> </a> </div> <div class="col-sm-3" ng-show="(mainProperty.visibility == \'PUBLIC\' || mainProperty.visibility == \'PRIVATE\')" style="margin-top: 5px; padding-right:0"> <span ng-show="checkNameDescriptionVersion()"> <a ng-click="showFullIndexAdvisory();" style="text-decoration: none; color: #656565; white-space: nowrap"> <span class="fa-stack"> <i class="fa fa-square-o fa-stack-2x"></i> <i ng-show="editor.fullIndexed.state" class="fa fa-check fa-stack-1x"></i> </span> <span style="font-size: 15px"> Full Index </span> </a> </span> <span ng-show="!checkNameDescriptionVersion()" ng-click="doNothingOnMouseClick()" tooltip="{{fillInNameDescriptionVersionFirst}}"> <span class="fa-stack"> <i class="fa fa-square-o fa-stack-2x fa-disabled"></i> <i ng-show="editor.fullIndexed.state" class="fa fa-check fa-stack-1x fa-disabled"></i> </span> <span class="fa-disabled" style="font-size: 15px"> Full Index </span> </span> \x3c!--\n                        <span data-toggle="tooltip" title="{{fullIndexToolTip}}"\n                           style="cursor: pointer; color: #428bca;"\n                           target="_blank" ng-init="setToolTips()">\n                            <i class="fa fa-info-circle"></i>\n                        </span>\n                        --\x3e </div> <div class="col-sm-1" ng-show="(mainProperty.visibility == \'PUBLIC\' || mainProperty.visibility == \'PRIVATE\')" style="margin-top: 5px; padding-left: 0"> <div tooltip="{{fullIndexToolTip}}" style="cursor: pointer; color: #428bca" target="_blank" ng-init="setToolTips()"> <i class="fa fa-info-circle"></i> </div> </div> </div> </div> <div class="col-sm-5"> <div class="form-group rowWithOneLineTopPad"> <label class="col-sm-3 control-label">version</label> <div class="col-sm-8" style="margin-bottom: 15px"> <input id="versionId" type="text" class="form-control" placeholder="1.0" ng-change="editor.updateScore()" ng-class="mainProperty.version.length > 0 ? \'competeInput\': \'incompleteInput\'" ng-model="mainProperty.version"> </div> <div class="col-sm-1"> <div class="input-group-btn" style="margin-top: 40px"> <i ng-if="mainProperty.version.length > 0" class="fa fa-check icon-fixed-width" style="color: green; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> <div tooltip="Version is required for public status"> <i ng-if="mainProperty.version.length < 1 && mainProperty.visibility !=  \'PRIVATE\'" class="fa fa-exclamation-triangle icon-fixed-width" style="color: red; margin-top: 10px; margin-left: 1px; font-size: 1.5em" aria-hidden="true"></i> </div> <i ng-if="mainProperty.version.length < 1 && mainProperty.visibility ==  \'PRIVATE\'" class="fa fa-check icon-fixed-width" style="color: white; margin-top: 10px; margin-left: 1px; font-size: 1.5em" aria-hidden="true"></i>&nbsp;&nbsp; </div> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">reference &nbsp;&nbsp; <a href="http://home.ndexbio.org/publishing-in-ndex/#addref" tooltip="{{referenceToolTip}}" style="text-decoration: none" target="_blank" ng-init="setToolTips()"> <i class="fa fa-info-circle"></i> </a> </label> <div class="col-sm-8" style="margin-bottom: 15px"> <text-angular ta-toolbar="[[&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;p&quot;,&quot;pre&quot;],[&quot;bold&quot;,&quot;italics&quot;,&quot;underline&quot;,&quot;clear&quot;],[&quot;justifyLeft&quot;,&quot;justifyCenter&quot;],[&quot;html&quot;,&quot;insertLink&quot;]]" ta-toolbar-class="btn-toolbar" ta-toolbar-group-class="btn-group btn-group-xs" ta-toolbar-button-class="btn btn-default" ta-toolbar-button-active-class="active" ta-default-wrap="null" ng-change="editor.updateScore()" ng-model="mainProperty.reference"> </text-angular> </div> <div class="col-sm-1"> <div class="input-group-btn" style="margin-top: 40px"> <i ng-if="mainProperty.reference.length > 0" class="fa fa-check icon-fixed-width" style="color: green; margin-top: 20px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> <i ng-if="mainProperty.reference.length < 1" class="fa fa-check icon-fixed-width" style="color: white; margin-top: 20px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i>&nbsp;&nbsp; </div> </div> </div> <div class="form-group" ng-show="editor.isAdmin || editor.canEdit"> <div class="pull-right"> <button type="button" class="btn btn-sm btn-danger" ng-click="editor.refresh()">Discard Changes</button> <button type="submit" class="btn btn-sm btn-success" ng-disabled="editor.disableSaveChangesButton">Save Changes</button> </div> </div> </div> </div> <div class="row"> <div class="col-sm-offset-1 col-sm-10"> <hr style="margin-top:5px; margin-bottom:15px"> </div> </div> \x3c!--\n    ===================\n    = Known Properties\n    ===================\n    --\x3e <div class="row"> <div class="col-sm-offset-1 col-sm-5"> <div class="form-group" ng-repeat="property in editor.propertyValuePairs | orderBy: &quot;predicateString&quot;:true"> <div ng-if="$index <= 5 && property.predicateString != \'custom...\'"> <label class="col-sm-3" ng-if="property.predicateString.length > 0" for="input{{property.predicateString}}">{{property.predicateString}} <span ng-if="property.predicateString == \'rights\'">&nbsp; <a href="http://home.ndexbio.org/publishing-in-ndex/#rights" tooltip="{{rightsTooltip}}" style="text-decoration: none" target="_blank" ng-init="setToolTips()"> <i class="fa fa-info-circle"></i> </a> &nbsp;&nbsp;&nbsp; <a ng-show="property.value == editor.rightsCustom && !editor.editCustomRights" ng-click="editor.editCustomRights = !editor.editCustomRights" data-toggle="tooltip" title="Click to edit custom rights" style="text-decoration: none" target="_blank"><i class="fa fa-edit fa-lg"></i> </a> <a ng-show="editor.editCustomRights" ng-click="editor.editCustomRights = !editor.editCustomRights; property.value = editor.rightsCustom;" data-toggle="tooltip" title="Click to edit custom rights" style="text-decoration: none" target="_blank">Undo </a> </span> </label> <div ng-if="property.predicateString.length > 0" class="input-group col-sm-9" style="margin-bottom: 15px"> <input ng-if="property.predicateString != \'rights\'" class="form-control input-sm" ng-change="editor.updateScore()" ng-model="property.value" id="input{{property.predicateString}}" ng-class="property.value.length > 0 ? \'competeInput\': \'\'" ng-readonly="!(editor.isAdmin || editor.canEdit) || !(property.predicateString)"> <span ng-if="property.predicateString == \'rights\'"> <div class="col-sm-12" style="margin-bottom: 0px; padding: 0px" ng-if="property.value != \'Other\'"> <div ng-show="editor.editCustomRights"> <input class="form-control input-sm" style="background-color: #f9f9f9" type="text" ng-model="property.value"> </div> <select ng-show="!editor.editCustomRights" class="form-control input-sm" ng-model="property.value" ng-readonly="!(editor.isAdmin || editor.canEdit) || !(editor.propertyTemplate.rights.predicateString)" ng-options="item for item in editor.rights" ng-change="editor.updateScore()" name="rights_dd" required> </select> </div> <div class="col-sm-4" style="margin-bottom: 15px; padding-left: 0px" ng-if="property.value == \'Other\'"> <select class="form-control input-sm" ng-model="property.value" ng-readonly="!(editor.isAdmin || editor.canEdit) || !(editor.propertyTemplate.rights.predicateString)" ng-options="item for item in editor.rights" ng-change="editor.updateScore()" name="rights_dd" required> </select> </div> <div class="col-sm-8" style="margin-bottom: 15px" ng-if="property.value == \'Other\'"> <input class="form-control input-sm" type="text" placeholder="license title" ng-model="property.rightsOther" id="doiinputrightsOther1" ng-readonly="!(editor.isAdmin || editor.canEdit) || !(editor.propertyTemplate.rights.predicateString)" required> <input class="form-control input-sm" type="test" placeholder="license URL" ng-model="property.rightsOtherURL" id="doiinputrightsOtherUrl" style="margin-top: 10px" ng-readonly="!(editor.isAdmin || editor.canEdit) || !(editor.propertyTemplate.rights.predicateString)"> </div> </span> <div class="input-group-btn"> <i ng-if="property.value.length > 0" class="fa fa-check icon-fixed-width" style="color: green; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> <i ng-if="property.value.length < 1" class="fa fa-check icon-fixed-width" style="color: white; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i>&nbsp;&nbsp; </div> </div> </div> </div> </div> <div class="col-sm-5"> <div class="form-group" ng-repeat="property in editor.propertyValuePairs | orderBy: &quot;predicateString&quot;:true"> <div ng-if="$index > 5 && property.predicateString != \'custom...\'"> <label class="col-sm-3" ng-if="property.predicateString.length > 0" for="input2{{property.predicateString}}">{{property.predicateString}}</label> <div ng-if="property.predicateString.length > 0" class="input-group col-sm-9" style="margin-bottom: 15px"> <input class="form-control input-sm" ng-change="editor.updateScore()" ng-model="property.value" id="input2{{property.predicateString}}" ng-class="property.value.length > 0 ? \'competeInput\': \'\'" ng-readonly="!(editor.isAdmin || editor.canEdit) || !(property.predicateString)"> <div class="input-group-btn"> <i ng-if="property.value.length > 0" class="fa fa-check icon-fixed-width" style="color: green; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i> <i ng-if="property.value.length < 1" class="fa fa-check icon-fixed-width" style="color: white; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i>&nbsp;&nbsp; </div> </div> </div> </div> </div> </div> \x3c!--\n    ===================\n    = Custom Properties\n    ===================\n    --\x3e <div class="row"> <div class="col-sm-offset-1 col-sm-5"> <div class="form-group" ng-repeat="property in editor.propertyValuePairs | orderBy: &quot;predicateString&quot;"> <div class="row" ng-if="property.predicateString == \'custom...\'"> <div> <div class="col-sm-3"> <input class="form-control input-sm" ng-show="property.predicateString == \'custom...\'" type="text" placeholder="Type label..." ng-model="property.predicateStringCustom" ng-change="editor.changed($index, property.predicateStringCustom, property)" ng-readonly="!(editor.isAdmin || editor.canEdit)"> </div> <div ng-if="property.predicateString == \'custom...\'" class="input-group col-sm-9" style="margin-bottom: 15px"> <input class="form-control input-sm" ng-change="editor.updateScore()" ng-model="property.value" id="input4{{property.predicateString}}" ng-class="property.value.length > 0 ? \'competeInput\': \'\'"> <div class="input-group-btn"> <i class="fa fa-check icon-fixed-width" style="color: white; margin-top: 10px; margin-left: 10px; font-size: 1.5em" aria-hidden="true"></i>&nbsp;&nbsp; </div> </div> </div> </div> <button class="btn btn-success" ng-if="property.predicateString.length == 0" ng-click="property.predicateString = \'custom...\'; editor.changed($index, property.predicateString, property); editor.propertyValuePairs.push({\'dataType\':\'string\',\'predicateString\':\'\',\'value\':\'\',\'subNetworkId\':null})"> <i class="fa fa-plus" aria-hidden="true"></i> Add </button> </div> </div> <div class="col-sm-5"> <div class="pull-right" ng-show="editor.isAdmin || editor.canEdit"> <button type="button" class="btn btn-sm btn-danger" ng-click="editor.refresh()">Discard Changes</button> <button type="submit" class="btn btn-sm btn-success" ng-disabled="editor.disableSaveChangesButton">Save Changes</button> </div> </div> </div> <div class="row" ng-show="editor.isAdmin || editor.canEdit"> <div class="col-sm-offset-1 col-sm-10"> <hr> </div> </div> </form>'),a.put("views/queriesExplanationModal.html",'<style>.modal-dialog {\n    width: 1000px;\n    max-width:100%;\n}</style> <div class="modal-content" style="font-size: 14px"> <button type="button" class="close" style="margin: 10px 15px 0 0" ng-click="close()"><span style="font-size:1.5em">&times;</span> </button> <div class="modal-header"> <h4 class="modal-title">NDEx Query Types</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-6 col-xs-6 col-sm-6 col-md-6"> <div class="row rowWithHalfLineBottomPad"> <div ng-class="queryTypesDescription" style="text-align: left"> {{generalDescription}} </div> <div ng-class="queryTypesImages"> <img style="width:100%; margin-top: -0.5em" src="images/background.bae713ee.png"> </div> </div> <div class="row rowWithHalfLineBottomPad rowWithOneLineTopPad"> <div ng-class="queryTypesDescription" style="text-align: left"> <strong style="text-decoration: underline">Neighborhood:</strong> {{neigborhoodQueryDescription}} </div> <div ng-class="queryTypesImages"> <img style="width:100%; margin-top: -0.5em" src="images/neighborhood.c3fc1661.png"> </div> </div> <div class="row"> <div ng-class="queryTypesDescription" style="text-align: left"> <strong style="text-decoration: underline">Adjacent:</strong> {{adjacentQueryDescription}} </div> <div ng-class="queryTypesImages"> <img style="width:100%; margin-top: -0.5em" src="images/adjacent.1a551536.png"> </div> </div> </div> <div class="col-6 col-xs-6 col-sm-6 col-md-6"> <div class="row rowWithHalfLineBottomPad"> <div ng-class="queryTypesDescription" style="text-align: left"> <strong style="text-decoration: underline">Direct:</strong> {{directQueryDescription}} </div> <div ng-class="queryTypesImages"> <img style="width:100%; margin-top: -0.5em" src="images/direct.fcf0490f.png"> </div> </div> <div class="row rowWithHalfLineBottomPad"> <div ng-class="queryTypesDescription" style="text-align: left"> <strong style="text-decoration: underline">Interconnect:</strong> {{interconnectQueryDescription}} </div> <div ng-class="queryTypesImages"> <img style="width:100%; margin-top: -0.5em" src="images/interconnect.832094a9.png"> </div> </div> <div class="row rowWithThreeLinesTopPad"> <div ng-class="stepsClass" style="text-align: left"> <strong style="text-decoration: underline">1-step</strong> and <strong style="text-decoration: underline">2-step</strong> <span ng-bind-html="stepsQueryDescription"></span> </div> </div> </div> </div> </div> \x3c!--\n    <div class="modal-footer">\n\n        <button class="btn btn-default" type=\'button\' ng-click=\'close()\'>Close</button>\n    </div>\n--\x3e </div>'),a.put("views/receivedBulkRequests.html",'<div class="modal-content"> <div class="modal-header"> <h5 class="modal-title"><strong><span ng-bind-html="title"></span></strong></h5> </div> <div class="modal-body wrapLongLine"> <div class="wrapLongLine" ng-if="message"> <span ng-bind-html="message"></span> <br><br> </div> <div> <strong>Response Message</strong> <textarea class="form-control" rows="3" ng-model="responseMessage"></textarea> </div> <div ng-if="progress"> <br> <strong><span style="color: green; font-size: 1.1em" ng-bind-html="progress"></span></strong> </div> <div ng-if="progress2"> <strong><span style="color: green; font-size: 1.1em" ng-bind-html="progress2"></span></strong> </div> <div ng-if="error" class="text-danger" style="word-wrap:break-word"> <br> <strong>{{errors}}</strong> </div> </div> <div class="modal-footer"> <button class="btn btn-default" ng-click="cancel()">Cancel</button> <button ng-class="isProcessing ? &quot;btn btn-danger disabled&quot; : &quot;btn btn-danger&quot;" ng-click="decline(); isProcessing=true"> Decline </button> <button ng-class="isProcessing ? &quot;btn btn-primary disabled&quot; : &quot;btn btn-primary&quot;" ng-click="accept(); isProcessing=true"> Accept </button> </div> </div>'),a.put("views/search-modal.html",'<div class="modal-content"> <button type="button" class="close" style="margin-right:5px; margin-left:0px" ng-click="cancel()">&times; </button> <div style="margin-top:5px; margin-bottom:-15px; margin-left:5px; margin-right:20px; border-radius:10px"> <div ng-include="\'search_bar.html\'"></div> </div> </div>'),a.put("views/search.html",'<span class="row" ng-show="searcher.networkErrors.length > 0"> <span class="col-md-12"> <p class="alert alert-success" style="word-wrap:break-word; margin-bottom: 0" ng-repeat="error in searcher.networkErrors"> {{error}} <span class="glyphicon glyphicon-remove pull-right" style="cursor:pointer" ng-click="searcher.networkErrors.splice($index,1)"> </span> </p> <p class="alert alert-danger" style="margin-bottom: 0" ng-repeat="error in searcher.userErrors"> {{error}} <span class="glyphicon glyphicon-remove pull-right" style="cursor:pointer" ng-click="searcher.userErrors.splice($index,1)"> </span> </p> <p class="alert alert-danger" style="margin-bottom: 0" ng-repeat="error in searcher.groupErrors"> {{error}} <span class="glyphicon glyphicon-remove pull-right" style="cursor:pointer" ng-click="searcher.groupErrors.splice($index,1)"> </span> </p> </span> </span> <div class="row"> <div class="col-2 col-xs-2 col-sm-2 col-md-2 col-lg-2 hideLongLine" ng-if="searcher.isLoggedInUser" style="min-width: 165px; margin-bottom: 10px"> <h5><strong>Bulk Actions:</strong></h5> <show-network-sets-modal controller-name="searcher" my-account-controller="searcher" my-class="{{(searcher.networkTableRowsSelected == 0) ?\n                            \'btn btn-primary customButtonWidthOnSearchPage disabled\' : \'btn btn-primary customButtonWidthOnSearchPage\'}}"> </show-network-sets-modal> </div> <div id="searchResultTableId" class="{{searchViewClass}}"> <div class="row"> <div id="spinnerSearchPageId" style="position:relative; top:16em"></div> </div> <tabset> <tab heading="{{networkTabHeading()}}" ng-click="activateTab(\'Networks\'); networkGridApi.core.handleWindowResize()" active="activeTab.Networks"> <div ng-show="searcher.networkSearchInProgress"><i>Finding Networks...</i></div> <div ng-show="searcher.networkSearchNoResults"><i>No Networks Found.</i></div> <div id="foundNetworksTableId" ng-show="searcher.showNetworkTable" ui-grid-selection ui-grid="networkSearchGridOptions" ui-grid-resize-columns style="height:540px"></div> </tab> <tab heading="{{userTabHeading()}}" ng-click="activateTab(\'Users\'); userGridApi.core.handleWindowResize()" active="activeTab.Users"> <div ng-show="searcher.userSearchInProgress"><i>Finding Users...</i></div> <div ng-show="searcher.userSearchNoResults"><i>No Users Found.</i></div> <div id="foundUsersTableId" ng-show="searcher.userSearchResults" ui-grid-selection ui-grid="userSearchGridOptions" ui-grid-resize-columns style="height:540px"></div> </tab> <tab heading="{{groupTabHeading()}}" ng-click="activateTab(\'Groups\'); groupGridApi.core.handleWindowResize()" active="activeTab.Groups"> <div ng-show="searcher.groupSearchInProgress"><i>Finding Groups...</i></div> <div ng-show="searcher.groupSearchNoResults"><i>No Groups Found.</i></div> <div id="foundGroupsTableId" ng-show="searcher.groupSearchResults" ui-grid-selection ui-grid="groupSearchGridOptions" ui-grid-resize-columns style="height:540px"></div> </tab> </tabset> </div> </div>'),a.put("views/setNetworkSampleViaUUIDModal.html",'<div class="modal-content"> <form name="setNetworkSample" class="form-horizontal" role="form" ng-submit="submit()"> <div class="modal-header"> <h4 class="modal-title" ng-bind-html="title"></h4> </div> <div class="modal-body" style="margin-top: 1em; margin-bottom: -1em"> <div class="form-group"> \x3c!--\n              <div class=\'col-sm-12\' style="font-size: 1.2em" ng-bind-html=\'text\'></div>\n--\x3e <label class="col-sm-4 control-label">Sample Network UUID <span style="color:red">*</span></label> <div class="col-sm-8"> <input type="text" name="networkUUID" class="form-control" placeholder="e.g., b3cb16df-8527-11e8-8b82-525400c25d22" ng-model="networkUUID" ng-pattern="/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/" required> <div ng-show="setNetworkSample.networkUUID.$error.required && !setNetworkSample.networkUUID.$pristine" style="color:red; font-weight:bold; margin-top: 1em">Network UUID required </div> <div ng-show="setNetworkSample.networkUUID.$invalid && !setNetworkSample.networkUUID.$error.required" style="color:red; font-weight:bold; margin-top: 1em">Invalid Network UUID </div> </div> </div> <div style="margin-left: 1.8em; color: red"> <strong>{{errors}}</strong> </div> </div> <div class="modal-footer"> <button class="btn btn-default" type="button" ng-click="cancel()">Cancel</button> <button class="btn btn-primary" type="submit" ng-disabled="errors || setNetworkSample.$invalid">Set Sample</button> </div> </form> </div>'),
a.put("views/signInSignUpModal.html",'<style>.modal-dialog {\n    width: 600px;\n    max-width:100%;\n}\n/* start: taken from https://www.bootply.com/rY3MGdh1HO */\n.vertical-divider {\n    position: absolute;\n    z-index: 10;\n    top: 50%;\n    left: 50%;\n    margin: 0;\n    padding: 0;\n    width: auto;\n    height: 50%;\n    line-height: 0;\n    text-align:center;\n    text-transform: uppercase;\n    transform: translateX(-50%);\n    font-size: 1.4em;\n}\n.row-divided > .vertical-divider,\n.row-divided > .vertical-divider {\n    height: calc(56% - 1rem);\n}\n.vertical-divider:before,\n.vertical-divider:after {\n    position: absolute;\n    left: 50%;\n    content: \'\';\n    z-index: 9;\n    border-left: 1px solid rgba(34,36,38,.15);\n    border-right: 1px solid rgba(255,255,255,.1);\n    width: 0;\n    height: calc(100% - 1rem);\n}\n.vertical-divider:before {\n    top: -100%;\n}\n.vertical-divider:after {\n    top: auto;\n    bottom: 0;\n}\n.row-divided {\n    position:relative;\n}\n\n.row-divided > [class^="col-"],\n.row-divided > [class*=" col-"] {\n    padding-left: 30px;  /* gutter width (give a little extra room) */\n    padding-right: 30px; /* gutter width (give a little extra room) */\n}\n/* start: taken from https://www.bootply.com/rY3MGdh1HO */</style> <div class="modal-content" style="min-width: 596px"> <div class="modal-header"> <h4 class="modal-title"><strong><span ng-bind-html="header"></span></strong></h4> </div> <div class="modal-body" style="margin-top:0.5em; margin-bottom:-1em"> <div class="row"> <div id="spinnerSignInWithGoogleId"></div> </div> <div class="form-group"> <div class="row row-divided"> <div class="col-xs-6"> <div class="google-button"> <button ng-if="googleSSO" autofocus class="google-sign-in-button" type="button" style="cursor: pointer" ng-click="signIn.SignInWithGoogle()"> <span class="google-sign-in-button-span"> <img src="images/google-logo.9ac57bb2.svg" alt="" style="height: 70px; width: 70px; max-height: 100%; max-width: 100%"> <div style="margin-top: 1.5em; margin-left: 3em; margin-right: 3em">Sign In / Sign Up with Google</div> </span> </button> <button id="googleSignInButtonId" ng-if="!googleSSO" class="google-sign-in-button" style="color: #B6B6B6; background-color: #FFF; cursor: not-allowed" ng-init="setToolTips()" data-placement="bottom" data-toggle="tooltip" title="Google Sign In is currently unavailable because the \'BLOCK THIRD-PARTY COOKIES\' option is enabled in your web browser.\n                                To use the Google Sign In feature you can do one of two things:\n    1. Add \'accounts.google.com\' to the list of websites allowed to write/read THIRD-PARTY COOKIES, or\n    2. Disable the \'BLOCK THIRD-PARTY COOKIES\' option in your browser settings." data-placement="bottom" style="cursor: not-allowed"> <span class="google-sign-in-button-span"> <img src="images/google-logo-disabled.d847d25b.svg" alt="" style="height: 70px; width: 70px; max-height: 100%; max-width: 100%"> <div style="margin-top: 1.5em; margin-left: 3em; margin-right: 3em">Sign In / Sign Up with Google</div> </span> </button> </div> </div> <div class="vertical-divider"><strong>OR</strong></div> <div class="col-xs-6"> <form name="basicAuthSignIn"> <div class="form-group"> <input name="accountName" type="accountName" class="form-control" placeholder="Account Name" required ng-model="signIn.userName"> </div> <div class="form-group"> <input name="password" type="password" class="form-control" placeholder="Password" required ng-model="signIn.password"> </div> <div> <a ng-show="showForgotPassword" ng-click="forgotPassword()">Forgot Password?</a> </div> <div ng-show="showSignUp"> <br> <span ng-bind-html="needAnAccount"></span><a ng-click="openBasicAuthSignUp()">Click here to sign up!</a> </div> <div ng-if="errors" class="text-danger" style="word-wrap:break-word"> <br> <strong><span style="font-size: 1.1em" ng-bind-html="errors"></span></strong> </div> <hr> <div class="AlignRight" style="margin-top:1em"> <button class="btn btn-default" ng-click="cancel()" type="button"> {{cancelLabel}} </button> <button ng-class="errors || !basicAuthSignIn.accountName.$valid || !basicAuthSignIn.password.$valid ?\n                                \'btn btn-primary disabled\' : \'btn btn-primary\'" autofocus ng-click="submitSignIn()"> {{confirmLabel}} </button> </div> </form> </div> </div> </div> </div> </div> <script type="text/ng-template" id="forgotPassword.html"><div class="modal-header">\n        <h4 class="modal-title">Reset Password</h4>\n    </div>\n    <div class="modal-body">\n\n        <div class="row">\n            <div id="spinnerResetPasswordId"></div>\n        </div>\n\n        <form role="form">\n            <div class="form-group">\n                <input class="form-control" placeholder="Account Name or Email" required ng-model="forgot.accountName"/>\n            </div>\n        </form>\n        <div class=\'text-danger\'>\n            <strong> {{forgot.errorMsg}} </strong>\n        </div>\n        <div class=\'text-success\'>\n            <strong> {{forgot.successMsg}} </strong>\n        </div>\n    </div>\n\n    <div class="modal-footer" style="margin-top: -0.5em">\n        <a class="btn btn-primary" ng-click="back()"   ng-disabled="isProcessing">Back</a>\n        <a class="btn btn-default" ng-click="cancel()" ng-disabled="isProcessing">Cancel</a>\n        <button class="btn btn-primary" type="submit"\n                ng-click="resetPassword()"\n                ng-disabled="!forgot.accountName || isProcessing || forgot.errorMsg || forgot.successMsg">\n            Reset Password\n        </button>\n    </div><\/script> <script type="text/ng-template" id="signUp.html"><div class="modal-content">\n        <form name="signUpForm" role="form">\n            <div class="modal-header">\n                <h4>Sign Up for NDEx</h4>\n            </div>\n            <span style="position: relative; left: 20px;"> All fields are required.</span>\n\n            <div class="modal-body text-center">\n\n                <div class="row">\n                    <div class="form-group col-md-6">\n                        <input name="firstName" type="text" class="form-control" ng-model="signIn.newUser.firstName"\n                               placeholder="First Name" required>\n                    </div>\n                    <div class="form-group col-md-6">\n                        <input name="lastName" type="text" class="form-control" ng-model="signIn.newUser.lastName"\n                               placeholder="Last Name" required>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <input name="accountName" type="text" class="form-control" ng-model="signIn.newUser.userName"\n                           placeholder="User Name (e.g. dexterpratt)" required>\n                </div>\n                <div class="form-group">\n                    <input name="email" type="email" class="form-control" ng-model="signIn.newUser.emailAddress"\n                           placeholder="Valid Email Address (required for account verification / password recovery)" required>\n                </div>\n                <div class="form-group">\n                    <input name="password" type="password" class="form-control" ng-model="signIn.newUser.password"\n                           placeholder="Password" required>\n                </div>\n                <div class="form-group">\n                    <input name="confirmPassword" type="password" class="form-control"\n                           ng-model="signIn.newUser.passwordConfirm"\n                           placeholder="Confirm Password" required>\n                </div>\n\n                <div class="rowWithTwoLinesTopPadAnd11EmFont">\n                    <input required ng-model="termsAndConditionsChecked" type="checkbox"> &nbsp;\n                    <label>I have read and accept the\n                        <a ng-href="http://home.ndexbio.org/disclaimer-license/" target="_blank">Terms & Conditions</a>\n                    </label>\n                </div>\n\n                <div class=\'text-danger text-left\' style=\'word-wrap:break-word\'>\n                    <strong>\n                        <br>\n                        {{signIn.signUpErrors}}\n                    </strong>\n                </div>\n            </div>\n\n            <div class="modal-footer" style="margin-top: -0.5em">\n                <a class="btn btn-primary" ng-click="back()">Back</a>\n                <a class="btn btn-default" ng-click="cancel()">Cancel</a>\n                <button class="btn btn-primary" type="submit"\n                        ng-click="basicAuthSignUp()"\n                        ng-disabled="!signUpForm.firstName.$valid || !signUpForm.lastName.$valid\n                        || !signUpForm.accountName.$valid  || !signUpForm.email.$valid\n                        || !signUpForm.password.$valid || !signUpForm.confirmPassword.$valid\n                        || !termsAndConditionsChecked || isProcessing">\n                    Sign Up\n                </button>\n            </div>\n\n        </form>\n    </div><\/script> <script type="text/ng-template" id="signUpSuccess.html"><div class="modal-content">\n\n        <div class="modal-header">\n            <h4 class="modal-title">Check Your Email</h4>\n        </div>\n\n        <div class="modal-body">\n            <div>\n                ALMOST DONE!\n                <br>\n                We sent a verification link to the e-mail address you provided.\n                Please check your email and follow the instructions to complete your registration.\n                You must complete your registration within 24 hours.\n                Can\'t find the email? Make sure to check your\n                SPAM folder and add "support@ndexbio.org" to your safe-senders list.\n            </div>\n        </div>\n\n        <div class="modal-footer">\n            <button class="btn btn-default" ng-click="cancel()">Close</button>\n        </div>\n\n    </div><\/script> <script type="text/ng-template" id="createNewAccountViaGoogle.html"><div class="modal-content">\n        <div class="modal-header">\n            <h4 class="modal-title"><span ng-bind-html="title"></span></h4>\n        </div>\n\n        <div class="modal-body">\n\n            <div class="row">\n                <div id="spinnerCreateNewAccountViaGoogleId" style="position:relative; top:5em"></div>\n            </div>\n\n            <div style="font-size: 1.2em" ng-bind-html="message"></div>\n\n            <div class="rowWithTwoLinesTopPadAnd11EmFont text-center">\n                <input required ng-model="termsAndConditionsChecked" type="checkbox"> &nbsp;\n                <label>I have read and accept the\n                    <a ng-href="http://home.ndexbio.org/disclaimer-license/" target="_blank">Terms & Conditions</a>\n                </label>\n            </div>\n\n            <div ng-show="errors" class=\'text-danger text-left\' style=\'word-wrap:break-word\'>\n                <br>\n                <strong><span style="font-size: 1.1em" ng-bind-html="errors"></span></strong>\n                <br>\n            </div>\n\n        </div>\n\n        <div class="modal-footer" style="margin-top: -0.5em">\n            <button class="btn btn-primary"\n                    ng-click="back()"\n                    ng-disabled="isProcessing">\n                Back\n            </button>\n            <button class="btn btn-default"\n                    ng-click="cancel()"\n                    ng-disabled="isProcessing">Cancel</button>\n            <button class="btn btn-primary"\n                    ng-click="signUpWithGoogle()"\n                    ng-disabled="!termsAndConditionsChecked || isProcessing || errors">\n                Sign Up\n            </button>\n\n        </div>\n    </div><\/script>'),a.put("views/upload.html",'<div class="row"> <div class="col-md-2"> <div class="row"> <div class="row"> <ndex-account-image ndex-class="\'col-md-10\'" ndex-src="uploadController.displayedUser.image"> </ndex-account-image> </div> <h4> {{uploadController.displayedUser.firstName}} {{uploadController.displayedUser.lastName}} </h4> <div> <small>{{uploadController.displayedUser.accountName}}</small> </div> <div class="wrapLongLine"> <a href="{{uploadController.displayedUser.website}}" target="_blank"> {{uploadController.displayedUser.website}} </a> </div> <div class="wrapLongLine" ng-bind-html="uploadController.displayedUser.description"></div> <div class="rowWithOneLineTopPad"><strong>Disk Space Used: </strong> <span ng-if="!diskSpaceInfo.diskQuotaUnlimited">{{diskSpaceInfo.diskPercentageUsed}}%</span> <span ng-if="diskSpaceInfo.diskUsed>0"> <br> ( {{diskSpaceInfo.diskUsedString}} ) </span> </div> <div class="progress progress-striped" ng-if="diskSpaceInfo.diskUsed > 0"> <div ng-class="diskSpaceInfo.diskPercentageUsedClass" ng-style="diskSpaceInfo.diskPercentageUsedStyle"></div> </div> <hr> <h3><strong>Select files</strong></h3> <input type="file" class="btn btn-success btn-xs" nv-file-select uploader="uploader" ng-style="{\'width\':\'189px\', \'text-align\':\'left\'}" multiple="multiple"> <h3>How It Works:</h3> <p>Currently, the NDEx UI only allows to load networks in CX format.</p> <p>Networks in other formats can be loaded using Cytoscape and the CyNDEx App. For more info, please check <a href="http://www.home.ndexbio.org/ndex-cyapp-tutorial-alt/" target="_blank">THIS TUTORIAL</a>.</p> <p>Each uploaded file is assigned a network loading task, displayed at the bottom of this page.</p> <p>The status of each file will update as NDEx processes it.</p> </div> </div> <div class="col-md-10"> <h3>List of Files to Upload</h3> <div ng-show="uploadController.hasSizeLimit">Files in list limited to {{config.uploadSizeLimit}} MB total.</div> <div style="color:red" ng-show="uploadController.fileSizeError">Sorry. You may not upload a file that makes the list larger than {{uploadController.uploadSizeLimit}} MB.</div> <p style="color:red" ng-show="uploadController.fileExtensionError">Sorry. Only CX networks (.cx file extension) are allowed for upload.</p> <table class="table"> <thead> <tr> <th width="50%">Name</th> <th ng-show="uploader.isHTML5">Size</th> <th ng-show="uploader.isHTML5">Progress</th> <th>Status</th> <th>Actions</th> </tr> </thead> <tbody> <tr ng-repeat="item in uploader.queue"> <td><strong>{{ item.file.name }}</strong></td> <td ng-show="uploader.isHTML5" nowrap="nowrap">{{ item.file.size/1024/1024|number:2 }} MB</td> <td ng-show="uploader.isHTML5"> <div class="progress" style="margin-bottom: 0"> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div> </div> </td> <td class="text-center"> <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span> </td> <td nowrap="nowrap"> <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess"> <span class="glyphicon glyphicon-upload"></span> Upload </button> <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading"> <span class="glyphicon glyphicon-ban-circle"></span> Cancel </button> <button type="button" class="btn btn-danger btn-xs" ng-click="removeItemFromQueue(item)"> <span class="glyphicon glyphicon-trash"></span> Clear </button> </td> </tr> </tbody> </table> <div> <div> Queue progress: <div class="progress" style=""> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }"></div> </div> </div> <button type="button" class="btn btn-success btn-s" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length"> <span class="glyphicon glyphicon-upload"></span> Upload all </button> <button type="button" class="btn btn-warning btn-s" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading"> <span class="glyphicon glyphicon-ban-circle"></span> Cancel all </button> <button type="button" class="btn btn-danger btn-s" ng-click="removeAllFromQueue(uploader)" ng-disabled="!uploader.queue.length"> <span class="glyphicon glyphicon-trash"></span> Clear all </button> </div> </div> \x3c!--\n    <div class="col-md-9 pull-right" style="margin-bottom: 40px">\n\n        <h3>My Network Loading Tasks on NDEx</h3>\n        <button type="button" class="btn btn-success btn-xs"\n                ng-click="refreshTasks()">\n            Update\n        </button>\n        <button type="button" class="btn btn-success btn-xs"\n                ng-click="deleteAllTasks()">\n            Delete All\n        </button>\n        <table class="table">\n            <thead>\n            <tr>\n                <th>Status</th>\n                <th>Description</th>\n                <th>Actions</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="task in tasks">\n                <td class="text-center">\n                    {{task.status}}\n                </td>\n                <td>{{task.description}}</td>\n                <td nowrap>\n                    <button type="button" class="btn btn-danger btn-xs"\n                            ng-click="deleteTask(task.externalId)">\n                        <span class="glyphicon glyphicon-trash"></span>\n                    </button>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n\n    </div>\n    --\x3e </div>'),a.put("views/user.html",'<div id="divUser" class="row"> <div class="col-md-2"> <div class="row"> <div class="row"> <ndex-account-image ndex-class="\'col-md-10\'" ndex-src="userController.displayedUser.image"> </ndex-account-image> </div> <h4 class="wrapLongLine"> {{userController.displayedUser.firstName}} {{userController.displayedUser.lastName}} </h4> <div class="wrapLongLine"> {{userController.displayedUser.userName}} </div> <div class="wrapLongLine"> <a href="{{userController.displayedUser.website}}" target="_blank">{{userController.displayedUser.website}}</a> </div> <div class="wrapLongLine" ng-bind-html="userController.displayedUser.description"></div> <span class="btn-group btn-group-vertical buttonWithMarginBottom" ng-show="userController.isLoggedInUser && userController.networkTableRowsSelected > 0"> <hr> <h5><strong>Bulk Actions:</strong></h5> <show-network-sets-modal controller-name="userController" my-account-controller="userController" my-class="btn btn-primary customButtonWidth"> </show-network-sets-modal> <bulk-create-request-network ndex-data="userController" privileges="None" my-class="{{enableUpgradePermissionButton ?\n                                \'btn btn-primary customButtonWidth\' : \'btn btn-primary customButtonWidth disabled\'}}" title="{{enableUpgradePermissionButton ? \'Request Read or Edit Privilege\' : \'\'}}"> </bulk-create-request-network> </span> </div> </div> \x3c!-- tabs --\x3e <div id="divUserTabs" class="col-md-10" ng-show="userController.displayedUser"> <tabset justified="false"> <tab heading="Networks" ng-click="networkGridApi.core.handleWindowResize()"> \x3c!-- adding ui-grid-auto-resize fixes the issue of distorted Networks Tab (NDEX-578).\n                 Resolution is described here: http://ui-grid.info/docs/#/tutorial/108_hidden_grids\n                 The use ng-if="tabShown" ... described on the page above introduces another issue:\n                 the selected rows on the Networks page get unselected if you select a different tab (i.e., Groups)\n                 and come back to Networks tab. --\x3e <div ng-show="showNetworkTable()"> <div id="userNetworksGridId" ui-grid-selection ui-grid="networkGridOptions" ui-grid-resize-columns ui-grid-auto-resize class="networkGrid"> </div> </div> <div class="row" ng-hide="showNetworkTable()"> <br> <p class="text-center text-muted">No Networks or Network Sets to display</p> </div> </tab> <tab heading="Groups" ng-show="userController.isLoggedInUser"> <div id="divGroups"> <div class="row center-block"> <hr> <form class="form-inline col-md-6" role="form" ng-submit="userController.submitGroupSearch()"> <div class="form-group"> <div class="input-group input-group-sm"> <input type="text" class="form-control input-sm" placeholder="Search groups this account is in" ng-model="userController.groupSearchString"> <div class="input-group-btn"><button type="submit" class="btn btn-default"> <span class="glyphicon glyphicon-search"></span></button> </div> </div> </div> </form> <div class="offset-col-md-2 col-md-2"> <div class="checkbox"><label> <input type="checkbox" ng-click="userController.adminCheckBoxClicked()" ng-model="userController.groupSearchAdmin">Admin</label> </div> </div> <div class="col-md-2"> <div class="checkbox"><label> <input type="checkbox" ng-click="userController.memberCheckBoxClicked()" ng-model="userController.groupSearchMember">Member</label> </div> </div> </div> <div ng-show="userController.groupSearchResults.length > 0"> <ul ng-repeat="group in userController.groupSearchResults"> <div class="row"> <ndex-navigation ndex-class="" ndex-url="\'group/\'+group.externalId"> <ndex-account-image ndex-class="\'col-xs-2 col-sm-2 col-md-2 col-lg-2\'" ndex-src="group.image"> </ndex-account-image> <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10"> <h5 style="color:#428BCA"><strong>{{group.groupName}}</strong></h5> <div class="wrapLongLine, text-muted"> <p>{{group.website}}</p> </div> <div class="wrapLongLine, text-muted"> <p> {{stripHTML(group.description) | limitTo:30}} {{stripHTML(group.description).length > 30 ? \'...\' : \'\'}} </p> </div> </div> </ndex-navigation> </div> </ul> </div> <div class="row" ng-hide="userController.groupSearchResults.length > 0"> <br> <p class="text-center text-muted">No groups to display</p> </div> </div> </tab> </tabset> </div> </div>')}]);